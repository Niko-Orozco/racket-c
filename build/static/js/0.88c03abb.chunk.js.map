{"version":3,"sources":["../node_modules/monaco-editor/esm/vs/editor/editor.api.js","../node_modules/react-monaco-editor/lib/utils.js","../node_modules/react-monaco-editor/lib/editor.js","../node_modules/monaco-editor/esm/vs/editor/common/standalone/promise-polyfill/polyfill.js","../node_modules/react-monaco-editor/lib/diff.js","../node_modules/monaco-editor/esm/vs/editor/common/standalone/standaloneEnums.js","../node_modules/monaco-editor/esm/vs/editor/common/standalone/standaloneBase.js","../node_modules/monaco-editor/esm/vs/platform/editor/common/editor.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/openerService.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffNavigator.js","../node_modules/monaco-editor/esm/vs/base/common/worker/simpleWorker.js","../node_modules/monaco-editor/esm/vs/base/worker/defaultWorkerFactory.js","../node_modules/monaco-editor/esm/vs/editor/common/diff/diffComputer.js","../node_modules/monaco-editor/esm/vs/editor/common/model/mirrorTextModel.js","../node_modules/monaco-editor/esm/vs/editor/common/modes/linkComputer.js","../node_modules/monaco-editor/esm/vs/editor/common/modes/supports/inplaceReplaceSupport.js","../node_modules/monaco-editor/esm/vs/editor/common/services/editorSimpleWorker.js","../node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerServiceImpl.js","../node_modules/monaco-editor/esm/vs/editor/common/services/webWorker.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/monarch/monarchCommon.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/monarch/monarchLexer.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/colorizer.js","../node_modules/monaco-editor/esm/vs/platform/configuration/common/configurationModels.js","../node_modules/monaco-editor/esm/vs/platform/keybinding/common/abstractKeybindingService.js","../node_modules/monaco-editor/esm/vs/platform/keybinding/common/keybindingResolver.js","../node_modules/monaco-editor/esm/vs/platform/keybinding/common/resolvedKeybindingItem.js","../node_modules/monaco-editor/esm/vs/platform/keybinding/common/baseResolvedKeybinding.js","../node_modules/monaco-editor/esm/vs/platform/keybinding/common/usLayoutResolvedKeybinding.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/simpleServices.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffReview.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/inlineDiffMargin.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeEditor.js","../node_modules/monaco-editor/esm/vs/editor/common/modes/abstractMode.js","../node_modules/monaco-editor/esm/vs/base/common/mime.js","../node_modules/monaco-editor/esm/vs/editor/common/services/languagesRegistry.js","../node_modules/monaco-editor/esm/vs/editor/common/services/modeServiceImpl.js","../node_modules/monaco-editor/esm/vs/editor/common/services/modelServiceImpl.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/abstractCodeEditorService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/codeEditorServiceImpl.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeServiceImpl.js","../node_modules/monaco-editor/esm/vs/editor/common/modes/supports/tokenization.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/themes.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneThemeServiceImpl.js","../node_modules/monaco-editor/esm/vs/platform/contextkey/browser/contextKeyService.js","../node_modules/monaco-editor/esm/vs/platform/contextview/browser/contextMenuHandler.js","../node_modules/monaco-editor/esm/vs/platform/contextview/browser/contextMenuService.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/contextview/contextview.js","../node_modules/monaco-editor/esm/vs/platform/layout/browser/layoutService.js","../node_modules/monaco-editor/esm/vs/platform/contextview/browser/contextViewService.js","../node_modules/monaco-editor/esm/vs/platform/dialogs/common/dialogs.js","../node_modules/monaco-editor/esm/vs/platform/instantiation/common/graph.js","../node_modules/monaco-editor/esm/vs/platform/markers/common/markerService.js","../node_modules/monaco-editor/esm/vs/platform/instantiation/common/instantiationService.js","../node_modules/monaco-editor/esm/vs/platform/actions/common/menuService.js","../node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorationsServiceImpl.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneServices.js","../node_modules/monaco-editor/esm/vs/platform/accessibility/common/accessibilityService.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneEditor.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/monarch/monarchCompile.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneLanguages.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/editor.api.js?f33e","../node_modules/react-monaco-editor/lib/index.js"],"names":["paths","self","getWorkerUrl","moduleId","label","pathPrefix","__webpack_public_path__","result","replace","test","currentUrl","String","window","location","currentOrigin","substr","length","hash","search","pathname","substring","encodeURIComponent","require","module","exports","Object","defineProperty","value","processSize","size","concat","noop","monaco","obj","__esModule","_typeof","cache","_getRequireWildcardCache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_interopRequireWildcard","_propTypes","_interopRequireDefault","_react","_utils","WeakMap","Symbol","iterator","constructor","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_defineProperties","target","props","i","descriptor","configurable","writable","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","e","_getPrototypeOf","getPrototypeOf","_defineProperty","MonacoEditor","_React$Component","subClass","superClass","TypeError","create","_inherits","Derived","Constructor","protoProps","staticProps","_super","Super","NewTarget","this","arguments","_this","instance","_classCallCheck","component","containerElement","undefined","initMonaco","prevProps","_this$props","language","theme","height","options","width","editor","model","getModel","getValue","__prevent_trigger_change_event","pushUndoStop","pushEditOperations","range","getFullModelRange","text","setModelLanguage","setTheme","layout","updateOptions","destroyMonaco","dispose","_subscription","defaultValue","_this$props2","overrideServices","assign","editorWillMount","source","forEach","getOwnPropertyDescriptors","defineProperties","_objectSpread","editorDidMount","_this2","onDidChangeModelContent","event","onChange","_this$props3","style","createElement","ref","assignRef","className","Component","propTypes","oneOfType","string","number","func","defaultProps","_default","finallyConstructor","callback","then","resolve","reason","reject","setTimeoutFunc","setTimeout","Promise","fn","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","cb","onFulfilled","onRejected","ret","promise","newValue","finale","thisArg","_unhandledRejectionFn","len","Handler","done","ex","prom","all","arr","args","Array","slice","remaining","res","val","race","values","setImmediate","err","console","warn","globalNS","global","Error","factory","MonacoDiffEditor","_this$editor$getModel","original","modified","setValue","modifiedEditor","onDidChangeContent","originalModel","createModel","modifiedModel","setModel","createDiffEditor","initModels","_this$editor$getModel2","AccessibilitySupport","CompletionItemInsertTextRule","CompletionItemKind","CompletionItemTag","CompletionTriggerKind","ContentWidgetPositionPreference","CursorChangeReason","DefaultEndOfLine","DocumentHighlightKind","EditorAutoIndentStrategy","EditorOption","EndOfLinePreference","EndOfLineSequence","IndentAction","KeyCode","MarkerSeverity","MarkerTag","MinimapPosition","MouseTargetType","OverlayWidgetPositionPreference","OverviewRulerLane","RenderLineNumbersType","RenderMinimap","ScrollType","ScrollbarVisibility","SelectionDirection","SignatureHelpTriggerKind","SymbolKind","SymbolTag","TextEditorCursorBlinkingStyle","TextEditorCursorStyle","TrackedRangeStickiness","WrappingIndent","KeyMod","chord","firstPart","secondPart","KeyChord","CtrlCmd","Shift","Alt","WinCtrl","createMonacoBaseAPI","languages","CancellationTokenSource","Emitter","standaloneEnums","Position","Range","Selection","Uri","URI","Token","EditorOpenContext","__decorate","decorators","d","c","r","decorate","__param","paramIndex","decorator","__awaiter","_arguments","P","generator","fulfilled","step","next","rejected","__generator","body","f","y","t","g","_","sent","trys","ops","verb","n","v","op","pop","__spreadArrays","s","il","k","a","j","jl","CommandOpener","_commandService","open","_a","_b","matchesScheme","Schemas","command","parse","CommandsRegistry","getCommand","path","decodeURIComponent","query","_c","_d","isArray","executeCommand","ICommandService","EditorOpener","_editorService","selection","match","exec","fragment","startLineNumber","parseInt","startColumn","with","scheme","file","normalizePath","openCodeEditor","resource","context","fromUserGesture","USER","API","getFocusedCodeEditor","openToSide","ICodeEditorService","OpenerService","editorService","commandService","_openers","LinkedList","_validators","_resolvers","_externalOpener","openExternal","href","dom","mailto","http","https","_doOpenExternal","_i","toArray","shouldOpen","resolveExternalUri","resolved","uri","encodeURI","clear","__extends","extendStatics","b","__","defaultOptions","followsCaret","ignoreCharChanges","alwaysRevealFirst","DiffNavigator","_onDidUpdate","_register","_editor","_options","objects","disposed","nextIdx","ranges","ignoreSelectionChange","revealFirst","Boolean","onDidDispose","onDidUpdateDiff","_onDiffUpdated","getModifiedEditor","onDidChangeCursorPosition","onDidChangeModel","_init","getLineChanges","_compute","lineChanges","lineChange","charChanges","charChange","rhs","modifiedStartLineNumber","modifiedStartColumn","modifiedEndLineNumber","modifiedEndColumn","sort","left","right","getStartPosition","isBeforeOrEqual","fire","_initIdx","fwd","found","position","getPosition","_move","scrollType","assert","canNavigate","info","pos","setPosition","revealPositionInCenter","previous","Disposable","webWorkerWarningLogged","logOnceWebWorkerWarning","isWeb","message","SimpleWorkerProtocol","handler","_workerId","_handler","_lastSentReq","_pendingReplies","setWorkerId","workerId","sendMessage","method","req","_send","vsWorker","handleMessage","_handleMessage","msg","seq","replyMessage","reply","$isError","name","stack","requestMessage","detail","transformErrorForSerialization","transfer","m","ArrayBuffer","SimpleWorkerClient","workerFactory","host","lazyProxyReject","_worker","_protocol","postMessage","getId","loaderConfiguration","getConfig","requirejs","contexts","config","hostMethods","types","_onModuleLoaded","JSON","stringify","proxyMethodRequest","_request","_lazyProxy","availableMethods","_onError","getProxyObject","error","SimpleWorkerServer","requestHandlerFactory","_requestHandlerFactory","_requestHandler","onmessage","initialize","loaderConfig","hostProxy","baseUrl","vs","catchError","WebWorker","id","onMessageCallback","onErrorCallback","workerOrPromise","globals","MonacoEnvironment","getWorker","Worker","worker","w","ev","data","onmessageerror","addEventListener","terminate","DefaultWorkerFactory","_label","_webWorkerFailedBeforeError","LAST_WORKER_ID","computeDiff","originalSequence","modifiedSequence","continueProcessingPredicate","pretty","LcsDiff","ComputeDiff","LineSequence","lines","startColumns","endColumns","length_1","getFirstNonBlankColumn","getLastNonBlankColumn","_startColumns","_endColumns","getElements","elements","getStartLineNumber","getEndLineNumber","createCharSequence","shouldIgnoreTrimWhitespace","startIndex","endIndex","charCodes","lineNumbers","columns","index","lineContent","endColumn","col","charCodeAt","CharSequence","_charCodes","_lineNumbers","_columns","getStartColumn","getEndColumn","CharChange","originalStartLineNumber","originalStartColumn","originalEndLineNumber","originalEndColumn","createFromDiffChange","diffChange","originalCharSequence","modifiedCharSequence","originalLength","originalStart","modifiedLength","modifiedStart","LineChange","createFromDiffResult","originalLineSequence","modifiedLineSequence","continueCharDiff","shouldComputeCharChanges","shouldPostProcessCharChanges","rawChanges","changes","prevChange","currChange","originalMatchingLength","modifiedMatchingLength","Math","min","postProcessCharChanges","length_2","DiffComputer","originalLines","modifiedLines","opts","shouldMakePrettyDiff","continueLineDiff","createContinueProcessingPredicate","maxComputationTime","quitEarly","diffResult","length_3","originalLineIndex","modifiedLineIndex","nextChange","originalStop","modifiedStop","originalLine","modifiedLine","_pushTrimWhitespaceCharChange","originalMaxColumn","modifiedMaxColumn","originalLineNumber","modifiedLineNumber","_mergeTrimWhitespaceCharChange","txt","strings","maximumRuntime","startTime","now","MirrorTextModel","eol","versionId","_uri","_lines","_eol","_versionId","_lineStarts","getText","join","onEvents","changes_1","change","_acceptDeleteRange","_acceptInsertText","_ensureLineStarts","eolLength","linesLength","lineStartValues","Uint32Array","PrefixSumComputer","_setLineText","lineIndex","changeValue","endLineNumber","splice","removeValues","insertText","insertLines","split","lineNumber","column","newLengths","insertValues","Uint8Matrix","rows","cols","Uint8Array","_data","row","StateMachine","edges","maxCharCode","maxState","from","chCode","to","states","_states","_maxCharCode","nextState","currentState","_stateMachine","_classifier","LinkComputer","_createLink","classifier","line","linkBeginIndex","linkEndIndex","lastIncludedCharIndex","charCodeBeforeLink","lastCharCodeInLink","url","computeLinks","stateMachine","CharacterClassifier","getClassifier","lineCount","getLineCount","getLineContent","linkBeginChCode","state","hasOpenParens","hasOpenSquareBracket","hasOpenCurlyBracket","resetStateMachine","chClass","BasicInplaceReplace","_defaultValueSet","navigateValueSet","range1","text1","range2","text2","up","doNavigateValueSet","numberResult","numberReplace","textReplace","precision","pow","lastIndexOf","n1","Number","n2","parseFloat","isNaN","floor","valueSetsReplace","valueSets","valueSetReplace","valueSet","idx","indexOf","INSTANCE","MirrorModel","getLinesContent","getWordAtPosition","wordDefinition","wordAtText","getWordAtText","ensureValidWordDefinition","createWordIterator","lineText","wordRangesIdx","wordRanges","start","end","FIN","_wordenize","getLineWords","content","words","ranges_1","word","lastIndex","getValueInRange","_validateRange","lineEnding","startLineIndex","endLineIndex","resultLines","offsetAt","_validatePosition","getAccumulatedValue","positionAt","offset","max","out","getIndexOf","lineLength","remainder","isIPosition","hasChanged","maxCharacter","BaseMirrorModel","EditorSimpleWorker","foreignModuleFactory","_host","_models","_foreignModuleFactory","_foreignModule","_getModel","_getModels","acceptNewModel","EOL","acceptModelChanged","strURL","acceptRemovedModel","originalUrl","modifiedUrl","ignoreTrimWhitespace","diffComputer","identical","_modelsAreIdentical","originalLineCount","computeMoreMinimalEdits","modelUrl","edits","lastEol","edits_1","editOffset","newEdit","mergeSort","compareRangesUsingStarts","isEmpty","_diffLimit","stringDiff","lift","textualSuggest","wordDef","wordDefFlags","seen","wordDefRegExp","wordAt","iter","Set","RegExp","add","_suggestionsLimit","computeWordRanges","words_1","array","selectionText","wordRange","loadForeignModule","createData","foreignHostMethods","ctx","fhr","getMirrorModels","fmr","importScripts","canSyncModel","modelService","isTooLargeForSyncing","EditorWorkerServiceImpl","configurationService","logService","_modelService","_workerManager","WorkerManager","_logService","modes","register","provideLinks","token","withWorker","client","links","WordBasedCompletionItemProvider","canComputeDiff","isNonEmptyArray","sw_1","StopWatch","finally","trace","elapsed","canNavigateValueSet","canComputeWordRanges","IModelService","ITextResourceConfigurationService","ILogService","workerManager","_debugDisplayName","_configurationService","provideCompletionItems","insert","wordBasedSuggestions","fromPositions","setEndPosition","suggestions","map","kind","_editorWorkerClient","_lastWorkerUsedTime","getTime","IntervalTimer","cancelAndSet","_checkStopIdleWorker","round","STOP_WORKER_DELTA_TIME_MS","onModelRemoved","_checkStopEmptyWorker","getModels","EditorWorkerClient","EditorModelManager","proxy","keepIdleModels","_syncedModels","_syncedModelsLastUsedTime","_proxy","timer","_checkStopModelSync","STOP_SYNC_MODEL_DELTA_TIME_MS","ensureSyncedResources","resources","resources_1","resourceStr","_beginModelSync","currentTime","toRemove","toRemove_1","_stopModelSync","getEOL","getVersionId","toDispose","DisposableStore","onWillDispose","toDisposable","SynchronousWorkerClient","_instance","_proxyObj","EditorWorkerHost","workerClient","_workerClient","_keepIdleModels","_workerFactory","_modelManager","_getOrCreateWorker","_getProxy","_getOrCreateModelManager","_withSyncedResources","LanguageConfigurationRegistry","getWordDefinition","getLanguageIdentifier","regExpFlags","MonacoWebWorkerImpl","_foreignModuleId","_foreignModuleCreateData","_foreignModuleHost","_foreignProxy","_getForeignProxy","foreignMethods","createProxyMethod","foreignProxy","foreignMethods_1","foreignMethod","getProxy","withSyncedResources","isFuzzyAction","what","isFuzzyActionArr","isString","isIAction","empty","fixCase","lexer","str","ignoreCase","toLowerCase","sanitize","createError","languageId","substituteMatches","matches","stateMatches","full","sub","dollar","attr","ofs","total","unshift","findRules","inState","rules","tokenizer","MonarchStackElementFactory","maxCacheDepth","_maxCacheDepth","_entries","parent","_INSTANCE","depth","MonarchStackElement","stackElementId","getStackElementId","element","_equals","equals","other","popall","switchTo","EmbeddedModeData","modeId","clone","MonarchLineStateFactory","embeddedModeData","MonarchLineState","MonarchClassicTokensCollector","_tokens","_language","_lastTokenType","_lastTokenLanguage","enterMode","startOffset","emit","type","nestedModeTokenize","embeddedModeLine","offsetDelta","nestedModeId","embeddedModeState","nestedModeTokenizationSupport","nestedResult","tokenize","tokens","endState","finalize","TokenizationResult","MonarchModernTokensCollector","modeService","_modeService","_theme","_prependTokens","_currentLanguageId","_lastTokenMetadata","metadata","_merge","aLen","bLen","cLen","tokenize2","TokenizationResult2","MonarchTokenizer","standaloneThemeService","_standaloneThemeService","_modeId","_lexer","_embeddedModes","embeddedLoaded","emitting","_tokenizationRegistryListener","onDidChange","isOneOfMyEmbeddedModes","changedLanguages","getLoadStatus","promises","tokenizationSupport","nestedModeStatus","loaded","tokenizationSupportPromise","getPromise","getInitialState","rootState","lineState","tokensCollector","endLineState","_tokenize","getTheme","tokenTheme","collector","_nestedTokenize","_myTokenize","_findLeavingNestedModeOffset","monarchCommon","popOffset","hasEmbeddedPopRule","rules_1","rule","action","nextEmbedded","regex","regexSource","matchOnlyAtLineStart","nestedEndState","nestedModeLine","restOfTheLine","_safeRuleName","groupMatching","forceEvaluation","pos0","stackLen0","groupLen0","groups","matched","enteringEmbeddedMode","groupEntry","shift","restOfLine","rules_2","rule_1","charAt","defaultToken","group","tokenSubst","goBack","transform","maxStack","log","totalLen","tokenType","rest","bracket","findBracket","tokenPostfix","enteringEmbeddedModeId","getModeIdForLanguageName","embeddedModeData_1","_getNestedEmbeddedModeData","mimetypeOrModeId","_locateMode","NULL_MODE_ID","NULL_STATE","isRegisteredMode","getModeId","triggerMode","brackets_1","brackets","bracketType","close","Colorizer","colorizeElement","themeService","domNode","mimeType","getAttribute","firstChild","nodeValue","colorize","innerHTML","tabSize","_fakeColorize","TokenizationRegistry","_colorize","listener","timeout","execute","TimeoutTimer","colorizeLine","mightContainNonBasicASCII","mightContainRTL","isBasicASCII","ViewLineRenderingData","containsRTL","renderViewLine","RenderLineInput","html","colorizeModelLine","forceTokenization","inflatedTokens","getLineTokens","inflate","tokenizeResult","LineTokens","convertToEndOffset","lineTokens","renderResult","_actualColorize","status_1","ConfigurationModel","_contents","_keys","_overrides","isFrozen","checkAndFreeze","section","getConfigurationValue","contents","getOverrideValue","overrideIdentifier","overrideContents","getContentsForOverrideIdentifer","override","identifier","arrays","contentsForKey","overrideContentsForKey","mergeContents","overrides","merge","others","others_1","_loop_1","otherOverride","identifiers","this_1","_e","freeze","toJSON","addKey","addToValueTree","removeValue","removeKey","removeFromValueTree","DefaultConfigurationModel","getDefaultValues","getConfigurationKeys","OVERRIDE_PROPERTY_PATTERN","overrideIdentifierFromKey","trim","toValuesTree","Configuration","_defaultConfiguration","_localUserConfiguration","_remoteUserConfiguration","_workspaceConfiguration","_folderConfigurations","_memoryConfiguration","_memoryConfigurationByResource","_freeze","ResourceMap","_workspaceConsolidatedConfiguration","_foldersConsolidatedConfigurations","_userConfiguration","workspace","getConsolidateConfigurationModel","updateValue","memoryConfiguration","inspect","consolidateConfigurationModel","folderConfigurationModel","getFolderConfigurationModelForResource","memoryConfigurationModel","userValue","userConfiguration","userLocalValue","localUserConfiguration","userRemoteValue","remoteUserConfiguration","workspaceValue","workspaceFolderValue","memoryValue","overrideIdentifiers","default","user","userLocal","userRemote","workspaceFolder","memory","configurationModel","getConsolidatedConfigurationModelForResource","consolidateConfiguration","getWorkspaceConsolidatedConfiguration","root","getFolder","getFolderConsolidatedConfiguration","memoryConfigurationForResource","folder","folderConsolidatedConfiguration","workspaceConsolidateConfiguration","folderConfiguration","AbstractKeybindingService","_contextKeyService","_telemetryService","_notificationService","_onDidUpdateKeybindings","_currentChord","_currentChordChecker","_currentChordStatusMessage","Event","None","getKeybindings","_getResolver","lookupKeybinding","commandId","lookupPrimaryKeybinding","resolvedKeybinding","softDispatch","keybinding","resolveKeyboardEvent","isChord","getDispatchParts","contextValue","getContext","currentChord","keypress","_enterChordMode","keypressLabel","status","nls","chordEnterTime","_documentHasFocus","_leaveChordMode","cancel","_dispatch","_doDispatch","shouldPreventDefault","getLabel","resolveResult","enterChord","hideAfter","bubble","commandArgs","publicLog2","mightProducePrintableCharacter","ctrlKey","metaKey","keyCode","KeybindingResolver","defaultKeybindings","_defaultKeybindings","_defaultBoundCommands","Map","_map","_lookupMap","_keybindings","combine","keypressParts","_addKeyPress","_isTargetedForRemoval","defaultKb","keypressFirstPart","keypressChordPart","when","defaults","rawOverrides","rawOverrides_1","item","conflicts","_addToLookupMap","conflict","conflictIsChord","itemIsChord","whenIsEntirelyIncluded","_removeFromLookupMap","_implies","q","terminals","node","ContextKeyOrExpr","expr","negate","notA","items","lookupMap","candidates","candidate","_findCommand","contextMatchesRules","evaluate","ResolvedKeybindingItem","isDefault","removeElementsAfterNulls","BaseResolvedKeybinding","os","parts","illegalArgument","_os","_parts","UILabelProvider","toLabel","_getLabel","getAriaLabel","AriaLabelProvider","_getAriaLabel","getParts","_getPart","ResolvedKeybindingPart","shiftKey","altKey","_getDispatchPart","ResolvedKeybinding","USLayoutResolvedKeybinding","actual","_keyCodeToUILabel","KeyCodeUtils","isDuplicateModifierCase","getDispatchStr","isModifierKey","SimpleModel","_onDispose","SimpleEditorModelResolverService","setEditor","createModelReference","widget","codeEditorCallback","diffEditorCallback","findModel","diffEditor","getOriginalEditor","isCodeEditor","ImmortalReference","SimpleEditorProgressService","show","NULL_PROGRESS_RUNNER","showWhile","delay","worked","SimpleDialogService","SimpleNotificationService","notify","severity","Severity","Info","Warning","notification","NO_OP","NoOpNotification","StandaloneCommandService","instantiationService","_onWillExecuteCommand","_onDidExecuteCommand","_instantiationService","_dynamicCommands","addCommand","invokeFunction","StandaloneKeybindingService","contextKeyService","telemetryService","notificationService","_cachedResolver","_dynamicKeybindings","KEY_DOWN","keyEvent","StandardKeyboardEvent","preventDefault","stopPropagation","addDynamicKeybinding","_keybinding","createKeybinding","OS","weight1","weight2","updateResolver","_toNormalizedKeybindingItems","KeybindingsRegistry","getDefaultKeybindings","document","hasFocus","resultLen","items_1","resolvedKeybindings_1","resolveKeybinding","keyboardEvent","SimpleKeybinding","toChord","isConfigurationOverrides","thing","SimpleConfigurationService","_onDidChangeConfiguration","onDidChangeConfiguration","_configuration","configuration","arg1","arg2","arg3","arg4","SimpleResourceConfigurationService","affectedKeys","affectsConfiguration","Pos","SimpleResourcePropertiesService","isLinux","isMacintosh","IConfigurationService","StandaloneTelemetryService","publicLog","eventName","SimpleWorkspaceContextService","SCHEME","authority","folders","WorkspaceFolder","getWorkspace","getWorkspaceFolder","applyConfigurationValues","isDiffEditor","isEditorConfigurationKey","isDiffEditorConfigurationKey","SimpleBulkEditService","hasPreviewHandler","workspaceEdit","edit","WorkspaceTextEdit","is","totalEdits","totalFiles","pushStackElement","EditOperation","replaceMove","ariaSummary","SimpleServicesNLS","bulkEditServiceSummary","SimpleUriLabelService","getUriLabel","fsPath","SimpleLayoutService","_container","onLayout","DiffEntry","originalLineStart","originalLineEnd","modifiedLineStart","modifiedLineEnd","getType","Diff","entries","DiffReview","_width","_diffEditor","_isVisible","shadow","createFastDomNode","setClassName","actionBarContainer","_actionBar","ActionBar","Action","hide","icon","_content","scrollbar","DomScrollableElement","appendChild","getDomNode","_diffs","_render","onDidFocusEditorWidget","_goToRow","_getNextRow","_getPrevRow","accept","_currentDiff","prev","currentIndex","_findDiffIndex","doLayout","jumpToLineNumber","current","_getCurrentFocusedRow","revealPosition","focus","previousElementSibling","_getFirstRow","nextElementSibling","querySelector","activeElement","tabIndex","scanDomNode","isVisible","top","setTop","setWidth","setHeight","setAttribute","setDisplay","_mergeAdjacent","modifiedLineCount","diffs","diffsLength","originalEnd","modifiedEnd","r_1","rLength_1","originalEqualAbove","modifiedEqualAbove","minOriginal","minModified","prevLineChange","fromOriginal","fromModified","delta","originalEqualBelow","modifiedEqualBelow","maxOriginal","maxModified","nextLineChange","toOriginal","toModified","curr","rLength","thisDiff","currLast","thisFirst","diff","originalOptions","getOptions","modifiedOptions","originalModelOpts","modifiedModelOpts","diffIndex","container","applyFontInfoSlow","minOriginalLine","maxOriginalLine","minModifiedLine","maxModifiedLine","diffEntry","header","cell","originalChangedLinesCnt","modifiedChangedLinesCnt","createTextNode","getAriaLines","originalChangedLinesCntAria","modifiedChangedLinesCntAria","comment","modLine","_renderSection","dest","rowClassName","lineNumbersExtraClassName","spacerClassName","cnt","originalLayoutInfo","originalLineNumbersWidth","glyphMarginWidth","lineNumbersWidth","modifiedLayoutInfo","modifiedLineNumbersWidth","minWidth","paddingRight","spacer","insertAdjacentHTML","_renderLine","ariaLabel","fontInfo","isMonospace","canUseHalfwidthRightwardsArrow","spaceWidth","middotWidth","EditorFontLigatures","OFF","registerThemingParticipant","getColor","editorLineNumbers","addRule","scrollbarShadow","DiffReviewNext","alias","precondition","ContextKeyExpr","kbOpts","kbExpr","primary","weight","run","accessor","findFocusedDiffEditor","diffReviewNext","EditorAction","DiffReviewPrev","diffReviewPrev","diffEditors","listDiffEditors","hasWidgetFocus","registerEditorAction","InlineDiffMargin","_viewZoneId","_marginDomNode","_contextMenuService","_clipboardService","_visibility","zIndex","_diffActions","lineHeight","getOption","lineFeed","visibility","actions","writeText","originalContent","currentLineNumberOffset","copyLineAction","getLineMaxColumn","executeEdits","showContextMenu","x","getAnchor","getActions","autoSelectFirstItem","pad","posx","onMouseMove","viewZoneId","_updateLightBulbPosition","browserEvent","onMouseDown","rightButton","posy","marginDomNode","lineNumberOffset","newTop","VisualEditorState","_zones","inlineDiffMargins","_zonesMap","_decorations","getForeignViewZones","allViewZones","z","clean","changeViewZones","viewChangeAccessor","removeZone","deltaDecorations","overviewRuler","newDecorations","restoreScrollState","scrollState","StableEditorScrollState","capture","length_4","zones","viewZone","suppressMouseDown","zoneId","addZone","restore","decorations","setZones","overviewZones","DIFF_EDITOR_ID","DiffEditorWidget","domElement","clipboardService","editorWorkerService","codeEditorService","contextMenuService","_editorProgressService","_onDidDispose","_onDidUpdateDiff","_lastOriginalWarning","_lastModifiedWarning","_editorWorkerService","_codeEditorService","createScoped","createKey","_themeService","_updatingDiffProgress","_domElement","_renderSideBySide","renderSideBySide","_maxComputationTime","_ignoreTrimWhitespace","_renderIndicators","renderIndicators","_originalIsEditable","originalEditable","_updateDecorationsRunner","RunOnceScheduler","_updateDecorations","_containerDomElement","_getClassName","_overviewViewportDomElement","_overviewDomElement","delegateVerticalScrollbarMouseDown","_originalDomNode","_modifiedDomNode","_beginUpdateDecorationsTimeout","_currentlyChangingViewZones","_diffComputationToken","_originalEditorState","_modifiedEditorState","_isHandlingScrollEvent","_elementSizeObserver","ElementSizeObserver","_onDidContainerSizeChanged","automaticLayout","startObserving","_diffComputationResult","leftContextKeyService","leftServices","ServiceCollection","IContextKeyService","leftScopedInstantiationService","createChild","rightContextKeyService","rightServices","rightScopedInstantiationService","originalEditor","_createLeftHandSideEditor","_createRightHandSideEditor","_originalOverviewRuler","_modifiedOverviewRuler","_reviewPane","_enableSplitViewResizing","enableSplitViewResizing","_setStrategy","DiffEditorWidgetSideBySide","_createDataSource","DiffEditorWidgetInline","onThemeChange","_strategy","applyColors","schedule","contributions_1","EditorExtensionsRegistry","getDiffEditorContributions","createInstance","ctor","onUnexpectedError","addDiffEditor","_setState","newState","getThemeTypeSelector","_recreateOverviewRulers","removeChild","hasModel","createOverviewRuler","_layoutOverviewRulers","_createInnerEditor","_adjustOptionsForLeftHandSide","onDidScrollChange","scrollTopChanged","scrollLeftChanged","scrollHeightChanged","setScrollPosition","scrollLeft","scrollTop","_layoutOverviewViewport","onDidChangeViewZones","_onViewZonesChanged","_beginUpdateDecorationsSoon","_adjustOptionsForRightHandSide","onDidChangeModelOptions","CodeEditorWidget","removeDiffEditor","clearTimeout","_cleanViewZonesAndDecorations","getEditorType","editorCommon","IDiffEditor","newOptions","renderSideBySideChanged","beginUpdateDecorations","_beginUpdateDecorations","setEnableSplitViewResizing","setScrollTop","getVisibleColumnFromPosition","revealLine","revealLineInCenter","revealLineInCenterIfOutsideViewport","revealPositionInCenterIfOutsideViewport","getSelection","getSelections","setSelection","something","setSelections","revealLines","revealLinesInCenter","revealLinesInCenterIfOutsideViewport","revealRange","revealVerticalInCenter","revealHorizontal","revealRangeInCenter","revealRangeInCenterIfOutsideViewport","revealRangeAtTop","getSupportedActions","saveViewState","restoreViewState","diffEditorState","dimension","observe","hasTextFocus","trigger","handlerId","payload","changeDecorations","_doLayout","_getReviewHeight","getHeight","reviewHeight","freeSpace","ENTIRE_DIFF_OVERVIEW_WIDTH","ONE_OVERVIEW_WIDTH","getLayoutInfo","setLayout","UPDATE_DIFF_DECORATIONS_DELAY","currentOriginalModel","currentModifiedModel","currentToken","foreignOriginal","getWhitespaces","foreignModified","diffDecorations","getEditorsDiffDecorations","_adjustOptionsForSubEditor","clonedOptions","inDiffEditor","wordWrap","wordWrapMinified","vertical","folding","codeLens","fixedOverflowWidgets","minimap","enabled","isEditable","readOnly","extraEditorClassName","revealHorizontalRightPadding","EditorOptions","verticalHasArrows","getWidth","splitPoint","_computeOverviewViewport","layoutInfo","getScrollTop","scrollHeight","getScrollHeight","computedAvailableSize","computedRepresentableSize","computedRatio","getContainerDomNode","relayoutEditors","newStrategy","_getLineChangeAtOrBeforeLineNumber","startLineNumberExtractor","mid","midStart","midEnd","_getEquivalentLineForOriginalLineNumber","originalEquivalentLineNumber","modifiedEquivalentLineNumber","lineChangeOriginalLength","lineChangeModifiedLength","_getEquivalentLineForModifiedLineNumber","getDiffLineInformationForOriginal","equivalentLineNumber","getDiffLineInformationForModified","IEditorWorkerService","IInstantiationService","IThemeService","INotificationService","IContextMenuService","IEditorProgressService","DiffEditorWidgetStyle","dataSource","_dataSource","_insertColor","_removeColor","newInsertColor","diffInserted","defaultInsertColor","transparent","newRemoveColor","diffRemoved","defaultRemoveColor","hasChanges","originalWhitespaces","modifiedWhitespaces","afterLineNumber","_getViewZones","originalDecorations","_getOriginalEditorDecorations","modifiedDecorations","_getModifiedEditorDecorations","ForeignViewZonesIterator","_source","_index","advance","ViewZonesComputer","originalForeignVZ","originalLineHeight","modifiedForeignVZ","modifiedLineHeight","getViewZones","originalEndEquivalentLineNumber","modifiedEndEquivalentLineNumber","sortMyViewZones","addAndCombineIfPossible","destination","lastItem","heightInLines","length_5","stepOriginal","stepModified","viewZoneLineNumber","_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion","isChangeOrInsert","_produceOriginalFromDiff","isChangeOrDelete","_produceModifiedFromDiff","stepOriginalIndex","stepModifiedIndex","originalDelta","modifiedDelta","shouldNotShrink","_ensureDomNodes","createFakeLinesDiv","createDecoration","DECORATIONS","charDelete","ModelDecorationOptions","charDeleteWholeLine","isWholeLine","charInsert","charInsertWholeLine","lineInsert","marginClassName","lineInsertWithSign","linesDecorationsClassName","lineDelete","lineDeleteWithSign","lineDeleteMargin","_disableSash","_sashRatio","_sashPosition","_startSashPosition","_sash","Sash","onDidStart","onSashDragStart","onSashDrag","onDidEnd","onSashDragEnd","onDidReset","onSashReset","newDisableSash","sashRatio","contentWidth","sashPosition","midPoint","MINIMUM_EDITOR_WIDTH","currentX","startX","getVerticalSashTop","sash","getVerticalSashLeft","getVerticalSashHeight","SideBySideViewZonesComputer","overviewZoneColor","length_6","OverviewRulerZone","lengthJ","getLineFirstNonWhitespaceColumn","getLineLastNonWhitespaceColumn","length_7","decorationsLeft","onDidLayoutChange","InlineViewZonesComputer","length_8","length_9","modifiedEditorOptions","modifiedEditorTabSize","InlineDecoration","sb","createStringBuilder","marginHTML","lineDecorationsWidth","decorationsWidth","typicalHalfwidthCharacterWidth","maxCharsPerLine","_renderOriginalLine","build","minWidthInPx","count","actualDecorations","LineDecoration","appendASCIIString","output","absoluteOffsets","characterMapping","getAbsoluteOffsets","added","removed","addedOutline","diffInsertedOutline","removedOutline","diffRemovedOutline","border","diffBorder","LAST_GENERATED_COMMAND_ID","ariaDomNodeCreated","StandaloneCodeEditor","keybindingService","accessibilityService","StandaloneCodeEditorNLS","editorViewAccessibleLabel","browser","accessibilityHelpMessageIE","accessibilityHelpMessage","_standaloneKeybindingService","aria","whenExpression","deserialize","createContextKey","addAction","_descriptor","and","keybindings","keybindingsWhen","keybindingContext","contextMenuGroupId","contextMenuOrder","uniqueId","registerCommand","menuItem","title","order","MenuRegistry","appendMenuItem","keybindings_1","kb","internalAction","InternalEditorAction","_actions","IKeybindingService","IAccessibilityService","StandaloneEditor","contextViewService","themeDomRegistration","registerEditorContainer","_model","_contextViewService","_ownsModel","_attachModel","oldModelUrl","newModelUrl","_onDidChangeModel","_modelData","setContainer","view","_postDetachModelCleanup","detachedModel","IContextViewService","IStandaloneThemeService","StandaloneDiffEditor","editorProgressService","optional","IClipboardService","FrankensteinMode","languageIdentifier","_languageIdentifier","registeredAssociations","nonUserRegisteredAssociations","userRegisteredAssociations","registerTextMime","association","warnOnOverwrite","associationItem","mime","filename","extension","filepattern","firstline","userConfigured","filenameLowercase","extensionLowercase","filepatternLowercase","filepatternOnPath","posix","sep","toTextMimeAssociationItem","guessMimeTypes","firstLine","DataUri","parseMetaData","META_DATA_LABEL","basename","configuredMime","guessMimeTypeByPath","registeredMime","firstlineMime","startsWithUTF8BOM","guessMimeTypeByFirstline","associations","filenameMatch","patternMatch","extensionMatch","endsWith","LanguagesRegistry","useModesRegistry","_onDidChange","_warnOnOverwrite","_nextLanguageId2","_languageIdToLanguage","_languageToLanguageId","_languages","_mimeTypesMap","_nameMap","_lowercaseNameMap","_initializeFromRegistry","ModesRegistry","onDidChangeLanguages","getLanguages","_registerLanguages","desc_1","_registerLanguage","langId","aliases","mimetypes","mimetype","Registry","as","Extensions","registerOverrideIdentifiers","_getLanguageId","lang","resolvedLanguage","LanguageIdentifier","extensions","filenames","configurationFiles","_mergeLanguage","primaryMime","filenamePatterns","_f","firstLineRegexStr","firstLineRegex","langAliases","_g","langAliases_1","langAlias","containsAliases","bestName","getModeIdForLanguageNameLowercase","languageNameLower","extractModeIds","commaSeparatedMimetypesOrCommaSeparatedIds","mimeTypeOrId","NULL_LANGUAGE_IDENTIFIER","getModeIdsFromFilepathOrFirstLine","mimeTypes","LanguageSelection","onLanguagesMaybeChanged","selector","_selector","_evaluate","ModeServiceImpl","_onDidCreateMode","onDidCreateMode","_onLanguagesMaybeChanged","_instantiatedModes","_registry","getModeIdByFilepathOrFirstLine","modeIds","firstOrDefault","_createModeAndGetLanguageIdentifier","createByFilepathOrFirstLine","_getOrCreateMode","MODEL_ID","ModelData","onDidChangeLanguage","_modelEventListeners","_languageSelection","_languageSelectionListener","_disposeLanguageSelection","setLanguage","languageSelection","setMode","DEFAULT_EOL","platform","ModelServiceImpl","resourcePropertiesService","_onModelAdded","onModelAdded","_onModelRemoved","_onModelModeChanged","onModelModeChanged","_resourcePropertiesService","_modelCreationOptionsByLanguageAndResource","_configurationServiceSubscription","_updateModelOptions","SemanticColoringFeature","_readModelOptions","isForSimpleWidget","EDITOR_MODEL_DEFAULTS","parsedTabSize","indentSize","parsedIndentSize","insertSpaces","newDefaultEOL","trimAutoWhitespace","detectIndentation","largeFileOptimizations","defaultEOL","getCreationOptions","creationOptions","oldOptionsByLanguageAndResource","modelId","modelData","oldOptions","_setModelOptionsForModel","currentOptions","setEOL","_createModelData","TextModel","_onWillDispose","_onDidChangeLanguage","PLAINTEXT_LANGUAGE_IDENTIFIER","oldModeId","oldLanguage","newModeId","ITextResourcePropertiesService","_watchers","_semanticStyling","SemanticStyling","isSemanticColoringEnabled","SETTING_ID","ModelSemanticColoring","deregister","modelSemanticColoring","_caches","provider","SemanticColoringProviderStyling","getLegend","HashTableEntry","tokenTypeIndex","tokenModifierSet","HashTable","_elementsCount","_currentLengthIndex","_currentLength","_SIZES","_growCount","_elements","_nullOutEntries","_hashFunc","oldElements","oldElements_1","oldNext","_add","_legend","_hashTable","getMetadata","entry","tokenTypes","tokenModifiers","modifierSet","modifierIndex","tokenStyle","getTokenStyleMetadata","italic","bold","underline","foreground","getLevel","LogLevel","Trace","modifiers","TokenMetadata","getForeground","getFontStyle","SemanticTokensResponse","_provider","resultId","releaseDocumentSemanticTokens","stylingProvider","_isDisposed","_fetchSemanticTokens","_fetchSemanticTokensNow","_currentResponse","_currentRequestCancellationTokenSource","isScheduled","DocumentSemanticTokensProviderRegistry","_setSemanticTokens","_getSemanticColoringProvider","pendingChanges","contentChangeListener","styling","lastResultId","provideDocumentSemanticTokens","errors","_isSemanticTokens","_isSemanticTokensEdits","_copy","src","srcOffset","destOffset","currentResponse","setSemanticTokens","deltaLength","deleteCount","srcData","destData","srcLastStart","destLastStart","copyCount","tokenCount","tokensPerArea","ceil","tokenIndex","lastLineNumber","lastStartCharacter","tokenStartIndex","tokenEndIndex","smallTokenEndIndex","bigTokenEndIndex","areaLine","deltaLine","deltaCharacter","startCharacter","subarray","tokens_1","MultilineTokens2","SparseEncodedTokens","pendingChanges_1","result_1","area","singleChange","applyEdit","ordered","AbstractCodeEditorService","_onCodeEditorAdd","onCodeEditorAdd","_onCodeEditorRemove","onCodeEditorRemove","_onDiffEditorAdd","_onDiffEditorRemove","_codeEditors","_diffEditors","addCodeEditor","removeCodeEditor","listCodeEditors","editorWithWidgetFocus","editors_1","RefCountedStyleSheet","editorId","styleSheet","_parent","_editorId","_refCount","unref","parentNode","_removeEditorStyleSheets","GlobalStyleSheet","CodeEditorServiceImpl","_decorationOptionProviders","_editorStyleSheets","_globalStyleSheet","_getOrCreateGlobalStyleSheet","_getOrCreateStyleSheet","refCountedStyleSheet","delete","registerDecorationType","parentTypeKey","providerArgs","DecorationSubTypeOptionsProvider","DecorationTypeOptionsProvider","refCount","removeDecorationType","ed","removeDecorations","resolveDecorationOptions","decorationTypeKey","_styleSheet","_parentTypeKey","_beforeContentRules","DecorationCSSRules","_afterContentRules","beforeContentClassName","afterContentClassName","_disposables","createCSSRules","hasContent","inlineData","hasLetterSpacing","createInlineCSSRules","inlineClassName","inlineClassNameAffectsLetterSpacing","glyphMarginClassName","stickiness","rangeBehavior","lightOverviewRulerColor","light","overviewRulerColor","darkOverviewRulerColor","dark","color","darkColor","overviewRulerLane","Center","_CSS_MAP","opacity","backgroundColor","outline","outlineColor","outlineStyle","outlineWidth","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth","fontStyle","fontWeight","textDecoration","cursor","letterSpacing","gutterIconPath","gutterIconSize","contentText","contentIconPath","margin","ruleType","_ruleType","_providerArgs","_usesThemeColors","_hasContent","_hasLetterSpacing","CSSNameHelper","getClassName","_className","_unThemedSelector","getSelector","_buildCSS","_themeListener","_removeCSS","unthemedCSS","lightCSS","darkCSS","getCSSTextForModelDecorationClassName","getCSSTextForModelDecorationInlineClassName","getCSSTextForModelDecorationGlyphMarginClassName","getCSSTextForModelDecorationContentClassName","before","after","sheet","insertRule","cssTextArr","collectCSSText","collectBorderSettingsCSSText","revive","escaped","properties","lenBefore","properties_1","property","resolveValue","isThemeColor","parentKey","StandaloneCodeEditorServiceImpl","getActiveCodeEditor","input","sideBySide","doOpenEditor","schema","windowOpenNoOpener","ParsedTokenThemeRule","background","resolveParsedTokenThemeRules","parsedThemeRules","customTokenColors","strcmp","defaultFontStyle","defaultForeground","defaultBackground","incomingDefaults","colorMap","ColorMap","customTokenColors_1","foregroundColorId","backgroundColorId","ThemeTrieElementRule","ThemeTrieElement","TokenTheme","colorRegExp","_lastColorId","_id2color","_color2id","toUpperCase","Color","fromHex","getColorMap","_colorMap","_root","_cache","createFromRawTokenTheme","createFromParsedTokenTheme","segments","lenJ","parseTokenTheme","_match","standardToken","STANDARD_TOKEN_TYPE_REGEXP","toStandardTokenType","_fontStyle","_foreground","_background","acceptOverwrite","mainRule","_mainRule","_children","head","tail","dotIndex","child","base","inherit","colors","editorBackground","editorForeground","editorInactiveSelection","editorIndentGuides","editorActiveIndentGuides","editorSelectionHighlight","vs_dark","hc_black","colorRegistry","ColorContribution","themingRegistry","ThemingExtensions","ThemingContribution","StandaloneTheme","standaloneThemeData","themeData","themeName","defaultColors","_tokenTheme","notifyBaseUpdated","getColors","baseData","getBuiltinRules","colorId","useDefault","getDefault","resolveDefaultColor","defines","encodedTokensColors","isBuiltinTheme","builtinTheme","newBuiltInTheme","StandaloneThemeServiceImpl","_onThemeChange","_environment","_knownThemes","_css","_globalStyleElement","_styleElements","_registerShadowDomContainer","_registerRegularEditorContainer","styleElement","defineTheme","cssRules","hasRule","ruleCollector","getThemingParticipants","generateTokensCSSForColorMap","setColorMap","getIconTheme","hasFileIcons","hasFolderIcons","hidesExplorerArrows","Context","_id","NullContext","ConfigAwareContextValuesContainer","emitter","_values","_listener","allKeys","ArrayContextKeyChangeEvent","changedKeys","contextKey","_keyPrefix","configKey","configValue","ContextKey","service","_service","_key","_defaultValue","reset","setContext","removeContext","getContextKeyValue","SimpleContextKeyChangeEvent","affectsSome","CompositeContextKeyChangeEvent","events","AbstractContextKeyService","myContextId","_onDidChangeContext","PauseableEmitter","_myContextId","bufferChangeEvents","pause","resume","ScopedContextKeyService","getContextValuesContainer","myContext","hasAttribute","NaN","parentElement","findContextAttr","ContextKeyService","_contexts","_toDispose","_lastContextId","contextId","createChildContext","parentContextId","disposeContext","_domNode","removeAttribute","any","onDidChangeContext","SET_CONTEXT_COMMAND_ID","ContextMenuHandler","focusToReturn","block","blockMouse","configure","delegate","menu","showContextView","canRelayout","anchorAlignment","render","getMenuClassName","$","menuDisposables","actionRunner","ActionRunner","onDidBeforeRun","onActionRun","onDidRun","onDidActionRun","Menu","actionViewItemProvider","getActionViewItem","getActionsContext","getKeyBinding","attachMenuStyler","onDidCancel","hideContextView","onDidBlur","domEvent","EventType","BLUR","MOUSE_DOWN","defaultPrevented","StandardMouseEvent","combinedDisposable","onHide","didCancel","removeNode","ContextMenuService","_onDidContextMenu","contextMenuHandler","ITelemetryService","viewportSize","viewSize","anchor","anchorEnd","ContextView","toDisposeOnClean","toDisposeOnSetContainer","DOM","toDisposeOnSetContainer_1","BUBBLE_UP_EVENTS","onDOMEvent","BUBBLE_DOWN_EVENTS","BrowserFeatures","pointerEvents","around","elementPosition","horizontalAnchor","viewSizeWidth","viewSizeHeight","anchorPosition","verticalAnchor","pageYOffset","innerHeight","intersects","innerWidth","containerPosition","onCapture","ILayoutService","createDecorator","ContextViewService","layoutService","contextView","IDialogService","MapMap","Graph","_hashFn","_nodes","roots","isEmptyObject","outgoing","insertEdge","fromNode","lookupOrInsertNode","toNode","incoming","newNode","_canUseProxy","CyclicDependencyError","graph","InstantiationService","services","strict","_services","_strict","_trace","traceInvocation","_done","isOptional","illegalState","_getOrCreateServiceInstance","stop","ctorOrDescriptor","SyncDescriptor","traceCreation","_createInstance","staticArguments","serviceDependencies","_util","getServiceDependencies","serviceArgs","serviceDependencies_1","dependency","firstServiceArgPos","bind","_setServiceInstance","_getServiceInstanceOrDescriptor","instanceOrDesc","_createAndCacheServiceInstance","branch","cycleCount","roots_1","_createServiceInstanceWithOwner","supportsDelayedInstantiation","_createServiceInstance","_supportsDelayedInstantiation","idle_1","IdleValue","prop","_target","_start","_dep","_None","first","dur","_totals","causedCreation","printChild","prefix","nested","toFixed","class_1","key1","key2","remove","MarkerStats","infos","warnings","unknowns","onMarkerChanged","_update","oldStats","_substract","newStats","_resourceStats","inMemory","walkThrough","walkThroughSnippet","read","MarkerService","_onMarkerChanged","_onMarkerChangedEvent","debounce","_debouncer","_byResource","_byOwner","_stats","owner","changeOne","markerData","isFalsyOrEmpty","markers","markerData_1","marker","_toMarker","code","relatedInformation","tags","severities","take","data_1","_accept","newLen","last","_dedupeMap","event_1","MenuService","createMenu","_dispoables","_menuGroups","_contextKeys","_build","onDidChangeMenu","menuId","menuItems","getMenuItems","_compareMenuItems","menuItems_1","groupName","_fillInKbExprKeys","isIMenuItem","toggled","activeActions","MenuItemAction","alt","SubmenuItemAction","exp","aGroup","bGroup","localeCompare","aPrio","bPrio","_compareTitles","aStr","bStr","StaticServices","MarkerDecorations","_markersData","update","oldIds","ids","getMarker","decoration","MarkerDecorationsService","_markerService","_onDidChangeMarker","_markerDecorations","_handleMarkerChange","markerDecorations","withUndefinedAsNull","changedResources","internal","vscode","newModelDecorations","_createDecorationRange","_createDecorationOption","rawMarker","Hint","_hasMarkerTag","validateRange","maxColumn","MAX_VALUE","minColumn","themeColorFromId","overviewRulerWarning","minimapWarning","Inline","overviewRulerInfo","overviewRulerError","minimapError","showIfCollapsed","Right","tag","IMarkerService","AccessibilityService","_accessibilitySupport","_onDidChangeScreenReaderOptimized","_accessibilityModeEnabledContext","CONTEXT_ACCESSIBILITY_MODE_ENABLED","bindTo","updateContextKey","isScreenReaderOptimized","onDidChangeScreenReaderOptimized","getAccessibilitySupport","_serviceCollection","LazyStaticService","serviceId","_serviceId","_factory","_all","define","init","getSingletonServiceDescriptors","configurationServiceImpl","resourceConfigurationService","contextService","IWorkspaceContextService","labelService","ILabelService","dialogService","markerService","IModeService","NullLogService","markerDecorationsService","IMarkerDecorationsService","storageService","IStorageService","InMemoryStorageService","DynamicStandaloneServices","ensure","IListService","ListService","IMenuService","IBulkEditService","withAllStandaloneServices","simpleEditorModelResolverService","ITextModelService","IOpenerService","onDidCreateEditor","createDiffNavigator","doCreateModel","firstLF","setModelMarkers","getModelMarkers","onDidCreateModel","onWillDisposeModel","onDidChangeModelLanguage","createWebWorker","actualCreateWebWorker","deltaOffset","nullTokenize","getSafeTokenizationSupport","tokenizationResult","remeasureFonts","clearAllFontInfos","bool","defValue","createKeywordMatcher","caseInsensitive","array_1","arrayToHash","compileRegExp","createGuard","ruleName","tkey","scrut","oppat","tester","pat","elemType","obj_1","isArrayOf","elem","inWords_2","re_1","patx_1","patx_2","eos","patexp","inWords_1","scrutinee","num","selectScrutinee","Rule","setRegex","re","sregex","setAction","act","compileAction","newAction","stateNames","usesEmbedded","results","cases","cases_1","def_1","cases_2","_case","registerLanguage","getEncodedLanguageId","lid","onLanguage","disposable","mode","setLanguageConfiguration","EncodedTokenizationSupport2Adapter","_actual","tokenizeEncoded","TokenizationSupport2Adapter","_toClassicTokens","previousStartIndex","scopes","actualResult","_toBinaryTokens","isThenable","setTokensProvider","isEncodedTokensProvider","registerPromise","setMonarchTokensProvider","languageDef","createTokenizationSupport","json","noThrow","lexerMin","addRules","newrules","include","newrule","rule1","matchOnlyAtStart","compile","registerReferenceProvider","registerRenameProvider","registerSignatureHelpProvider","registerHoverProvider","provideHover","registerDocumentSymbolProvider","registerDocumentHighlightProvider","registerDefinitionProvider","registerImplementationProvider","registerTypeDefinitionProvider","registerCodeLensProvider","registerCodeActionProvider","provideCodeActions","areIntersectingOrTouching","only","registerDocumentFormattingEditProvider","registerDocumentRangeFormattingEditProvider","registerOnTypeFormattingEditProvider","registerLinkProvider","registerCompletionItemProvider","registerColorProvider","registerFoldingRangeProvider","registerDeclarationProvider","registerSelectionRangeProvider","registerDocumentSemanticTokensProvider","registerDocumentRangeSemanticTokensProvider","wrappingIndent","glyphMargin","autoIndent","overviewRulerLanes","api","ConfigurationChangedEvent","BareFontInfo","FontInfo","TextModelResolvedOptions","FindMatch","EditorType","FoldingRangeKind","ignoreDuplicateModules","_diff"],"mappings":"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","file":"static/js/0.88c03abb.chunk.js","sourcesContent":["self[\"MonacoEnvironment\"] = (function (paths) {\n      function stripTrailingSlash(str) {\n        return str.replace(/\\/$/, '');\n      }\n      return {\n        getWorkerUrl: function (moduleId, label) {\n          var pathPrefix = typeof __webpack_public_path__ === 'string' ? __webpack_public_path__ : \"./\";\n          var result = (pathPrefix ? stripTrailingSlash(pathPrefix) + '/' : '') + paths[label];\n          if (/^(http:)|(https:)|(file:)/.test(result)) {\n            var currentUrl = String(window.location);\n            var currentOrigin = currentUrl.substr(0, currentUrl.length - window.location.hash.length - window.location.search.length - window.location.pathname.length);\n            if (result.substring(0, currentOrigin.length) !== currentOrigin) {\n              var js = '/*' + label + '*/importScripts(\"' + result + '\");';\n              return 'data:text/javascript;charset=utf-8,' + encodeURIComponent(js);\n            }\n          }\n          return result;\n        }\n      };\n    })({\n  \"editorWorkerService\": \"editor.worker.js\"\n});\nrequire(\"./standalone/browser/accessibilityHelp/accessibilityHelp.js\");\nrequire(\"./contrib/bracketMatching/bracketMatching.js\");\nrequire(\"./contrib/caretOperations/caretOperations.js\");\nrequire(\"./contrib/clipboard/clipboard.js\");\nrequire(\"./contrib/codeAction/codeActionContributions.js\");\nrequire(\"./contrib/codelens/codelensController.js\");\nrequire(\"./contrib/colorPicker/colorDetector.js\");\nrequire(\"./contrib/comment/comment.js\");\nrequire(\"./contrib/contextmenu/contextmenu.js\");\nrequire(\"./browser/controller/coreCommands.js\");\nrequire(\"./contrib/cursorUndo/cursorUndo.js\");\nrequire(\"./contrib/dnd/dnd.js\");\nrequire(\"./contrib/find/findController.js\");\nrequire(\"./contrib/folding/folding.js\");\nrequire(\"./contrib/fontZoom/fontZoom.js\");\nrequire(\"./contrib/format/formatActions.js\");\nrequire(\"./contrib/gotoError/gotoError.js\");\nrequire(\"./standalone/browser/quickOpen/gotoLine.js\");\nrequire(\"./contrib/gotoSymbol/goToCommands.js\");\nrequire(\"./contrib/gotoSymbol/link/goToDefinitionAtPosition.js\");\nrequire(\"./contrib/hover/hover.js\");\nrequire(\"./standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js\");\nrequire(\"./contrib/inPlaceReplace/inPlaceReplace.js\");\nrequire(\"./standalone/browser/inspectTokens/inspectTokens.js\");\nrequire(\"./contrib/linesOperations/linesOperations.js\");\nrequire(\"./contrib/links/links.js\");\nrequire(\"./contrib/multicursor/multicursor.js\");\nrequire(\"./contrib/parameterHints/parameterHints.js\");\nrequire(\"./standalone/browser/quickOpen/quickCommand.js\");\nrequire(\"./standalone/browser/quickOpen/quickOutline.js\");\nrequire(\"./standalone/browser/referenceSearch/standaloneReferenceSearch.js\");\nrequire(\"./contrib/rename/rename.js\");\nrequire(\"./contrib/smartSelect/smartSelect.js\");\nrequire(\"./contrib/snippet/snippetController2.js\");\nrequire(\"./contrib/suggest/suggestController.js\");\nrequire(\"./standalone/browser/toggleHighContrast/toggleHighContrast.js\");\nrequire(\"./contrib/toggleTabFocusMode/toggleTabFocusMode.js\");\nrequire(\"./contrib/caretOperations/transpose.js\");\nrequire(\"./contrib/wordHighlighter/wordHighlighter.js\");\nrequire(\"./contrib/wordOperations/wordOperations.js\");\nrequire(\"./contrib/wordPartOperations/wordPartOperations.js\");\nmodule.exports = require(\"!!./editor.api.js\");\nrequire(\"../basic-languages/scheme/scheme.contribution.js\");","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.processSize = processSize;\nexports.noop = noop;\n\nfunction processSize(size) {\n  return !/^\\d+$/.test(size) ? size : \"\".concat(size, \"px\");\n}\n\nfunction noop() {}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar monaco = _interopRequireWildcard(require(\"monaco-editor/esm/vs/editor/editor.api\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar MonacoEditor = /*#__PURE__*/function (_React$Component) {\n  _inherits(MonacoEditor, _React$Component);\n\n  var _super = _createSuper(MonacoEditor);\n\n  function MonacoEditor(props) {\n    var _this;\n\n    _classCallCheck(this, MonacoEditor);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"assignRef\", function (component) {\n      _this.containerElement = component;\n    });\n\n    _this.containerElement = undefined;\n    return _this;\n  }\n\n  _createClass(MonacoEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initMonaco();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          value = _this$props.value,\n          language = _this$props.language,\n          theme = _this$props.theme,\n          height = _this$props.height,\n          options = _this$props.options,\n          width = _this$props.width;\n      var editor = this.editor;\n      var model = editor.getModel();\n\n      if (this.props.value != null && this.props.value !== model.getValue()) {\n        this.__prevent_trigger_change_event = true;\n        this.editor.pushUndoStop();\n        model.pushEditOperations([], [{\n          range: model.getFullModelRange(),\n          text: value\n        }]);\n        this.editor.pushUndoStop();\n        this.__prevent_trigger_change_event = false;\n      }\n\n      if (prevProps.language !== language) {\n        monaco.editor.setModelLanguage(model, language);\n      }\n\n      if (prevProps.theme !== theme) {\n        monaco.editor.setTheme(theme);\n      }\n\n      if (editor && (width !== prevProps.width || height !== prevProps.height)) {\n        editor.layout();\n      }\n\n      if (prevProps.options !== options) {\n        editor.updateOptions(options);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.destroyMonaco();\n    }\n  }, {\n    key: \"destroyMonaco\",\n    value: function destroyMonaco() {\n      if (this.editor) {\n        this.editor.dispose();\n        var model = this.editor.getModel();\n\n        if (model) {\n          model.dispose();\n        }\n      }\n\n      if (this._subscription) {\n        this._subscription.dispose();\n      }\n    }\n  }, {\n    key: \"initMonaco\",\n    value: function initMonaco() {\n      var value = this.props.value != null ? this.props.value : this.props.defaultValue;\n      var _this$props2 = this.props,\n          language = _this$props2.language,\n          theme = _this$props2.theme,\n          options = _this$props2.options,\n          overrideServices = _this$props2.overrideServices;\n\n      if (this.containerElement) {\n        // Before initializing monaco editor\n        Object.assign(options, this.editorWillMount());\n        this.editor = monaco.editor.create(this.containerElement, _objectSpread({\n          value: value,\n          language: language\n        }, options, {}, theme ? {\n          theme: theme\n        } : {}), overrideServices); // After initializing monaco editor\n\n        this.editorDidMount(this.editor);\n      }\n    }\n  }, {\n    key: \"editorWillMount\",\n    value: function editorWillMount() {\n      var editorWillMount = this.props.editorWillMount;\n      var options = editorWillMount(monaco);\n      return options || {};\n    }\n  }, {\n    key: \"editorDidMount\",\n    value: function editorDidMount(editor) {\n      var _this2 = this;\n\n      this.props.editorDidMount(editor, monaco);\n      this._subscription = editor.onDidChangeModelContent(function (event) {\n        if (!_this2.__prevent_trigger_change_event) {\n          _this2.props.onChange(editor.getValue(), event);\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          width = _this$props3.width,\n          height = _this$props3.height;\n      var fixedWidth = (0, _utils.processSize)(width);\n      var fixedHeight = (0, _utils.processSize)(height);\n      var style = {\n        width: fixedWidth,\n        height: fixedHeight\n      };\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        ref: this.assignRef,\n        style: style,\n        className: \"react-monaco-editor-container\"\n      });\n    }\n  }]);\n\n  return MonacoEditor;\n}(_react[\"default\"].Component);\n\nMonacoEditor.propTypes = {\n  width: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].number]),\n  height: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].number]),\n  value: _propTypes[\"default\"].string,\n  defaultValue: _propTypes[\"default\"].string,\n  language: _propTypes[\"default\"].string,\n  theme: _propTypes[\"default\"].string,\n  options: _propTypes[\"default\"].object,\n  overrideServices: _propTypes[\"default\"].object,\n  editorDidMount: _propTypes[\"default\"].func,\n  editorWillMount: _propTypes[\"default\"].func,\n  onChange: _propTypes[\"default\"].func\n};\nMonacoEditor.defaultProps = {\n  width: \"100%\",\n  height: \"100%\",\n  value: null,\n  defaultValue: \"\",\n  language: \"javascript\",\n  theme: null,\n  options: {},\n  overrideServices: {},\n  editorDidMount: _utils.noop,\n  editorWillMount: _utils.noop,\n  onChange: _utils.noop\n};\nvar _default = MonacoEditor;\nexports[\"default\"] = _default;","/*!\nCopyright (c) 2014 Taylor Hakes\nCopyright (c) 2014 Forbes Lindesay\n */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory() :\n\t\ttypeof define === 'function' && define.amd ? define(factory) :\n\t\t\t(factory());\n}(this, (function () {\n\t'use strict';\n\n\t/**\n\t * @this {Promise}\n\t */\n\tfunction finallyConstructor(callback) {\n\t\tvar constructor = this.constructor;\n\t\treturn this.then(\n\t\t\tfunction (value) {\n\t\t\t\treturn constructor.resolve(callback()).then(function () {\n\t\t\t\t\treturn value;\n\t\t\t\t});\n\t\t\t},\n\t\t\tfunction (reason) {\n\t\t\t\treturn constructor.resolve(callback()).then(function () {\n\t\t\t\t\treturn constructor.reject(reason);\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n\n\t// Store setTimeout reference so promise-polyfill will be unaffected by\n\t// other code modifying setTimeout (like sinon.useFakeTimers())\n\tvar setTimeoutFunc = setTimeout;\n\n\tfunction noop() { }\n\n\t// Polyfill for Function.prototype.bind\n\tfunction bind(fn, thisArg) {\n\t\treturn function () {\n\t\t\tfn.apply(thisArg, arguments);\n\t\t};\n\t}\n\n\t/**\n\t * @constructor\n\t * @param {Function} fn\n\t */\n\tfunction Promise(fn) {\n\t\tif (!(this instanceof Promise))\n\t\t\tthrow new TypeError('Promises must be constructed via new');\n\t\tif (typeof fn !== 'function') throw new TypeError('not a function');\n\t\t/** @type {!number} */\n\t\tthis._state = 0;\n\t\t/** @type {!boolean} */\n\t\tthis._handled = false;\n\t\t/** @type {Promise|undefined} */\n\t\tthis._value = undefined;\n\t\t/** @type {!Array<!Function>} */\n\t\tthis._deferreds = [];\n\n\t\tdoResolve(fn, this);\n\t}\n\n\tfunction handle(self, deferred) {\n\t\twhile (self._state === 3) {\n\t\t\tself = self._value;\n\t\t}\n\t\tif (self._state === 0) {\n\t\t\tself._deferreds.push(deferred);\n\t\t\treturn;\n\t\t}\n\t\tself._handled = true;\n\t\tPromise._immediateFn(function () {\n\t\t\tvar cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n\t\t\tif (cb === null) {\n\t\t\t\t(self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar ret;\n\t\t\ttry {\n\t\t\t\tret = cb(self._value);\n\t\t\t} catch (e) {\n\t\t\t\treject(deferred.promise, e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresolve(deferred.promise, ret);\n\t\t});\n\t}\n\n\tfunction resolve(self, newValue) {\n\t\ttry {\n\t\t\t// Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n\t\t\tif (newValue === self)\n\t\t\t\tthrow new TypeError('A promise cannot be resolved with itself.');\n\t\t\tif (\n\t\t\t\tnewValue &&\n\t\t\t\t(typeof newValue === 'object' || typeof newValue === 'function')\n\t\t\t) {\n\t\t\t\tvar then = newValue.then;\n\t\t\t\tif (newValue instanceof Promise) {\n\t\t\t\t\tself._state = 3;\n\t\t\t\t\tself._value = newValue;\n\t\t\t\t\tfinale(self);\n\t\t\t\t\treturn;\n\t\t\t\t} else if (typeof then === 'function') {\n\t\t\t\t\tdoResolve(bind(then, newValue), self);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tself._state = 1;\n\t\t\tself._value = newValue;\n\t\t\tfinale(self);\n\t\t} catch (e) {\n\t\t\treject(self, e);\n\t\t}\n\t}\n\n\tfunction reject(self, newValue) {\n\t\tself._state = 2;\n\t\tself._value = newValue;\n\t\tfinale(self);\n\t}\n\n\tfunction finale(self) {\n\t\tif (self._state === 2 && self._deferreds.length === 0) {\n\t\t\tPromise._immediateFn(function () {\n\t\t\t\tif (!self._handled) {\n\t\t\t\t\tPromise._unhandledRejectionFn(self._value);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfor (var i = 0, len = self._deferreds.length; i < len; i++) {\n\t\t\thandle(self, self._deferreds[i]);\n\t\t}\n\t\tself._deferreds = null;\n\t}\n\n\t/**\n\t * @constructor\n\t */\n\tfunction Handler(onFulfilled, onRejected, promise) {\n\t\tthis.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n\t\tthis.onRejected = typeof onRejected === 'function' ? onRejected : null;\n\t\tthis.promise = promise;\n\t}\n\n\t/**\n\t * Take a potentially misbehaving resolver function and make sure\n\t * onFulfilled and onRejected are only called once.\n\t *\n\t * Makes no guarantees about asynchrony.\n\t */\n\tfunction doResolve(fn, self) {\n\t\tvar done = false;\n\t\ttry {\n\t\t\tfn(\n\t\t\t\tfunction (value) {\n\t\t\t\t\tif (done) return;\n\t\t\t\t\tdone = true;\n\t\t\t\t\tresolve(self, value);\n\t\t\t\t},\n\t\t\t\tfunction (reason) {\n\t\t\t\t\tif (done) return;\n\t\t\t\t\tdone = true;\n\t\t\t\t\treject(self, reason);\n\t\t\t\t}\n\t\t\t);\n\t\t} catch (ex) {\n\t\t\tif (done) return;\n\t\t\tdone = true;\n\t\t\treject(self, ex);\n\t\t}\n\t}\n\n\tPromise.prototype['catch'] = function (onRejected) {\n\t\treturn this.then(null, onRejected);\n\t};\n\n\tPromise.prototype.then = function (onFulfilled, onRejected) {\n\t\t// @ts-ignore\n\t\tvar prom = new this.constructor(noop);\n\n\t\thandle(this, new Handler(onFulfilled, onRejected, prom));\n\t\treturn prom;\n\t};\n\n\tPromise.prototype['finally'] = finallyConstructor;\n\n\tPromise.all = function (arr) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tif (!arr || typeof arr.length === 'undefined')\n\t\t\t\tthrow new TypeError('Promise.all accepts an array');\n\t\t\tvar args = Array.prototype.slice.call(arr);\n\t\t\tif (args.length === 0) return resolve([]);\n\t\t\tvar remaining = args.length;\n\n\t\t\tfunction res(i, val) {\n\t\t\t\ttry {\n\t\t\t\t\tif (val && (typeof val === 'object' || typeof val === 'function')) {\n\t\t\t\t\t\tvar then = val.then;\n\t\t\t\t\t\tif (typeof then === 'function') {\n\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\tval,\n\t\t\t\t\t\t\t\tfunction (val) {\n\t\t\t\t\t\t\t\t\tres(i, val);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\treject\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\targs[i] = val;\n\t\t\t\t\tif (--remaining === 0) {\n\t\t\t\t\t\tresolve(args);\n\t\t\t\t\t}\n\t\t\t\t} catch (ex) {\n\t\t\t\t\treject(ex);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < args.length; i++) {\n\t\t\t\tres(i, args[i]);\n\t\t\t}\n\t\t});\n\t};\n\n\tPromise.resolve = function (value) {\n\t\tif (value && typeof value === 'object' && value.constructor === Promise) {\n\t\t\treturn value;\n\t\t}\n\n\t\treturn new Promise(function (resolve) {\n\t\t\tresolve(value);\n\t\t});\n\t};\n\n\tPromise.reject = function (value) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\treject(value);\n\t\t});\n\t};\n\n\tPromise.race = function (values) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tfor (var i = 0, len = values.length; i < len; i++) {\n\t\t\t\tvalues[i].then(resolve, reject);\n\t\t\t}\n\t\t});\n\t};\n\n\t// Use polyfill for setImmediate for performance gains\n\tPromise._immediateFn =\n\t\t(typeof setImmediate === 'function' &&\n\t\t\tfunction (fn) {\n\t\t\t\tsetImmediate(fn);\n\t\t\t}) ||\n\t\tfunction (fn) {\n\t\t\tsetTimeoutFunc(fn, 0);\n\t\t};\n\n\tPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n\t\tif (typeof console !== 'undefined' && console) {\n\t\t\tconsole.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n\t\t}\n\t};\n\n\t/** @suppress {undefinedVars} */\n\tvar globalNS = (function () {\n\t\t// the only reliable means to get the global object is\n\t\t// `Function('return this')()`\n\t\t// However, this causes CSP violations in Chrome apps.\n\t\tif (typeof self !== 'undefined') {\n\t\t\treturn self;\n\t\t}\n\t\tif (typeof window !== 'undefined') {\n\t\t\treturn window;\n\t\t}\n\t\tif (typeof global !== 'undefined') {\n\t\t\treturn global;\n\t\t}\n\t\tthrow new Error('unable to locate global object');\n\t})();\n\n\tif (!('Promise' in globalNS)) {\n\t\tglobalNS['Promise'] = Promise;\n\t} else if (!globalNS.Promise.prototype['finally']) {\n\t\tglobalNS.Promise.prototype['finally'] = finallyConstructor;\n\t}\n\n})));\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar monaco = _interopRequireWildcard(require(\"monaco-editor/esm/vs/editor/editor.api\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar MonacoDiffEditor = /*#__PURE__*/function (_React$Component) {\n  _inherits(MonacoDiffEditor, _React$Component);\n\n  var _super = _createSuper(MonacoDiffEditor);\n\n  function MonacoDiffEditor(props) {\n    var _this;\n\n    _classCallCheck(this, MonacoDiffEditor);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"assignRef\", function (component) {\n      _this.containerElement = component;\n    });\n\n    _this.containerElement = undefined;\n    return _this;\n  }\n\n  _createClass(MonacoDiffEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initMonaco();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          language = _this$props.language,\n          theme = _this$props.theme,\n          height = _this$props.height,\n          options = _this$props.options,\n          width = _this$props.width;\n\n      var _this$editor$getModel = this.editor.getModel(),\n          original = _this$editor$getModel.original,\n          modified = _this$editor$getModel.modified;\n\n      if (this.props.original !== original.getValue()) {\n        original.setValue(this.props.original);\n      }\n\n      if (this.props.value != null && this.props.value !== modified.getValue()) {\n        this.__prevent_trigger_change_event = true;\n        this.editor.modifiedEditor.pushUndoStop();\n        modified.pushEditOperations([], [{\n          range: modified.getFullModelRange(),\n          text: this.props.value\n        }]);\n        this.editor.modifiedEditor.pushUndoStop();\n        this.__prevent_trigger_change_event = false;\n      }\n\n      if (prevProps.language !== language) {\n        monaco.editor.setModelLanguage(original, language);\n        monaco.editor.setModelLanguage(modified, language);\n      }\n\n      if (prevProps.theme !== theme) {\n        monaco.editor.setTheme(theme);\n      }\n\n      if (this.editor && (width !== prevProps.width || height !== prevProps.height)) {\n        this.editor.layout();\n      }\n\n      if (prevProps.options !== options) {\n        this.editor.updateOptions(options);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.destroyMonaco();\n    }\n  }, {\n    key: \"editorWillMount\",\n    value: function editorWillMount() {\n      var editorWillMount = this.props.editorWillMount;\n      var options = editorWillMount(monaco);\n      return options || {};\n    }\n  }, {\n    key: \"editorDidMount\",\n    value: function editorDidMount(editor) {\n      var _this2 = this;\n\n      this.props.editorDidMount(editor, monaco);\n\n      var _editor$getModel = editor.getModel(),\n          modified = _editor$getModel.modified;\n\n      this._subscription = modified.onDidChangeContent(function (event) {\n        if (!_this2.__prevent_trigger_change_event) {\n          _this2.props.onChange(modified.getValue(), event);\n        }\n      });\n    }\n  }, {\n    key: \"initModels\",\n    value: function initModels(value, original) {\n      var language = this.props.language;\n      var originalModel = monaco.editor.createModel(original, language);\n      var modifiedModel = monaco.editor.createModel(value, language);\n      this.editor.setModel({\n        original: originalModel,\n        modified: modifiedModel\n      });\n    }\n  }, {\n    key: \"initMonaco\",\n    value: function initMonaco() {\n      var value = this.props.value != null ? this.props.value : this.props.defaultValue;\n      var _this$props2 = this.props,\n          original = _this$props2.original,\n          theme = _this$props2.theme,\n          options = _this$props2.options,\n          overrideServices = _this$props2.overrideServices;\n\n      if (this.containerElement) {\n        // Before initializing monaco editor\n        this.editorWillMount();\n        this.editor = monaco.editor.createDiffEditor(this.containerElement, _objectSpread({}, options, {}, theme ? {\n          theme: theme\n        } : {}), overrideServices); // After initializing monaco editor\n\n        this.initModels(value, original);\n        this.editorDidMount(this.editor);\n      }\n    }\n  }, {\n    key: \"destroyMonaco\",\n    value: function destroyMonaco() {\n      if (this.editor) {\n        this.editor.dispose();\n\n        var _this$editor$getModel2 = this.editor.getModel(),\n            original = _this$editor$getModel2.original,\n            modified = _this$editor$getModel2.modified;\n\n        if (original) {\n          original.dispose();\n        }\n\n        if (modified) {\n          modified.dispose();\n        }\n      }\n\n      if (this._subscription) {\n        this._subscription.dispose();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          width = _this$props3.width,\n          height = _this$props3.height;\n      var fixedWidth = (0, _utils.processSize)(width);\n      var fixedHeight = (0, _utils.processSize)(height);\n      var style = {\n        width: fixedWidth,\n        height: fixedHeight\n      };\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        ref: this.assignRef,\n        style: style,\n        className: \"react-monaco-editor-container\"\n      });\n    }\n  }]);\n\n  return MonacoDiffEditor;\n}(_react[\"default\"].Component);\n\nMonacoDiffEditor.propTypes = {\n  width: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].number]),\n  height: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].number]),\n  original: _propTypes[\"default\"].string,\n  value: _propTypes[\"default\"].string,\n  defaultValue: _propTypes[\"default\"].string,\n  language: _propTypes[\"default\"].string,\n  theme: _propTypes[\"default\"].string,\n  options: _propTypes[\"default\"].object,\n  overrideServices: _propTypes[\"default\"].object,\n  editorDidMount: _propTypes[\"default\"].func,\n  editorWillMount: _propTypes[\"default\"].func,\n  onChange: _propTypes[\"default\"].func\n};\nMonacoDiffEditor.defaultProps = {\n  width: \"100%\",\n  height: \"100%\",\n  original: null,\n  value: null,\n  defaultValue: \"\",\n  language: \"javascript\",\n  theme: null,\n  options: {},\n  overrideServices: {},\n  editorDidMount: _utils.noop,\n  editorWillMount: _utils.noop,\n  onChange: _utils.noop\n};\nvar _default = MonacoDiffEditor;\nexports[\"default\"] = _default;","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n// THIS IS A GENERATED FILE. DO NOT EDIT DIRECTLY.\r\nexport var AccessibilitySupport;\r\n(function (AccessibilitySupport) {\r\n    /**\r\n     * This should be the browser case where it is not known if a screen reader is attached or no.\r\n     */\r\n    AccessibilitySupport[AccessibilitySupport[\"Unknown\"] = 0] = \"Unknown\";\r\n    AccessibilitySupport[AccessibilitySupport[\"Disabled\"] = 1] = \"Disabled\";\r\n    AccessibilitySupport[AccessibilitySupport[\"Enabled\"] = 2] = \"Enabled\";\r\n})(AccessibilitySupport || (AccessibilitySupport = {}));\r\nexport var CompletionItemInsertTextRule;\r\n(function (CompletionItemInsertTextRule) {\r\n    /**\r\n     * Adjust whitespace/indentation of multiline insert texts to\r\n     * match the current line indentation.\r\n     */\r\n    CompletionItemInsertTextRule[CompletionItemInsertTextRule[\"KeepWhitespace\"] = 1] = \"KeepWhitespace\";\r\n    /**\r\n     * `insertText` is a snippet.\r\n     */\r\n    CompletionItemInsertTextRule[CompletionItemInsertTextRule[\"InsertAsSnippet\"] = 4] = \"InsertAsSnippet\";\r\n})(CompletionItemInsertTextRule || (CompletionItemInsertTextRule = {}));\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind[CompletionItemKind[\"Method\"] = 0] = \"Method\";\r\n    CompletionItemKind[CompletionItemKind[\"Function\"] = 1] = \"Function\";\r\n    CompletionItemKind[CompletionItemKind[\"Constructor\"] = 2] = \"Constructor\";\r\n    CompletionItemKind[CompletionItemKind[\"Field\"] = 3] = \"Field\";\r\n    CompletionItemKind[CompletionItemKind[\"Variable\"] = 4] = \"Variable\";\r\n    CompletionItemKind[CompletionItemKind[\"Class\"] = 5] = \"Class\";\r\n    CompletionItemKind[CompletionItemKind[\"Struct\"] = 6] = \"Struct\";\r\n    CompletionItemKind[CompletionItemKind[\"Interface\"] = 7] = \"Interface\";\r\n    CompletionItemKind[CompletionItemKind[\"Module\"] = 8] = \"Module\";\r\n    CompletionItemKind[CompletionItemKind[\"Property\"] = 9] = \"Property\";\r\n    CompletionItemKind[CompletionItemKind[\"Event\"] = 10] = \"Event\";\r\n    CompletionItemKind[CompletionItemKind[\"Operator\"] = 11] = \"Operator\";\r\n    CompletionItemKind[CompletionItemKind[\"Unit\"] = 12] = \"Unit\";\r\n    CompletionItemKind[CompletionItemKind[\"Value\"] = 13] = \"Value\";\r\n    CompletionItemKind[CompletionItemKind[\"Constant\"] = 14] = \"Constant\";\r\n    CompletionItemKind[CompletionItemKind[\"Enum\"] = 15] = \"Enum\";\r\n    CompletionItemKind[CompletionItemKind[\"EnumMember\"] = 16] = \"EnumMember\";\r\n    CompletionItemKind[CompletionItemKind[\"Keyword\"] = 17] = \"Keyword\";\r\n    CompletionItemKind[CompletionItemKind[\"Text\"] = 18] = \"Text\";\r\n    CompletionItemKind[CompletionItemKind[\"Color\"] = 19] = \"Color\";\r\n    CompletionItemKind[CompletionItemKind[\"File\"] = 20] = \"File\";\r\n    CompletionItemKind[CompletionItemKind[\"Reference\"] = 21] = \"Reference\";\r\n    CompletionItemKind[CompletionItemKind[\"Customcolor\"] = 22] = \"Customcolor\";\r\n    CompletionItemKind[CompletionItemKind[\"Folder\"] = 23] = \"Folder\";\r\n    CompletionItemKind[CompletionItemKind[\"TypeParameter\"] = 24] = \"TypeParameter\";\r\n    CompletionItemKind[CompletionItemKind[\"Snippet\"] = 25] = \"Snippet\";\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\nexport var CompletionItemTag;\r\n(function (CompletionItemTag) {\r\n    CompletionItemTag[CompletionItemTag[\"Deprecated\"] = 1] = \"Deprecated\";\r\n})(CompletionItemTag || (CompletionItemTag = {}));\r\n/**\r\n * How a suggest provider was triggered.\r\n */\r\nexport var CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    CompletionTriggerKind[CompletionTriggerKind[\"Invoke\"] = 0] = \"Invoke\";\r\n    CompletionTriggerKind[CompletionTriggerKind[\"TriggerCharacter\"] = 1] = \"TriggerCharacter\";\r\n    CompletionTriggerKind[CompletionTriggerKind[\"TriggerForIncompleteCompletions\"] = 2] = \"TriggerForIncompleteCompletions\";\r\n})(CompletionTriggerKind || (CompletionTriggerKind = {}));\r\n/**\r\n * A positioning preference for rendering content widgets.\r\n */\r\nexport var ContentWidgetPositionPreference;\r\n(function (ContentWidgetPositionPreference) {\r\n    /**\r\n     * Place the content widget exactly at a position\r\n     */\r\n    ContentWidgetPositionPreference[ContentWidgetPositionPreference[\"EXACT\"] = 0] = \"EXACT\";\r\n    /**\r\n     * Place the content widget above a position\r\n     */\r\n    ContentWidgetPositionPreference[ContentWidgetPositionPreference[\"ABOVE\"] = 1] = \"ABOVE\";\r\n    /**\r\n     * Place the content widget below a position\r\n     */\r\n    ContentWidgetPositionPreference[ContentWidgetPositionPreference[\"BELOW\"] = 2] = \"BELOW\";\r\n})(ContentWidgetPositionPreference || (ContentWidgetPositionPreference = {}));\r\n/**\r\n * Describes the reason the cursor has changed its position.\r\n */\r\nexport var CursorChangeReason;\r\n(function (CursorChangeReason) {\r\n    /**\r\n     * Unknown or not set.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"NotSet\"] = 0] = \"NotSet\";\r\n    /**\r\n     * A `model.setValue()` was called.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"ContentFlush\"] = 1] = \"ContentFlush\";\r\n    /**\r\n     * The `model` has been changed outside of this cursor and the cursor recovers its position from associated markers.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"RecoverFromMarkers\"] = 2] = \"RecoverFromMarkers\";\r\n    /**\r\n     * There was an explicit user gesture.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"Explicit\"] = 3] = \"Explicit\";\r\n    /**\r\n     * There was a Paste.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"Paste\"] = 4] = \"Paste\";\r\n    /**\r\n     * There was an Undo.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"Undo\"] = 5] = \"Undo\";\r\n    /**\r\n     * There was a Redo.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"Redo\"] = 6] = \"Redo\";\r\n})(CursorChangeReason || (CursorChangeReason = {}));\r\n/**\r\n * The default end of line to use when instantiating models.\r\n */\r\nexport var DefaultEndOfLine;\r\n(function (DefaultEndOfLine) {\r\n    /**\r\n     * Use line feed (\\n) as the end of line character.\r\n     */\r\n    DefaultEndOfLine[DefaultEndOfLine[\"LF\"] = 1] = \"LF\";\r\n    /**\r\n     * Use carriage return and line feed (\\r\\n) as the end of line character.\r\n     */\r\n    DefaultEndOfLine[DefaultEndOfLine[\"CRLF\"] = 2] = \"CRLF\";\r\n})(DefaultEndOfLine || (DefaultEndOfLine = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind[DocumentHighlightKind[\"Text\"] = 0] = \"Text\";\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind[DocumentHighlightKind[\"Read\"] = 1] = \"Read\";\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind[DocumentHighlightKind[\"Write\"] = 2] = \"Write\";\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * Configuration options for auto indentation in the editor\r\n */\r\nexport var EditorAutoIndentStrategy;\r\n(function (EditorAutoIndentStrategy) {\r\n    EditorAutoIndentStrategy[EditorAutoIndentStrategy[\"None\"] = 0] = \"None\";\r\n    EditorAutoIndentStrategy[EditorAutoIndentStrategy[\"Keep\"] = 1] = \"Keep\";\r\n    EditorAutoIndentStrategy[EditorAutoIndentStrategy[\"Brackets\"] = 2] = \"Brackets\";\r\n    EditorAutoIndentStrategy[EditorAutoIndentStrategy[\"Advanced\"] = 3] = \"Advanced\";\r\n    EditorAutoIndentStrategy[EditorAutoIndentStrategy[\"Full\"] = 4] = \"Full\";\r\n})(EditorAutoIndentStrategy || (EditorAutoIndentStrategy = {}));\r\nexport var EditorOption;\r\n(function (EditorOption) {\r\n    EditorOption[EditorOption[\"acceptSuggestionOnCommitCharacter\"] = 0] = \"acceptSuggestionOnCommitCharacter\";\r\n    EditorOption[EditorOption[\"acceptSuggestionOnEnter\"] = 1] = \"acceptSuggestionOnEnter\";\r\n    EditorOption[EditorOption[\"accessibilitySupport\"] = 2] = \"accessibilitySupport\";\r\n    EditorOption[EditorOption[\"accessibilityPageSize\"] = 3] = \"accessibilityPageSize\";\r\n    EditorOption[EditorOption[\"ariaLabel\"] = 4] = \"ariaLabel\";\r\n    EditorOption[EditorOption[\"autoClosingBrackets\"] = 5] = \"autoClosingBrackets\";\r\n    EditorOption[EditorOption[\"autoClosingOvertype\"] = 6] = \"autoClosingOvertype\";\r\n    EditorOption[EditorOption[\"autoClosingQuotes\"] = 7] = \"autoClosingQuotes\";\r\n    EditorOption[EditorOption[\"autoIndent\"] = 8] = \"autoIndent\";\r\n    EditorOption[EditorOption[\"automaticLayout\"] = 9] = \"automaticLayout\";\r\n    EditorOption[EditorOption[\"autoSurround\"] = 10] = \"autoSurround\";\r\n    EditorOption[EditorOption[\"codeLens\"] = 11] = \"codeLens\";\r\n    EditorOption[EditorOption[\"colorDecorators\"] = 12] = \"colorDecorators\";\r\n    EditorOption[EditorOption[\"comments\"] = 13] = \"comments\";\r\n    EditorOption[EditorOption[\"contextmenu\"] = 14] = \"contextmenu\";\r\n    EditorOption[EditorOption[\"copyWithSyntaxHighlighting\"] = 15] = \"copyWithSyntaxHighlighting\";\r\n    EditorOption[EditorOption[\"cursorBlinking\"] = 16] = \"cursorBlinking\";\r\n    EditorOption[EditorOption[\"cursorSmoothCaretAnimation\"] = 17] = \"cursorSmoothCaretAnimation\";\r\n    EditorOption[EditorOption[\"cursorStyle\"] = 18] = \"cursorStyle\";\r\n    EditorOption[EditorOption[\"cursorSurroundingLines\"] = 19] = \"cursorSurroundingLines\";\r\n    EditorOption[EditorOption[\"cursorSurroundingLinesStyle\"] = 20] = \"cursorSurroundingLinesStyle\";\r\n    EditorOption[EditorOption[\"cursorWidth\"] = 21] = \"cursorWidth\";\r\n    EditorOption[EditorOption[\"disableLayerHinting\"] = 22] = \"disableLayerHinting\";\r\n    EditorOption[EditorOption[\"disableMonospaceOptimizations\"] = 23] = \"disableMonospaceOptimizations\";\r\n    EditorOption[EditorOption[\"dragAndDrop\"] = 24] = \"dragAndDrop\";\r\n    EditorOption[EditorOption[\"emptySelectionClipboard\"] = 25] = \"emptySelectionClipboard\";\r\n    EditorOption[EditorOption[\"extraEditorClassName\"] = 26] = \"extraEditorClassName\";\r\n    EditorOption[EditorOption[\"fastScrollSensitivity\"] = 27] = \"fastScrollSensitivity\";\r\n    EditorOption[EditorOption[\"find\"] = 28] = \"find\";\r\n    EditorOption[EditorOption[\"fixedOverflowWidgets\"] = 29] = \"fixedOverflowWidgets\";\r\n    EditorOption[EditorOption[\"folding\"] = 30] = \"folding\";\r\n    EditorOption[EditorOption[\"foldingStrategy\"] = 31] = \"foldingStrategy\";\r\n    EditorOption[EditorOption[\"foldingHighlight\"] = 32] = \"foldingHighlight\";\r\n    EditorOption[EditorOption[\"fontFamily\"] = 33] = \"fontFamily\";\r\n    EditorOption[EditorOption[\"fontInfo\"] = 34] = \"fontInfo\";\r\n    EditorOption[EditorOption[\"fontLigatures\"] = 35] = \"fontLigatures\";\r\n    EditorOption[EditorOption[\"fontSize\"] = 36] = \"fontSize\";\r\n    EditorOption[EditorOption[\"fontWeight\"] = 37] = \"fontWeight\";\r\n    EditorOption[EditorOption[\"formatOnPaste\"] = 38] = \"formatOnPaste\";\r\n    EditorOption[EditorOption[\"formatOnType\"] = 39] = \"formatOnType\";\r\n    EditorOption[EditorOption[\"glyphMargin\"] = 40] = \"glyphMargin\";\r\n    EditorOption[EditorOption[\"gotoLocation\"] = 41] = \"gotoLocation\";\r\n    EditorOption[EditorOption[\"hideCursorInOverviewRuler\"] = 42] = \"hideCursorInOverviewRuler\";\r\n    EditorOption[EditorOption[\"highlightActiveIndentGuide\"] = 43] = \"highlightActiveIndentGuide\";\r\n    EditorOption[EditorOption[\"hover\"] = 44] = \"hover\";\r\n    EditorOption[EditorOption[\"inDiffEditor\"] = 45] = \"inDiffEditor\";\r\n    EditorOption[EditorOption[\"letterSpacing\"] = 46] = \"letterSpacing\";\r\n    EditorOption[EditorOption[\"lightbulb\"] = 47] = \"lightbulb\";\r\n    EditorOption[EditorOption[\"lineDecorationsWidth\"] = 48] = \"lineDecorationsWidth\";\r\n    EditorOption[EditorOption[\"lineHeight\"] = 49] = \"lineHeight\";\r\n    EditorOption[EditorOption[\"lineNumbers\"] = 50] = \"lineNumbers\";\r\n    EditorOption[EditorOption[\"lineNumbersMinChars\"] = 51] = \"lineNumbersMinChars\";\r\n    EditorOption[EditorOption[\"links\"] = 52] = \"links\";\r\n    EditorOption[EditorOption[\"matchBrackets\"] = 53] = \"matchBrackets\";\r\n    EditorOption[EditorOption[\"minimap\"] = 54] = \"minimap\";\r\n    EditorOption[EditorOption[\"mouseStyle\"] = 55] = \"mouseStyle\";\r\n    EditorOption[EditorOption[\"mouseWheelScrollSensitivity\"] = 56] = \"mouseWheelScrollSensitivity\";\r\n    EditorOption[EditorOption[\"mouseWheelZoom\"] = 57] = \"mouseWheelZoom\";\r\n    EditorOption[EditorOption[\"multiCursorMergeOverlapping\"] = 58] = \"multiCursorMergeOverlapping\";\r\n    EditorOption[EditorOption[\"multiCursorModifier\"] = 59] = \"multiCursorModifier\";\r\n    EditorOption[EditorOption[\"multiCursorPaste\"] = 60] = \"multiCursorPaste\";\r\n    EditorOption[EditorOption[\"occurrencesHighlight\"] = 61] = \"occurrencesHighlight\";\r\n    EditorOption[EditorOption[\"overviewRulerBorder\"] = 62] = \"overviewRulerBorder\";\r\n    EditorOption[EditorOption[\"overviewRulerLanes\"] = 63] = \"overviewRulerLanes\";\r\n    EditorOption[EditorOption[\"parameterHints\"] = 64] = \"parameterHints\";\r\n    EditorOption[EditorOption[\"peekWidgetDefaultFocus\"] = 65] = \"peekWidgetDefaultFocus\";\r\n    EditorOption[EditorOption[\"quickSuggestions\"] = 66] = \"quickSuggestions\";\r\n    EditorOption[EditorOption[\"quickSuggestionsDelay\"] = 67] = \"quickSuggestionsDelay\";\r\n    EditorOption[EditorOption[\"readOnly\"] = 68] = \"readOnly\";\r\n    EditorOption[EditorOption[\"renderControlCharacters\"] = 69] = \"renderControlCharacters\";\r\n    EditorOption[EditorOption[\"renderIndentGuides\"] = 70] = \"renderIndentGuides\";\r\n    EditorOption[EditorOption[\"renderFinalNewline\"] = 71] = \"renderFinalNewline\";\r\n    EditorOption[EditorOption[\"renderLineHighlight\"] = 72] = \"renderLineHighlight\";\r\n    EditorOption[EditorOption[\"renderValidationDecorations\"] = 73] = \"renderValidationDecorations\";\r\n    EditorOption[EditorOption[\"renderWhitespace\"] = 74] = \"renderWhitespace\";\r\n    EditorOption[EditorOption[\"revealHorizontalRightPadding\"] = 75] = \"revealHorizontalRightPadding\";\r\n    EditorOption[EditorOption[\"roundedSelection\"] = 76] = \"roundedSelection\";\r\n    EditorOption[EditorOption[\"rulers\"] = 77] = \"rulers\";\r\n    EditorOption[EditorOption[\"scrollbar\"] = 78] = \"scrollbar\";\r\n    EditorOption[EditorOption[\"scrollBeyondLastColumn\"] = 79] = \"scrollBeyondLastColumn\";\r\n    EditorOption[EditorOption[\"scrollBeyondLastLine\"] = 80] = \"scrollBeyondLastLine\";\r\n    EditorOption[EditorOption[\"selectionClipboard\"] = 81] = \"selectionClipboard\";\r\n    EditorOption[EditorOption[\"selectionHighlight\"] = 82] = \"selectionHighlight\";\r\n    EditorOption[EditorOption[\"selectOnLineNumbers\"] = 83] = \"selectOnLineNumbers\";\r\n    EditorOption[EditorOption[\"showFoldingControls\"] = 84] = \"showFoldingControls\";\r\n    EditorOption[EditorOption[\"showUnused\"] = 85] = \"showUnused\";\r\n    EditorOption[EditorOption[\"snippetSuggestions\"] = 86] = \"snippetSuggestions\";\r\n    EditorOption[EditorOption[\"smoothScrolling\"] = 87] = \"smoothScrolling\";\r\n    EditorOption[EditorOption[\"stopRenderingLineAfter\"] = 88] = \"stopRenderingLineAfter\";\r\n    EditorOption[EditorOption[\"suggest\"] = 89] = \"suggest\";\r\n    EditorOption[EditorOption[\"suggestFontSize\"] = 90] = \"suggestFontSize\";\r\n    EditorOption[EditorOption[\"suggestLineHeight\"] = 91] = \"suggestLineHeight\";\r\n    EditorOption[EditorOption[\"suggestOnTriggerCharacters\"] = 92] = \"suggestOnTriggerCharacters\";\r\n    EditorOption[EditorOption[\"suggestSelection\"] = 93] = \"suggestSelection\";\r\n    EditorOption[EditorOption[\"tabCompletion\"] = 94] = \"tabCompletion\";\r\n    EditorOption[EditorOption[\"useTabStops\"] = 95] = \"useTabStops\";\r\n    EditorOption[EditorOption[\"wordSeparators\"] = 96] = \"wordSeparators\";\r\n    EditorOption[EditorOption[\"wordWrap\"] = 97] = \"wordWrap\";\r\n    EditorOption[EditorOption[\"wordWrapBreakAfterCharacters\"] = 98] = \"wordWrapBreakAfterCharacters\";\r\n    EditorOption[EditorOption[\"wordWrapBreakBeforeCharacters\"] = 99] = \"wordWrapBreakBeforeCharacters\";\r\n    EditorOption[EditorOption[\"wordWrapColumn\"] = 100] = \"wordWrapColumn\";\r\n    EditorOption[EditorOption[\"wordWrapMinified\"] = 101] = \"wordWrapMinified\";\r\n    EditorOption[EditorOption[\"wrappingIndent\"] = 102] = \"wrappingIndent\";\r\n    EditorOption[EditorOption[\"wrappingStrategy\"] = 103] = \"wrappingStrategy\";\r\n    EditorOption[EditorOption[\"editorClassName\"] = 104] = \"editorClassName\";\r\n    EditorOption[EditorOption[\"pixelRatio\"] = 105] = \"pixelRatio\";\r\n    EditorOption[EditorOption[\"tabFocusMode\"] = 106] = \"tabFocusMode\";\r\n    EditorOption[EditorOption[\"layoutInfo\"] = 107] = \"layoutInfo\";\r\n    EditorOption[EditorOption[\"wrappingInfo\"] = 108] = \"wrappingInfo\";\r\n})(EditorOption || (EditorOption = {}));\r\n/**\r\n * End of line character preference.\r\n */\r\nexport var EndOfLinePreference;\r\n(function (EndOfLinePreference) {\r\n    /**\r\n     * Use the end of line character identified in the text buffer.\r\n     */\r\n    EndOfLinePreference[EndOfLinePreference[\"TextDefined\"] = 0] = \"TextDefined\";\r\n    /**\r\n     * Use line feed (\\n) as the end of line character.\r\n     */\r\n    EndOfLinePreference[EndOfLinePreference[\"LF\"] = 1] = \"LF\";\r\n    /**\r\n     * Use carriage return and line feed (\\r\\n) as the end of line character.\r\n     */\r\n    EndOfLinePreference[EndOfLinePreference[\"CRLF\"] = 2] = \"CRLF\";\r\n})(EndOfLinePreference || (EndOfLinePreference = {}));\r\n/**\r\n * End of line character preference.\r\n */\r\nexport var EndOfLineSequence;\r\n(function (EndOfLineSequence) {\r\n    /**\r\n     * Use line feed (\\n) as the end of line character.\r\n     */\r\n    EndOfLineSequence[EndOfLineSequence[\"LF\"] = 0] = \"LF\";\r\n    /**\r\n     * Use carriage return and line feed (\\r\\n) as the end of line character.\r\n     */\r\n    EndOfLineSequence[EndOfLineSequence[\"CRLF\"] = 1] = \"CRLF\";\r\n})(EndOfLineSequence || (EndOfLineSequence = {}));\r\n/**\r\n * Describes what to do with the indentation when pressing Enter.\r\n */\r\nexport var IndentAction;\r\n(function (IndentAction) {\r\n    /**\r\n     * Insert new line and copy the previous line's indentation.\r\n     */\r\n    IndentAction[IndentAction[\"None\"] = 0] = \"None\";\r\n    /**\r\n     * Insert new line and indent once (relative to the previous line's indentation).\r\n     */\r\n    IndentAction[IndentAction[\"Indent\"] = 1] = \"Indent\";\r\n    /**\r\n     * Insert two new lines:\r\n     *  - the first one indented which will hold the cursor\r\n     *  - the second one at the same indentation level\r\n     */\r\n    IndentAction[IndentAction[\"IndentOutdent\"] = 2] = \"IndentOutdent\";\r\n    /**\r\n     * Insert new line and outdent once (relative to the previous line's indentation).\r\n     */\r\n    IndentAction[IndentAction[\"Outdent\"] = 3] = \"Outdent\";\r\n})(IndentAction || (IndentAction = {}));\r\n/**\r\n * Virtual Key Codes, the value does not hold any inherent meaning.\r\n * Inspired somewhat from https://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx\r\n * But these are \"more general\", as they should work across browsers & OS`s.\r\n */\r\nexport var KeyCode;\r\n(function (KeyCode) {\r\n    /**\r\n     * Placed first to cover the 0 value of the enum.\r\n     */\r\n    KeyCode[KeyCode[\"Unknown\"] = 0] = \"Unknown\";\r\n    KeyCode[KeyCode[\"Backspace\"] = 1] = \"Backspace\";\r\n    KeyCode[KeyCode[\"Tab\"] = 2] = \"Tab\";\r\n    KeyCode[KeyCode[\"Enter\"] = 3] = \"Enter\";\r\n    KeyCode[KeyCode[\"Shift\"] = 4] = \"Shift\";\r\n    KeyCode[KeyCode[\"Ctrl\"] = 5] = \"Ctrl\";\r\n    KeyCode[KeyCode[\"Alt\"] = 6] = \"Alt\";\r\n    KeyCode[KeyCode[\"PauseBreak\"] = 7] = \"PauseBreak\";\r\n    KeyCode[KeyCode[\"CapsLock\"] = 8] = \"CapsLock\";\r\n    KeyCode[KeyCode[\"Escape\"] = 9] = \"Escape\";\r\n    KeyCode[KeyCode[\"Space\"] = 10] = \"Space\";\r\n    KeyCode[KeyCode[\"PageUp\"] = 11] = \"PageUp\";\r\n    KeyCode[KeyCode[\"PageDown\"] = 12] = \"PageDown\";\r\n    KeyCode[KeyCode[\"End\"] = 13] = \"End\";\r\n    KeyCode[KeyCode[\"Home\"] = 14] = \"Home\";\r\n    KeyCode[KeyCode[\"LeftArrow\"] = 15] = \"LeftArrow\";\r\n    KeyCode[KeyCode[\"UpArrow\"] = 16] = \"UpArrow\";\r\n    KeyCode[KeyCode[\"RightArrow\"] = 17] = \"RightArrow\";\r\n    KeyCode[KeyCode[\"DownArrow\"] = 18] = \"DownArrow\";\r\n    KeyCode[KeyCode[\"Insert\"] = 19] = \"Insert\";\r\n    KeyCode[KeyCode[\"Delete\"] = 20] = \"Delete\";\r\n    KeyCode[KeyCode[\"KEY_0\"] = 21] = \"KEY_0\";\r\n    KeyCode[KeyCode[\"KEY_1\"] = 22] = \"KEY_1\";\r\n    KeyCode[KeyCode[\"KEY_2\"] = 23] = \"KEY_2\";\r\n    KeyCode[KeyCode[\"KEY_3\"] = 24] = \"KEY_3\";\r\n    KeyCode[KeyCode[\"KEY_4\"] = 25] = \"KEY_4\";\r\n    KeyCode[KeyCode[\"KEY_5\"] = 26] = \"KEY_5\";\r\n    KeyCode[KeyCode[\"KEY_6\"] = 27] = \"KEY_6\";\r\n    KeyCode[KeyCode[\"KEY_7\"] = 28] = \"KEY_7\";\r\n    KeyCode[KeyCode[\"KEY_8\"] = 29] = \"KEY_8\";\r\n    KeyCode[KeyCode[\"KEY_9\"] = 30] = \"KEY_9\";\r\n    KeyCode[KeyCode[\"KEY_A\"] = 31] = \"KEY_A\";\r\n    KeyCode[KeyCode[\"KEY_B\"] = 32] = \"KEY_B\";\r\n    KeyCode[KeyCode[\"KEY_C\"] = 33] = \"KEY_C\";\r\n    KeyCode[KeyCode[\"KEY_D\"] = 34] = \"KEY_D\";\r\n    KeyCode[KeyCode[\"KEY_E\"] = 35] = \"KEY_E\";\r\n    KeyCode[KeyCode[\"KEY_F\"] = 36] = \"KEY_F\";\r\n    KeyCode[KeyCode[\"KEY_G\"] = 37] = \"KEY_G\";\r\n    KeyCode[KeyCode[\"KEY_H\"] = 38] = \"KEY_H\";\r\n    KeyCode[KeyCode[\"KEY_I\"] = 39] = \"KEY_I\";\r\n    KeyCode[KeyCode[\"KEY_J\"] = 40] = \"KEY_J\";\r\n    KeyCode[KeyCode[\"KEY_K\"] = 41] = \"KEY_K\";\r\n    KeyCode[KeyCode[\"KEY_L\"] = 42] = \"KEY_L\";\r\n    KeyCode[KeyCode[\"KEY_M\"] = 43] = \"KEY_M\";\r\n    KeyCode[KeyCode[\"KEY_N\"] = 44] = \"KEY_N\";\r\n    KeyCode[KeyCode[\"KEY_O\"] = 45] = \"KEY_O\";\r\n    KeyCode[KeyCode[\"KEY_P\"] = 46] = \"KEY_P\";\r\n    KeyCode[KeyCode[\"KEY_Q\"] = 47] = \"KEY_Q\";\r\n    KeyCode[KeyCode[\"KEY_R\"] = 48] = \"KEY_R\";\r\n    KeyCode[KeyCode[\"KEY_S\"] = 49] = \"KEY_S\";\r\n    KeyCode[KeyCode[\"KEY_T\"] = 50] = \"KEY_T\";\r\n    KeyCode[KeyCode[\"KEY_U\"] = 51] = \"KEY_U\";\r\n    KeyCode[KeyCode[\"KEY_V\"] = 52] = \"KEY_V\";\r\n    KeyCode[KeyCode[\"KEY_W\"] = 53] = \"KEY_W\";\r\n    KeyCode[KeyCode[\"KEY_X\"] = 54] = \"KEY_X\";\r\n    KeyCode[KeyCode[\"KEY_Y\"] = 55] = \"KEY_Y\";\r\n    KeyCode[KeyCode[\"KEY_Z\"] = 56] = \"KEY_Z\";\r\n    KeyCode[KeyCode[\"Meta\"] = 57] = \"Meta\";\r\n    KeyCode[KeyCode[\"ContextMenu\"] = 58] = \"ContextMenu\";\r\n    KeyCode[KeyCode[\"F1\"] = 59] = \"F1\";\r\n    KeyCode[KeyCode[\"F2\"] = 60] = \"F2\";\r\n    KeyCode[KeyCode[\"F3\"] = 61] = \"F3\";\r\n    KeyCode[KeyCode[\"F4\"] = 62] = \"F4\";\r\n    KeyCode[KeyCode[\"F5\"] = 63] = \"F5\";\r\n    KeyCode[KeyCode[\"F6\"] = 64] = \"F6\";\r\n    KeyCode[KeyCode[\"F7\"] = 65] = \"F7\";\r\n    KeyCode[KeyCode[\"F8\"] = 66] = \"F8\";\r\n    KeyCode[KeyCode[\"F9\"] = 67] = \"F9\";\r\n    KeyCode[KeyCode[\"F10\"] = 68] = \"F10\";\r\n    KeyCode[KeyCode[\"F11\"] = 69] = \"F11\";\r\n    KeyCode[KeyCode[\"F12\"] = 70] = \"F12\";\r\n    KeyCode[KeyCode[\"F13\"] = 71] = \"F13\";\r\n    KeyCode[KeyCode[\"F14\"] = 72] = \"F14\";\r\n    KeyCode[KeyCode[\"F15\"] = 73] = \"F15\";\r\n    KeyCode[KeyCode[\"F16\"] = 74] = \"F16\";\r\n    KeyCode[KeyCode[\"F17\"] = 75] = \"F17\";\r\n    KeyCode[KeyCode[\"F18\"] = 76] = \"F18\";\r\n    KeyCode[KeyCode[\"F19\"] = 77] = \"F19\";\r\n    KeyCode[KeyCode[\"NumLock\"] = 78] = \"NumLock\";\r\n    KeyCode[KeyCode[\"ScrollLock\"] = 79] = \"ScrollLock\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the ';:' key\r\n     */\r\n    KeyCode[KeyCode[\"US_SEMICOLON\"] = 80] = \"US_SEMICOLON\";\r\n    /**\r\n     * For any country/region, the '+' key\r\n     * For the US standard keyboard, the '=+' key\r\n     */\r\n    KeyCode[KeyCode[\"US_EQUAL\"] = 81] = \"US_EQUAL\";\r\n    /**\r\n     * For any country/region, the ',' key\r\n     * For the US standard keyboard, the ',<' key\r\n     */\r\n    KeyCode[KeyCode[\"US_COMMA\"] = 82] = \"US_COMMA\";\r\n    /**\r\n     * For any country/region, the '-' key\r\n     * For the US standard keyboard, the '-_' key\r\n     */\r\n    KeyCode[KeyCode[\"US_MINUS\"] = 83] = \"US_MINUS\";\r\n    /**\r\n     * For any country/region, the '.' key\r\n     * For the US standard keyboard, the '.>' key\r\n     */\r\n    KeyCode[KeyCode[\"US_DOT\"] = 84] = \"US_DOT\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the '/?' key\r\n     */\r\n    KeyCode[KeyCode[\"US_SLASH\"] = 85] = \"US_SLASH\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the '`~' key\r\n     */\r\n    KeyCode[KeyCode[\"US_BACKTICK\"] = 86] = \"US_BACKTICK\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the '[{' key\r\n     */\r\n    KeyCode[KeyCode[\"US_OPEN_SQUARE_BRACKET\"] = 87] = \"US_OPEN_SQUARE_BRACKET\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the '\\|' key\r\n     */\r\n    KeyCode[KeyCode[\"US_BACKSLASH\"] = 88] = \"US_BACKSLASH\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the ']}' key\r\n     */\r\n    KeyCode[KeyCode[\"US_CLOSE_SQUARE_BRACKET\"] = 89] = \"US_CLOSE_SQUARE_BRACKET\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the ''\"' key\r\n     */\r\n    KeyCode[KeyCode[\"US_QUOTE\"] = 90] = \"US_QUOTE\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     */\r\n    KeyCode[KeyCode[\"OEM_8\"] = 91] = \"OEM_8\";\r\n    /**\r\n     * Either the angle bracket key or the backslash key on the RT 102-key keyboard.\r\n     */\r\n    KeyCode[KeyCode[\"OEM_102\"] = 92] = \"OEM_102\";\r\n    KeyCode[KeyCode[\"NUMPAD_0\"] = 93] = \"NUMPAD_0\";\r\n    KeyCode[KeyCode[\"NUMPAD_1\"] = 94] = \"NUMPAD_1\";\r\n    KeyCode[KeyCode[\"NUMPAD_2\"] = 95] = \"NUMPAD_2\";\r\n    KeyCode[KeyCode[\"NUMPAD_3\"] = 96] = \"NUMPAD_3\";\r\n    KeyCode[KeyCode[\"NUMPAD_4\"] = 97] = \"NUMPAD_4\";\r\n    KeyCode[KeyCode[\"NUMPAD_5\"] = 98] = \"NUMPAD_5\";\r\n    KeyCode[KeyCode[\"NUMPAD_6\"] = 99] = \"NUMPAD_6\";\r\n    KeyCode[KeyCode[\"NUMPAD_7\"] = 100] = \"NUMPAD_7\";\r\n    KeyCode[KeyCode[\"NUMPAD_8\"] = 101] = \"NUMPAD_8\";\r\n    KeyCode[KeyCode[\"NUMPAD_9\"] = 102] = \"NUMPAD_9\";\r\n    KeyCode[KeyCode[\"NUMPAD_MULTIPLY\"] = 103] = \"NUMPAD_MULTIPLY\";\r\n    KeyCode[KeyCode[\"NUMPAD_ADD\"] = 104] = \"NUMPAD_ADD\";\r\n    KeyCode[KeyCode[\"NUMPAD_SEPARATOR\"] = 105] = \"NUMPAD_SEPARATOR\";\r\n    KeyCode[KeyCode[\"NUMPAD_SUBTRACT\"] = 106] = \"NUMPAD_SUBTRACT\";\r\n    KeyCode[KeyCode[\"NUMPAD_DECIMAL\"] = 107] = \"NUMPAD_DECIMAL\";\r\n    KeyCode[KeyCode[\"NUMPAD_DIVIDE\"] = 108] = \"NUMPAD_DIVIDE\";\r\n    /**\r\n     * Cover all key codes when IME is processing input.\r\n     */\r\n    KeyCode[KeyCode[\"KEY_IN_COMPOSITION\"] = 109] = \"KEY_IN_COMPOSITION\";\r\n    KeyCode[KeyCode[\"ABNT_C1\"] = 110] = \"ABNT_C1\";\r\n    KeyCode[KeyCode[\"ABNT_C2\"] = 111] = \"ABNT_C2\";\r\n    /**\r\n     * Placed last to cover the length of the enum.\r\n     * Please do not depend on this value!\r\n     */\r\n    KeyCode[KeyCode[\"MAX_VALUE\"] = 112] = \"MAX_VALUE\";\r\n})(KeyCode || (KeyCode = {}));\r\nexport var MarkerSeverity;\r\n(function (MarkerSeverity) {\r\n    MarkerSeverity[MarkerSeverity[\"Hint\"] = 1] = \"Hint\";\r\n    MarkerSeverity[MarkerSeverity[\"Info\"] = 2] = \"Info\";\r\n    MarkerSeverity[MarkerSeverity[\"Warning\"] = 4] = \"Warning\";\r\n    MarkerSeverity[MarkerSeverity[\"Error\"] = 8] = \"Error\";\r\n})(MarkerSeverity || (MarkerSeverity = {}));\r\nexport var MarkerTag;\r\n(function (MarkerTag) {\r\n    MarkerTag[MarkerTag[\"Unnecessary\"] = 1] = \"Unnecessary\";\r\n    MarkerTag[MarkerTag[\"Deprecated\"] = 2] = \"Deprecated\";\r\n})(MarkerTag || (MarkerTag = {}));\r\n/**\r\n * Position in the minimap to render the decoration.\r\n */\r\nexport var MinimapPosition;\r\n(function (MinimapPosition) {\r\n    MinimapPosition[MinimapPosition[\"Inline\"] = 1] = \"Inline\";\r\n    MinimapPosition[MinimapPosition[\"Gutter\"] = 2] = \"Gutter\";\r\n})(MinimapPosition || (MinimapPosition = {}));\r\n/**\r\n * Type of hit element with the mouse in the editor.\r\n */\r\nexport var MouseTargetType;\r\n(function (MouseTargetType) {\r\n    /**\r\n     * Mouse is on top of an unknown element.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\r\n    /**\r\n     * Mouse is on top of the textarea used for input.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"TEXTAREA\"] = 1] = \"TEXTAREA\";\r\n    /**\r\n     * Mouse is on top of the glyph margin\r\n     */\r\n    MouseTargetType[MouseTargetType[\"GUTTER_GLYPH_MARGIN\"] = 2] = \"GUTTER_GLYPH_MARGIN\";\r\n    /**\r\n     * Mouse is on top of the line numbers\r\n     */\r\n    MouseTargetType[MouseTargetType[\"GUTTER_LINE_NUMBERS\"] = 3] = \"GUTTER_LINE_NUMBERS\";\r\n    /**\r\n     * Mouse is on top of the line decorations\r\n     */\r\n    MouseTargetType[MouseTargetType[\"GUTTER_LINE_DECORATIONS\"] = 4] = \"GUTTER_LINE_DECORATIONS\";\r\n    /**\r\n     * Mouse is on top of the whitespace left in the gutter by a view zone.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"GUTTER_VIEW_ZONE\"] = 5] = \"GUTTER_VIEW_ZONE\";\r\n    /**\r\n     * Mouse is on top of text in the content.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"CONTENT_TEXT\"] = 6] = \"CONTENT_TEXT\";\r\n    /**\r\n     * Mouse is on top of empty space in the content (e.g. after line text or below last line)\r\n     */\r\n    MouseTargetType[MouseTargetType[\"CONTENT_EMPTY\"] = 7] = \"CONTENT_EMPTY\";\r\n    /**\r\n     * Mouse is on top of a view zone in the content.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"CONTENT_VIEW_ZONE\"] = 8] = \"CONTENT_VIEW_ZONE\";\r\n    /**\r\n     * Mouse is on top of a content widget.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"CONTENT_WIDGET\"] = 9] = \"CONTENT_WIDGET\";\r\n    /**\r\n     * Mouse is on top of the decorations overview ruler.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"OVERVIEW_RULER\"] = 10] = \"OVERVIEW_RULER\";\r\n    /**\r\n     * Mouse is on top of a scrollbar.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"SCROLLBAR\"] = 11] = \"SCROLLBAR\";\r\n    /**\r\n     * Mouse is on top of an overlay widget.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"OVERLAY_WIDGET\"] = 12] = \"OVERLAY_WIDGET\";\r\n    /**\r\n     * Mouse is outside of the editor.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"OUTSIDE_EDITOR\"] = 13] = \"OUTSIDE_EDITOR\";\r\n})(MouseTargetType || (MouseTargetType = {}));\r\n/**\r\n * A positioning preference for rendering overlay widgets.\r\n */\r\nexport var OverlayWidgetPositionPreference;\r\n(function (OverlayWidgetPositionPreference) {\r\n    /**\r\n     * Position the overlay widget in the top right corner\r\n     */\r\n    OverlayWidgetPositionPreference[OverlayWidgetPositionPreference[\"TOP_RIGHT_CORNER\"] = 0] = \"TOP_RIGHT_CORNER\";\r\n    /**\r\n     * Position the overlay widget in the bottom right corner\r\n     */\r\n    OverlayWidgetPositionPreference[OverlayWidgetPositionPreference[\"BOTTOM_RIGHT_CORNER\"] = 1] = \"BOTTOM_RIGHT_CORNER\";\r\n    /**\r\n     * Position the overlay widget in the top center\r\n     */\r\n    OverlayWidgetPositionPreference[OverlayWidgetPositionPreference[\"TOP_CENTER\"] = 2] = \"TOP_CENTER\";\r\n})(OverlayWidgetPositionPreference || (OverlayWidgetPositionPreference = {}));\r\n/**\r\n * Vertical Lane in the overview ruler of the editor.\r\n */\r\nexport var OverviewRulerLane;\r\n(function (OverviewRulerLane) {\r\n    OverviewRulerLane[OverviewRulerLane[\"Left\"] = 1] = \"Left\";\r\n    OverviewRulerLane[OverviewRulerLane[\"Center\"] = 2] = \"Center\";\r\n    OverviewRulerLane[OverviewRulerLane[\"Right\"] = 4] = \"Right\";\r\n    OverviewRulerLane[OverviewRulerLane[\"Full\"] = 7] = \"Full\";\r\n})(OverviewRulerLane || (OverviewRulerLane = {}));\r\nexport var RenderLineNumbersType;\r\n(function (RenderLineNumbersType) {\r\n    RenderLineNumbersType[RenderLineNumbersType[\"Off\"] = 0] = \"Off\";\r\n    RenderLineNumbersType[RenderLineNumbersType[\"On\"] = 1] = \"On\";\r\n    RenderLineNumbersType[RenderLineNumbersType[\"Relative\"] = 2] = \"Relative\";\r\n    RenderLineNumbersType[RenderLineNumbersType[\"Interval\"] = 3] = \"Interval\";\r\n    RenderLineNumbersType[RenderLineNumbersType[\"Custom\"] = 4] = \"Custom\";\r\n})(RenderLineNumbersType || (RenderLineNumbersType = {}));\r\nexport var RenderMinimap;\r\n(function (RenderMinimap) {\r\n    RenderMinimap[RenderMinimap[\"None\"] = 0] = \"None\";\r\n    RenderMinimap[RenderMinimap[\"Text\"] = 1] = \"Text\";\r\n    RenderMinimap[RenderMinimap[\"Blocks\"] = 2] = \"Blocks\";\r\n})(RenderMinimap || (RenderMinimap = {}));\r\nexport var ScrollType;\r\n(function (ScrollType) {\r\n    ScrollType[ScrollType[\"Smooth\"] = 0] = \"Smooth\";\r\n    ScrollType[ScrollType[\"Immediate\"] = 1] = \"Immediate\";\r\n})(ScrollType || (ScrollType = {}));\r\nexport var ScrollbarVisibility;\r\n(function (ScrollbarVisibility) {\r\n    ScrollbarVisibility[ScrollbarVisibility[\"Auto\"] = 1] = \"Auto\";\r\n    ScrollbarVisibility[ScrollbarVisibility[\"Hidden\"] = 2] = \"Hidden\";\r\n    ScrollbarVisibility[ScrollbarVisibility[\"Visible\"] = 3] = \"Visible\";\r\n})(ScrollbarVisibility || (ScrollbarVisibility = {}));\r\n/**\r\n * The direction of a selection.\r\n */\r\nexport var SelectionDirection;\r\n(function (SelectionDirection) {\r\n    /**\r\n     * The selection starts above where it ends.\r\n     */\r\n    SelectionDirection[SelectionDirection[\"LTR\"] = 0] = \"LTR\";\r\n    /**\r\n     * The selection starts below where it ends.\r\n     */\r\n    SelectionDirection[SelectionDirection[\"RTL\"] = 1] = \"RTL\";\r\n})(SelectionDirection || (SelectionDirection = {}));\r\nexport var SignatureHelpTriggerKind;\r\n(function (SignatureHelpTriggerKind) {\r\n    SignatureHelpTriggerKind[SignatureHelpTriggerKind[\"Invoke\"] = 1] = \"Invoke\";\r\n    SignatureHelpTriggerKind[SignatureHelpTriggerKind[\"TriggerCharacter\"] = 2] = \"TriggerCharacter\";\r\n    SignatureHelpTriggerKind[SignatureHelpTriggerKind[\"ContentChange\"] = 3] = \"ContentChange\";\r\n})(SignatureHelpTriggerKind || (SignatureHelpTriggerKind = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind[SymbolKind[\"File\"] = 0] = \"File\";\r\n    SymbolKind[SymbolKind[\"Module\"] = 1] = \"Module\";\r\n    SymbolKind[SymbolKind[\"Namespace\"] = 2] = \"Namespace\";\r\n    SymbolKind[SymbolKind[\"Package\"] = 3] = \"Package\";\r\n    SymbolKind[SymbolKind[\"Class\"] = 4] = \"Class\";\r\n    SymbolKind[SymbolKind[\"Method\"] = 5] = \"Method\";\r\n    SymbolKind[SymbolKind[\"Property\"] = 6] = \"Property\";\r\n    SymbolKind[SymbolKind[\"Field\"] = 7] = \"Field\";\r\n    SymbolKind[SymbolKind[\"Constructor\"] = 8] = \"Constructor\";\r\n    SymbolKind[SymbolKind[\"Enum\"] = 9] = \"Enum\";\r\n    SymbolKind[SymbolKind[\"Interface\"] = 10] = \"Interface\";\r\n    SymbolKind[SymbolKind[\"Function\"] = 11] = \"Function\";\r\n    SymbolKind[SymbolKind[\"Variable\"] = 12] = \"Variable\";\r\n    SymbolKind[SymbolKind[\"Constant\"] = 13] = \"Constant\";\r\n    SymbolKind[SymbolKind[\"String\"] = 14] = \"String\";\r\n    SymbolKind[SymbolKind[\"Number\"] = 15] = \"Number\";\r\n    SymbolKind[SymbolKind[\"Boolean\"] = 16] = \"Boolean\";\r\n    SymbolKind[SymbolKind[\"Array\"] = 17] = \"Array\";\r\n    SymbolKind[SymbolKind[\"Object\"] = 18] = \"Object\";\r\n    SymbolKind[SymbolKind[\"Key\"] = 19] = \"Key\";\r\n    SymbolKind[SymbolKind[\"Null\"] = 20] = \"Null\";\r\n    SymbolKind[SymbolKind[\"EnumMember\"] = 21] = \"EnumMember\";\r\n    SymbolKind[SymbolKind[\"Struct\"] = 22] = \"Struct\";\r\n    SymbolKind[SymbolKind[\"Event\"] = 23] = \"Event\";\r\n    SymbolKind[SymbolKind[\"Operator\"] = 24] = \"Operator\";\r\n    SymbolKind[SymbolKind[\"TypeParameter\"] = 25] = \"TypeParameter\";\r\n})(SymbolKind || (SymbolKind = {}));\r\nexport var SymbolTag;\r\n(function (SymbolTag) {\r\n    SymbolTag[SymbolTag[\"Deprecated\"] = 1] = \"Deprecated\";\r\n})(SymbolTag || (SymbolTag = {}));\r\n/**\r\n * The kind of animation in which the editor's cursor should be rendered.\r\n */\r\nexport var TextEditorCursorBlinkingStyle;\r\n(function (TextEditorCursorBlinkingStyle) {\r\n    /**\r\n     * Hidden\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Hidden\"] = 0] = \"Hidden\";\r\n    /**\r\n     * Blinking\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Blink\"] = 1] = \"Blink\";\r\n    /**\r\n     * Blinking with smooth fading\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Smooth\"] = 2] = \"Smooth\";\r\n    /**\r\n     * Blinking with prolonged filled state and smooth fading\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Phase\"] = 3] = \"Phase\";\r\n    /**\r\n     * Expand collapse animation on the y axis\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Expand\"] = 4] = \"Expand\";\r\n    /**\r\n     * No-Blinking\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Solid\"] = 5] = \"Solid\";\r\n})(TextEditorCursorBlinkingStyle || (TextEditorCursorBlinkingStyle = {}));\r\n/**\r\n * The style in which the editor's cursor should be rendered.\r\n */\r\nexport var TextEditorCursorStyle;\r\n(function (TextEditorCursorStyle) {\r\n    /**\r\n     * As a vertical line (sitting between two characters).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"Line\"] = 1] = \"Line\";\r\n    /**\r\n     * As a block (sitting on top of a character).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"Block\"] = 2] = \"Block\";\r\n    /**\r\n     * As a horizontal line (sitting under a character).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"Underline\"] = 3] = \"Underline\";\r\n    /**\r\n     * As a thin vertical line (sitting between two characters).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"LineThin\"] = 4] = \"LineThin\";\r\n    /**\r\n     * As an outlined block (sitting on top of a character).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"BlockOutline\"] = 5] = \"BlockOutline\";\r\n    /**\r\n     * As a thin horizontal line (sitting under a character).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"UnderlineThin\"] = 6] = \"UnderlineThin\";\r\n})(TextEditorCursorStyle || (TextEditorCursorStyle = {}));\r\n/**\r\n * Describes the behavior of decorations when typing/editing near their edges.\r\n * Note: Please do not edit the values, as they very carefully match `DecorationRangeBehavior`\r\n */\r\nexport var TrackedRangeStickiness;\r\n(function (TrackedRangeStickiness) {\r\n    TrackedRangeStickiness[TrackedRangeStickiness[\"AlwaysGrowsWhenTypingAtEdges\"] = 0] = \"AlwaysGrowsWhenTypingAtEdges\";\r\n    TrackedRangeStickiness[TrackedRangeStickiness[\"NeverGrowsWhenTypingAtEdges\"] = 1] = \"NeverGrowsWhenTypingAtEdges\";\r\n    TrackedRangeStickiness[TrackedRangeStickiness[\"GrowsOnlyWhenTypingBefore\"] = 2] = \"GrowsOnlyWhenTypingBefore\";\r\n    TrackedRangeStickiness[TrackedRangeStickiness[\"GrowsOnlyWhenTypingAfter\"] = 3] = \"GrowsOnlyWhenTypingAfter\";\r\n})(TrackedRangeStickiness || (TrackedRangeStickiness = {}));\r\n/**\r\n * Describes how to indent wrapped lines.\r\n */\r\nexport var WrappingIndent;\r\n(function (WrappingIndent) {\r\n    /**\r\n     * No indentation => wrapped lines begin at column 1.\r\n     */\r\n    WrappingIndent[WrappingIndent[\"None\"] = 0] = \"None\";\r\n    /**\r\n     * Same => wrapped lines get the same indentation as the parent.\r\n     */\r\n    WrappingIndent[WrappingIndent[\"Same\"] = 1] = \"Same\";\r\n    /**\r\n     * Indent => wrapped lines get +1 indentation toward the parent.\r\n     */\r\n    WrappingIndent[WrappingIndent[\"Indent\"] = 2] = \"Indent\";\r\n    /**\r\n     * DeepIndent => wrapped lines get +2 indentation toward the parent.\r\n     */\r\n    WrappingIndent[WrappingIndent[\"DeepIndent\"] = 3] = \"DeepIndent\";\r\n})(WrappingIndent || (WrappingIndent = {}));\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './promise-polyfill/polyfill.js';\r\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { KeyChord } from '../../../base/common/keyCodes.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { Position } from '../core/position.js';\r\nimport { Range } from '../core/range.js';\r\nimport { Selection } from '../core/selection.js';\r\nimport { Token } from '../core/token.js';\r\nimport * as standaloneEnums from './standaloneEnums.js';\r\nvar KeyMod = /** @class */ (function () {\r\n    function KeyMod() {\r\n    }\r\n    KeyMod.chord = function (firstPart, secondPart) {\r\n        return KeyChord(firstPart, secondPart);\r\n    };\r\n    KeyMod.CtrlCmd = 2048 /* CtrlCmd */;\r\n    KeyMod.Shift = 1024 /* Shift */;\r\n    KeyMod.Alt = 512 /* Alt */;\r\n    KeyMod.WinCtrl = 256 /* WinCtrl */;\r\n    return KeyMod;\r\n}());\r\nexport { KeyMod };\r\nexport function createMonacoBaseAPI() {\r\n    return {\r\n        editor: undefined,\r\n        languages: undefined,\r\n        CancellationTokenSource: CancellationTokenSource,\r\n        Emitter: Emitter,\r\n        KeyCode: standaloneEnums.KeyCode,\r\n        KeyMod: KeyMod,\r\n        Position: Position,\r\n        Range: Range,\r\n        Selection: Selection,\r\n        SelectionDirection: standaloneEnums.SelectionDirection,\r\n        MarkerSeverity: standaloneEnums.MarkerSeverity,\r\n        MarkerTag: standaloneEnums.MarkerTag,\r\n        Uri: URI,\r\n        Token: Token\r\n    };\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport var EditorOpenContext;\r\n(function (EditorOpenContext) {\r\n    /**\r\n     * Default: the editor is opening via a programmatic call\r\n     * to the editor service API.\r\n     */\r\n    EditorOpenContext[EditorOpenContext[\"API\"] = 0] = \"API\";\r\n    /**\r\n     * Indicates that a user action triggered the opening, e.g.\r\n     * via mouse or keyboard use.\r\n     */\r\n    EditorOpenContext[EditorOpenContext[\"USER\"] = 1] = \"USER\";\r\n})(EditorOpenContext || (EditorOpenContext = {}));\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { LinkedList } from '../../../base/common/linkedList.js';\r\nimport { parse } from '../../../base/common/marshalling.js';\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { normalizePath } from '../../../base/common/resources.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { ICodeEditorService } from './codeEditorService.js';\r\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { matchesScheme } from '../../../platform/opener/common/opener.js';\r\nimport { EditorOpenContext } from '../../../platform/editor/common/editor.js';\r\nvar CommandOpener = /** @class */ (function () {\r\n    function CommandOpener(_commandService) {\r\n        this._commandService = _commandService;\r\n    }\r\n    CommandOpener.prototype.open = function (target) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var args;\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (!matchesScheme(target, Schemas.command)) {\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        // run command or bail out if command isn't known\r\n                        if (typeof target === 'string') {\r\n                            target = URI.parse(target);\r\n                        }\r\n                        if (!CommandsRegistry.getCommand(target.path)) {\r\n                            throw new Error(\"command '\" + target.path + \"' NOT known\");\r\n                        }\r\n                        args = [];\r\n                        try {\r\n                            args = parse(decodeURIComponent(target.query));\r\n                        }\r\n                        catch (_c) {\r\n                            // ignore and retry\r\n                            try {\r\n                                args = parse(target.query);\r\n                            }\r\n                            catch (_d) {\r\n                                // ignore error\r\n                            }\r\n                        }\r\n                        if (!Array.isArray(args)) {\r\n                            args = [args];\r\n                        }\r\n                        return [4 /*yield*/, (_a = this._commandService).executeCommand.apply(_a, __spreadArrays([target.path], args))];\r\n                    case 1:\r\n                        _b.sent();\r\n                        return [2 /*return*/, true];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    CommandOpener = __decorate([\r\n        __param(0, ICommandService)\r\n    ], CommandOpener);\r\n    return CommandOpener;\r\n}());\r\nvar EditorOpener = /** @class */ (function () {\r\n    function EditorOpener(_editorService) {\r\n        this._editorService = _editorService;\r\n    }\r\n    EditorOpener.prototype.open = function (target, options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var selection, match;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (typeof target === 'string') {\r\n                            target = URI.parse(target);\r\n                        }\r\n                        selection = undefined;\r\n                        match = /^L?(\\d+)(?:,(\\d+))?/.exec(target.fragment);\r\n                        if (match) {\r\n                            // support file:///some/file.js#73,84\r\n                            // support file:///some/file.js#L73\r\n                            selection = {\r\n                                startLineNumber: parseInt(match[1]),\r\n                                startColumn: match[2] ? parseInt(match[2]) : 1\r\n                            };\r\n                            // remove fragment\r\n                            target = target.with({ fragment: '' });\r\n                        }\r\n                        if (target.scheme === Schemas.file) {\r\n                            target = normalizePath(target); // workaround for non-normalized paths (https://github.com/Microsoft/vscode/issues/12954)\r\n                        }\r\n                        return [4 /*yield*/, this._editorService.openCodeEditor({ resource: target, options: { selection: selection, context: (options === null || options === void 0 ? void 0 : options.fromUserGesture) ? EditorOpenContext.USER : EditorOpenContext.API } }, this._editorService.getFocusedCodeEditor(), options === null || options === void 0 ? void 0 : options.openToSide)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/, true];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    EditorOpener = __decorate([\r\n        __param(0, ICodeEditorService)\r\n    ], EditorOpener);\r\n    return EditorOpener;\r\n}());\r\nvar OpenerService = /** @class */ (function () {\r\n    function OpenerService(editorService, commandService) {\r\n        var _this = this;\r\n        this._openers = new LinkedList();\r\n        this._validators = new LinkedList();\r\n        this._resolvers = new LinkedList();\r\n        // Default external opener is going through window.open()\r\n        this._externalOpener = {\r\n            openExternal: function (href) {\r\n                dom.windowOpenNoOpener(href);\r\n                return Promise.resolve(true);\r\n            }\r\n        };\r\n        // Default opener: maito, http(s), command, and catch-all-editors\r\n        this._openers.push({\r\n            open: function (target, options) { return __awaiter(_this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if (!((options === null || options === void 0 ? void 0 : options.openExternal) || matchesScheme(target, Schemas.mailto) || matchesScheme(target, Schemas.http) || matchesScheme(target, Schemas.https))) return [3 /*break*/, 2];\r\n                            // open externally\r\n                            return [4 /*yield*/, this._doOpenExternal(target, options)];\r\n                        case 1:\r\n                            // open externally\r\n                            _a.sent();\r\n                            return [2 /*return*/, true];\r\n                        case 2: return [2 /*return*/, false];\r\n                    }\r\n                });\r\n            }); }\r\n        });\r\n        this._openers.push(new CommandOpener(commandService));\r\n        this._openers.push(new EditorOpener(editorService));\r\n    }\r\n    OpenerService.prototype.open = function (target, options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _i, _a, validator, _b, _c, opener_1, handled;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        _i = 0, _a = this._validators.toArray();\r\n                        _d.label = 1;\r\n                    case 1:\r\n                        if (!(_i < _a.length)) return [3 /*break*/, 4];\r\n                        validator = _a[_i];\r\n                        return [4 /*yield*/, validator.shouldOpen(target)];\r\n                    case 2:\r\n                        if (!(_d.sent())) {\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        _d.label = 3;\r\n                    case 3:\r\n                        _i++;\r\n                        return [3 /*break*/, 1];\r\n                    case 4:\r\n                        _b = 0, _c = this._openers.toArray();\r\n                        _d.label = 5;\r\n                    case 5:\r\n                        if (!(_b < _c.length)) return [3 /*break*/, 8];\r\n                        opener_1 = _c[_b];\r\n                        return [4 /*yield*/, opener_1.open(target, options)];\r\n                    case 6:\r\n                        handled = _d.sent();\r\n                        if (handled) {\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        _d.label = 7;\r\n                    case 7:\r\n                        _b++;\r\n                        return [3 /*break*/, 5];\r\n                    case 8: return [2 /*return*/, false];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OpenerService.prototype.resolveExternalUri = function (resource, options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _i, _a, resolver, result;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _i = 0, _a = this._resolvers.toArray();\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        if (!(_i < _a.length)) return [3 /*break*/, 4];\r\n                        resolver = _a[_i];\r\n                        return [4 /*yield*/, resolver.resolveExternalUri(resource, options)];\r\n                    case 2:\r\n                        result = _b.sent();\r\n                        if (result) {\r\n                            return [2 /*return*/, result];\r\n                        }\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        _i++;\r\n                        return [3 /*break*/, 1];\r\n                    case 4: return [2 /*return*/, { resolved: resource, dispose: function () { } }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OpenerService.prototype._doOpenExternal = function (resource, options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var uri, resolved;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        uri = typeof resource === 'string' ? URI.parse(resource) : resource;\r\n                        return [4 /*yield*/, this.resolveExternalUri(uri, options)];\r\n                    case 1:\r\n                        resolved = (_a.sent()).resolved;\r\n                        if (typeof resource === 'string' && uri.toString() === resolved.toString()) {\r\n                            // open the url-string AS IS\r\n                            return [2 /*return*/, this._externalOpener.openExternal(resource)];\r\n                        }\r\n                        else {\r\n                            // open URI using the toString(noEncode)+encodeURI-trick\r\n                            return [2 /*return*/, this._externalOpener.openExternal(encodeURI(resolved.toString(true)))];\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OpenerService.prototype.dispose = function () {\r\n        this._validators.clear();\r\n    };\r\n    OpenerService = __decorate([\r\n        __param(0, ICodeEditorService),\r\n        __param(1, ICommandService)\r\n    ], OpenerService);\r\n    return OpenerService;\r\n}());\r\nexport { OpenerService };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as assert from '../../../base/common/assert.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport * as objects from '../../../base/common/objects.js';\r\nimport { Range } from '../../common/core/range.js';\r\nvar defaultOptions = {\r\n    followsCaret: true,\r\n    ignoreCharChanges: true,\r\n    alwaysRevealFirst: true\r\n};\r\n/**\r\n * Create a new diff navigator for the provided diff editor.\r\n */\r\nvar DiffNavigator = /** @class */ (function (_super) {\r\n    __extends(DiffNavigator, _super);\r\n    function DiffNavigator(editor, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this) || this;\r\n        _this._onDidUpdate = _this._register(new Emitter());\r\n        _this._editor = editor;\r\n        _this._options = objects.mixin(options, defaultOptions, false);\r\n        _this.disposed = false;\r\n        _this.nextIdx = -1;\r\n        _this.ranges = [];\r\n        _this.ignoreSelectionChange = false;\r\n        _this.revealFirst = Boolean(_this._options.alwaysRevealFirst);\r\n        // hook up to diff editor for diff, disposal, and caret move\r\n        _this._register(_this._editor.onDidDispose(function () { return _this.dispose(); }));\r\n        _this._register(_this._editor.onDidUpdateDiff(function () { return _this._onDiffUpdated(); }));\r\n        if (_this._options.followsCaret) {\r\n            _this._register(_this._editor.getModifiedEditor().onDidChangeCursorPosition(function (e) {\r\n                if (_this.ignoreSelectionChange) {\r\n                    return;\r\n                }\r\n                _this.nextIdx = -1;\r\n            }));\r\n        }\r\n        if (_this._options.alwaysRevealFirst) {\r\n            _this._register(_this._editor.getModifiedEditor().onDidChangeModel(function (e) {\r\n                _this.revealFirst = true;\r\n            }));\r\n        }\r\n        // init things\r\n        _this._init();\r\n        return _this;\r\n    }\r\n    DiffNavigator.prototype._init = function () {\r\n        var changes = this._editor.getLineChanges();\r\n        if (!changes) {\r\n            return;\r\n        }\r\n    };\r\n    DiffNavigator.prototype._onDiffUpdated = function () {\r\n        this._init();\r\n        this._compute(this._editor.getLineChanges());\r\n        if (this.revealFirst) {\r\n            // Only reveal first on first non-null changes\r\n            if (this._editor.getLineChanges() !== null) {\r\n                this.revealFirst = false;\r\n                this.nextIdx = -1;\r\n                this.next(1 /* Immediate */);\r\n            }\r\n        }\r\n    };\r\n    DiffNavigator.prototype._compute = function (lineChanges) {\r\n        var _this = this;\r\n        // new ranges\r\n        this.ranges = [];\r\n        if (lineChanges) {\r\n            // create ranges from changes\r\n            lineChanges.forEach(function (lineChange) {\r\n                if (!_this._options.ignoreCharChanges && lineChange.charChanges) {\r\n                    lineChange.charChanges.forEach(function (charChange) {\r\n                        _this.ranges.push({\r\n                            rhs: true,\r\n                            range: new Range(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn)\r\n                        });\r\n                    });\r\n                }\r\n                else {\r\n                    _this.ranges.push({\r\n                        rhs: true,\r\n                        range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedStartLineNumber, 1)\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        // sort\r\n        this.ranges.sort(function (left, right) {\r\n            if (left.range.getStartPosition().isBeforeOrEqual(right.range.getStartPosition())) {\r\n                return -1;\r\n            }\r\n            else if (right.range.getStartPosition().isBeforeOrEqual(left.range.getStartPosition())) {\r\n                return 1;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        });\r\n        this._onDidUpdate.fire(this);\r\n    };\r\n    DiffNavigator.prototype._initIdx = function (fwd) {\r\n        var found = false;\r\n        var position = this._editor.getPosition();\r\n        if (!position) {\r\n            this.nextIdx = 0;\r\n            return;\r\n        }\r\n        for (var i = 0, len = this.ranges.length; i < len && !found; i++) {\r\n            var range = this.ranges[i].range;\r\n            if (position.isBeforeOrEqual(range.getStartPosition())) {\r\n                this.nextIdx = i + (fwd ? 0 : -1);\r\n                found = true;\r\n            }\r\n        }\r\n        if (!found) {\r\n            // after the last change\r\n            this.nextIdx = fwd ? 0 : this.ranges.length - 1;\r\n        }\r\n        if (this.nextIdx < 0) {\r\n            this.nextIdx = this.ranges.length - 1;\r\n        }\r\n    };\r\n    DiffNavigator.prototype._move = function (fwd, scrollType) {\r\n        assert.ok(!this.disposed, 'Illegal State - diff navigator has been disposed');\r\n        if (!this.canNavigate()) {\r\n            return;\r\n        }\r\n        if (this.nextIdx === -1) {\r\n            this._initIdx(fwd);\r\n        }\r\n        else if (fwd) {\r\n            this.nextIdx += 1;\r\n            if (this.nextIdx >= this.ranges.length) {\r\n                this.nextIdx = 0;\r\n            }\r\n        }\r\n        else {\r\n            this.nextIdx -= 1;\r\n            if (this.nextIdx < 0) {\r\n                this.nextIdx = this.ranges.length - 1;\r\n            }\r\n        }\r\n        var info = this.ranges[this.nextIdx];\r\n        this.ignoreSelectionChange = true;\r\n        try {\r\n            var pos = info.range.getStartPosition();\r\n            this._editor.setPosition(pos);\r\n            this._editor.revealPositionInCenter(pos, scrollType);\r\n        }\r\n        finally {\r\n            this.ignoreSelectionChange = false;\r\n        }\r\n    };\r\n    DiffNavigator.prototype.canNavigate = function () {\r\n        return this.ranges && this.ranges.length > 0;\r\n    };\r\n    DiffNavigator.prototype.next = function (scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._move(true, scrollType);\r\n    };\r\n    DiffNavigator.prototype.previous = function (scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._move(false, scrollType);\r\n    };\r\n    DiffNavigator.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this.ranges = [];\r\n        this.disposed = true;\r\n    };\r\n    return DiffNavigator;\r\n}(Disposable));\r\nexport { DiffNavigator };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { transformErrorForSerialization } from '../errors.js';\r\nimport { Disposable } from '../lifecycle.js';\r\nimport { isWeb } from '../platform.js';\r\nimport * as types from '../types.js';\r\nvar INITIALIZE = '$initialize';\r\nvar webWorkerWarningLogged = false;\r\nexport function logOnceWebWorkerWarning(err) {\r\n    if (!isWeb) {\r\n        // running tests\r\n        return;\r\n    }\r\n    if (!webWorkerWarningLogged) {\r\n        webWorkerWarningLogged = true;\r\n        console.warn('Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/Microsoft/monaco-editor#faq');\r\n    }\r\n    console.warn(err.message);\r\n}\r\nvar SimpleWorkerProtocol = /** @class */ (function () {\r\n    function SimpleWorkerProtocol(handler) {\r\n        this._workerId = -1;\r\n        this._handler = handler;\r\n        this._lastSentReq = 0;\r\n        this._pendingReplies = Object.create(null);\r\n    }\r\n    SimpleWorkerProtocol.prototype.setWorkerId = function (workerId) {\r\n        this._workerId = workerId;\r\n    };\r\n    SimpleWorkerProtocol.prototype.sendMessage = function (method, args) {\r\n        var _this = this;\r\n        var req = String(++this._lastSentReq);\r\n        return new Promise(function (resolve, reject) {\r\n            _this._pendingReplies[req] = {\r\n                resolve: resolve,\r\n                reject: reject\r\n            };\r\n            _this._send({\r\n                vsWorker: _this._workerId,\r\n                req: req,\r\n                method: method,\r\n                args: args\r\n            });\r\n        });\r\n    };\r\n    SimpleWorkerProtocol.prototype.handleMessage = function (message) {\r\n        if (!message || !message.vsWorker) {\r\n            return;\r\n        }\r\n        if (this._workerId !== -1 && message.vsWorker !== this._workerId) {\r\n            return;\r\n        }\r\n        this._handleMessage(message);\r\n    };\r\n    SimpleWorkerProtocol.prototype._handleMessage = function (msg) {\r\n        var _this = this;\r\n        if (msg.seq) {\r\n            var replyMessage = msg;\r\n            if (!this._pendingReplies[replyMessage.seq]) {\r\n                console.warn('Got reply to unknown seq');\r\n                return;\r\n            }\r\n            var reply = this._pendingReplies[replyMessage.seq];\r\n            delete this._pendingReplies[replyMessage.seq];\r\n            if (replyMessage.err) {\r\n                var err = replyMessage.err;\r\n                if (replyMessage.err.$isError) {\r\n                    err = new Error();\r\n                    err.name = replyMessage.err.name;\r\n                    err.message = replyMessage.err.message;\r\n                    err.stack = replyMessage.err.stack;\r\n                }\r\n                reply.reject(err);\r\n                return;\r\n            }\r\n            reply.resolve(replyMessage.res);\r\n            return;\r\n        }\r\n        var requestMessage = msg;\r\n        var req = requestMessage.req;\r\n        var result = this._handler.handleMessage(requestMessage.method, requestMessage.args);\r\n        result.then(function (r) {\r\n            _this._send({\r\n                vsWorker: _this._workerId,\r\n                seq: req,\r\n                res: r,\r\n                err: undefined\r\n            });\r\n        }, function (e) {\r\n            if (e.detail instanceof Error) {\r\n                // Loading errors have a detail property that points to the actual error\r\n                e.detail = transformErrorForSerialization(e.detail);\r\n            }\r\n            _this._send({\r\n                vsWorker: _this._workerId,\r\n                seq: req,\r\n                res: undefined,\r\n                err: transformErrorForSerialization(e)\r\n            });\r\n        });\r\n    };\r\n    SimpleWorkerProtocol.prototype._send = function (msg) {\r\n        var transfer = [];\r\n        if (msg.req) {\r\n            var m = msg;\r\n            for (var i = 0; i < m.args.length; i++) {\r\n                if (m.args[i] instanceof ArrayBuffer) {\r\n                    transfer.push(m.args[i]);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var m = msg;\r\n            if (m.res instanceof ArrayBuffer) {\r\n                transfer.push(m.res);\r\n            }\r\n        }\r\n        this._handler.sendMessage(msg, transfer);\r\n    };\r\n    return SimpleWorkerProtocol;\r\n}());\r\n/**\r\n * Main thread side\r\n */\r\nvar SimpleWorkerClient = /** @class */ (function (_super) {\r\n    __extends(SimpleWorkerClient, _super);\r\n    function SimpleWorkerClient(workerFactory, moduleId, host) {\r\n        var _this = _super.call(this) || this;\r\n        var lazyProxyReject = null;\r\n        _this._worker = _this._register(workerFactory.create('vs/base/common/worker/simpleWorker', function (msg) {\r\n            _this._protocol.handleMessage(msg);\r\n        }, function (err) {\r\n            // in Firefox, web workers fail lazily :(\r\n            // we will reject the proxy\r\n            if (lazyProxyReject) {\r\n                lazyProxyReject(err);\r\n            }\r\n        }));\r\n        _this._protocol = new SimpleWorkerProtocol({\r\n            sendMessage: function (msg, transfer) {\r\n                _this._worker.postMessage(msg, transfer);\r\n            },\r\n            handleMessage: function (method, args) {\r\n                if (typeof host[method] !== 'function') {\r\n                    return Promise.reject(new Error('Missing method ' + method + ' on main thread host.'));\r\n                }\r\n                try {\r\n                    return Promise.resolve(host[method].apply(host, args));\r\n                }\r\n                catch (e) {\r\n                    return Promise.reject(e);\r\n                }\r\n            }\r\n        });\r\n        _this._protocol.setWorkerId(_this._worker.getId());\r\n        // Gather loader configuration\r\n        var loaderConfiguration = null;\r\n        if (typeof self.require !== 'undefined' && typeof self.require.getConfig === 'function') {\r\n            // Get the configuration from the Monaco AMD Loader\r\n            loaderConfiguration = self.require.getConfig();\r\n        }\r\n        else if (typeof self.requirejs !== 'undefined') {\r\n            // Get the configuration from requirejs\r\n            loaderConfiguration = self.requirejs.s.contexts._.config;\r\n        }\r\n        var hostMethods = types.getAllMethodNames(host);\r\n        // Send initialize message\r\n        _this._onModuleLoaded = _this._protocol.sendMessage(INITIALIZE, [\r\n            _this._worker.getId(),\r\n            JSON.parse(JSON.stringify(loaderConfiguration)),\r\n            moduleId,\r\n            hostMethods,\r\n        ]);\r\n        // Create proxy to loaded code\r\n        var proxyMethodRequest = function (method, args) {\r\n            return _this._request(method, args);\r\n        };\r\n        _this._lazyProxy = new Promise(function (resolve, reject) {\r\n            lazyProxyReject = reject;\r\n            _this._onModuleLoaded.then(function (availableMethods) {\r\n                resolve(types.createProxyObject(availableMethods, proxyMethodRequest));\r\n            }, function (e) {\r\n                reject(e);\r\n                _this._onError('Worker failed to load ' + moduleId, e);\r\n            });\r\n        });\r\n        return _this;\r\n    }\r\n    SimpleWorkerClient.prototype.getProxyObject = function () {\r\n        return this._lazyProxy;\r\n    };\r\n    SimpleWorkerClient.prototype._request = function (method, args) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            _this._onModuleLoaded.then(function () {\r\n                _this._protocol.sendMessage(method, args).then(resolve, reject);\r\n            }, reject);\r\n        });\r\n    };\r\n    SimpleWorkerClient.prototype._onError = function (message, error) {\r\n        console.error(message);\r\n        console.info(error);\r\n    };\r\n    return SimpleWorkerClient;\r\n}(Disposable));\r\nexport { SimpleWorkerClient };\r\n/**\r\n * Worker side\r\n */\r\nvar SimpleWorkerServer = /** @class */ (function () {\r\n    function SimpleWorkerServer(postMessage, requestHandlerFactory) {\r\n        var _this = this;\r\n        this._requestHandlerFactory = requestHandlerFactory;\r\n        this._requestHandler = null;\r\n        this._protocol = new SimpleWorkerProtocol({\r\n            sendMessage: function (msg, transfer) {\r\n                postMessage(msg, transfer);\r\n            },\r\n            handleMessage: function (method, args) { return _this._handleMessage(method, args); }\r\n        });\r\n    }\r\n    SimpleWorkerServer.prototype.onmessage = function (msg) {\r\n        this._protocol.handleMessage(msg);\r\n    };\r\n    SimpleWorkerServer.prototype._handleMessage = function (method, args) {\r\n        if (method === INITIALIZE) {\r\n            return this.initialize(args[0], args[1], args[2], args[3]);\r\n        }\r\n        if (!this._requestHandler || typeof this._requestHandler[method] !== 'function') {\r\n            return Promise.reject(new Error('Missing requestHandler or method: ' + method));\r\n        }\r\n        try {\r\n            return Promise.resolve(this._requestHandler[method].apply(this._requestHandler, args));\r\n        }\r\n        catch (e) {\r\n            return Promise.reject(e);\r\n        }\r\n    };\r\n    SimpleWorkerServer.prototype.initialize = function (workerId, loaderConfig, moduleId, hostMethods) {\r\n        var _this = this;\r\n        this._protocol.setWorkerId(workerId);\r\n        var proxyMethodRequest = function (method, args) {\r\n            return _this._protocol.sendMessage(method, args);\r\n        };\r\n        var hostProxy = types.createProxyObject(hostMethods, proxyMethodRequest);\r\n        if (this._requestHandlerFactory) {\r\n            // static request handler\r\n            this._requestHandler = this._requestHandlerFactory(hostProxy);\r\n            return Promise.resolve(types.getAllMethodNames(this._requestHandler));\r\n        }\r\n        if (loaderConfig) {\r\n            // Remove 'baseUrl', handling it is beyond scope for now\r\n            if (typeof loaderConfig.baseUrl !== 'undefined') {\r\n                delete loaderConfig['baseUrl'];\r\n            }\r\n            if (typeof loaderConfig.paths !== 'undefined') {\r\n                if (typeof loaderConfig.paths.vs !== 'undefined') {\r\n                    delete loaderConfig.paths['vs'];\r\n                }\r\n            }\r\n            // Since this is in a web worker, enable catching errors\r\n            loaderConfig.catchError = true;\r\n            self.require.config(loaderConfig);\r\n        }\r\n        return new Promise(function (resolve, reject) {\r\n            // Use the global require to be sure to get the global config\r\n            self.require([moduleId], function (module) {\r\n                _this._requestHandler = module.create(hostProxy);\r\n                if (!_this._requestHandler) {\r\n                    reject(new Error(\"No RequestHandler!\"));\r\n                    return;\r\n                }\r\n                resolve(types.getAllMethodNames(_this._requestHandler));\r\n            }, reject);\r\n        });\r\n    };\r\n    return SimpleWorkerServer;\r\n}());\r\nexport { SimpleWorkerServer };\r\n/**\r\n * Called on the worker side\r\n */\r\nexport function create(postMessage) {\r\n    return new SimpleWorkerServer(postMessage, null);\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { globals } from '../common/platform.js';\r\nimport { logOnceWebWorkerWarning } from '../common/worker/simpleWorker.js';\r\nfunction getWorker(workerId, label) {\r\n    // Option for hosts to overwrite the worker script (used in the standalone editor)\r\n    if (globals.MonacoEnvironment) {\r\n        if (typeof globals.MonacoEnvironment.getWorker === 'function') {\r\n            return globals.MonacoEnvironment.getWorker(workerId, label);\r\n        }\r\n        if (typeof globals.MonacoEnvironment.getWorkerUrl === 'function') {\r\n            return new Worker(globals.MonacoEnvironment.getWorkerUrl(workerId, label));\r\n        }\r\n    }\r\n    // ESM-comment-begin\r\n    // \tif (typeof require === 'function') {\r\n    // \t\t// check if the JS lives on a different origin\r\n    // \t\tconst workerMain = require.toUrl('./' + workerId);\r\n    // \t\tconst workerUrl = getWorkerBootstrapUrl(workerMain, label);\r\n    // \t\treturn new Worker(workerUrl, { name: label });\r\n    // \t}\r\n    // ESM-comment-end\r\n    throw new Error(\"You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker\");\r\n}\r\n// ESM-comment-begin\r\n// export function getWorkerBootstrapUrl(scriptPath: string, label: string): string {\r\n// \tif (/^(http:)|(https:)|(file:)/.test(scriptPath)) {\r\n// \t\tconst currentUrl = String(window.location);\r\n// \t\tconst currentOrigin = currentUrl.substr(0, currentUrl.length - window.location.hash.length - window.location.search.length - window.location.pathname.length);\r\n// \t\tif (scriptPath.substring(0, currentOrigin.length) !== currentOrigin) {\r\n// \t\t\t// this is the cross-origin case\r\n// \t\t\t// i.e. the webpage is running at a different origin than where the scripts are loaded from\r\n// \t\t\tconst myPath = 'vs/base/worker/defaultWorkerFactory.js';\r\n// \t\t\tconst workerBaseUrl = require.toUrl(myPath).slice(0, -myPath.length);\r\n// \t\t\tconst js = `/*${label}*/self.MonacoEnvironment={baseUrl: '${workerBaseUrl}'};importScripts('${scriptPath}');/*${label}*/`;\r\n// \t\t\tconst url = `data:text/javascript;charset=utf-8,${encodeURIComponent(js)}`;\r\n// \t\t\treturn url;\r\n// \t\t}\r\n// \t}\r\n// \treturn scriptPath + '#' + label;\r\n// }\r\n// ESM-comment-end\r\nfunction isPromiseLike(obj) {\r\n    if (typeof obj.then === 'function') {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * A worker that uses HTML5 web workers so that is has\r\n * its own global scope and its own thread.\r\n */\r\nvar WebWorker = /** @class */ (function () {\r\n    function WebWorker(moduleId, id, label, onMessageCallback, onErrorCallback) {\r\n        this.id = id;\r\n        var workerOrPromise = getWorker('workerMain.js', label);\r\n        if (isPromiseLike(workerOrPromise)) {\r\n            this.worker = workerOrPromise;\r\n        }\r\n        else {\r\n            this.worker = Promise.resolve(workerOrPromise);\r\n        }\r\n        this.postMessage(moduleId, []);\r\n        this.worker.then(function (w) {\r\n            w.onmessage = function (ev) {\r\n                onMessageCallback(ev.data);\r\n            };\r\n            w.onmessageerror = onErrorCallback;\r\n            if (typeof w.addEventListener === 'function') {\r\n                w.addEventListener('error', onErrorCallback);\r\n            }\r\n        });\r\n    }\r\n    WebWorker.prototype.getId = function () {\r\n        return this.id;\r\n    };\r\n    WebWorker.prototype.postMessage = function (message, transfer) {\r\n        if (this.worker) {\r\n            this.worker.then(function (w) { return w.postMessage(message, transfer); });\r\n        }\r\n    };\r\n    WebWorker.prototype.dispose = function () {\r\n        if (this.worker) {\r\n            this.worker.then(function (w) { return w.terminate(); });\r\n        }\r\n        this.worker = null;\r\n    };\r\n    return WebWorker;\r\n}());\r\nvar DefaultWorkerFactory = /** @class */ (function () {\r\n    function DefaultWorkerFactory(label) {\r\n        this._label = label;\r\n        this._webWorkerFailedBeforeError = false;\r\n    }\r\n    DefaultWorkerFactory.prototype.create = function (moduleId, onMessageCallback, onErrorCallback) {\r\n        var _this = this;\r\n        var workerId = (++DefaultWorkerFactory.LAST_WORKER_ID);\r\n        if (this._webWorkerFailedBeforeError) {\r\n            throw this._webWorkerFailedBeforeError;\r\n        }\r\n        return new WebWorker(moduleId, workerId, this._label || 'anonymous' + workerId, onMessageCallback, function (err) {\r\n            logOnceWebWorkerWarning(err);\r\n            _this._webWorkerFailedBeforeError = err;\r\n            onErrorCallback(err);\r\n        });\r\n    };\r\n    DefaultWorkerFactory.LAST_WORKER_ID = 0;\r\n    return DefaultWorkerFactory;\r\n}());\r\nexport { DefaultWorkerFactory };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { LcsDiff } from '../../../base/common/diff/diff.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nvar MINIMUM_MATCHING_CHARACTER_LENGTH = 3;\r\nfunction computeDiff(originalSequence, modifiedSequence, continueProcessingPredicate, pretty) {\r\n    var diffAlgo = new LcsDiff(originalSequence, modifiedSequence, continueProcessingPredicate);\r\n    return diffAlgo.ComputeDiff(pretty);\r\n}\r\nvar LineSequence = /** @class */ (function () {\r\n    function LineSequence(lines) {\r\n        var startColumns = [];\r\n        var endColumns = [];\r\n        for (var i = 0, length_1 = lines.length; i < length_1; i++) {\r\n            startColumns[i] = getFirstNonBlankColumn(lines[i], 1);\r\n            endColumns[i] = getLastNonBlankColumn(lines[i], 1);\r\n        }\r\n        this.lines = lines;\r\n        this._startColumns = startColumns;\r\n        this._endColumns = endColumns;\r\n    }\r\n    LineSequence.prototype.getElements = function () {\r\n        var elements = [];\r\n        for (var i = 0, len = this.lines.length; i < len; i++) {\r\n            elements[i] = this.lines[i].substring(this._startColumns[i] - 1, this._endColumns[i] - 1);\r\n        }\r\n        return elements;\r\n    };\r\n    LineSequence.prototype.getStartLineNumber = function (i) {\r\n        return i + 1;\r\n    };\r\n    LineSequence.prototype.getEndLineNumber = function (i) {\r\n        return i + 1;\r\n    };\r\n    LineSequence.prototype.createCharSequence = function (shouldIgnoreTrimWhitespace, startIndex, endIndex) {\r\n        var charCodes = [];\r\n        var lineNumbers = [];\r\n        var columns = [];\r\n        var len = 0;\r\n        for (var index = startIndex; index <= endIndex; index++) {\r\n            var lineContent = this.lines[index];\r\n            var startColumn = (shouldIgnoreTrimWhitespace ? this._startColumns[index] : 1);\r\n            var endColumn = (shouldIgnoreTrimWhitespace ? this._endColumns[index] : lineContent.length + 1);\r\n            for (var col = startColumn; col < endColumn; col++) {\r\n                charCodes[len] = lineContent.charCodeAt(col - 1);\r\n                lineNumbers[len] = index + 1;\r\n                columns[len] = col;\r\n                len++;\r\n            }\r\n        }\r\n        return new CharSequence(charCodes, lineNumbers, columns);\r\n    };\r\n    return LineSequence;\r\n}());\r\nvar CharSequence = /** @class */ (function () {\r\n    function CharSequence(charCodes, lineNumbers, columns) {\r\n        this._charCodes = charCodes;\r\n        this._lineNumbers = lineNumbers;\r\n        this._columns = columns;\r\n    }\r\n    CharSequence.prototype.getElements = function () {\r\n        return this._charCodes;\r\n    };\r\n    CharSequence.prototype.getStartLineNumber = function (i) {\r\n        return this._lineNumbers[i];\r\n    };\r\n    CharSequence.prototype.getStartColumn = function (i) {\r\n        return this._columns[i];\r\n    };\r\n    CharSequence.prototype.getEndLineNumber = function (i) {\r\n        return this._lineNumbers[i];\r\n    };\r\n    CharSequence.prototype.getEndColumn = function (i) {\r\n        return this._columns[i] + 1;\r\n    };\r\n    return CharSequence;\r\n}());\r\nvar CharChange = /** @class */ (function () {\r\n    function CharChange(originalStartLineNumber, originalStartColumn, originalEndLineNumber, originalEndColumn, modifiedStartLineNumber, modifiedStartColumn, modifiedEndLineNumber, modifiedEndColumn) {\r\n        this.originalStartLineNumber = originalStartLineNumber;\r\n        this.originalStartColumn = originalStartColumn;\r\n        this.originalEndLineNumber = originalEndLineNumber;\r\n        this.originalEndColumn = originalEndColumn;\r\n        this.modifiedStartLineNumber = modifiedStartLineNumber;\r\n        this.modifiedStartColumn = modifiedStartColumn;\r\n        this.modifiedEndLineNumber = modifiedEndLineNumber;\r\n        this.modifiedEndColumn = modifiedEndColumn;\r\n    }\r\n    CharChange.createFromDiffChange = function (diffChange, originalCharSequence, modifiedCharSequence) {\r\n        var originalStartLineNumber;\r\n        var originalStartColumn;\r\n        var originalEndLineNumber;\r\n        var originalEndColumn;\r\n        var modifiedStartLineNumber;\r\n        var modifiedStartColumn;\r\n        var modifiedEndLineNumber;\r\n        var modifiedEndColumn;\r\n        if (diffChange.originalLength === 0) {\r\n            originalStartLineNumber = 0;\r\n            originalStartColumn = 0;\r\n            originalEndLineNumber = 0;\r\n            originalEndColumn = 0;\r\n        }\r\n        else {\r\n            originalStartLineNumber = originalCharSequence.getStartLineNumber(diffChange.originalStart);\r\n            originalStartColumn = originalCharSequence.getStartColumn(diffChange.originalStart);\r\n            originalEndLineNumber = originalCharSequence.getEndLineNumber(diffChange.originalStart + diffChange.originalLength - 1);\r\n            originalEndColumn = originalCharSequence.getEndColumn(diffChange.originalStart + diffChange.originalLength - 1);\r\n        }\r\n        if (diffChange.modifiedLength === 0) {\r\n            modifiedStartLineNumber = 0;\r\n            modifiedStartColumn = 0;\r\n            modifiedEndLineNumber = 0;\r\n            modifiedEndColumn = 0;\r\n        }\r\n        else {\r\n            modifiedStartLineNumber = modifiedCharSequence.getStartLineNumber(diffChange.modifiedStart);\r\n            modifiedStartColumn = modifiedCharSequence.getStartColumn(diffChange.modifiedStart);\r\n            modifiedEndLineNumber = modifiedCharSequence.getEndLineNumber(diffChange.modifiedStart + diffChange.modifiedLength - 1);\r\n            modifiedEndColumn = modifiedCharSequence.getEndColumn(diffChange.modifiedStart + diffChange.modifiedLength - 1);\r\n        }\r\n        return new CharChange(originalStartLineNumber, originalStartColumn, originalEndLineNumber, originalEndColumn, modifiedStartLineNumber, modifiedStartColumn, modifiedEndLineNumber, modifiedEndColumn);\r\n    };\r\n    return CharChange;\r\n}());\r\nfunction postProcessCharChanges(rawChanges) {\r\n    if (rawChanges.length <= 1) {\r\n        return rawChanges;\r\n    }\r\n    var result = [rawChanges[0]];\r\n    var prevChange = result[0];\r\n    for (var i = 1, len = rawChanges.length; i < len; i++) {\r\n        var currChange = rawChanges[i];\r\n        var originalMatchingLength = currChange.originalStart - (prevChange.originalStart + prevChange.originalLength);\r\n        var modifiedMatchingLength = currChange.modifiedStart - (prevChange.modifiedStart + prevChange.modifiedLength);\r\n        // Both of the above should be equal, but the continueProcessingPredicate may prevent this from being true\r\n        var matchingLength = Math.min(originalMatchingLength, modifiedMatchingLength);\r\n        if (matchingLength < MINIMUM_MATCHING_CHARACTER_LENGTH) {\r\n            // Merge the current change into the previous one\r\n            prevChange.originalLength = (currChange.originalStart + currChange.originalLength) - prevChange.originalStart;\r\n            prevChange.modifiedLength = (currChange.modifiedStart + currChange.modifiedLength) - prevChange.modifiedStart;\r\n        }\r\n        else {\r\n            // Add the current change\r\n            result.push(currChange);\r\n            prevChange = currChange;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nvar LineChange = /** @class */ (function () {\r\n    function LineChange(originalStartLineNumber, originalEndLineNumber, modifiedStartLineNumber, modifiedEndLineNumber, charChanges) {\r\n        this.originalStartLineNumber = originalStartLineNumber;\r\n        this.originalEndLineNumber = originalEndLineNumber;\r\n        this.modifiedStartLineNumber = modifiedStartLineNumber;\r\n        this.modifiedEndLineNumber = modifiedEndLineNumber;\r\n        this.charChanges = charChanges;\r\n    }\r\n    LineChange.createFromDiffResult = function (shouldIgnoreTrimWhitespace, diffChange, originalLineSequence, modifiedLineSequence, continueCharDiff, shouldComputeCharChanges, shouldPostProcessCharChanges) {\r\n        var originalStartLineNumber;\r\n        var originalEndLineNumber;\r\n        var modifiedStartLineNumber;\r\n        var modifiedEndLineNumber;\r\n        var charChanges = undefined;\r\n        if (diffChange.originalLength === 0) {\r\n            originalStartLineNumber = originalLineSequence.getStartLineNumber(diffChange.originalStart) - 1;\r\n            originalEndLineNumber = 0;\r\n        }\r\n        else {\r\n            originalStartLineNumber = originalLineSequence.getStartLineNumber(diffChange.originalStart);\r\n            originalEndLineNumber = originalLineSequence.getEndLineNumber(diffChange.originalStart + diffChange.originalLength - 1);\r\n        }\r\n        if (diffChange.modifiedLength === 0) {\r\n            modifiedStartLineNumber = modifiedLineSequence.getStartLineNumber(diffChange.modifiedStart) - 1;\r\n            modifiedEndLineNumber = 0;\r\n        }\r\n        else {\r\n            modifiedStartLineNumber = modifiedLineSequence.getStartLineNumber(diffChange.modifiedStart);\r\n            modifiedEndLineNumber = modifiedLineSequence.getEndLineNumber(diffChange.modifiedStart + diffChange.modifiedLength - 1);\r\n        }\r\n        if (shouldComputeCharChanges && diffChange.originalLength > 0 && diffChange.originalLength < 20 && diffChange.modifiedLength > 0 && diffChange.modifiedLength < 20 && continueCharDiff()) {\r\n            // Compute character changes for diff chunks of at most 20 lines...\r\n            var originalCharSequence = originalLineSequence.createCharSequence(shouldIgnoreTrimWhitespace, diffChange.originalStart, diffChange.originalStart + diffChange.originalLength - 1);\r\n            var modifiedCharSequence = modifiedLineSequence.createCharSequence(shouldIgnoreTrimWhitespace, diffChange.modifiedStart, diffChange.modifiedStart + diffChange.modifiedLength - 1);\r\n            var rawChanges = computeDiff(originalCharSequence, modifiedCharSequence, continueCharDiff, true).changes;\r\n            if (shouldPostProcessCharChanges) {\r\n                rawChanges = postProcessCharChanges(rawChanges);\r\n            }\r\n            charChanges = [];\r\n            for (var i = 0, length_2 = rawChanges.length; i < length_2; i++) {\r\n                charChanges.push(CharChange.createFromDiffChange(rawChanges[i], originalCharSequence, modifiedCharSequence));\r\n            }\r\n        }\r\n        return new LineChange(originalStartLineNumber, originalEndLineNumber, modifiedStartLineNumber, modifiedEndLineNumber, charChanges);\r\n    };\r\n    return LineChange;\r\n}());\r\nvar DiffComputer = /** @class */ (function () {\r\n    function DiffComputer(originalLines, modifiedLines, opts) {\r\n        this.shouldComputeCharChanges = opts.shouldComputeCharChanges;\r\n        this.shouldPostProcessCharChanges = opts.shouldPostProcessCharChanges;\r\n        this.shouldIgnoreTrimWhitespace = opts.shouldIgnoreTrimWhitespace;\r\n        this.shouldMakePrettyDiff = opts.shouldMakePrettyDiff;\r\n        this.originalLines = originalLines;\r\n        this.modifiedLines = modifiedLines;\r\n        this.original = new LineSequence(originalLines);\r\n        this.modified = new LineSequence(modifiedLines);\r\n        this.continueLineDiff = createContinueProcessingPredicate(opts.maxComputationTime);\r\n        this.continueCharDiff = createContinueProcessingPredicate(opts.maxComputationTime === 0 ? 0 : Math.min(opts.maxComputationTime, 5000)); // never run after 5s for character changes...\r\n    }\r\n    DiffComputer.prototype.computeDiff = function () {\r\n        if (this.original.lines.length === 1 && this.original.lines[0].length === 0) {\r\n            // empty original => fast path\r\n            return {\r\n                quitEarly: false,\r\n                changes: [{\r\n                        originalStartLineNumber: 1,\r\n                        originalEndLineNumber: 1,\r\n                        modifiedStartLineNumber: 1,\r\n                        modifiedEndLineNumber: this.modified.lines.length,\r\n                        charChanges: [{\r\n                                modifiedEndColumn: 0,\r\n                                modifiedEndLineNumber: 0,\r\n                                modifiedStartColumn: 0,\r\n                                modifiedStartLineNumber: 0,\r\n                                originalEndColumn: 0,\r\n                                originalEndLineNumber: 0,\r\n                                originalStartColumn: 0,\r\n                                originalStartLineNumber: 0\r\n                            }]\r\n                    }]\r\n            };\r\n        }\r\n        if (this.modified.lines.length === 1 && this.modified.lines[0].length === 0) {\r\n            // empty modified => fast path\r\n            return {\r\n                quitEarly: false,\r\n                changes: [{\r\n                        originalStartLineNumber: 1,\r\n                        originalEndLineNumber: this.original.lines.length,\r\n                        modifiedStartLineNumber: 1,\r\n                        modifiedEndLineNumber: 1,\r\n                        charChanges: [{\r\n                                modifiedEndColumn: 0,\r\n                                modifiedEndLineNumber: 0,\r\n                                modifiedStartColumn: 0,\r\n                                modifiedStartLineNumber: 0,\r\n                                originalEndColumn: 0,\r\n                                originalEndLineNumber: 0,\r\n                                originalStartColumn: 0,\r\n                                originalStartLineNumber: 0\r\n                            }]\r\n                    }]\r\n            };\r\n        }\r\n        var diffResult = computeDiff(this.original, this.modified, this.continueLineDiff, this.shouldMakePrettyDiff);\r\n        var rawChanges = diffResult.changes;\r\n        var quitEarly = diffResult.quitEarly;\r\n        // The diff is always computed with ignoring trim whitespace\r\n        // This ensures we get the prettiest diff\r\n        if (this.shouldIgnoreTrimWhitespace) {\r\n            var lineChanges = [];\r\n            for (var i = 0, length_3 = rawChanges.length; i < length_3; i++) {\r\n                lineChanges.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace, rawChanges[i], this.original, this.modified, this.continueCharDiff, this.shouldComputeCharChanges, this.shouldPostProcessCharChanges));\r\n            }\r\n            return {\r\n                quitEarly: quitEarly,\r\n                changes: lineChanges\r\n            };\r\n        }\r\n        // Need to post-process and introduce changes where the trim whitespace is different\r\n        // Note that we are looping starting at -1 to also cover the lines before the first change\r\n        var result = [];\r\n        var originalLineIndex = 0;\r\n        var modifiedLineIndex = 0;\r\n        for (var i = -1 /* !!!! */, len = rawChanges.length; i < len; i++) {\r\n            var nextChange = (i + 1 < len ? rawChanges[i + 1] : null);\r\n            var originalStop = (nextChange ? nextChange.originalStart : this.originalLines.length);\r\n            var modifiedStop = (nextChange ? nextChange.modifiedStart : this.modifiedLines.length);\r\n            while (originalLineIndex < originalStop && modifiedLineIndex < modifiedStop) {\r\n                var originalLine = this.originalLines[originalLineIndex];\r\n                var modifiedLine = this.modifiedLines[modifiedLineIndex];\r\n                if (originalLine !== modifiedLine) {\r\n                    // These lines differ only in trim whitespace\r\n                    // Check the leading whitespace\r\n                    {\r\n                        var originalStartColumn = getFirstNonBlankColumn(originalLine, 1);\r\n                        var modifiedStartColumn = getFirstNonBlankColumn(modifiedLine, 1);\r\n                        while (originalStartColumn > 1 && modifiedStartColumn > 1) {\r\n                            var originalChar = originalLine.charCodeAt(originalStartColumn - 2);\r\n                            var modifiedChar = modifiedLine.charCodeAt(modifiedStartColumn - 2);\r\n                            if (originalChar !== modifiedChar) {\r\n                                break;\r\n                            }\r\n                            originalStartColumn--;\r\n                            modifiedStartColumn--;\r\n                        }\r\n                        if (originalStartColumn > 1 || modifiedStartColumn > 1) {\r\n                            this._pushTrimWhitespaceCharChange(result, originalLineIndex + 1, 1, originalStartColumn, modifiedLineIndex + 1, 1, modifiedStartColumn);\r\n                        }\r\n                    }\r\n                    // Check the trailing whitespace\r\n                    {\r\n                        var originalEndColumn = getLastNonBlankColumn(originalLine, 1);\r\n                        var modifiedEndColumn = getLastNonBlankColumn(modifiedLine, 1);\r\n                        var originalMaxColumn = originalLine.length + 1;\r\n                        var modifiedMaxColumn = modifiedLine.length + 1;\r\n                        while (originalEndColumn < originalMaxColumn && modifiedEndColumn < modifiedMaxColumn) {\r\n                            var originalChar = originalLine.charCodeAt(originalEndColumn - 1);\r\n                            var modifiedChar = originalLine.charCodeAt(modifiedEndColumn - 1);\r\n                            if (originalChar !== modifiedChar) {\r\n                                break;\r\n                            }\r\n                            originalEndColumn++;\r\n                            modifiedEndColumn++;\r\n                        }\r\n                        if (originalEndColumn < originalMaxColumn || modifiedEndColumn < modifiedMaxColumn) {\r\n                            this._pushTrimWhitespaceCharChange(result, originalLineIndex + 1, originalEndColumn, originalMaxColumn, modifiedLineIndex + 1, modifiedEndColumn, modifiedMaxColumn);\r\n                        }\r\n                    }\r\n                }\r\n                originalLineIndex++;\r\n                modifiedLineIndex++;\r\n            }\r\n            if (nextChange) {\r\n                // Emit the actual change\r\n                result.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace, nextChange, this.original, this.modified, this.continueCharDiff, this.shouldComputeCharChanges, this.shouldPostProcessCharChanges));\r\n                originalLineIndex += nextChange.originalLength;\r\n                modifiedLineIndex += nextChange.modifiedLength;\r\n            }\r\n        }\r\n        return {\r\n            quitEarly: quitEarly,\r\n            changes: result\r\n        };\r\n    };\r\n    DiffComputer.prototype._pushTrimWhitespaceCharChange = function (result, originalLineNumber, originalStartColumn, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedEndColumn) {\r\n        if (this._mergeTrimWhitespaceCharChange(result, originalLineNumber, originalStartColumn, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedEndColumn)) {\r\n            // Merged into previous\r\n            return;\r\n        }\r\n        var charChanges = undefined;\r\n        if (this.shouldComputeCharChanges) {\r\n            charChanges = [new CharChange(originalLineNumber, originalStartColumn, originalLineNumber, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedLineNumber, modifiedEndColumn)];\r\n        }\r\n        result.push(new LineChange(originalLineNumber, originalLineNumber, modifiedLineNumber, modifiedLineNumber, charChanges));\r\n    };\r\n    DiffComputer.prototype._mergeTrimWhitespaceCharChange = function (result, originalLineNumber, originalStartColumn, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedEndColumn) {\r\n        var len = result.length;\r\n        if (len === 0) {\r\n            return false;\r\n        }\r\n        var prevChange = result[len - 1];\r\n        if (prevChange.originalEndLineNumber === 0 || prevChange.modifiedEndLineNumber === 0) {\r\n            // Don't merge with inserts/deletes\r\n            return false;\r\n        }\r\n        if (prevChange.originalEndLineNumber + 1 === originalLineNumber && prevChange.modifiedEndLineNumber + 1 === modifiedLineNumber) {\r\n            prevChange.originalEndLineNumber = originalLineNumber;\r\n            prevChange.modifiedEndLineNumber = modifiedLineNumber;\r\n            if (this.shouldComputeCharChanges && prevChange.charChanges) {\r\n                prevChange.charChanges.push(new CharChange(originalLineNumber, originalStartColumn, originalLineNumber, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedLineNumber, modifiedEndColumn));\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    return DiffComputer;\r\n}());\r\nexport { DiffComputer };\r\nfunction getFirstNonBlankColumn(txt, defaultValue) {\r\n    var r = strings.firstNonWhitespaceIndex(txt);\r\n    if (r === -1) {\r\n        return defaultValue;\r\n    }\r\n    return r + 1;\r\n}\r\nfunction getLastNonBlankColumn(txt, defaultValue) {\r\n    var r = strings.lastNonWhitespaceIndex(txt);\r\n    if (r === -1) {\r\n        return defaultValue;\r\n    }\r\n    return r + 2;\r\n}\r\nfunction createContinueProcessingPredicate(maximumRuntime) {\r\n    if (maximumRuntime === 0) {\r\n        return function () { return true; };\r\n    }\r\n    var startTime = Date.now();\r\n    return function () {\r\n        return Date.now() - startTime < maximumRuntime;\r\n    };\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Position } from '../core/position.js';\r\nimport { PrefixSumComputer } from '../viewModel/prefixSumComputer.js';\r\nvar MirrorTextModel = /** @class */ (function () {\r\n    function MirrorTextModel(uri, lines, eol, versionId) {\r\n        this._uri = uri;\r\n        this._lines = lines;\r\n        this._eol = eol;\r\n        this._versionId = versionId;\r\n        this._lineStarts = null;\r\n    }\r\n    MirrorTextModel.prototype.dispose = function () {\r\n        this._lines.length = 0;\r\n    };\r\n    MirrorTextModel.prototype.getText = function () {\r\n        return this._lines.join(this._eol);\r\n    };\r\n    MirrorTextModel.prototype.onEvents = function (e) {\r\n        if (e.eol && e.eol !== this._eol) {\r\n            this._eol = e.eol;\r\n            this._lineStarts = null;\r\n        }\r\n        // Update my lines\r\n        var changes = e.changes;\r\n        for (var _i = 0, changes_1 = changes; _i < changes_1.length; _i++) {\r\n            var change = changes_1[_i];\r\n            this._acceptDeleteRange(change.range);\r\n            this._acceptInsertText(new Position(change.range.startLineNumber, change.range.startColumn), change.text);\r\n        }\r\n        this._versionId = e.versionId;\r\n    };\r\n    MirrorTextModel.prototype._ensureLineStarts = function () {\r\n        if (!this._lineStarts) {\r\n            var eolLength = this._eol.length;\r\n            var linesLength = this._lines.length;\r\n            var lineStartValues = new Uint32Array(linesLength);\r\n            for (var i = 0; i < linesLength; i++) {\r\n                lineStartValues[i] = this._lines[i].length + eolLength;\r\n            }\r\n            this._lineStarts = new PrefixSumComputer(lineStartValues);\r\n        }\r\n    };\r\n    /**\r\n     * All changes to a line's text go through this method\r\n     */\r\n    MirrorTextModel.prototype._setLineText = function (lineIndex, newValue) {\r\n        this._lines[lineIndex] = newValue;\r\n        if (this._lineStarts) {\r\n            // update prefix sum\r\n            this._lineStarts.changeValue(lineIndex, this._lines[lineIndex].length + this._eol.length);\r\n        }\r\n    };\r\n    MirrorTextModel.prototype._acceptDeleteRange = function (range) {\r\n        if (range.startLineNumber === range.endLineNumber) {\r\n            if (range.startColumn === range.endColumn) {\r\n                // Nothing to delete\r\n                return;\r\n            }\r\n            // Delete text on the affected line\r\n            this._setLineText(range.startLineNumber - 1, this._lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\r\n                + this._lines[range.startLineNumber - 1].substring(range.endColumn - 1));\r\n            return;\r\n        }\r\n        // Take remaining text on last line and append it to remaining text on first line\r\n        this._setLineText(range.startLineNumber - 1, this._lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\r\n            + this._lines[range.endLineNumber - 1].substring(range.endColumn - 1));\r\n        // Delete middle lines\r\n        this._lines.splice(range.startLineNumber, range.endLineNumber - range.startLineNumber);\r\n        if (this._lineStarts) {\r\n            // update prefix sum\r\n            this._lineStarts.removeValues(range.startLineNumber, range.endLineNumber - range.startLineNumber);\r\n        }\r\n    };\r\n    MirrorTextModel.prototype._acceptInsertText = function (position, insertText) {\r\n        if (insertText.length === 0) {\r\n            // Nothing to insert\r\n            return;\r\n        }\r\n        var insertLines = insertText.split(/\\r\\n|\\r|\\n/);\r\n        if (insertLines.length === 1) {\r\n            // Inserting text on one line\r\n            this._setLineText(position.lineNumber - 1, this._lines[position.lineNumber - 1].substring(0, position.column - 1)\r\n                + insertLines[0]\r\n                + this._lines[position.lineNumber - 1].substring(position.column - 1));\r\n            return;\r\n        }\r\n        // Append overflowing text from first line to the end of text to insert\r\n        insertLines[insertLines.length - 1] += this._lines[position.lineNumber - 1].substring(position.column - 1);\r\n        // Delete overflowing text from first line and insert text on first line\r\n        this._setLineText(position.lineNumber - 1, this._lines[position.lineNumber - 1].substring(0, position.column - 1)\r\n            + insertLines[0]);\r\n        // Insert new lines & store lengths\r\n        var newLengths = new Uint32Array(insertLines.length - 1);\r\n        for (var i = 1; i < insertLines.length; i++) {\r\n            this._lines.splice(position.lineNumber + i - 1, 0, insertLines[i]);\r\n            newLengths[i - 1] = insertLines[i].length + this._eol.length;\r\n        }\r\n        if (this._lineStarts) {\r\n            // update prefix sum\r\n            this._lineStarts.insertValues(position.lineNumber, newLengths);\r\n        }\r\n    };\r\n    return MirrorTextModel;\r\n}());\r\nexport { MirrorTextModel };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { CharacterClassifier } from '../core/characterClassifier.js';\r\nvar Uint8Matrix = /** @class */ (function () {\r\n    function Uint8Matrix(rows, cols, defaultValue) {\r\n        var data = new Uint8Array(rows * cols);\r\n        for (var i = 0, len = rows * cols; i < len; i++) {\r\n            data[i] = defaultValue;\r\n        }\r\n        this._data = data;\r\n        this.rows = rows;\r\n        this.cols = cols;\r\n    }\r\n    Uint8Matrix.prototype.get = function (row, col) {\r\n        return this._data[row * this.cols + col];\r\n    };\r\n    Uint8Matrix.prototype.set = function (row, col, value) {\r\n        this._data[row * this.cols + col] = value;\r\n    };\r\n    return Uint8Matrix;\r\n}());\r\nexport { Uint8Matrix };\r\nvar StateMachine = /** @class */ (function () {\r\n    function StateMachine(edges) {\r\n        var maxCharCode = 0;\r\n        var maxState = 0 /* Invalid */;\r\n        for (var i = 0, len = edges.length; i < len; i++) {\r\n            var _a = edges[i], from = _a[0], chCode = _a[1], to = _a[2];\r\n            if (chCode > maxCharCode) {\r\n                maxCharCode = chCode;\r\n            }\r\n            if (from > maxState) {\r\n                maxState = from;\r\n            }\r\n            if (to > maxState) {\r\n                maxState = to;\r\n            }\r\n        }\r\n        maxCharCode++;\r\n        maxState++;\r\n        var states = new Uint8Matrix(maxState, maxCharCode, 0 /* Invalid */);\r\n        for (var i = 0, len = edges.length; i < len; i++) {\r\n            var _b = edges[i], from = _b[0], chCode = _b[1], to = _b[2];\r\n            states.set(from, chCode, to);\r\n        }\r\n        this._states = states;\r\n        this._maxCharCode = maxCharCode;\r\n    }\r\n    StateMachine.prototype.nextState = function (currentState, chCode) {\r\n        if (chCode < 0 || chCode >= this._maxCharCode) {\r\n            return 0 /* Invalid */;\r\n        }\r\n        return this._states.get(currentState, chCode);\r\n    };\r\n    return StateMachine;\r\n}());\r\nexport { StateMachine };\r\n// State machine for http:// or https:// or file://\r\nvar _stateMachine = null;\r\nfunction getStateMachine() {\r\n    if (_stateMachine === null) {\r\n        _stateMachine = new StateMachine([\r\n            [1 /* Start */, 104 /* h */, 2 /* H */],\r\n            [1 /* Start */, 72 /* H */, 2 /* H */],\r\n            [1 /* Start */, 102 /* f */, 6 /* F */],\r\n            [1 /* Start */, 70 /* F */, 6 /* F */],\r\n            [2 /* H */, 116 /* t */, 3 /* HT */],\r\n            [2 /* H */, 84 /* T */, 3 /* HT */],\r\n            [3 /* HT */, 116 /* t */, 4 /* HTT */],\r\n            [3 /* HT */, 84 /* T */, 4 /* HTT */],\r\n            [4 /* HTT */, 112 /* p */, 5 /* HTTP */],\r\n            [4 /* HTT */, 80 /* P */, 5 /* HTTP */],\r\n            [5 /* HTTP */, 115 /* s */, 9 /* BeforeColon */],\r\n            [5 /* HTTP */, 83 /* S */, 9 /* BeforeColon */],\r\n            [5 /* HTTP */, 58 /* Colon */, 10 /* AfterColon */],\r\n            [6 /* F */, 105 /* i */, 7 /* FI */],\r\n            [6 /* F */, 73 /* I */, 7 /* FI */],\r\n            [7 /* FI */, 108 /* l */, 8 /* FIL */],\r\n            [7 /* FI */, 76 /* L */, 8 /* FIL */],\r\n            [8 /* FIL */, 101 /* e */, 9 /* BeforeColon */],\r\n            [8 /* FIL */, 69 /* E */, 9 /* BeforeColon */],\r\n            [9 /* BeforeColon */, 58 /* Colon */, 10 /* AfterColon */],\r\n            [10 /* AfterColon */, 47 /* Slash */, 11 /* AlmostThere */],\r\n            [11 /* AlmostThere */, 47 /* Slash */, 12 /* End */],\r\n        ]);\r\n    }\r\n    return _stateMachine;\r\n}\r\nvar _classifier = null;\r\nfunction getClassifier() {\r\n    if (_classifier === null) {\r\n        _classifier = new CharacterClassifier(0 /* None */);\r\n        var FORCE_TERMINATION_CHARACTERS = ' \\t<>\\'\\\"、。｡､，．：；？！＠＃＄％＆＊‘“〈《「『【〔（［｛｢｣｝］）〕】』」》〉”’｀～…';\r\n        for (var i = 0; i < FORCE_TERMINATION_CHARACTERS.length; i++) {\r\n            _classifier.set(FORCE_TERMINATION_CHARACTERS.charCodeAt(i), 1 /* ForceTermination */);\r\n        }\r\n        var CANNOT_END_WITH_CHARACTERS = '.,;';\r\n        for (var i = 0; i < CANNOT_END_WITH_CHARACTERS.length; i++) {\r\n            _classifier.set(CANNOT_END_WITH_CHARACTERS.charCodeAt(i), 2 /* CannotEndIn */);\r\n        }\r\n    }\r\n    return _classifier;\r\n}\r\nvar LinkComputer = /** @class */ (function () {\r\n    function LinkComputer() {\r\n    }\r\n    LinkComputer._createLink = function (classifier, line, lineNumber, linkBeginIndex, linkEndIndex) {\r\n        // Do not allow to end link in certain characters...\r\n        var lastIncludedCharIndex = linkEndIndex - 1;\r\n        do {\r\n            var chCode = line.charCodeAt(lastIncludedCharIndex);\r\n            var chClass = classifier.get(chCode);\r\n            if (chClass !== 2 /* CannotEndIn */) {\r\n                break;\r\n            }\r\n            lastIncludedCharIndex--;\r\n        } while (lastIncludedCharIndex > linkBeginIndex);\r\n        // Handle links enclosed in parens, square brackets and curlys.\r\n        if (linkBeginIndex > 0) {\r\n            var charCodeBeforeLink = line.charCodeAt(linkBeginIndex - 1);\r\n            var lastCharCodeInLink = line.charCodeAt(lastIncludedCharIndex);\r\n            if ((charCodeBeforeLink === 40 /* OpenParen */ && lastCharCodeInLink === 41 /* CloseParen */)\r\n                || (charCodeBeforeLink === 91 /* OpenSquareBracket */ && lastCharCodeInLink === 93 /* CloseSquareBracket */)\r\n                || (charCodeBeforeLink === 123 /* OpenCurlyBrace */ && lastCharCodeInLink === 125 /* CloseCurlyBrace */)) {\r\n                // Do not end in ) if ( is before the link start\r\n                // Do not end in ] if [ is before the link start\r\n                // Do not end in } if { is before the link start\r\n                lastIncludedCharIndex--;\r\n            }\r\n        }\r\n        return {\r\n            range: {\r\n                startLineNumber: lineNumber,\r\n                startColumn: linkBeginIndex + 1,\r\n                endLineNumber: lineNumber,\r\n                endColumn: lastIncludedCharIndex + 2\r\n            },\r\n            url: line.substring(linkBeginIndex, lastIncludedCharIndex + 1)\r\n        };\r\n    };\r\n    LinkComputer.computeLinks = function (model, stateMachine) {\r\n        if (stateMachine === void 0) { stateMachine = getStateMachine(); }\r\n        var classifier = getClassifier();\r\n        var result = [];\r\n        for (var i = 1, lineCount = model.getLineCount(); i <= lineCount; i++) {\r\n            var line = model.getLineContent(i);\r\n            var len = line.length;\r\n            var j = 0;\r\n            var linkBeginIndex = 0;\r\n            var linkBeginChCode = 0;\r\n            var state = 1 /* Start */;\r\n            var hasOpenParens = false;\r\n            var hasOpenSquareBracket = false;\r\n            var hasOpenCurlyBracket = false;\r\n            while (j < len) {\r\n                var resetStateMachine = false;\r\n                var chCode = line.charCodeAt(j);\r\n                if (state === 13 /* Accept */) {\r\n                    var chClass = void 0;\r\n                    switch (chCode) {\r\n                        case 40 /* OpenParen */:\r\n                            hasOpenParens = true;\r\n                            chClass = 0 /* None */;\r\n                            break;\r\n                        case 41 /* CloseParen */:\r\n                            chClass = (hasOpenParens ? 0 /* None */ : 1 /* ForceTermination */);\r\n                            break;\r\n                        case 91 /* OpenSquareBracket */:\r\n                            hasOpenSquareBracket = true;\r\n                            chClass = 0 /* None */;\r\n                            break;\r\n                        case 93 /* CloseSquareBracket */:\r\n                            chClass = (hasOpenSquareBracket ? 0 /* None */ : 1 /* ForceTermination */);\r\n                            break;\r\n                        case 123 /* OpenCurlyBrace */:\r\n                            hasOpenCurlyBracket = true;\r\n                            chClass = 0 /* None */;\r\n                            break;\r\n                        case 125 /* CloseCurlyBrace */:\r\n                            chClass = (hasOpenCurlyBracket ? 0 /* None */ : 1 /* ForceTermination */);\r\n                            break;\r\n                        /* The following three rules make it that ' or \" or ` are allowed inside links if the link began with a different one */\r\n                        case 39 /* SingleQuote */:\r\n                            chClass = (linkBeginChCode === 34 /* DoubleQuote */ || linkBeginChCode === 96 /* BackTick */) ? 0 /* None */ : 1 /* ForceTermination */;\r\n                            break;\r\n                        case 34 /* DoubleQuote */:\r\n                            chClass = (linkBeginChCode === 39 /* SingleQuote */ || linkBeginChCode === 96 /* BackTick */) ? 0 /* None */ : 1 /* ForceTermination */;\r\n                            break;\r\n                        case 96 /* BackTick */:\r\n                            chClass = (linkBeginChCode === 39 /* SingleQuote */ || linkBeginChCode === 34 /* DoubleQuote */) ? 0 /* None */ : 1 /* ForceTermination */;\r\n                            break;\r\n                        case 42 /* Asterisk */:\r\n                            // `*` terminates a link if the link began with `*`\r\n                            chClass = (linkBeginChCode === 42 /* Asterisk */) ? 1 /* ForceTermination */ : 0 /* None */;\r\n                            break;\r\n                        case 124 /* Pipe */:\r\n                            // `|` terminates a link if the link began with `|`\r\n                            chClass = (linkBeginChCode === 124 /* Pipe */) ? 1 /* ForceTermination */ : 0 /* None */;\r\n                            break;\r\n                        default:\r\n                            chClass = classifier.get(chCode);\r\n                    }\r\n                    // Check if character terminates link\r\n                    if (chClass === 1 /* ForceTermination */) {\r\n                        result.push(LinkComputer._createLink(classifier, line, i, linkBeginIndex, j));\r\n                        resetStateMachine = true;\r\n                    }\r\n                }\r\n                else if (state === 12 /* End */) {\r\n                    var chClass = void 0;\r\n                    if (chCode === 91 /* OpenSquareBracket */) {\r\n                        // Allow for the authority part to contain ipv6 addresses which contain [ and ]\r\n                        hasOpenSquareBracket = true;\r\n                        chClass = 0 /* None */;\r\n                    }\r\n                    else {\r\n                        chClass = classifier.get(chCode);\r\n                    }\r\n                    // Check if character terminates link\r\n                    if (chClass === 1 /* ForceTermination */) {\r\n                        resetStateMachine = true;\r\n                    }\r\n                    else {\r\n                        state = 13 /* Accept */;\r\n                    }\r\n                }\r\n                else {\r\n                    state = stateMachine.nextState(state, chCode);\r\n                    if (state === 0 /* Invalid */) {\r\n                        resetStateMachine = true;\r\n                    }\r\n                }\r\n                if (resetStateMachine) {\r\n                    state = 1 /* Start */;\r\n                    hasOpenParens = false;\r\n                    hasOpenSquareBracket = false;\r\n                    hasOpenCurlyBracket = false;\r\n                    // Record where the link started\r\n                    linkBeginIndex = j + 1;\r\n                    linkBeginChCode = chCode;\r\n                }\r\n                j++;\r\n            }\r\n            if (state === 13 /* Accept */) {\r\n                result.push(LinkComputer._createLink(classifier, line, i, linkBeginIndex, len));\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    return LinkComputer;\r\n}());\r\nexport { LinkComputer };\r\n/**\r\n * Returns an array of all links contains in the provided\r\n * document. *Note* that this operation is computational\r\n * expensive and should not run in the UI thread.\r\n */\r\nexport function computeLinks(model) {\r\n    if (!model || typeof model.getLineCount !== 'function' || typeof model.getLineContent !== 'function') {\r\n        // Unknown caller!\r\n        return [];\r\n    }\r\n    return LinkComputer.computeLinks(model);\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar BasicInplaceReplace = /** @class */ (function () {\r\n    function BasicInplaceReplace() {\r\n        this._defaultValueSet = [\r\n            ['true', 'false'],\r\n            ['True', 'False'],\r\n            ['Private', 'Public', 'Friend', 'ReadOnly', 'Partial', 'Protected', 'WriteOnly'],\r\n            ['public', 'protected', 'private'],\r\n        ];\r\n    }\r\n    BasicInplaceReplace.prototype.navigateValueSet = function (range1, text1, range2, text2, up) {\r\n        if (range1 && text1) {\r\n            var result = this.doNavigateValueSet(text1, up);\r\n            if (result) {\r\n                return {\r\n                    range: range1,\r\n                    value: result\r\n                };\r\n            }\r\n        }\r\n        if (range2 && text2) {\r\n            var result = this.doNavigateValueSet(text2, up);\r\n            if (result) {\r\n                return {\r\n                    range: range2,\r\n                    value: result\r\n                };\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    BasicInplaceReplace.prototype.doNavigateValueSet = function (text, up) {\r\n        var numberResult = this.numberReplace(text, up);\r\n        if (numberResult !== null) {\r\n            return numberResult;\r\n        }\r\n        return this.textReplace(text, up);\r\n    };\r\n    BasicInplaceReplace.prototype.numberReplace = function (value, up) {\r\n        var precision = Math.pow(10, value.length - (value.lastIndexOf('.') + 1));\r\n        var n1 = Number(value);\r\n        var n2 = parseFloat(value);\r\n        if (!isNaN(n1) && !isNaN(n2) && n1 === n2) {\r\n            if (n1 === 0 && !up) {\r\n                return null; // don't do negative\r\n                //\t\t\t} else if(n1 === 9 && up) {\r\n                //\t\t\t\treturn null; // don't insert 10 into a number\r\n            }\r\n            else {\r\n                n1 = Math.floor(n1 * precision);\r\n                n1 += up ? precision : -precision;\r\n                return String(n1 / precision);\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    BasicInplaceReplace.prototype.textReplace = function (value, up) {\r\n        return this.valueSetsReplace(this._defaultValueSet, value, up);\r\n    };\r\n    BasicInplaceReplace.prototype.valueSetsReplace = function (valueSets, value, up) {\r\n        var result = null;\r\n        for (var i = 0, len = valueSets.length; result === null && i < len; i++) {\r\n            result = this.valueSetReplace(valueSets[i], value, up);\r\n        }\r\n        return result;\r\n    };\r\n    BasicInplaceReplace.prototype.valueSetReplace = function (valueSet, value, up) {\r\n        var idx = valueSet.indexOf(value);\r\n        if (idx >= 0) {\r\n            idx += up ? +1 : -1;\r\n            if (idx < 0) {\r\n                idx = valueSet.length - 1;\r\n            }\r\n            else {\r\n                idx %= valueSet.length;\r\n            }\r\n            return valueSet[idx];\r\n        }\r\n        return null;\r\n    };\r\n    BasicInplaceReplace.INSTANCE = new BasicInplaceReplace();\r\n    return BasicInplaceReplace;\r\n}());\r\nexport { BasicInplaceReplace };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { mergeSort } from '../../../base/common/arrays.js';\r\nimport { stringDiff } from '../../../base/common/diff/diff.js';\r\nimport { FIN } from '../../../base/common/iterator.js';\r\nimport { globals } from '../../../base/common/platform.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { Position } from '../core/position.js';\r\nimport { Range } from '../core/range.js';\r\nimport { DiffComputer } from '../diff/diffComputer.js';\r\nimport { MirrorTextModel as BaseMirrorModel } from '../model/mirrorTextModel.js';\r\nimport { ensureValidWordDefinition, getWordAtText } from '../model/wordHelper.js';\r\nimport { computeLinks } from '../modes/linkComputer.js';\r\nimport { BasicInplaceReplace } from '../modes/supports/inplaceReplaceSupport.js';\r\nimport { createMonacoBaseAPI } from '../standalone/standaloneBase.js';\r\nimport * as types from '../../../base/common/types.js';\r\n/**\r\n * @internal\r\n */\r\nvar MirrorModel = /** @class */ (function (_super) {\r\n    __extends(MirrorModel, _super);\r\n    function MirrorModel() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(MirrorModel.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MirrorModel.prototype, \"version\", {\r\n        get: function () {\r\n            return this._versionId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MirrorModel.prototype, \"eol\", {\r\n        get: function () {\r\n            return this._eol;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MirrorModel.prototype.getValue = function () {\r\n        return this.getText();\r\n    };\r\n    MirrorModel.prototype.getLinesContent = function () {\r\n        return this._lines.slice(0);\r\n    };\r\n    MirrorModel.prototype.getLineCount = function () {\r\n        return this._lines.length;\r\n    };\r\n    MirrorModel.prototype.getLineContent = function (lineNumber) {\r\n        return this._lines[lineNumber - 1];\r\n    };\r\n    MirrorModel.prototype.getWordAtPosition = function (position, wordDefinition) {\r\n        var wordAtText = getWordAtText(position.column, ensureValidWordDefinition(wordDefinition), this._lines[position.lineNumber - 1], 0);\r\n        if (wordAtText) {\r\n            return new Range(position.lineNumber, wordAtText.startColumn, position.lineNumber, wordAtText.endColumn);\r\n        }\r\n        return null;\r\n    };\r\n    MirrorModel.prototype.createWordIterator = function (wordDefinition) {\r\n        var _this = this;\r\n        var obj;\r\n        var lineNumber = 0;\r\n        var lineText;\r\n        var wordRangesIdx = 0;\r\n        var wordRanges = [];\r\n        var next = function () {\r\n            if (wordRangesIdx < wordRanges.length) {\r\n                var value = lineText.substring(wordRanges[wordRangesIdx].start, wordRanges[wordRangesIdx].end);\r\n                wordRangesIdx += 1;\r\n                if (!obj) {\r\n                    obj = { done: false, value: value };\r\n                }\r\n                else {\r\n                    obj.value = value;\r\n                }\r\n                return obj;\r\n            }\r\n            else if (lineNumber >= _this._lines.length) {\r\n                return FIN;\r\n            }\r\n            else {\r\n                lineText = _this._lines[lineNumber];\r\n                wordRanges = _this._wordenize(lineText, wordDefinition);\r\n                wordRangesIdx = 0;\r\n                lineNumber += 1;\r\n                return next();\r\n            }\r\n        };\r\n        return { next: next };\r\n    };\r\n    MirrorModel.prototype.getLineWords = function (lineNumber, wordDefinition) {\r\n        var content = this._lines[lineNumber - 1];\r\n        var ranges = this._wordenize(content, wordDefinition);\r\n        var words = [];\r\n        for (var _i = 0, ranges_1 = ranges; _i < ranges_1.length; _i++) {\r\n            var range = ranges_1[_i];\r\n            words.push({\r\n                word: content.substring(range.start, range.end),\r\n                startColumn: range.start + 1,\r\n                endColumn: range.end + 1\r\n            });\r\n        }\r\n        return words;\r\n    };\r\n    MirrorModel.prototype._wordenize = function (content, wordDefinition) {\r\n        var result = [];\r\n        var match;\r\n        wordDefinition.lastIndex = 0; // reset lastIndex just to be sure\r\n        while (match = wordDefinition.exec(content)) {\r\n            if (match[0].length === 0) {\r\n                // it did match the empty string\r\n                break;\r\n            }\r\n            result.push({ start: match.index, end: match.index + match[0].length });\r\n        }\r\n        return result;\r\n    };\r\n    MirrorModel.prototype.getValueInRange = function (range) {\r\n        range = this._validateRange(range);\r\n        if (range.startLineNumber === range.endLineNumber) {\r\n            return this._lines[range.startLineNumber - 1].substring(range.startColumn - 1, range.endColumn - 1);\r\n        }\r\n        var lineEnding = this._eol;\r\n        var startLineIndex = range.startLineNumber - 1;\r\n        var endLineIndex = range.endLineNumber - 1;\r\n        var resultLines = [];\r\n        resultLines.push(this._lines[startLineIndex].substring(range.startColumn - 1));\r\n        for (var i = startLineIndex + 1; i < endLineIndex; i++) {\r\n            resultLines.push(this._lines[i]);\r\n        }\r\n        resultLines.push(this._lines[endLineIndex].substring(0, range.endColumn - 1));\r\n        return resultLines.join(lineEnding);\r\n    };\r\n    MirrorModel.prototype.offsetAt = function (position) {\r\n        position = this._validatePosition(position);\r\n        this._ensureLineStarts();\r\n        return this._lineStarts.getAccumulatedValue(position.lineNumber - 2) + (position.column - 1);\r\n    };\r\n    MirrorModel.prototype.positionAt = function (offset) {\r\n        offset = Math.floor(offset);\r\n        offset = Math.max(0, offset);\r\n        this._ensureLineStarts();\r\n        var out = this._lineStarts.getIndexOf(offset);\r\n        var lineLength = this._lines[out.index].length;\r\n        // Ensure we return a valid position\r\n        return {\r\n            lineNumber: 1 + out.index,\r\n            column: 1 + Math.min(out.remainder, lineLength)\r\n        };\r\n    };\r\n    MirrorModel.prototype._validateRange = function (range) {\r\n        var start = this._validatePosition({ lineNumber: range.startLineNumber, column: range.startColumn });\r\n        var end = this._validatePosition({ lineNumber: range.endLineNumber, column: range.endColumn });\r\n        if (start.lineNumber !== range.startLineNumber\r\n            || start.column !== range.startColumn\r\n            || end.lineNumber !== range.endLineNumber\r\n            || end.column !== range.endColumn) {\r\n            return {\r\n                startLineNumber: start.lineNumber,\r\n                startColumn: start.column,\r\n                endLineNumber: end.lineNumber,\r\n                endColumn: end.column\r\n            };\r\n        }\r\n        return range;\r\n    };\r\n    MirrorModel.prototype._validatePosition = function (position) {\r\n        if (!Position.isIPosition(position)) {\r\n            throw new Error('bad position');\r\n        }\r\n        var lineNumber = position.lineNumber, column = position.column;\r\n        var hasChanged = false;\r\n        if (lineNumber < 1) {\r\n            lineNumber = 1;\r\n            column = 1;\r\n            hasChanged = true;\r\n        }\r\n        else if (lineNumber > this._lines.length) {\r\n            lineNumber = this._lines.length;\r\n            column = this._lines[lineNumber - 1].length + 1;\r\n            hasChanged = true;\r\n        }\r\n        else {\r\n            var maxCharacter = this._lines[lineNumber - 1].length + 1;\r\n            if (column < 1) {\r\n                column = 1;\r\n                hasChanged = true;\r\n            }\r\n            else if (column > maxCharacter) {\r\n                column = maxCharacter;\r\n                hasChanged = true;\r\n            }\r\n        }\r\n        if (!hasChanged) {\r\n            return position;\r\n        }\r\n        else {\r\n            return { lineNumber: lineNumber, column: column };\r\n        }\r\n    };\r\n    return MirrorModel;\r\n}(BaseMirrorModel));\r\n/**\r\n * @internal\r\n */\r\nvar EditorSimpleWorker = /** @class */ (function () {\r\n    function EditorSimpleWorker(host, foreignModuleFactory) {\r\n        this._host = host;\r\n        this._models = Object.create(null);\r\n        this._foreignModuleFactory = foreignModuleFactory;\r\n        this._foreignModule = null;\r\n    }\r\n    EditorSimpleWorker.prototype.dispose = function () {\r\n        this._models = Object.create(null);\r\n    };\r\n    EditorSimpleWorker.prototype._getModel = function (uri) {\r\n        return this._models[uri];\r\n    };\r\n    EditorSimpleWorker.prototype._getModels = function () {\r\n        var _this = this;\r\n        var all = [];\r\n        Object.keys(this._models).forEach(function (key) { return all.push(_this._models[key]); });\r\n        return all;\r\n    };\r\n    EditorSimpleWorker.prototype.acceptNewModel = function (data) {\r\n        this._models[data.url] = new MirrorModel(URI.parse(data.url), data.lines, data.EOL, data.versionId);\r\n    };\r\n    EditorSimpleWorker.prototype.acceptModelChanged = function (strURL, e) {\r\n        if (!this._models[strURL]) {\r\n            return;\r\n        }\r\n        var model = this._models[strURL];\r\n        model.onEvents(e);\r\n    };\r\n    EditorSimpleWorker.prototype.acceptRemovedModel = function (strURL) {\r\n        if (!this._models[strURL]) {\r\n            return;\r\n        }\r\n        delete this._models[strURL];\r\n    };\r\n    // ---- BEGIN diff --------------------------------------------------------------------------\r\n    EditorSimpleWorker.prototype.computeDiff = function (originalUrl, modifiedUrl, ignoreTrimWhitespace, maxComputationTime) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var original, modified, originalLines, modifiedLines, diffComputer, diffResult, identical;\r\n            return __generator(this, function (_a) {\r\n                original = this._getModel(originalUrl);\r\n                modified = this._getModel(modifiedUrl);\r\n                if (!original || !modified) {\r\n                    return [2 /*return*/, null];\r\n                }\r\n                originalLines = original.getLinesContent();\r\n                modifiedLines = modified.getLinesContent();\r\n                diffComputer = new DiffComputer(originalLines, modifiedLines, {\r\n                    shouldComputeCharChanges: true,\r\n                    shouldPostProcessCharChanges: true,\r\n                    shouldIgnoreTrimWhitespace: ignoreTrimWhitespace,\r\n                    shouldMakePrettyDiff: true,\r\n                    maxComputationTime: maxComputationTime\r\n                });\r\n                diffResult = diffComputer.computeDiff();\r\n                identical = (diffResult.changes.length > 0 ? false : this._modelsAreIdentical(original, modified));\r\n                return [2 /*return*/, {\r\n                        quitEarly: diffResult.quitEarly,\r\n                        identical: identical,\r\n                        changes: diffResult.changes\r\n                    }];\r\n            });\r\n        });\r\n    };\r\n    EditorSimpleWorker.prototype._modelsAreIdentical = function (original, modified) {\r\n        var originalLineCount = original.getLineCount();\r\n        var modifiedLineCount = modified.getLineCount();\r\n        if (originalLineCount !== modifiedLineCount) {\r\n            return false;\r\n        }\r\n        for (var line = 1; line <= originalLineCount; line++) {\r\n            var originalLine = original.getLineContent(line);\r\n            var modifiedLine = modified.getLineContent(line);\r\n            if (originalLine !== modifiedLine) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    EditorSimpleWorker.prototype.computeMoreMinimalEdits = function (modelUrl, edits) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var model, result, lastEol, _i, edits_1, _a, range, text, eol, original, changes, editOffset, _b, changes_1, change, start, end, newEdit;\r\n            return __generator(this, function (_c) {\r\n                model = this._getModel(modelUrl);\r\n                if (!model) {\r\n                    return [2 /*return*/, edits];\r\n                }\r\n                result = [];\r\n                lastEol = undefined;\r\n                edits = mergeSort(edits, function (a, b) {\r\n                    if (a.range && b.range) {\r\n                        return Range.compareRangesUsingStarts(a.range, b.range);\r\n                    }\r\n                    // eol only changes should go to the end\r\n                    var aRng = a.range ? 0 : 1;\r\n                    var bRng = b.range ? 0 : 1;\r\n                    return aRng - bRng;\r\n                });\r\n                for (_i = 0, edits_1 = edits; _i < edits_1.length; _i++) {\r\n                    _a = edits_1[_i], range = _a.range, text = _a.text, eol = _a.eol;\r\n                    if (typeof eol === 'number') {\r\n                        lastEol = eol;\r\n                    }\r\n                    if (Range.isEmpty(range) && !text) {\r\n                        // empty change\r\n                        continue;\r\n                    }\r\n                    original = model.getValueInRange(range);\r\n                    text = text.replace(/\\r\\n|\\n|\\r/g, model.eol);\r\n                    if (original === text) {\r\n                        // noop\r\n                        continue;\r\n                    }\r\n                    // make sure diff won't take too long\r\n                    if (Math.max(text.length, original.length) > EditorSimpleWorker._diffLimit) {\r\n                        result.push({ range: range, text: text });\r\n                        continue;\r\n                    }\r\n                    changes = stringDiff(original, text, false);\r\n                    editOffset = model.offsetAt(Range.lift(range).getStartPosition());\r\n                    for (_b = 0, changes_1 = changes; _b < changes_1.length; _b++) {\r\n                        change = changes_1[_b];\r\n                        start = model.positionAt(editOffset + change.originalStart);\r\n                        end = model.positionAt(editOffset + change.originalStart + change.originalLength);\r\n                        newEdit = {\r\n                            text: text.substr(change.modifiedStart, change.modifiedLength),\r\n                            range: { startLineNumber: start.lineNumber, startColumn: start.column, endLineNumber: end.lineNumber, endColumn: end.column }\r\n                        };\r\n                        if (model.getValueInRange(newEdit.range) !== newEdit.text) {\r\n                            result.push(newEdit);\r\n                        }\r\n                    }\r\n                }\r\n                if (typeof lastEol === 'number') {\r\n                    result.push({ eol: lastEol, text: '', range: { startLineNumber: 0, startColumn: 0, endLineNumber: 0, endColumn: 0 } });\r\n                }\r\n                return [2 /*return*/, result];\r\n            });\r\n        });\r\n    };\r\n    // ---- END minimal edits ---------------------------------------------------------------\r\n    EditorSimpleWorker.prototype.computeLinks = function (modelUrl) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var model;\r\n            return __generator(this, function (_a) {\r\n                model = this._getModel(modelUrl);\r\n                if (!model) {\r\n                    return [2 /*return*/, null];\r\n                }\r\n                return [2 /*return*/, computeLinks(model)];\r\n            });\r\n        });\r\n    };\r\n    EditorSimpleWorker.prototype.textualSuggest = function (modelUrl, position, wordDef, wordDefFlags) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var model, words, seen, wordDefRegExp, wordAt, iter, e, word;\r\n            return __generator(this, function (_a) {\r\n                model = this._getModel(modelUrl);\r\n                if (!model) {\r\n                    return [2 /*return*/, null];\r\n                }\r\n                words = [];\r\n                seen = new Set();\r\n                wordDefRegExp = new RegExp(wordDef, wordDefFlags);\r\n                wordAt = model.getWordAtPosition(position, wordDefRegExp);\r\n                if (wordAt) {\r\n                    seen.add(model.getValueInRange(wordAt));\r\n                }\r\n                for (iter = model.createWordIterator(wordDefRegExp), e = iter.next(); !e.done && seen.size <= EditorSimpleWorker._suggestionsLimit; e = iter.next()) {\r\n                    word = e.value;\r\n                    if (seen.has(word)) {\r\n                        continue;\r\n                    }\r\n                    seen.add(word);\r\n                    if (!isNaN(Number(word))) {\r\n                        continue;\r\n                    }\r\n                    words.push(word);\r\n                }\r\n                return [2 /*return*/, words];\r\n            });\r\n        });\r\n    };\r\n    // ---- END suggest --------------------------------------------------------------------------\r\n    //#region -- word ranges --\r\n    EditorSimpleWorker.prototype.computeWordRanges = function (modelUrl, range, wordDef, wordDefFlags) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var model, wordDefRegExp, result, line, words, _i, words_1, word, array;\r\n            return __generator(this, function (_a) {\r\n                model = this._getModel(modelUrl);\r\n                if (!model) {\r\n                    return [2 /*return*/, Object.create(null)];\r\n                }\r\n                wordDefRegExp = new RegExp(wordDef, wordDefFlags);\r\n                result = Object.create(null);\r\n                for (line = range.startLineNumber; line < range.endLineNumber; line++) {\r\n                    words = model.getLineWords(line, wordDefRegExp);\r\n                    for (_i = 0, words_1 = words; _i < words_1.length; _i++) {\r\n                        word = words_1[_i];\r\n                        if (!isNaN(Number(word.word))) {\r\n                            continue;\r\n                        }\r\n                        array = result[word.word];\r\n                        if (!array) {\r\n                            array = [];\r\n                            result[word.word] = array;\r\n                        }\r\n                        array.push({\r\n                            startLineNumber: line,\r\n                            startColumn: word.startColumn,\r\n                            endLineNumber: line,\r\n                            endColumn: word.endColumn\r\n                        });\r\n                    }\r\n                }\r\n                return [2 /*return*/, result];\r\n            });\r\n        });\r\n    };\r\n    //#endregion\r\n    EditorSimpleWorker.prototype.navigateValueSet = function (modelUrl, range, up, wordDef, wordDefFlags) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var model, wordDefRegExp, selectionText, wordRange, word, result;\r\n            return __generator(this, function (_a) {\r\n                model = this._getModel(modelUrl);\r\n                if (!model) {\r\n                    return [2 /*return*/, null];\r\n                }\r\n                wordDefRegExp = new RegExp(wordDef, wordDefFlags);\r\n                if (range.startColumn === range.endColumn) {\r\n                    range = {\r\n                        startLineNumber: range.startLineNumber,\r\n                        startColumn: range.startColumn,\r\n                        endLineNumber: range.endLineNumber,\r\n                        endColumn: range.endColumn + 1\r\n                    };\r\n                }\r\n                selectionText = model.getValueInRange(range);\r\n                wordRange = model.getWordAtPosition({ lineNumber: range.startLineNumber, column: range.startColumn }, wordDefRegExp);\r\n                if (!wordRange) {\r\n                    return [2 /*return*/, null];\r\n                }\r\n                word = model.getValueInRange(wordRange);\r\n                result = BasicInplaceReplace.INSTANCE.navigateValueSet(range, selectionText, wordRange, word, up);\r\n                return [2 /*return*/, result];\r\n            });\r\n        });\r\n    };\r\n    // ---- BEGIN foreign module support --------------------------------------------------------------------------\r\n    EditorSimpleWorker.prototype.loadForeignModule = function (moduleId, createData, foreignHostMethods) {\r\n        var _this = this;\r\n        var proxyMethodRequest = function (method, args) {\r\n            return _this._host.fhr(method, args);\r\n        };\r\n        var foreignHost = types.createProxyObject(foreignHostMethods, proxyMethodRequest);\r\n        var ctx = {\r\n            host: foreignHost,\r\n            getMirrorModels: function () {\r\n                return _this._getModels();\r\n            }\r\n        };\r\n        if (this._foreignModuleFactory) {\r\n            this._foreignModule = this._foreignModuleFactory(ctx, createData);\r\n            // static foreing module\r\n            return Promise.resolve(types.getAllMethodNames(this._foreignModule));\r\n        }\r\n        // ESM-comment-begin\r\n        // \t\treturn new Promise<any>((resolve, reject) => {\r\n        // \t\t\trequire([moduleId], (foreignModule: { create: IForeignModuleFactory }) => {\r\n        // \t\t\t\tthis._foreignModule = foreignModule.create(ctx, createData);\r\n        // \r\n        // \t\t\t\tresolve(types.getAllMethodNames(this._foreignModule));\r\n        // \r\n        // \t\t\t}, reject);\r\n        // \t\t});\r\n        // ESM-comment-end\r\n        // ESM-uncomment-begin\r\n        return Promise.reject(new Error(\"Unexpected usage\"));\r\n        // ESM-uncomment-end\r\n    };\r\n    // foreign method request\r\n    EditorSimpleWorker.prototype.fmr = function (method, args) {\r\n        if (!this._foreignModule || typeof this._foreignModule[method] !== 'function') {\r\n            return Promise.reject(new Error('Missing requestHandler or method: ' + method));\r\n        }\r\n        try {\r\n            return Promise.resolve(this._foreignModule[method].apply(this._foreignModule, args));\r\n        }\r\n        catch (e) {\r\n            return Promise.reject(e);\r\n        }\r\n    };\r\n    // ---- END diff --------------------------------------------------------------------------\r\n    // ---- BEGIN minimal edits ---------------------------------------------------------------\r\n    EditorSimpleWorker._diffLimit = 100000;\r\n    // ---- BEGIN suggest --------------------------------------------------------------------------\r\n    EditorSimpleWorker._suggestionsLimit = 10000;\r\n    return EditorSimpleWorker;\r\n}());\r\nexport { EditorSimpleWorker };\r\n/**\r\n * Called on the worker side\r\n * @internal\r\n */\r\nexport function create(host) {\r\n    return new EditorSimpleWorker(host, null);\r\n}\r\nif (typeof importScripts === 'function') {\r\n    // Running in a web worker\r\n    globals.monaco = createMonacoBaseAPI();\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { IntervalTimer } from '../../../base/common/async.js';\r\nimport { Disposable, dispose, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { SimpleWorkerClient, logOnceWebWorkerWarning } from '../../../base/common/worker/simpleWorker.js';\r\nimport { DefaultWorkerFactory } from '../../../base/worker/defaultWorkerFactory.js';\r\nimport { Range } from '../core/range.js';\r\nimport * as modes from '../modes.js';\r\nimport { LanguageConfigurationRegistry } from '../modes/languageConfigurationRegistry.js';\r\nimport { EditorSimpleWorker } from './editorSimpleWorker.js';\r\nimport { IModelService } from './modelService.js';\r\nimport { ITextResourceConfigurationService } from './textResourceConfigurationService.js';\r\nimport { regExpFlags } from '../../../base/common/strings.js';\r\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\r\nimport { ILogService } from '../../../platform/log/common/log.js';\r\nimport { StopWatch } from '../../../base/common/stopwatch.js';\r\n/**\r\n * Stop syncing a model to the worker if it was not needed for 1 min.\r\n */\r\nvar STOP_SYNC_MODEL_DELTA_TIME_MS = 60 * 1000;\r\n/**\r\n * Stop the worker if it was not needed for 5 min.\r\n */\r\nvar STOP_WORKER_DELTA_TIME_MS = 5 * 60 * 1000;\r\nfunction canSyncModel(modelService, resource) {\r\n    var model = modelService.getModel(resource);\r\n    if (!model) {\r\n        return false;\r\n    }\r\n    if (model.isTooLargeForSyncing()) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nvar EditorWorkerServiceImpl = /** @class */ (function (_super) {\r\n    __extends(EditorWorkerServiceImpl, _super);\r\n    function EditorWorkerServiceImpl(modelService, configurationService, logService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._modelService = modelService;\r\n        _this._workerManager = _this._register(new WorkerManager(_this._modelService));\r\n        _this._logService = logService;\r\n        // todo@joh make sure this happens only once\r\n        _this._register(modes.LinkProviderRegistry.register('*', {\r\n            provideLinks: function (model, token) {\r\n                if (!canSyncModel(_this._modelService, model.uri)) {\r\n                    return Promise.resolve({ links: [] }); // File too large\r\n                }\r\n                return _this._workerManager.withWorker().then(function (client) { return client.computeLinks(model.uri); }).then(function (links) {\r\n                    return links && { links: links };\r\n                });\r\n            }\r\n        }));\r\n        _this._register(modes.CompletionProviderRegistry.register('*', new WordBasedCompletionItemProvider(_this._workerManager, configurationService, _this._modelService)));\r\n        return _this;\r\n    }\r\n    EditorWorkerServiceImpl.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    EditorWorkerServiceImpl.prototype.canComputeDiff = function (original, modified) {\r\n        return (canSyncModel(this._modelService, original) && canSyncModel(this._modelService, modified));\r\n    };\r\n    EditorWorkerServiceImpl.prototype.computeDiff = function (original, modified, ignoreTrimWhitespace, maxComputationTime) {\r\n        return this._workerManager.withWorker().then(function (client) { return client.computeDiff(original, modified, ignoreTrimWhitespace, maxComputationTime); });\r\n    };\r\n    EditorWorkerServiceImpl.prototype.computeMoreMinimalEdits = function (resource, edits) {\r\n        var _this = this;\r\n        if (isNonEmptyArray(edits)) {\r\n            if (!canSyncModel(this._modelService, resource)) {\r\n                return Promise.resolve(edits); // File too large\r\n            }\r\n            var sw_1 = StopWatch.create(true);\r\n            var result = this._workerManager.withWorker().then(function (client) { return client.computeMoreMinimalEdits(resource, edits); });\r\n            result.finally(function () { return _this._logService.trace('FORMAT#computeMoreMinimalEdits', resource.toString(true), sw_1.elapsed()); });\r\n            return result;\r\n        }\r\n        else {\r\n            return Promise.resolve(undefined);\r\n        }\r\n    };\r\n    EditorWorkerServiceImpl.prototype.canNavigateValueSet = function (resource) {\r\n        return (canSyncModel(this._modelService, resource));\r\n    };\r\n    EditorWorkerServiceImpl.prototype.navigateValueSet = function (resource, range, up) {\r\n        return this._workerManager.withWorker().then(function (client) { return client.navigateValueSet(resource, range, up); });\r\n    };\r\n    EditorWorkerServiceImpl.prototype.canComputeWordRanges = function (resource) {\r\n        return canSyncModel(this._modelService, resource);\r\n    };\r\n    EditorWorkerServiceImpl.prototype.computeWordRanges = function (resource, range) {\r\n        return this._workerManager.withWorker().then(function (client) { return client.computeWordRanges(resource, range); });\r\n    };\r\n    EditorWorkerServiceImpl = __decorate([\r\n        __param(0, IModelService),\r\n        __param(1, ITextResourceConfigurationService),\r\n        __param(2, ILogService)\r\n    ], EditorWorkerServiceImpl);\r\n    return EditorWorkerServiceImpl;\r\n}(Disposable));\r\nexport { EditorWorkerServiceImpl };\r\nvar WordBasedCompletionItemProvider = /** @class */ (function () {\r\n    function WordBasedCompletionItemProvider(workerManager, configurationService, modelService) {\r\n        this._debugDisplayName = 'wordbasedCompletions';\r\n        this._workerManager = workerManager;\r\n        this._configurationService = configurationService;\r\n        this._modelService = modelService;\r\n    }\r\n    WordBasedCompletionItemProvider.prototype.provideCompletionItems = function (model, position) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var wordBasedSuggestions, word, replace, insert, client, words;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        wordBasedSuggestions = this._configurationService.getValue(model.uri, position, 'editor').wordBasedSuggestions;\r\n                        if (!wordBasedSuggestions) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        if (!canSyncModel(this._modelService, model.uri)) {\r\n                            return [2 /*return*/, undefined]; // File too large\r\n                        }\r\n                        word = model.getWordAtPosition(position);\r\n                        replace = !word ? Range.fromPositions(position) : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\r\n                        insert = replace.setEndPosition(position.lineNumber, position.column);\r\n                        return [4 /*yield*/, this._workerManager.withWorker()];\r\n                    case 1:\r\n                        client = _a.sent();\r\n                        return [4 /*yield*/, client.textualSuggest(model.uri, position)];\r\n                    case 2:\r\n                        words = _a.sent();\r\n                        if (!words) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        return [2 /*return*/, {\r\n                                suggestions: words.map(function (word) {\r\n                                    return {\r\n                                        kind: 18 /* Text */,\r\n                                        label: word,\r\n                                        insertText: word,\r\n                                        range: { insert: insert, replace: replace }\r\n                                    };\r\n                                })\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return WordBasedCompletionItemProvider;\r\n}());\r\nvar WorkerManager = /** @class */ (function (_super) {\r\n    __extends(WorkerManager, _super);\r\n    function WorkerManager(modelService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._modelService = modelService;\r\n        _this._editorWorkerClient = null;\r\n        _this._lastWorkerUsedTime = (new Date()).getTime();\r\n        var stopWorkerInterval = _this._register(new IntervalTimer());\r\n        stopWorkerInterval.cancelAndSet(function () { return _this._checkStopIdleWorker(); }, Math.round(STOP_WORKER_DELTA_TIME_MS / 2));\r\n        _this._register(_this._modelService.onModelRemoved(function (_) { return _this._checkStopEmptyWorker(); }));\r\n        return _this;\r\n    }\r\n    WorkerManager.prototype.dispose = function () {\r\n        if (this._editorWorkerClient) {\r\n            this._editorWorkerClient.dispose();\r\n            this._editorWorkerClient = null;\r\n        }\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    /**\r\n     * Check if the model service has no more models and stop the worker if that is the case.\r\n     */\r\n    WorkerManager.prototype._checkStopEmptyWorker = function () {\r\n        if (!this._editorWorkerClient) {\r\n            return;\r\n        }\r\n        var models = this._modelService.getModels();\r\n        if (models.length === 0) {\r\n            // There are no more models => nothing possible for me to do\r\n            this._editorWorkerClient.dispose();\r\n            this._editorWorkerClient = null;\r\n        }\r\n    };\r\n    /**\r\n     * Check if the worker has been idle for a while and then stop it.\r\n     */\r\n    WorkerManager.prototype._checkStopIdleWorker = function () {\r\n        if (!this._editorWorkerClient) {\r\n            return;\r\n        }\r\n        var timeSinceLastWorkerUsedTime = (new Date()).getTime() - this._lastWorkerUsedTime;\r\n        if (timeSinceLastWorkerUsedTime > STOP_WORKER_DELTA_TIME_MS) {\r\n            this._editorWorkerClient.dispose();\r\n            this._editorWorkerClient = null;\r\n        }\r\n    };\r\n    WorkerManager.prototype.withWorker = function () {\r\n        this._lastWorkerUsedTime = (new Date()).getTime();\r\n        if (!this._editorWorkerClient) {\r\n            this._editorWorkerClient = new EditorWorkerClient(this._modelService, false, 'editorWorkerService');\r\n        }\r\n        return Promise.resolve(this._editorWorkerClient);\r\n    };\r\n    return WorkerManager;\r\n}(Disposable));\r\nvar EditorModelManager = /** @class */ (function (_super) {\r\n    __extends(EditorModelManager, _super);\r\n    function EditorModelManager(proxy, modelService, keepIdleModels) {\r\n        var _this = _super.call(this) || this;\r\n        _this._syncedModels = Object.create(null);\r\n        _this._syncedModelsLastUsedTime = Object.create(null);\r\n        _this._proxy = proxy;\r\n        _this._modelService = modelService;\r\n        if (!keepIdleModels) {\r\n            var timer = new IntervalTimer();\r\n            timer.cancelAndSet(function () { return _this._checkStopModelSync(); }, Math.round(STOP_SYNC_MODEL_DELTA_TIME_MS / 2));\r\n            _this._register(timer);\r\n        }\r\n        return _this;\r\n    }\r\n    EditorModelManager.prototype.dispose = function () {\r\n        for (var modelUrl in this._syncedModels) {\r\n            dispose(this._syncedModels[modelUrl]);\r\n        }\r\n        this._syncedModels = Object.create(null);\r\n        this._syncedModelsLastUsedTime = Object.create(null);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    EditorModelManager.prototype.ensureSyncedResources = function (resources) {\r\n        for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\r\n            var resource = resources_1[_i];\r\n            var resourceStr = resource.toString();\r\n            if (!this._syncedModels[resourceStr]) {\r\n                this._beginModelSync(resource);\r\n            }\r\n            if (this._syncedModels[resourceStr]) {\r\n                this._syncedModelsLastUsedTime[resourceStr] = (new Date()).getTime();\r\n            }\r\n        }\r\n    };\r\n    EditorModelManager.prototype._checkStopModelSync = function () {\r\n        var currentTime = (new Date()).getTime();\r\n        var toRemove = [];\r\n        for (var modelUrl in this._syncedModelsLastUsedTime) {\r\n            var elapsedTime = currentTime - this._syncedModelsLastUsedTime[modelUrl];\r\n            if (elapsedTime > STOP_SYNC_MODEL_DELTA_TIME_MS) {\r\n                toRemove.push(modelUrl);\r\n            }\r\n        }\r\n        for (var _i = 0, toRemove_1 = toRemove; _i < toRemove_1.length; _i++) {\r\n            var e = toRemove_1[_i];\r\n            this._stopModelSync(e);\r\n        }\r\n    };\r\n    EditorModelManager.prototype._beginModelSync = function (resource) {\r\n        var _this = this;\r\n        var model = this._modelService.getModel(resource);\r\n        if (!model) {\r\n            return;\r\n        }\r\n        if (model.isTooLargeForSyncing()) {\r\n            return;\r\n        }\r\n        var modelUrl = resource.toString();\r\n        this._proxy.acceptNewModel({\r\n            url: model.uri.toString(),\r\n            lines: model.getLinesContent(),\r\n            EOL: model.getEOL(),\r\n            versionId: model.getVersionId()\r\n        });\r\n        var toDispose = new DisposableStore();\r\n        toDispose.add(model.onDidChangeContent(function (e) {\r\n            _this._proxy.acceptModelChanged(modelUrl.toString(), e);\r\n        }));\r\n        toDispose.add(model.onWillDispose(function () {\r\n            _this._stopModelSync(modelUrl);\r\n        }));\r\n        toDispose.add(toDisposable(function () {\r\n            _this._proxy.acceptRemovedModel(modelUrl);\r\n        }));\r\n        this._syncedModels[modelUrl] = toDispose;\r\n    };\r\n    EditorModelManager.prototype._stopModelSync = function (modelUrl) {\r\n        var toDispose = this._syncedModels[modelUrl];\r\n        delete this._syncedModels[modelUrl];\r\n        delete this._syncedModelsLastUsedTime[modelUrl];\r\n        dispose(toDispose);\r\n    };\r\n    return EditorModelManager;\r\n}(Disposable));\r\nvar SynchronousWorkerClient = /** @class */ (function () {\r\n    function SynchronousWorkerClient(instance) {\r\n        this._instance = instance;\r\n        this._proxyObj = Promise.resolve(this._instance);\r\n    }\r\n    SynchronousWorkerClient.prototype.dispose = function () {\r\n        this._instance.dispose();\r\n    };\r\n    SynchronousWorkerClient.prototype.getProxyObject = function () {\r\n        return this._proxyObj;\r\n    };\r\n    return SynchronousWorkerClient;\r\n}());\r\nvar EditorWorkerHost = /** @class */ (function () {\r\n    function EditorWorkerHost(workerClient) {\r\n        this._workerClient = workerClient;\r\n    }\r\n    // foreign host request\r\n    EditorWorkerHost.prototype.fhr = function (method, args) {\r\n        return this._workerClient.fhr(method, args);\r\n    };\r\n    return EditorWorkerHost;\r\n}());\r\nexport { EditorWorkerHost };\r\nvar EditorWorkerClient = /** @class */ (function (_super) {\r\n    __extends(EditorWorkerClient, _super);\r\n    function EditorWorkerClient(modelService, keepIdleModels, label) {\r\n        var _this = _super.call(this) || this;\r\n        _this._modelService = modelService;\r\n        _this._keepIdleModels = keepIdleModels;\r\n        _this._workerFactory = new DefaultWorkerFactory(label);\r\n        _this._worker = null;\r\n        _this._modelManager = null;\r\n        return _this;\r\n    }\r\n    // foreign host request\r\n    EditorWorkerClient.prototype.fhr = function (method, args) {\r\n        throw new Error(\"Not implemented!\");\r\n    };\r\n    EditorWorkerClient.prototype._getOrCreateWorker = function () {\r\n        if (!this._worker) {\r\n            try {\r\n                this._worker = this._register(new SimpleWorkerClient(this._workerFactory, 'vs/editor/common/services/editorSimpleWorker', new EditorWorkerHost(this)));\r\n            }\r\n            catch (err) {\r\n                logOnceWebWorkerWarning(err);\r\n                this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\r\n            }\r\n        }\r\n        return this._worker;\r\n    };\r\n    EditorWorkerClient.prototype._getProxy = function () {\r\n        var _this = this;\r\n        return this._getOrCreateWorker().getProxyObject().then(undefined, function (err) {\r\n            logOnceWebWorkerWarning(err);\r\n            _this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(_this), null));\r\n            return _this._getOrCreateWorker().getProxyObject();\r\n        });\r\n    };\r\n    EditorWorkerClient.prototype._getOrCreateModelManager = function (proxy) {\r\n        if (!this._modelManager) {\r\n            this._modelManager = this._register(new EditorModelManager(proxy, this._modelService, this._keepIdleModels));\r\n        }\r\n        return this._modelManager;\r\n    };\r\n    EditorWorkerClient.prototype._withSyncedResources = function (resources) {\r\n        var _this = this;\r\n        return this._getProxy().then(function (proxy) {\r\n            _this._getOrCreateModelManager(proxy).ensureSyncedResources(resources);\r\n            return proxy;\r\n        });\r\n    };\r\n    EditorWorkerClient.prototype.computeDiff = function (original, modified, ignoreTrimWhitespace, maxComputationTime) {\r\n        return this._withSyncedResources([original, modified]).then(function (proxy) {\r\n            return proxy.computeDiff(original.toString(), modified.toString(), ignoreTrimWhitespace, maxComputationTime);\r\n        });\r\n    };\r\n    EditorWorkerClient.prototype.computeMoreMinimalEdits = function (resource, edits) {\r\n        return this._withSyncedResources([resource]).then(function (proxy) {\r\n            return proxy.computeMoreMinimalEdits(resource.toString(), edits);\r\n        });\r\n    };\r\n    EditorWorkerClient.prototype.computeLinks = function (resource) {\r\n        return this._withSyncedResources([resource]).then(function (proxy) {\r\n            return proxy.computeLinks(resource.toString());\r\n        });\r\n    };\r\n    EditorWorkerClient.prototype.textualSuggest = function (resource, position) {\r\n        var _this = this;\r\n        return this._withSyncedResources([resource]).then(function (proxy) {\r\n            var model = _this._modelService.getModel(resource);\r\n            if (!model) {\r\n                return null;\r\n            }\r\n            var wordDefRegExp = LanguageConfigurationRegistry.getWordDefinition(model.getLanguageIdentifier().id);\r\n            var wordDef = wordDefRegExp.source;\r\n            var wordDefFlags = regExpFlags(wordDefRegExp);\r\n            return proxy.textualSuggest(resource.toString(), position, wordDef, wordDefFlags);\r\n        });\r\n    };\r\n    EditorWorkerClient.prototype.computeWordRanges = function (resource, range) {\r\n        var _this = this;\r\n        return this._withSyncedResources([resource]).then(function (proxy) {\r\n            var model = _this._modelService.getModel(resource);\r\n            if (!model) {\r\n                return Promise.resolve(null);\r\n            }\r\n            var wordDefRegExp = LanguageConfigurationRegistry.getWordDefinition(model.getLanguageIdentifier().id);\r\n            var wordDef = wordDefRegExp.source;\r\n            var wordDefFlags = regExpFlags(wordDefRegExp);\r\n            return proxy.computeWordRanges(resource.toString(), range, wordDef, wordDefFlags);\r\n        });\r\n    };\r\n    EditorWorkerClient.prototype.navigateValueSet = function (resource, range, up) {\r\n        var _this = this;\r\n        return this._withSyncedResources([resource]).then(function (proxy) {\r\n            var model = _this._modelService.getModel(resource);\r\n            if (!model) {\r\n                return null;\r\n            }\r\n            var wordDefRegExp = LanguageConfigurationRegistry.getWordDefinition(model.getLanguageIdentifier().id);\r\n            var wordDef = wordDefRegExp.source;\r\n            var wordDefFlags = regExpFlags(wordDefRegExp);\r\n            return proxy.navigateValueSet(resource.toString(), range, up, wordDef, wordDefFlags);\r\n        });\r\n    };\r\n    return EditorWorkerClient;\r\n}(Disposable));\r\nexport { EditorWorkerClient };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { EditorWorkerClient } from './editorWorkerServiceImpl.js';\r\nimport * as types from '../../../base/common/types.js';\r\n/**\r\n * Create a new web worker that has model syncing capabilities built in.\r\n * Specify an AMD module to load that will `create` an object that will be proxied.\r\n */\r\nexport function createWebWorker(modelService, opts) {\r\n    return new MonacoWebWorkerImpl(modelService, opts);\r\n}\r\nvar MonacoWebWorkerImpl = /** @class */ (function (_super) {\r\n    __extends(MonacoWebWorkerImpl, _super);\r\n    function MonacoWebWorkerImpl(modelService, opts) {\r\n        var _this = _super.call(this, modelService, opts.keepIdleModels || false, opts.label) || this;\r\n        _this._foreignModuleId = opts.moduleId;\r\n        _this._foreignModuleCreateData = opts.createData || null;\r\n        _this._foreignModuleHost = opts.host || null;\r\n        _this._foreignProxy = null;\r\n        return _this;\r\n    }\r\n    // foreign host request\r\n    MonacoWebWorkerImpl.prototype.fhr = function (method, args) {\r\n        if (!this._foreignModuleHost || typeof this._foreignModuleHost[method] !== 'function') {\r\n            return Promise.reject(new Error('Missing method ' + method + ' or missing main thread foreign host.'));\r\n        }\r\n        try {\r\n            return Promise.resolve(this._foreignModuleHost[method].apply(this._foreignModuleHost, args));\r\n        }\r\n        catch (e) {\r\n            return Promise.reject(e);\r\n        }\r\n    };\r\n    MonacoWebWorkerImpl.prototype._getForeignProxy = function () {\r\n        var _this = this;\r\n        if (!this._foreignProxy) {\r\n            this._foreignProxy = this._getProxy().then(function (proxy) {\r\n                var foreignHostMethods = _this._foreignModuleHost ? types.getAllMethodNames(_this._foreignModuleHost) : [];\r\n                return proxy.loadForeignModule(_this._foreignModuleId, _this._foreignModuleCreateData, foreignHostMethods).then(function (foreignMethods) {\r\n                    _this._foreignModuleCreateData = null;\r\n                    var proxyMethodRequest = function (method, args) {\r\n                        return proxy.fmr(method, args);\r\n                    };\r\n                    var createProxyMethod = function (method, proxyMethodRequest) {\r\n                        return function () {\r\n                            var args = Array.prototype.slice.call(arguments, 0);\r\n                            return proxyMethodRequest(method, args);\r\n                        };\r\n                    };\r\n                    var foreignProxy = {};\r\n                    for (var _i = 0, foreignMethods_1 = foreignMethods; _i < foreignMethods_1.length; _i++) {\r\n                        var foreignMethod = foreignMethods_1[_i];\r\n                        foreignProxy[foreignMethod] = createProxyMethod(foreignMethod, proxyMethodRequest);\r\n                    }\r\n                    return foreignProxy;\r\n                });\r\n            });\r\n        }\r\n        return this._foreignProxy;\r\n    };\r\n    MonacoWebWorkerImpl.prototype.getProxy = function () {\r\n        return this._getForeignProxy();\r\n    };\r\n    MonacoWebWorkerImpl.prototype.withSyncedResources = function (resources) {\r\n        var _this = this;\r\n        return this._withSyncedResources(resources).then(function (_) { return _this.getProxy(); });\r\n    };\r\n    return MonacoWebWorkerImpl;\r\n}(EditorWorkerClient));\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport function isFuzzyActionArr(what) {\r\n    return (Array.isArray(what));\r\n}\r\nexport function isFuzzyAction(what) {\r\n    return !isFuzzyActionArr(what);\r\n}\r\nexport function isString(what) {\r\n    return (typeof what === 'string');\r\n}\r\nexport function isIAction(what) {\r\n    return !isString(what);\r\n}\r\n// Small helper functions\r\n/**\r\n * Is a string null, undefined, or empty?\r\n */\r\nexport function empty(s) {\r\n    return (s ? false : true);\r\n}\r\n/**\r\n * Puts a string to lower case if 'ignoreCase' is set.\r\n */\r\nexport function fixCase(lexer, str) {\r\n    return (lexer.ignoreCase && str ? str.toLowerCase() : str);\r\n}\r\n/**\r\n * Ensures there are no bad characters in a CSS token class.\r\n */\r\nexport function sanitize(s) {\r\n    return s.replace(/[&<>'\"_]/g, '-'); // used on all output token CSS classes\r\n}\r\n// Logging\r\n/**\r\n * Logs a message.\r\n */\r\nexport function log(lexer, msg) {\r\n    console.log(lexer.languageId + \": \" + msg);\r\n}\r\n// Throwing errors\r\nexport function createError(lexer, msg) {\r\n    return new Error(lexer.languageId + \": \" + msg);\r\n}\r\n// Helper functions for rule finding and substitution\r\n/**\r\n * substituteMatches is used on lexer strings and can substitutes predefined patterns:\r\n * \t\t$$  => $\r\n * \t\t$#  => id\r\n * \t\t$n  => matched entry n\r\n * \t\t@attr => contents of lexer[attr]\r\n *\r\n * See documentation for more info\r\n */\r\nexport function substituteMatches(lexer, str, id, matches, state) {\r\n    var re = /\\$((\\$)|(#)|(\\d\\d?)|[sS](\\d\\d?)|@(\\w+))/g;\r\n    var stateMatches = null;\r\n    return str.replace(re, function (full, sub, dollar, hash, n, s, attr, ofs, total) {\r\n        if (!empty(dollar)) {\r\n            return '$'; // $$\r\n        }\r\n        if (!empty(hash)) {\r\n            return fixCase(lexer, id); // default $#\r\n        }\r\n        if (!empty(n) && n < matches.length) {\r\n            return fixCase(lexer, matches[n]); // $n\r\n        }\r\n        if (!empty(attr) && lexer && typeof (lexer[attr]) === 'string') {\r\n            return lexer[attr]; //@attribute\r\n        }\r\n        if (stateMatches === null) { // split state on demand\r\n            stateMatches = state.split('.');\r\n            stateMatches.unshift(state);\r\n        }\r\n        if (!empty(s) && s < stateMatches.length) {\r\n            return fixCase(lexer, stateMatches[s]); //$Sn\r\n        }\r\n        return '';\r\n    });\r\n}\r\n/**\r\n * Find the tokenizer rules for a specific state (i.e. next action)\r\n */\r\nexport function findRules(lexer, inState) {\r\n    var state = inState;\r\n    while (state && state.length > 0) {\r\n        var rules = lexer.tokenizer[state];\r\n        if (rules) {\r\n            return rules;\r\n        }\r\n        var idx = state.lastIndexOf('.');\r\n        if (idx < 0) {\r\n            state = null; // no further parent\r\n        }\r\n        else {\r\n            state = state.substr(0, idx);\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Is a certain state defined? In contrast to 'findRules' this works on a ILexerMin.\r\n * This is used during compilation where we may know the defined states\r\n * but not yet whether the corresponding rules are correct.\r\n */\r\nexport function stateExists(lexer, inState) {\r\n    var state = inState;\r\n    while (state && state.length > 0) {\r\n        var exist = lexer.stateNames[state];\r\n        if (exist) {\r\n            return true;\r\n        }\r\n        var idx = state.lastIndexOf('.');\r\n        if (idx < 0) {\r\n            state = null; // no further parent\r\n        }\r\n        else {\r\n            state = state.substr(0, idx);\r\n        }\r\n    }\r\n    return false;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Token, TokenizationResult, TokenizationResult2 } from '../../../common/core/token.js';\r\nimport * as modes from '../../../common/modes.js';\r\nimport { NULL_MODE_ID, NULL_STATE } from '../../../common/modes/nullMode.js';\r\nimport * as monarchCommon from './monarchCommon.js';\r\nvar CACHE_STACK_DEPTH = 5;\r\n/**\r\n * Reuse the same stack elements up to a certain depth.\r\n */\r\nvar MonarchStackElementFactory = /** @class */ (function () {\r\n    function MonarchStackElementFactory(maxCacheDepth) {\r\n        this._maxCacheDepth = maxCacheDepth;\r\n        this._entries = Object.create(null);\r\n    }\r\n    MonarchStackElementFactory.create = function (parent, state) {\r\n        return this._INSTANCE.create(parent, state);\r\n    };\r\n    MonarchStackElementFactory.prototype.create = function (parent, state) {\r\n        if (parent !== null && parent.depth >= this._maxCacheDepth) {\r\n            // no caching above a certain depth\r\n            return new MonarchStackElement(parent, state);\r\n        }\r\n        var stackElementId = MonarchStackElement.getStackElementId(parent);\r\n        if (stackElementId.length > 0) {\r\n            stackElementId += '|';\r\n        }\r\n        stackElementId += state;\r\n        var result = this._entries[stackElementId];\r\n        if (result) {\r\n            return result;\r\n        }\r\n        result = new MonarchStackElement(parent, state);\r\n        this._entries[stackElementId] = result;\r\n        return result;\r\n    };\r\n    MonarchStackElementFactory._INSTANCE = new MonarchStackElementFactory(CACHE_STACK_DEPTH);\r\n    return MonarchStackElementFactory;\r\n}());\r\nvar MonarchStackElement = /** @class */ (function () {\r\n    function MonarchStackElement(parent, state) {\r\n        this.parent = parent;\r\n        this.state = state;\r\n        this.depth = (this.parent ? this.parent.depth : 0) + 1;\r\n    }\r\n    MonarchStackElement.getStackElementId = function (element) {\r\n        var result = '';\r\n        while (element !== null) {\r\n            if (result.length > 0) {\r\n                result += '|';\r\n            }\r\n            result += element.state;\r\n            element = element.parent;\r\n        }\r\n        return result;\r\n    };\r\n    MonarchStackElement._equals = function (a, b) {\r\n        while (a !== null && b !== null) {\r\n            if (a === b) {\r\n                return true;\r\n            }\r\n            if (a.state !== b.state) {\r\n                return false;\r\n            }\r\n            a = a.parent;\r\n            b = b.parent;\r\n        }\r\n        if (a === null && b === null) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    MonarchStackElement.prototype.equals = function (other) {\r\n        return MonarchStackElement._equals(this, other);\r\n    };\r\n    MonarchStackElement.prototype.push = function (state) {\r\n        return MonarchStackElementFactory.create(this, state);\r\n    };\r\n    MonarchStackElement.prototype.pop = function () {\r\n        return this.parent;\r\n    };\r\n    MonarchStackElement.prototype.popall = function () {\r\n        var result = this;\r\n        while (result.parent) {\r\n            result = result.parent;\r\n        }\r\n        return result;\r\n    };\r\n    MonarchStackElement.prototype.switchTo = function (state) {\r\n        return MonarchStackElementFactory.create(this.parent, state);\r\n    };\r\n    return MonarchStackElement;\r\n}());\r\nvar EmbeddedModeData = /** @class */ (function () {\r\n    function EmbeddedModeData(modeId, state) {\r\n        this.modeId = modeId;\r\n        this.state = state;\r\n    }\r\n    EmbeddedModeData.prototype.equals = function (other) {\r\n        return (this.modeId === other.modeId\r\n            && this.state.equals(other.state));\r\n    };\r\n    EmbeddedModeData.prototype.clone = function () {\r\n        var stateClone = this.state.clone();\r\n        // save an object\r\n        if (stateClone === this.state) {\r\n            return this;\r\n        }\r\n        return new EmbeddedModeData(this.modeId, this.state);\r\n    };\r\n    return EmbeddedModeData;\r\n}());\r\n/**\r\n * Reuse the same line states up to a certain depth.\r\n */\r\nvar MonarchLineStateFactory = /** @class */ (function () {\r\n    function MonarchLineStateFactory(maxCacheDepth) {\r\n        this._maxCacheDepth = maxCacheDepth;\r\n        this._entries = Object.create(null);\r\n    }\r\n    MonarchLineStateFactory.create = function (stack, embeddedModeData) {\r\n        return this._INSTANCE.create(stack, embeddedModeData);\r\n    };\r\n    MonarchLineStateFactory.prototype.create = function (stack, embeddedModeData) {\r\n        if (embeddedModeData !== null) {\r\n            // no caching when embedding\r\n            return new MonarchLineState(stack, embeddedModeData);\r\n        }\r\n        if (stack !== null && stack.depth >= this._maxCacheDepth) {\r\n            // no caching above a certain depth\r\n            return new MonarchLineState(stack, embeddedModeData);\r\n        }\r\n        var stackElementId = MonarchStackElement.getStackElementId(stack);\r\n        var result = this._entries[stackElementId];\r\n        if (result) {\r\n            return result;\r\n        }\r\n        result = new MonarchLineState(stack, null);\r\n        this._entries[stackElementId] = result;\r\n        return result;\r\n    };\r\n    MonarchLineStateFactory._INSTANCE = new MonarchLineStateFactory(CACHE_STACK_DEPTH);\r\n    return MonarchLineStateFactory;\r\n}());\r\nvar MonarchLineState = /** @class */ (function () {\r\n    function MonarchLineState(stack, embeddedModeData) {\r\n        this.stack = stack;\r\n        this.embeddedModeData = embeddedModeData;\r\n    }\r\n    MonarchLineState.prototype.clone = function () {\r\n        var embeddedModeDataClone = this.embeddedModeData ? this.embeddedModeData.clone() : null;\r\n        // save an object\r\n        if (embeddedModeDataClone === this.embeddedModeData) {\r\n            return this;\r\n        }\r\n        return MonarchLineStateFactory.create(this.stack, this.embeddedModeData);\r\n    };\r\n    MonarchLineState.prototype.equals = function (other) {\r\n        if (!(other instanceof MonarchLineState)) {\r\n            return false;\r\n        }\r\n        if (!this.stack.equals(other.stack)) {\r\n            return false;\r\n        }\r\n        if (this.embeddedModeData === null && other.embeddedModeData === null) {\r\n            return true;\r\n        }\r\n        if (this.embeddedModeData === null || other.embeddedModeData === null) {\r\n            return false;\r\n        }\r\n        return this.embeddedModeData.equals(other.embeddedModeData);\r\n    };\r\n    return MonarchLineState;\r\n}());\r\nvar MonarchClassicTokensCollector = /** @class */ (function () {\r\n    function MonarchClassicTokensCollector() {\r\n        this._tokens = [];\r\n        this._language = null;\r\n        this._lastTokenType = null;\r\n        this._lastTokenLanguage = null;\r\n    }\r\n    MonarchClassicTokensCollector.prototype.enterMode = function (startOffset, modeId) {\r\n        this._language = modeId;\r\n    };\r\n    MonarchClassicTokensCollector.prototype.emit = function (startOffset, type) {\r\n        if (this._lastTokenType === type && this._lastTokenLanguage === this._language) {\r\n            return;\r\n        }\r\n        this._lastTokenType = type;\r\n        this._lastTokenLanguage = this._language;\r\n        this._tokens.push(new Token(startOffset, type, this._language));\r\n    };\r\n    MonarchClassicTokensCollector.prototype.nestedModeTokenize = function (embeddedModeLine, embeddedModeData, offsetDelta) {\r\n        var nestedModeId = embeddedModeData.modeId;\r\n        var embeddedModeState = embeddedModeData.state;\r\n        var nestedModeTokenizationSupport = modes.TokenizationRegistry.get(nestedModeId);\r\n        if (!nestedModeTokenizationSupport) {\r\n            this.enterMode(offsetDelta, nestedModeId);\r\n            this.emit(offsetDelta, '');\r\n            return embeddedModeState;\r\n        }\r\n        var nestedResult = nestedModeTokenizationSupport.tokenize(embeddedModeLine, embeddedModeState, offsetDelta);\r\n        this._tokens = this._tokens.concat(nestedResult.tokens);\r\n        this._lastTokenType = null;\r\n        this._lastTokenLanguage = null;\r\n        this._language = null;\r\n        return nestedResult.endState;\r\n    };\r\n    MonarchClassicTokensCollector.prototype.finalize = function (endState) {\r\n        return new TokenizationResult(this._tokens, endState);\r\n    };\r\n    return MonarchClassicTokensCollector;\r\n}());\r\nvar MonarchModernTokensCollector = /** @class */ (function () {\r\n    function MonarchModernTokensCollector(modeService, theme) {\r\n        this._modeService = modeService;\r\n        this._theme = theme;\r\n        this._prependTokens = null;\r\n        this._tokens = [];\r\n        this._currentLanguageId = 0 /* Null */;\r\n        this._lastTokenMetadata = 0;\r\n    }\r\n    MonarchModernTokensCollector.prototype.enterMode = function (startOffset, modeId) {\r\n        this._currentLanguageId = this._modeService.getLanguageIdentifier(modeId).id;\r\n    };\r\n    MonarchModernTokensCollector.prototype.emit = function (startOffset, type) {\r\n        var metadata = this._theme.match(this._currentLanguageId, type);\r\n        if (this._lastTokenMetadata === metadata) {\r\n            return;\r\n        }\r\n        this._lastTokenMetadata = metadata;\r\n        this._tokens.push(startOffset);\r\n        this._tokens.push(metadata);\r\n    };\r\n    MonarchModernTokensCollector._merge = function (a, b, c) {\r\n        var aLen = (a !== null ? a.length : 0);\r\n        var bLen = b.length;\r\n        var cLen = (c !== null ? c.length : 0);\r\n        if (aLen === 0 && bLen === 0 && cLen === 0) {\r\n            return new Uint32Array(0);\r\n        }\r\n        if (aLen === 0 && bLen === 0) {\r\n            return c;\r\n        }\r\n        if (bLen === 0 && cLen === 0) {\r\n            return a;\r\n        }\r\n        var result = new Uint32Array(aLen + bLen + cLen);\r\n        if (a !== null) {\r\n            result.set(a);\r\n        }\r\n        for (var i = 0; i < bLen; i++) {\r\n            result[aLen + i] = b[i];\r\n        }\r\n        if (c !== null) {\r\n            result.set(c, aLen + bLen);\r\n        }\r\n        return result;\r\n    };\r\n    MonarchModernTokensCollector.prototype.nestedModeTokenize = function (embeddedModeLine, embeddedModeData, offsetDelta) {\r\n        var nestedModeId = embeddedModeData.modeId;\r\n        var embeddedModeState = embeddedModeData.state;\r\n        var nestedModeTokenizationSupport = modes.TokenizationRegistry.get(nestedModeId);\r\n        if (!nestedModeTokenizationSupport) {\r\n            this.enterMode(offsetDelta, nestedModeId);\r\n            this.emit(offsetDelta, '');\r\n            return embeddedModeState;\r\n        }\r\n        var nestedResult = nestedModeTokenizationSupport.tokenize2(embeddedModeLine, embeddedModeState, offsetDelta);\r\n        this._prependTokens = MonarchModernTokensCollector._merge(this._prependTokens, this._tokens, nestedResult.tokens);\r\n        this._tokens = [];\r\n        this._currentLanguageId = 0;\r\n        this._lastTokenMetadata = 0;\r\n        return nestedResult.endState;\r\n    };\r\n    MonarchModernTokensCollector.prototype.finalize = function (endState) {\r\n        return new TokenizationResult2(MonarchModernTokensCollector._merge(this._prependTokens, this._tokens, null), endState);\r\n    };\r\n    return MonarchModernTokensCollector;\r\n}());\r\nvar MonarchTokenizer = /** @class */ (function () {\r\n    function MonarchTokenizer(modeService, standaloneThemeService, modeId, lexer) {\r\n        var _this = this;\r\n        this._modeService = modeService;\r\n        this._standaloneThemeService = standaloneThemeService;\r\n        this._modeId = modeId;\r\n        this._lexer = lexer;\r\n        this._embeddedModes = Object.create(null);\r\n        this.embeddedLoaded = Promise.resolve(undefined);\r\n        // Set up listening for embedded modes\r\n        var emitting = false;\r\n        this._tokenizationRegistryListener = modes.TokenizationRegistry.onDidChange(function (e) {\r\n            if (emitting) {\r\n                return;\r\n            }\r\n            var isOneOfMyEmbeddedModes = false;\r\n            for (var i = 0, len = e.changedLanguages.length; i < len; i++) {\r\n                var language = e.changedLanguages[i];\r\n                if (_this._embeddedModes[language]) {\r\n                    isOneOfMyEmbeddedModes = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (isOneOfMyEmbeddedModes) {\r\n                emitting = true;\r\n                modes.TokenizationRegistry.fire([_this._modeId]);\r\n                emitting = false;\r\n            }\r\n        });\r\n    }\r\n    MonarchTokenizer.prototype.dispose = function () {\r\n        this._tokenizationRegistryListener.dispose();\r\n    };\r\n    MonarchTokenizer.prototype.getLoadStatus = function () {\r\n        var promises = [];\r\n        for (var nestedModeId in this._embeddedModes) {\r\n            var tokenizationSupport = modes.TokenizationRegistry.get(nestedModeId);\r\n            if (tokenizationSupport) {\r\n                // The nested mode is already loaded\r\n                if (tokenizationSupport instanceof MonarchTokenizer) {\r\n                    var nestedModeStatus = tokenizationSupport.getLoadStatus();\r\n                    if (nestedModeStatus.loaded === false) {\r\n                        promises.push(nestedModeStatus.promise);\r\n                    }\r\n                }\r\n                continue;\r\n            }\r\n            var tokenizationSupportPromise = modes.TokenizationRegistry.getPromise(nestedModeId);\r\n            if (tokenizationSupportPromise) {\r\n                // The nested mode is in the process of being loaded\r\n                promises.push(tokenizationSupportPromise);\r\n            }\r\n        }\r\n        if (promises.length === 0) {\r\n            return {\r\n                loaded: true\r\n            };\r\n        }\r\n        return {\r\n            loaded: false,\r\n            promise: Promise.all(promises).then(function (_) { return undefined; })\r\n        };\r\n    };\r\n    MonarchTokenizer.prototype.getInitialState = function () {\r\n        var rootState = MonarchStackElementFactory.create(null, this._lexer.start);\r\n        return MonarchLineStateFactory.create(rootState, null);\r\n    };\r\n    MonarchTokenizer.prototype.tokenize = function (line, lineState, offsetDelta) {\r\n        var tokensCollector = new MonarchClassicTokensCollector();\r\n        var endLineState = this._tokenize(line, lineState, offsetDelta, tokensCollector);\r\n        return tokensCollector.finalize(endLineState);\r\n    };\r\n    MonarchTokenizer.prototype.tokenize2 = function (line, lineState, offsetDelta) {\r\n        var tokensCollector = new MonarchModernTokensCollector(this._modeService, this._standaloneThemeService.getTheme().tokenTheme);\r\n        var endLineState = this._tokenize(line, lineState, offsetDelta, tokensCollector);\r\n        return tokensCollector.finalize(endLineState);\r\n    };\r\n    MonarchTokenizer.prototype._tokenize = function (line, lineState, offsetDelta, collector) {\r\n        if (lineState.embeddedModeData) {\r\n            return this._nestedTokenize(line, lineState, offsetDelta, collector);\r\n        }\r\n        else {\r\n            return this._myTokenize(line, lineState, offsetDelta, collector);\r\n        }\r\n    };\r\n    MonarchTokenizer.prototype._findLeavingNestedModeOffset = function (line, state) {\r\n        var rules = this._lexer.tokenizer[state.stack.state];\r\n        if (!rules) {\r\n            rules = monarchCommon.findRules(this._lexer, state.stack.state); // do parent matching\r\n            if (!rules) {\r\n                throw monarchCommon.createError(this._lexer, 'tokenizer state is not defined: ' + state.stack.state);\r\n            }\r\n        }\r\n        var popOffset = -1;\r\n        var hasEmbeddedPopRule = false;\r\n        for (var _i = 0, rules_1 = rules; _i < rules_1.length; _i++) {\r\n            var rule = rules_1[_i];\r\n            if (!monarchCommon.isIAction(rule.action) || rule.action.nextEmbedded !== '@pop') {\r\n                continue;\r\n            }\r\n            hasEmbeddedPopRule = true;\r\n            var regex = rule.regex;\r\n            var regexSource = rule.regex.source;\r\n            if (regexSource.substr(0, 4) === '^(?:' && regexSource.substr(regexSource.length - 1, 1) === ')') {\r\n                regex = new RegExp(regexSource.substr(4, regexSource.length - 5), regex.ignoreCase ? 'i' : '');\r\n            }\r\n            var result = line.search(regex);\r\n            if (result === -1 || (result !== 0 && rule.matchOnlyAtLineStart)) {\r\n                continue;\r\n            }\r\n            if (popOffset === -1 || result < popOffset) {\r\n                popOffset = result;\r\n            }\r\n        }\r\n        if (!hasEmbeddedPopRule) {\r\n            throw monarchCommon.createError(this._lexer, 'no rule containing nextEmbedded: \"@pop\" in tokenizer embedded state: ' + state.stack.state);\r\n        }\r\n        return popOffset;\r\n    };\r\n    MonarchTokenizer.prototype._nestedTokenize = function (line, lineState, offsetDelta, tokensCollector) {\r\n        var popOffset = this._findLeavingNestedModeOffset(line, lineState);\r\n        if (popOffset === -1) {\r\n            // tokenization will not leave nested mode\r\n            var nestedEndState = tokensCollector.nestedModeTokenize(line, lineState.embeddedModeData, offsetDelta);\r\n            return MonarchLineStateFactory.create(lineState.stack, new EmbeddedModeData(lineState.embeddedModeData.modeId, nestedEndState));\r\n        }\r\n        var nestedModeLine = line.substring(0, popOffset);\r\n        if (nestedModeLine.length > 0) {\r\n            // tokenize with the nested mode\r\n            tokensCollector.nestedModeTokenize(nestedModeLine, lineState.embeddedModeData, offsetDelta);\r\n        }\r\n        var restOfTheLine = line.substring(popOffset);\r\n        return this._myTokenize(restOfTheLine, lineState, offsetDelta + popOffset, tokensCollector);\r\n    };\r\n    MonarchTokenizer.prototype._safeRuleName = function (rule) {\r\n        if (rule) {\r\n            return rule.name;\r\n        }\r\n        return '(unknown)';\r\n    };\r\n    MonarchTokenizer.prototype._myTokenize = function (line, lineState, offsetDelta, tokensCollector) {\r\n        tokensCollector.enterMode(offsetDelta, this._modeId);\r\n        var lineLength = line.length;\r\n        var embeddedModeData = lineState.embeddedModeData;\r\n        var stack = lineState.stack;\r\n        var pos = 0;\r\n        var groupMatching = null;\r\n        // See https://github.com/Microsoft/monaco-editor/issues/1235:\r\n        // Evaluate rules at least once for an empty line\r\n        var forceEvaluation = true;\r\n        while (forceEvaluation || pos < lineLength) {\r\n            var pos0 = pos;\r\n            var stackLen0 = stack.depth;\r\n            var groupLen0 = groupMatching ? groupMatching.groups.length : 0;\r\n            var state = stack.state;\r\n            var matches = null;\r\n            var matched = null;\r\n            var action = null;\r\n            var rule = null;\r\n            var enteringEmbeddedMode = null;\r\n            // check if we need to process group matches first\r\n            if (groupMatching) {\r\n                matches = groupMatching.matches;\r\n                var groupEntry = groupMatching.groups.shift();\r\n                matched = groupEntry.matched;\r\n                action = groupEntry.action;\r\n                rule = groupMatching.rule;\r\n                // cleanup if necessary\r\n                if (groupMatching.groups.length === 0) {\r\n                    groupMatching = null;\r\n                }\r\n            }\r\n            else {\r\n                // otherwise we match on the token stream\r\n                if (!forceEvaluation && pos >= lineLength) {\r\n                    // nothing to do\r\n                    break;\r\n                }\r\n                forceEvaluation = false;\r\n                // get the rules for this state\r\n                var rules = this._lexer.tokenizer[state];\r\n                if (!rules) {\r\n                    rules = monarchCommon.findRules(this._lexer, state); // do parent matching\r\n                    if (!rules) {\r\n                        throw monarchCommon.createError(this._lexer, 'tokenizer state is not defined: ' + state);\r\n                    }\r\n                }\r\n                // try each rule until we match\r\n                var restOfLine = line.substr(pos);\r\n                for (var _i = 0, rules_2 = rules; _i < rules_2.length; _i++) {\r\n                    var rule_1 = rules_2[_i];\r\n                    if (pos === 0 || !rule_1.matchOnlyAtLineStart) {\r\n                        matches = restOfLine.match(rule_1.regex);\r\n                        if (matches) {\r\n                            matched = matches[0];\r\n                            action = rule_1.action;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // We matched 'rule' with 'matches' and 'action'\r\n            if (!matches) {\r\n                matches = [''];\r\n                matched = '';\r\n            }\r\n            if (!action) {\r\n                // bad: we didn't match anything, and there is no action to take\r\n                // we need to advance the stream or we get progress trouble\r\n                if (pos < lineLength) {\r\n                    matches = [line.charAt(pos)];\r\n                    matched = matches[0];\r\n                }\r\n                action = this._lexer.defaultToken;\r\n            }\r\n            if (matched === null) {\r\n                // should never happen, needed for strict null checking\r\n                break;\r\n            }\r\n            // advance stream\r\n            pos += matched.length;\r\n            // maybe call action function (used for 'cases')\r\n            while (monarchCommon.isFuzzyAction(action) && monarchCommon.isIAction(action) && action.test) {\r\n                action = action.test(matched, matches, state, pos === lineLength);\r\n            }\r\n            var result = null;\r\n            // set the result: either a string or an array of actions\r\n            if (typeof action === 'string' || Array.isArray(action)) {\r\n                result = action;\r\n            }\r\n            else if (action.group) {\r\n                result = action.group;\r\n            }\r\n            else if (action.token !== null && action.token !== undefined) {\r\n                // do $n replacements?\r\n                if (action.tokenSubst) {\r\n                    result = monarchCommon.substituteMatches(this._lexer, action.token, matched, matches, state);\r\n                }\r\n                else {\r\n                    result = action.token;\r\n                }\r\n                // enter embedded mode?\r\n                if (action.nextEmbedded) {\r\n                    if (action.nextEmbedded === '@pop') {\r\n                        if (!embeddedModeData) {\r\n                            throw monarchCommon.createError(this._lexer, 'cannot pop embedded mode if not inside one');\r\n                        }\r\n                        embeddedModeData = null;\r\n                    }\r\n                    else if (embeddedModeData) {\r\n                        throw monarchCommon.createError(this._lexer, 'cannot enter embedded mode from within an embedded mode');\r\n                    }\r\n                    else {\r\n                        enteringEmbeddedMode = monarchCommon.substituteMatches(this._lexer, action.nextEmbedded, matched, matches, state);\r\n                    }\r\n                }\r\n                // state transformations\r\n                if (action.goBack) { // back up the stream..\r\n                    pos = Math.max(0, pos - action.goBack);\r\n                }\r\n                if (action.switchTo && typeof action.switchTo === 'string') {\r\n                    var nextState = monarchCommon.substituteMatches(this._lexer, action.switchTo, matched, matches, state); // switch state without a push...\r\n                    if (nextState[0] === '@') {\r\n                        nextState = nextState.substr(1); // peel off starting '@'\r\n                    }\r\n                    if (!monarchCommon.findRules(this._lexer, nextState)) {\r\n                        throw monarchCommon.createError(this._lexer, 'trying to switch to a state \\'' + nextState + '\\' that is undefined in rule: ' + this._safeRuleName(rule));\r\n                    }\r\n                    else {\r\n                        stack = stack.switchTo(nextState);\r\n                    }\r\n                }\r\n                else if (action.transform && typeof action.transform === 'function') {\r\n                    throw monarchCommon.createError(this._lexer, 'action.transform not supported');\r\n                }\r\n                else if (action.next) {\r\n                    if (action.next === '@push') {\r\n                        if (stack.depth >= this._lexer.maxStack) {\r\n                            throw monarchCommon.createError(this._lexer, 'maximum tokenizer stack size reached: [' +\r\n                                stack.state + ',' + stack.parent.state + ',...]');\r\n                        }\r\n                        else {\r\n                            stack = stack.push(state);\r\n                        }\r\n                    }\r\n                    else if (action.next === '@pop') {\r\n                        if (stack.depth <= 1) {\r\n                            throw monarchCommon.createError(this._lexer, 'trying to pop an empty stack in rule: ' + this._safeRuleName(rule));\r\n                        }\r\n                        else {\r\n                            stack = stack.pop();\r\n                        }\r\n                    }\r\n                    else if (action.next === '@popall') {\r\n                        stack = stack.popall();\r\n                    }\r\n                    else {\r\n                        var nextState = monarchCommon.substituteMatches(this._lexer, action.next, matched, matches, state);\r\n                        if (nextState[0] === '@') {\r\n                            nextState = nextState.substr(1); // peel off starting '@'\r\n                        }\r\n                        if (!monarchCommon.findRules(this._lexer, nextState)) {\r\n                            throw monarchCommon.createError(this._lexer, 'trying to set a next state \\'' + nextState + '\\' that is undefined in rule: ' + this._safeRuleName(rule));\r\n                        }\r\n                        else {\r\n                            stack = stack.push(nextState);\r\n                        }\r\n                    }\r\n                }\r\n                if (action.log && typeof (action.log) === 'string') {\r\n                    monarchCommon.log(this._lexer, this._lexer.languageId + ': ' + monarchCommon.substituteMatches(this._lexer, action.log, matched, matches, state));\r\n                }\r\n            }\r\n            // check result\r\n            if (result === null) {\r\n                throw monarchCommon.createError(this._lexer, 'lexer rule has no well-defined action in rule: ' + this._safeRuleName(rule));\r\n            }\r\n            // is the result a group match?\r\n            if (Array.isArray(result)) {\r\n                if (groupMatching && groupMatching.groups.length > 0) {\r\n                    throw monarchCommon.createError(this._lexer, 'groups cannot be nested: ' + this._safeRuleName(rule));\r\n                }\r\n                if (matches.length !== result.length + 1) {\r\n                    throw monarchCommon.createError(this._lexer, 'matched number of groups does not match the number of actions in rule: ' + this._safeRuleName(rule));\r\n                }\r\n                var totalLen = 0;\r\n                for (var i = 1; i < matches.length; i++) {\r\n                    totalLen += matches[i].length;\r\n                }\r\n                if (totalLen !== matched.length) {\r\n                    throw monarchCommon.createError(this._lexer, 'with groups, all characters should be matched in consecutive groups in rule: ' + this._safeRuleName(rule));\r\n                }\r\n                groupMatching = {\r\n                    rule: rule,\r\n                    matches: matches,\r\n                    groups: []\r\n                };\r\n                for (var i = 0; i < result.length; i++) {\r\n                    groupMatching.groups[i] = {\r\n                        action: result[i],\r\n                        matched: matches[i + 1]\r\n                    };\r\n                }\r\n                pos -= matched.length;\r\n                // call recursively to initiate first result match\r\n                continue;\r\n            }\r\n            else {\r\n                // regular result\r\n                // check for '@rematch'\r\n                if (result === '@rematch') {\r\n                    pos -= matched.length;\r\n                    matched = ''; // better set the next state too..\r\n                    matches = null;\r\n                    result = '';\r\n                }\r\n                // check progress\r\n                if (matched.length === 0) {\r\n                    if (lineLength === 0 || stackLen0 !== stack.depth || state !== stack.state || (!groupMatching ? 0 : groupMatching.groups.length) !== groupLen0) {\r\n                        continue;\r\n                    }\r\n                    else {\r\n                        throw monarchCommon.createError(this._lexer, 'no progress in tokenizer in rule: ' + this._safeRuleName(rule));\r\n                    }\r\n                }\r\n                // return the result (and check for brace matching)\r\n                // todo: for efficiency we could pre-sanitize tokenPostfix and substitutions\r\n                var tokenType = null;\r\n                if (monarchCommon.isString(result) && result.indexOf('@brackets') === 0) {\r\n                    var rest = result.substr('@brackets'.length);\r\n                    var bracket = findBracket(this._lexer, matched);\r\n                    if (!bracket) {\r\n                        throw monarchCommon.createError(this._lexer, '@brackets token returned but no bracket defined as: ' + matched);\r\n                    }\r\n                    tokenType = monarchCommon.sanitize(bracket.token + rest);\r\n                }\r\n                else {\r\n                    var token = (result === '' ? '' : result + this._lexer.tokenPostfix);\r\n                    tokenType = monarchCommon.sanitize(token);\r\n                }\r\n                tokensCollector.emit(pos0 + offsetDelta, tokenType);\r\n            }\r\n            if (enteringEmbeddedMode !== null) {\r\n                // substitute language alias to known modes to support syntax highlighting\r\n                var enteringEmbeddedModeId = this._modeService.getModeIdForLanguageName(enteringEmbeddedMode);\r\n                if (enteringEmbeddedModeId) {\r\n                    enteringEmbeddedMode = enteringEmbeddedModeId;\r\n                }\r\n                var embeddedModeData_1 = this._getNestedEmbeddedModeData(enteringEmbeddedMode);\r\n                if (pos < lineLength) {\r\n                    // there is content from the embedded mode on this line\r\n                    var restOfLine = line.substr(pos);\r\n                    return this._nestedTokenize(restOfLine, MonarchLineStateFactory.create(stack, embeddedModeData_1), offsetDelta + pos, tokensCollector);\r\n                }\r\n                else {\r\n                    return MonarchLineStateFactory.create(stack, embeddedModeData_1);\r\n                }\r\n            }\r\n        }\r\n        return MonarchLineStateFactory.create(stack, embeddedModeData);\r\n    };\r\n    MonarchTokenizer.prototype._getNestedEmbeddedModeData = function (mimetypeOrModeId) {\r\n        var nestedModeId = this._locateMode(mimetypeOrModeId);\r\n        if (nestedModeId) {\r\n            var tokenizationSupport = modes.TokenizationRegistry.get(nestedModeId);\r\n            if (tokenizationSupport) {\r\n                return new EmbeddedModeData(nestedModeId, tokenizationSupport.getInitialState());\r\n            }\r\n        }\r\n        return new EmbeddedModeData(nestedModeId || NULL_MODE_ID, NULL_STATE);\r\n    };\r\n    MonarchTokenizer.prototype._locateMode = function (mimetypeOrModeId) {\r\n        if (!mimetypeOrModeId || !this._modeService.isRegisteredMode(mimetypeOrModeId)) {\r\n            return null;\r\n        }\r\n        if (mimetypeOrModeId === this._modeId) {\r\n            // embedding myself...\r\n            return mimetypeOrModeId;\r\n        }\r\n        var modeId = this._modeService.getModeId(mimetypeOrModeId);\r\n        if (modeId) {\r\n            // Fire mode loading event\r\n            this._modeService.triggerMode(modeId);\r\n            this._embeddedModes[modeId] = true;\r\n        }\r\n        return modeId;\r\n    };\r\n    return MonarchTokenizer;\r\n}());\r\nexport { MonarchTokenizer };\r\n/**\r\n * Searches for a bracket in the 'brackets' attribute that matches the input.\r\n */\r\nfunction findBracket(lexer, matched) {\r\n    if (!matched) {\r\n        return null;\r\n    }\r\n    matched = monarchCommon.fixCase(lexer, matched);\r\n    var brackets = lexer.brackets;\r\n    for (var _i = 0, brackets_1 = brackets; _i < brackets_1.length; _i++) {\r\n        var bracket = brackets_1[_i];\r\n        if (bracket.open === matched) {\r\n            return { token: bracket.token, bracketType: 1 /* Open */ };\r\n        }\r\n        else if (bracket.close === matched) {\r\n            return { token: bracket.token, bracketType: -1 /* Close */ };\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexport function createTokenizationSupport(modeService, standaloneThemeService, modeId, lexer) {\r\n    return new MonarchTokenizer(modeService, standaloneThemeService, modeId, lexer);\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { TimeoutTimer } from '../../../base/common/async.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { LineTokens } from '../../common/core/lineTokens.js';\r\nimport { TokenizationRegistry } from '../../common/modes.js';\r\nimport { RenderLineInput, renderViewLine2 as renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\r\nimport { ViewLineRenderingData } from '../../common/viewModel/viewModel.js';\r\nimport { MonarchTokenizer } from '../common/monarch/monarchLexer.js';\r\nvar Colorizer = /** @class */ (function () {\r\n    function Colorizer() {\r\n    }\r\n    Colorizer.colorizeElement = function (themeService, modeService, domNode, options) {\r\n        options = options || {};\r\n        var theme = options.theme || 'vs';\r\n        var mimeType = options.mimeType || domNode.getAttribute('lang') || domNode.getAttribute('data-lang');\r\n        if (!mimeType) {\r\n            console.error('Mode not detected');\r\n            return Promise.resolve();\r\n        }\r\n        themeService.setTheme(theme);\r\n        var text = domNode.firstChild ? domNode.firstChild.nodeValue : '';\r\n        domNode.className += ' ' + theme;\r\n        var render = function (str) {\r\n            domNode.innerHTML = str;\r\n        };\r\n        return this.colorize(modeService, text || '', mimeType, options).then(render, function (err) { return console.error(err); });\r\n    };\r\n    Colorizer.colorize = function (modeService, text, mimeType, options) {\r\n        var tabSize = 4;\r\n        if (options && typeof options.tabSize === 'number') {\r\n            tabSize = options.tabSize;\r\n        }\r\n        if (strings.startsWithUTF8BOM(text)) {\r\n            text = text.substr(1);\r\n        }\r\n        var lines = text.split(/\\r\\n|\\r|\\n/);\r\n        var language = modeService.getModeId(mimeType);\r\n        if (!language) {\r\n            return Promise.resolve(_fakeColorize(lines, tabSize));\r\n        }\r\n        // Send out the event to create the mode\r\n        modeService.triggerMode(language);\r\n        var tokenizationSupport = TokenizationRegistry.get(language);\r\n        if (tokenizationSupport) {\r\n            return _colorize(lines, tabSize, tokenizationSupport);\r\n        }\r\n        var tokenizationSupportPromise = TokenizationRegistry.getPromise(language);\r\n        if (tokenizationSupportPromise) {\r\n            // A tokenizer will be registered soon\r\n            return new Promise(function (resolve, reject) {\r\n                tokenizationSupportPromise.then(function (tokenizationSupport) {\r\n                    _colorize(lines, tabSize, tokenizationSupport).then(resolve, reject);\r\n                }, reject);\r\n            });\r\n        }\r\n        return new Promise(function (resolve, reject) {\r\n            var listener = null;\r\n            var timeout = null;\r\n            var execute = function () {\r\n                if (listener) {\r\n                    listener.dispose();\r\n                    listener = null;\r\n                }\r\n                if (timeout) {\r\n                    timeout.dispose();\r\n                    timeout = null;\r\n                }\r\n                var tokenizationSupport = TokenizationRegistry.get(language);\r\n                if (tokenizationSupport) {\r\n                    _colorize(lines, tabSize, tokenizationSupport).then(resolve, reject);\r\n                    return;\r\n                }\r\n                resolve(_fakeColorize(lines, tabSize));\r\n            };\r\n            // wait 500ms for mode to load, then give up\r\n            timeout = new TimeoutTimer();\r\n            timeout.cancelAndSet(execute, 500);\r\n            listener = TokenizationRegistry.onDidChange(function (e) {\r\n                if (e.changedLanguages.indexOf(language) >= 0) {\r\n                    execute();\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Colorizer.colorizeLine = function (line, mightContainNonBasicASCII, mightContainRTL, tokens, tabSize) {\r\n        if (tabSize === void 0) { tabSize = 4; }\r\n        var isBasicASCII = ViewLineRenderingData.isBasicASCII(line, mightContainNonBasicASCII);\r\n        var containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, mightContainRTL);\r\n        var renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, tokens, [], tabSize, 0, 0, 0, -1, 'none', false, false, null));\r\n        return renderResult.html;\r\n    };\r\n    Colorizer.colorizeModelLine = function (model, lineNumber, tabSize) {\r\n        if (tabSize === void 0) { tabSize = 4; }\r\n        var content = model.getLineContent(lineNumber);\r\n        model.forceTokenization(lineNumber);\r\n        var tokens = model.getLineTokens(lineNumber);\r\n        var inflatedTokens = tokens.inflate();\r\n        return this.colorizeLine(content, model.mightContainNonBasicASCII(), model.mightContainRTL(), inflatedTokens, tabSize);\r\n    };\r\n    return Colorizer;\r\n}());\r\nexport { Colorizer };\r\nfunction _colorize(lines, tabSize, tokenizationSupport) {\r\n    return new Promise(function (c, e) {\r\n        var execute = function () {\r\n            var result = _actualColorize(lines, tabSize, tokenizationSupport);\r\n            if (tokenizationSupport instanceof MonarchTokenizer) {\r\n                var status_1 = tokenizationSupport.getLoadStatus();\r\n                if (status_1.loaded === false) {\r\n                    status_1.promise.then(execute, e);\r\n                    return;\r\n                }\r\n            }\r\n            c(result);\r\n        };\r\n        execute();\r\n    });\r\n}\r\nfunction _fakeColorize(lines, tabSize) {\r\n    var html = [];\r\n    var defaultMetadata = ((0 /* None */ << 11 /* FONT_STYLE_OFFSET */)\r\n        | (1 /* DefaultForeground */ << 14 /* FOREGROUND_OFFSET */)\r\n        | (2 /* DefaultBackground */ << 23 /* BACKGROUND_OFFSET */)) >>> 0;\r\n    var tokens = new Uint32Array(2);\r\n    tokens[0] = 0;\r\n    tokens[1] = defaultMetadata;\r\n    for (var i = 0, length_1 = lines.length; i < length_1; i++) {\r\n        var line = lines[i];\r\n        tokens[0] = line.length;\r\n        var lineTokens = new LineTokens(tokens, line);\r\n        var isBasicASCII = ViewLineRenderingData.isBasicASCII(line, /* check for basic ASCII */ true);\r\n        var containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, /* check for RTL */ true);\r\n        var renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, 0, 0, -1, 'none', false, false, null));\r\n        html = html.concat(renderResult.html);\r\n        html.push('<br/>');\r\n    }\r\n    return html.join('');\r\n}\r\nfunction _actualColorize(lines, tabSize, tokenizationSupport) {\r\n    var html = [];\r\n    var state = tokenizationSupport.getInitialState();\r\n    for (var i = 0, length_2 = lines.length; i < length_2; i++) {\r\n        var line = lines[i];\r\n        var tokenizeResult = tokenizationSupport.tokenize2(line, state, 0);\r\n        LineTokens.convertToEndOffset(tokenizeResult.tokens, line.length);\r\n        var lineTokens = new LineTokens(tokenizeResult.tokens, line);\r\n        var isBasicASCII = ViewLineRenderingData.isBasicASCII(line, /* check for basic ASCII */ true);\r\n        var containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, /* check for RTL */ true);\r\n        var renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, lineTokens.inflate(), [], tabSize, 0, 0, 0, -1, 'none', false, false, null));\r\n        html = html.concat(renderResult.html);\r\n        html.push('<br/>');\r\n        state = tokenizeResult.endState;\r\n    }\r\n    return html.join('');\r\n}\r\n","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport { ResourceMap } from '../../../base/common/map.js';\r\nimport * as arrays from '../../../base/common/arrays.js';\r\nimport * as types from '../../../base/common/types.js';\r\nimport * as objects from '../../../base/common/objects.js';\r\nimport { OVERRIDE_PROPERTY_PATTERN } from './configurationRegistry.js';\r\nimport { overrideIdentifierFromKey, addToValueTree, toValuesTree, getConfigurationValue, getDefaultValues, getConfigurationKeys, removeFromValueTree } from './configuration.js';\r\nvar ConfigurationModel = /** @class */ (function () {\r\n    function ConfigurationModel(_contents, _keys, _overrides) {\r\n        if (_contents === void 0) { _contents = {}; }\r\n        if (_keys === void 0) { _keys = []; }\r\n        if (_overrides === void 0) { _overrides = []; }\r\n        this._contents = _contents;\r\n        this._keys = _keys;\r\n        this._overrides = _overrides;\r\n        this.isFrozen = false;\r\n    }\r\n    Object.defineProperty(ConfigurationModel.prototype, \"contents\", {\r\n        get: function () {\r\n            return this.checkAndFreeze(this._contents);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ConfigurationModel.prototype, \"overrides\", {\r\n        get: function () {\r\n            return this.checkAndFreeze(this._overrides);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ConfigurationModel.prototype, \"keys\", {\r\n        get: function () {\r\n            return this.checkAndFreeze(this._keys);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ConfigurationModel.prototype.isEmpty = function () {\r\n        return this._keys.length === 0 && Object.keys(this._contents).length === 0 && this._overrides.length === 0;\r\n    };\r\n    ConfigurationModel.prototype.getValue = function (section) {\r\n        return section ? getConfigurationValue(this.contents, section) : this.contents;\r\n    };\r\n    ConfigurationModel.prototype.getOverrideValue = function (section, overrideIdentifier) {\r\n        var overrideContents = this.getContentsForOverrideIdentifer(overrideIdentifier);\r\n        return overrideContents\r\n            ? section ? getConfigurationValue(overrideContents, section) : overrideContents\r\n            : undefined;\r\n    };\r\n    ConfigurationModel.prototype.override = function (identifier) {\r\n        var overrideContents = this.getContentsForOverrideIdentifer(identifier);\r\n        if (!overrideContents || typeof overrideContents !== 'object' || !Object.keys(overrideContents).length) {\r\n            // If there are no valid overrides, return self\r\n            return this;\r\n        }\r\n        var contents = {};\r\n        for (var _i = 0, _a = arrays.distinct(__spreadArrays(Object.keys(this.contents), Object.keys(overrideContents))); _i < _a.length; _i++) {\r\n            var key = _a[_i];\r\n            var contentsForKey = this.contents[key];\r\n            var overrideContentsForKey = overrideContents[key];\r\n            // If there are override contents for the key, clone and merge otherwise use base contents\r\n            if (overrideContentsForKey) {\r\n                // Clone and merge only if base contents and override contents are of type object otherwise just override\r\n                if (typeof contentsForKey === 'object' && typeof overrideContentsForKey === 'object') {\r\n                    contentsForKey = objects.deepClone(contentsForKey);\r\n                    this.mergeContents(contentsForKey, overrideContentsForKey);\r\n                }\r\n                else {\r\n                    contentsForKey = overrideContentsForKey;\r\n                }\r\n            }\r\n            contents[key] = contentsForKey;\r\n        }\r\n        return new ConfigurationModel(contents, this.keys, this.overrides);\r\n    };\r\n    ConfigurationModel.prototype.merge = function () {\r\n        var others = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            others[_i] = arguments[_i];\r\n        }\r\n        var contents = objects.deepClone(this.contents);\r\n        var overrides = objects.deepClone(this.overrides);\r\n        var keys = __spreadArrays(this.keys);\r\n        for (var _a = 0, others_1 = others; _a < others_1.length; _a++) {\r\n            var other = others_1[_a];\r\n            this.mergeContents(contents, other.contents);\r\n            var _loop_1 = function (otherOverride) {\r\n                var override = overrides.filter(function (o) { return arrays.equals(o.identifiers, otherOverride.identifiers); })[0];\r\n                if (override) {\r\n                    this_1.mergeContents(override.contents, otherOverride.contents);\r\n                }\r\n                else {\r\n                    overrides.push(objects.deepClone(otherOverride));\r\n                }\r\n            };\r\n            var this_1 = this;\r\n            for (var _b = 0, _c = other.overrides; _b < _c.length; _b++) {\r\n                var otherOverride = _c[_b];\r\n                _loop_1(otherOverride);\r\n            }\r\n            for (var _d = 0, _e = other.keys; _d < _e.length; _d++) {\r\n                var key = _e[_d];\r\n                if (keys.indexOf(key) === -1) {\r\n                    keys.push(key);\r\n                }\r\n            }\r\n        }\r\n        return new ConfigurationModel(contents, keys, overrides);\r\n    };\r\n    ConfigurationModel.prototype.freeze = function () {\r\n        this.isFrozen = true;\r\n        return this;\r\n    };\r\n    ConfigurationModel.prototype.mergeContents = function (source, target) {\r\n        for (var _i = 0, _a = Object.keys(target); _i < _a.length; _i++) {\r\n            var key = _a[_i];\r\n            if (key in source) {\r\n                if (types.isObject(source[key]) && types.isObject(target[key])) {\r\n                    this.mergeContents(source[key], target[key]);\r\n                    continue;\r\n                }\r\n            }\r\n            source[key] = objects.deepClone(target[key]);\r\n        }\r\n    };\r\n    ConfigurationModel.prototype.checkAndFreeze = function (data) {\r\n        if (this.isFrozen && !Object.isFrozen(data)) {\r\n            return objects.deepFreeze(data);\r\n        }\r\n        return data;\r\n    };\r\n    ConfigurationModel.prototype.getContentsForOverrideIdentifer = function (identifier) {\r\n        for (var _i = 0, _a = this.overrides; _i < _a.length; _i++) {\r\n            var override = _a[_i];\r\n            if (override.identifiers.indexOf(identifier) !== -1) {\r\n                return override.contents;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    ConfigurationModel.prototype.toJSON = function () {\r\n        return {\r\n            contents: this.contents,\r\n            overrides: this.overrides,\r\n            keys: this.keys\r\n        };\r\n    };\r\n    // Update methods\r\n    ConfigurationModel.prototype.setValue = function (key, value) {\r\n        this.addKey(key);\r\n        addToValueTree(this.contents, key, value, function (e) { throw new Error(e); });\r\n    };\r\n    ConfigurationModel.prototype.removeValue = function (key) {\r\n        if (this.removeKey(key)) {\r\n            removeFromValueTree(this.contents, key);\r\n        }\r\n    };\r\n    ConfigurationModel.prototype.addKey = function (key) {\r\n        var index = this.keys.length;\r\n        for (var i = 0; i < index; i++) {\r\n            if (key.indexOf(this.keys[i]) === 0) {\r\n                index = i;\r\n            }\r\n        }\r\n        this.keys.splice(index, 1, key);\r\n    };\r\n    ConfigurationModel.prototype.removeKey = function (key) {\r\n        var index = this.keys.indexOf(key);\r\n        if (index !== -1) {\r\n            this.keys.splice(index, 1);\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    return ConfigurationModel;\r\n}());\r\nexport { ConfigurationModel };\r\nvar DefaultConfigurationModel = /** @class */ (function (_super) {\r\n    __extends(DefaultConfigurationModel, _super);\r\n    function DefaultConfigurationModel() {\r\n        var _this = this;\r\n        var contents = getDefaultValues();\r\n        var keys = getConfigurationKeys();\r\n        var overrides = [];\r\n        for (var _i = 0, _a = Object.keys(contents); _i < _a.length; _i++) {\r\n            var key = _a[_i];\r\n            if (OVERRIDE_PROPERTY_PATTERN.test(key)) {\r\n                overrides.push({\r\n                    identifiers: [overrideIdentifierFromKey(key).trim()],\r\n                    keys: Object.keys(contents[key]),\r\n                    contents: toValuesTree(contents[key], function (message) { return console.error(\"Conflict in default settings file: \" + message); }),\r\n                });\r\n            }\r\n        }\r\n        _this = _super.call(this, contents, keys, overrides) || this;\r\n        return _this;\r\n    }\r\n    return DefaultConfigurationModel;\r\n}(ConfigurationModel));\r\nexport { DefaultConfigurationModel };\r\nvar Configuration = /** @class */ (function () {\r\n    function Configuration(_defaultConfiguration, _localUserConfiguration, _remoteUserConfiguration, _workspaceConfiguration, _folderConfigurations, _memoryConfiguration, _memoryConfigurationByResource, _freeze) {\r\n        if (_remoteUserConfiguration === void 0) { _remoteUserConfiguration = new ConfigurationModel(); }\r\n        if (_workspaceConfiguration === void 0) { _workspaceConfiguration = new ConfigurationModel(); }\r\n        if (_folderConfigurations === void 0) { _folderConfigurations = new ResourceMap(); }\r\n        if (_memoryConfiguration === void 0) { _memoryConfiguration = new ConfigurationModel(); }\r\n        if (_memoryConfigurationByResource === void 0) { _memoryConfigurationByResource = new ResourceMap(); }\r\n        if (_freeze === void 0) { _freeze = true; }\r\n        this._defaultConfiguration = _defaultConfiguration;\r\n        this._localUserConfiguration = _localUserConfiguration;\r\n        this._remoteUserConfiguration = _remoteUserConfiguration;\r\n        this._workspaceConfiguration = _workspaceConfiguration;\r\n        this._folderConfigurations = _folderConfigurations;\r\n        this._memoryConfiguration = _memoryConfiguration;\r\n        this._memoryConfigurationByResource = _memoryConfigurationByResource;\r\n        this._freeze = _freeze;\r\n        this._workspaceConsolidatedConfiguration = null;\r\n        this._foldersConsolidatedConfigurations = new ResourceMap();\r\n        this._userConfiguration = null;\r\n    }\r\n    Configuration.prototype.getValue = function (section, overrides, workspace) {\r\n        var consolidateConfigurationModel = this.getConsolidateConfigurationModel(overrides, workspace);\r\n        return consolidateConfigurationModel.getValue(section);\r\n    };\r\n    Configuration.prototype.updateValue = function (key, value, overrides) {\r\n        if (overrides === void 0) { overrides = {}; }\r\n        var memoryConfiguration;\r\n        if (overrides.resource) {\r\n            memoryConfiguration = this._memoryConfigurationByResource.get(overrides.resource);\r\n            if (!memoryConfiguration) {\r\n                memoryConfiguration = new ConfigurationModel();\r\n                this._memoryConfigurationByResource.set(overrides.resource, memoryConfiguration);\r\n            }\r\n        }\r\n        else {\r\n            memoryConfiguration = this._memoryConfiguration;\r\n        }\r\n        if (value === undefined) {\r\n            memoryConfiguration.removeValue(key);\r\n        }\r\n        else {\r\n            memoryConfiguration.setValue(key, value);\r\n        }\r\n        if (!overrides.resource) {\r\n            this._workspaceConsolidatedConfiguration = null;\r\n        }\r\n    };\r\n    Configuration.prototype.inspect = function (key, overrides, workspace) {\r\n        var consolidateConfigurationModel = this.getConsolidateConfigurationModel(overrides, workspace);\r\n        var folderConfigurationModel = this.getFolderConfigurationModelForResource(overrides.resource, workspace);\r\n        var memoryConfigurationModel = overrides.resource ? this._memoryConfigurationByResource.get(overrides.resource) || this._memoryConfiguration : this._memoryConfiguration;\r\n        var defaultValue = overrides.overrideIdentifier ? this._defaultConfiguration.freeze().override(overrides.overrideIdentifier).getValue(key) : this._defaultConfiguration.freeze().getValue(key);\r\n        var userValue = overrides.overrideIdentifier ? this.userConfiguration.freeze().override(overrides.overrideIdentifier).getValue(key) : this.userConfiguration.freeze().getValue(key);\r\n        var userLocalValue = overrides.overrideIdentifier ? this.localUserConfiguration.freeze().override(overrides.overrideIdentifier).getValue(key) : this.localUserConfiguration.freeze().getValue(key);\r\n        var userRemoteValue = overrides.overrideIdentifier ? this.remoteUserConfiguration.freeze().override(overrides.overrideIdentifier).getValue(key) : this.remoteUserConfiguration.freeze().getValue(key);\r\n        var workspaceValue = workspace ? overrides.overrideIdentifier ? this._workspaceConfiguration.freeze().override(overrides.overrideIdentifier).getValue(key) : this._workspaceConfiguration.freeze().getValue(key) : undefined; //Check on workspace exists or not because _workspaceConfiguration is never null\r\n        var workspaceFolderValue = folderConfigurationModel ? overrides.overrideIdentifier ? folderConfigurationModel.freeze().override(overrides.overrideIdentifier).getValue(key) : folderConfigurationModel.freeze().getValue(key) : undefined;\r\n        var memoryValue = overrides.overrideIdentifier ? memoryConfigurationModel.override(overrides.overrideIdentifier).getValue(key) : memoryConfigurationModel.getValue(key);\r\n        var value = consolidateConfigurationModel.getValue(key);\r\n        var overrideIdentifiers = arrays.distinct(arrays.flatten(consolidateConfigurationModel.overrides.map(function (override) { return override.identifiers; }))).filter(function (overrideIdentifier) { return consolidateConfigurationModel.getOverrideValue(key, overrideIdentifier) !== undefined; });\r\n        return {\r\n            defaultValue: defaultValue,\r\n            userValue: userValue,\r\n            userLocalValue: userLocalValue,\r\n            userRemoteValue: userRemoteValue,\r\n            workspaceValue: workspaceValue,\r\n            workspaceFolderValue: workspaceFolderValue,\r\n            memoryValue: memoryValue,\r\n            value: value,\r\n            default: defaultValue !== undefined ? { value: this._defaultConfiguration.freeze().getValue(key), override: overrides.overrideIdentifier ? this._defaultConfiguration.freeze().getOverrideValue(key, overrides.overrideIdentifier) : undefined } : undefined,\r\n            user: userValue !== undefined ? { value: this.userConfiguration.freeze().getValue(key), override: overrides.overrideIdentifier ? this.userConfiguration.freeze().getOverrideValue(key, overrides.overrideIdentifier) : undefined } : undefined,\r\n            userLocal: userLocalValue !== undefined ? { value: this.localUserConfiguration.freeze().getValue(key), override: overrides.overrideIdentifier ? this.localUserConfiguration.freeze().getOverrideValue(key, overrides.overrideIdentifier) : undefined } : undefined,\r\n            userRemote: userRemoteValue !== undefined ? { value: this.remoteUserConfiguration.freeze().getValue(key), override: overrides.overrideIdentifier ? this.remoteUserConfiguration.freeze().getOverrideValue(key, overrides.overrideIdentifier) : undefined } : undefined,\r\n            workspace: workspaceValue !== undefined ? { value: this._workspaceConfiguration.freeze().getValue(key), override: overrides.overrideIdentifier ? this._workspaceConfiguration.freeze().getOverrideValue(key, overrides.overrideIdentifier) : undefined } : undefined,\r\n            workspaceFolder: workspaceFolderValue !== undefined ? { value: folderConfigurationModel === null || folderConfigurationModel === void 0 ? void 0 : folderConfigurationModel.freeze().getValue(key), override: overrides.overrideIdentifier ? folderConfigurationModel === null || folderConfigurationModel === void 0 ? void 0 : folderConfigurationModel.freeze().getOverrideValue(key, overrides.overrideIdentifier) : undefined } : undefined,\r\n            memory: memoryValue !== undefined ? { value: memoryConfigurationModel.getValue(key), override: overrides.overrideIdentifier ? memoryConfigurationModel.getOverrideValue(key, overrides.overrideIdentifier) : undefined } : undefined,\r\n            overrideIdentifiers: overrideIdentifiers.length ? overrideIdentifiers : undefined\r\n        };\r\n    };\r\n    Object.defineProperty(Configuration.prototype, \"userConfiguration\", {\r\n        get: function () {\r\n            if (!this._userConfiguration) {\r\n                this._userConfiguration = this._remoteUserConfiguration.isEmpty() ? this._localUserConfiguration : this._localUserConfiguration.merge(this._remoteUserConfiguration);\r\n                if (this._freeze) {\r\n                    this._userConfiguration.freeze();\r\n                }\r\n            }\r\n            return this._userConfiguration;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Configuration.prototype, \"localUserConfiguration\", {\r\n        get: function () {\r\n            return this._localUserConfiguration;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Configuration.prototype, \"remoteUserConfiguration\", {\r\n        get: function () {\r\n            return this._remoteUserConfiguration;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Configuration.prototype.getConsolidateConfigurationModel = function (overrides, workspace) {\r\n        var configurationModel = this.getConsolidatedConfigurationModelForResource(overrides, workspace);\r\n        return overrides.overrideIdentifier ? configurationModel.override(overrides.overrideIdentifier) : configurationModel;\r\n    };\r\n    Configuration.prototype.getConsolidatedConfigurationModelForResource = function (_a, workspace) {\r\n        var resource = _a.resource;\r\n        var consolidateConfiguration = this.getWorkspaceConsolidatedConfiguration();\r\n        if (workspace && resource) {\r\n            var root = workspace.getFolder(resource);\r\n            if (root) {\r\n                consolidateConfiguration = this.getFolderConsolidatedConfiguration(root.uri) || consolidateConfiguration;\r\n            }\r\n            var memoryConfigurationForResource = this._memoryConfigurationByResource.get(resource);\r\n            if (memoryConfigurationForResource) {\r\n                consolidateConfiguration = consolidateConfiguration.merge(memoryConfigurationForResource);\r\n            }\r\n        }\r\n        return consolidateConfiguration;\r\n    };\r\n    Configuration.prototype.getWorkspaceConsolidatedConfiguration = function () {\r\n        if (!this._workspaceConsolidatedConfiguration) {\r\n            this._workspaceConsolidatedConfiguration = this._defaultConfiguration.merge(this.userConfiguration, this._workspaceConfiguration, this._memoryConfiguration);\r\n            if (this._freeze) {\r\n                this._workspaceConfiguration = this._workspaceConfiguration.freeze();\r\n            }\r\n        }\r\n        return this._workspaceConsolidatedConfiguration;\r\n    };\r\n    Configuration.prototype.getFolderConsolidatedConfiguration = function (folder) {\r\n        var folderConsolidatedConfiguration = this._foldersConsolidatedConfigurations.get(folder);\r\n        if (!folderConsolidatedConfiguration) {\r\n            var workspaceConsolidateConfiguration = this.getWorkspaceConsolidatedConfiguration();\r\n            var folderConfiguration = this._folderConfigurations.get(folder);\r\n            if (folderConfiguration) {\r\n                folderConsolidatedConfiguration = workspaceConsolidateConfiguration.merge(folderConfiguration);\r\n                if (this._freeze) {\r\n                    folderConsolidatedConfiguration = folderConsolidatedConfiguration.freeze();\r\n                }\r\n                this._foldersConsolidatedConfigurations.set(folder, folderConsolidatedConfiguration);\r\n            }\r\n            else {\r\n                folderConsolidatedConfiguration = workspaceConsolidateConfiguration;\r\n            }\r\n        }\r\n        return folderConsolidatedConfiguration;\r\n    };\r\n    Configuration.prototype.getFolderConfigurationModelForResource = function (resource, workspace) {\r\n        if (workspace && resource) {\r\n            var root = workspace.getFolder(resource);\r\n            if (root) {\r\n                return this._folderConfigurations.get(root.uri);\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    return Configuration;\r\n}());\r\nexport { Configuration };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as nls from '../../../nls.js';\r\nimport { IntervalTimer } from '../../../base/common/async.js';\r\nimport { Emitter, Event } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nvar AbstractKeybindingService = /** @class */ (function (_super) {\r\n    __extends(AbstractKeybindingService, _super);\r\n    function AbstractKeybindingService(_contextKeyService, _commandService, _telemetryService, _notificationService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._contextKeyService = _contextKeyService;\r\n        _this._commandService = _commandService;\r\n        _this._telemetryService = _telemetryService;\r\n        _this._notificationService = _notificationService;\r\n        _this._onDidUpdateKeybindings = _this._register(new Emitter());\r\n        _this._currentChord = null;\r\n        _this._currentChordChecker = new IntervalTimer();\r\n        _this._currentChordStatusMessage = null;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(AbstractKeybindingService.prototype, \"onDidUpdateKeybindings\", {\r\n        get: function () {\r\n            return this._onDidUpdateKeybindings ? this._onDidUpdateKeybindings.event : Event.None; // Sinon stubbing walks properties on prototype\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AbstractKeybindingService.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    AbstractKeybindingService.prototype.getKeybindings = function () {\r\n        return this._getResolver().getKeybindings();\r\n    };\r\n    AbstractKeybindingService.prototype.lookupKeybinding = function (commandId) {\r\n        var result = this._getResolver().lookupPrimaryKeybinding(commandId);\r\n        if (!result) {\r\n            return undefined;\r\n        }\r\n        return result.resolvedKeybinding;\r\n    };\r\n    AbstractKeybindingService.prototype.softDispatch = function (e, target) {\r\n        var keybinding = this.resolveKeyboardEvent(e);\r\n        if (keybinding.isChord()) {\r\n            console.warn('Unexpected keyboard event mapped to a chord');\r\n            return null;\r\n        }\r\n        var firstPart = keybinding.getDispatchParts()[0];\r\n        if (firstPart === null) {\r\n            // cannot be dispatched, probably only modifier keys\r\n            return null;\r\n        }\r\n        var contextValue = this._contextKeyService.getContext(target);\r\n        var currentChord = this._currentChord ? this._currentChord.keypress : null;\r\n        return this._getResolver().resolve(contextValue, currentChord, firstPart);\r\n    };\r\n    AbstractKeybindingService.prototype._enterChordMode = function (firstPart, keypressLabel) {\r\n        var _this = this;\r\n        this._currentChord = {\r\n            keypress: firstPart,\r\n            label: keypressLabel\r\n        };\r\n        this._currentChordStatusMessage = this._notificationService.status(nls.localize('first.chord', \"({0}) was pressed. Waiting for second key of chord...\", keypressLabel));\r\n        var chordEnterTime = Date.now();\r\n        this._currentChordChecker.cancelAndSet(function () {\r\n            if (!_this._documentHasFocus()) {\r\n                // Focus has been lost => leave chord mode\r\n                _this._leaveChordMode();\r\n                return;\r\n            }\r\n            if (Date.now() - chordEnterTime > 5000) {\r\n                // 5 seconds elapsed => leave chord mode\r\n                _this._leaveChordMode();\r\n            }\r\n        }, 500);\r\n    };\r\n    AbstractKeybindingService.prototype._leaveChordMode = function () {\r\n        if (this._currentChordStatusMessage) {\r\n            this._currentChordStatusMessage.dispose();\r\n            this._currentChordStatusMessage = null;\r\n        }\r\n        this._currentChordChecker.cancel();\r\n        this._currentChord = null;\r\n    };\r\n    AbstractKeybindingService.prototype._dispatch = function (e, target) {\r\n        return this._doDispatch(this.resolveKeyboardEvent(e), target);\r\n    };\r\n    AbstractKeybindingService.prototype._doDispatch = function (keybinding, target) {\r\n        var _this = this;\r\n        var shouldPreventDefault = false;\r\n        if (keybinding.isChord()) {\r\n            console.warn('Unexpected keyboard event mapped to a chord');\r\n            return false;\r\n        }\r\n        var firstPart = keybinding.getDispatchParts()[0];\r\n        if (firstPart === null) {\r\n            // cannot be dispatched, probably only modifier keys\r\n            return shouldPreventDefault;\r\n        }\r\n        var contextValue = this._contextKeyService.getContext(target);\r\n        var currentChord = this._currentChord ? this._currentChord.keypress : null;\r\n        var keypressLabel = keybinding.getLabel();\r\n        var resolveResult = this._getResolver().resolve(contextValue, currentChord, firstPart);\r\n        if (resolveResult && resolveResult.enterChord) {\r\n            shouldPreventDefault = true;\r\n            this._enterChordMode(firstPart, keypressLabel);\r\n            return shouldPreventDefault;\r\n        }\r\n        if (this._currentChord) {\r\n            if (!resolveResult || !resolveResult.commandId) {\r\n                this._notificationService.status(nls.localize('missing.chord', \"The key combination ({0}, {1}) is not a command.\", this._currentChord.label, keypressLabel), { hideAfter: 10 * 1000 /* 10s */ });\r\n                shouldPreventDefault = true;\r\n            }\r\n        }\r\n        this._leaveChordMode();\r\n        if (resolveResult && resolveResult.commandId) {\r\n            if (!resolveResult.bubble) {\r\n                shouldPreventDefault = true;\r\n            }\r\n            if (typeof resolveResult.commandArgs === 'undefined') {\r\n                this._commandService.executeCommand(resolveResult.commandId).then(undefined, function (err) { return _this._notificationService.warn(err); });\r\n            }\r\n            else {\r\n                this._commandService.executeCommand(resolveResult.commandId, resolveResult.commandArgs).then(undefined, function (err) { return _this._notificationService.warn(err); });\r\n            }\r\n            this._telemetryService.publicLog2('workbenchActionExecuted', { id: resolveResult.commandId, from: 'keybinding' });\r\n        }\r\n        return shouldPreventDefault;\r\n    };\r\n    AbstractKeybindingService.prototype.mightProducePrintableCharacter = function (event) {\r\n        if (event.ctrlKey || event.metaKey) {\r\n            // ignore ctrl/cmd-combination but not shift/alt-combinatios\r\n            return false;\r\n        }\r\n        // weak check for certain ranges. this is properly implemented in a subclass\r\n        // with access to the KeyboardMapperFactory.\r\n        if ((event.keyCode >= 31 /* KEY_A */ && event.keyCode <= 56 /* KEY_Z */)\r\n            || (event.keyCode >= 21 /* KEY_0 */ && event.keyCode <= 30 /* KEY_9 */)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    return AbstractKeybindingService;\r\n}(Disposable));\r\nexport { AbstractKeybindingService };\r\n","import { ContextKeyOrExpr } from '../../contextkey/common/contextkey.js';\r\nvar KeybindingResolver = /** @class */ (function () {\r\n    function KeybindingResolver(defaultKeybindings, overrides) {\r\n        this._defaultKeybindings = defaultKeybindings;\r\n        this._defaultBoundCommands = new Map();\r\n        for (var i = 0, len = defaultKeybindings.length; i < len; i++) {\r\n            var command = defaultKeybindings[i].command;\r\n            if (command) {\r\n                this._defaultBoundCommands.set(command, true);\r\n            }\r\n        }\r\n        this._map = new Map();\r\n        this._lookupMap = new Map();\r\n        this._keybindings = KeybindingResolver.combine(defaultKeybindings, overrides);\r\n        for (var i = 0, len = this._keybindings.length; i < len; i++) {\r\n            var k = this._keybindings[i];\r\n            if (k.keypressParts.length === 0) {\r\n                // unbound\r\n                continue;\r\n            }\r\n            // TODO@chords\r\n            this._addKeyPress(k.keypressParts[0], k);\r\n        }\r\n    }\r\n    KeybindingResolver._isTargetedForRemoval = function (defaultKb, keypressFirstPart, keypressChordPart, command, when) {\r\n        if (defaultKb.command !== command) {\r\n            return false;\r\n        }\r\n        // TODO@chords\r\n        if (keypressFirstPart && defaultKb.keypressParts[0] !== keypressFirstPart) {\r\n            return false;\r\n        }\r\n        // TODO@chords\r\n        if (keypressChordPart && defaultKb.keypressParts[1] !== keypressChordPart) {\r\n            return false;\r\n        }\r\n        if (when) {\r\n            if (!defaultKb.when) {\r\n                return false;\r\n            }\r\n            if (!when.equals(defaultKb.when)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * Looks for rules containing -command in `overrides` and removes them directly from `defaults`.\r\n     */\r\n    KeybindingResolver.combine = function (defaults, rawOverrides) {\r\n        defaults = defaults.slice(0);\r\n        var overrides = [];\r\n        for (var _i = 0, rawOverrides_1 = rawOverrides; _i < rawOverrides_1.length; _i++) {\r\n            var override = rawOverrides_1[_i];\r\n            if (!override.command || override.command.length === 0 || override.command.charAt(0) !== '-') {\r\n                overrides.push(override);\r\n                continue;\r\n            }\r\n            var command = override.command.substr(1);\r\n            // TODO@chords\r\n            var keypressFirstPart = override.keypressParts[0];\r\n            var keypressChordPart = override.keypressParts[1];\r\n            var when = override.when;\r\n            for (var j = defaults.length - 1; j >= 0; j--) {\r\n                if (this._isTargetedForRemoval(defaults[j], keypressFirstPart, keypressChordPart, command, when)) {\r\n                    defaults.splice(j, 1);\r\n                }\r\n            }\r\n        }\r\n        return defaults.concat(overrides);\r\n    };\r\n    KeybindingResolver.prototype._addKeyPress = function (keypress, item) {\r\n        var conflicts = this._map.get(keypress);\r\n        if (typeof conflicts === 'undefined') {\r\n            // There is no conflict so far\r\n            this._map.set(keypress, [item]);\r\n            this._addToLookupMap(item);\r\n            return;\r\n        }\r\n        for (var i = conflicts.length - 1; i >= 0; i--) {\r\n            var conflict = conflicts[i];\r\n            if (conflict.command === item.command) {\r\n                continue;\r\n            }\r\n            var conflictIsChord = (conflict.keypressParts.length > 1);\r\n            var itemIsChord = (item.keypressParts.length > 1);\r\n            // TODO@chords\r\n            if (conflictIsChord && itemIsChord && conflict.keypressParts[1] !== item.keypressParts[1]) {\r\n                // The conflict only shares the chord start with this command\r\n                continue;\r\n            }\r\n            if (KeybindingResolver.whenIsEntirelyIncluded(conflict.when, item.when)) {\r\n                // `item` completely overwrites `conflict`\r\n                // Remove conflict from the lookupMap\r\n                this._removeFromLookupMap(conflict);\r\n            }\r\n        }\r\n        conflicts.push(item);\r\n        this._addToLookupMap(item);\r\n    };\r\n    KeybindingResolver.prototype._addToLookupMap = function (item) {\r\n        if (!item.command) {\r\n            return;\r\n        }\r\n        var arr = this._lookupMap.get(item.command);\r\n        if (typeof arr === 'undefined') {\r\n            arr = [item];\r\n            this._lookupMap.set(item.command, arr);\r\n        }\r\n        else {\r\n            arr.push(item);\r\n        }\r\n    };\r\n    KeybindingResolver.prototype._removeFromLookupMap = function (item) {\r\n        if (!item.command) {\r\n            return;\r\n        }\r\n        var arr = this._lookupMap.get(item.command);\r\n        if (typeof arr === 'undefined') {\r\n            return;\r\n        }\r\n        for (var i = 0, len = arr.length; i < len; i++) {\r\n            if (arr[i] === item) {\r\n                arr.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns true if it is provable `a` implies `b`.\r\n     */\r\n    KeybindingResolver.whenIsEntirelyIncluded = function (a, b) {\r\n        if (!b) {\r\n            return true;\r\n        }\r\n        if (!a) {\r\n            return false;\r\n        }\r\n        return this._implies(a, b);\r\n    };\r\n    /**\r\n     * Returns true if it is provable `p` implies `q`.\r\n     */\r\n    KeybindingResolver._implies = function (p, q) {\r\n        var notP = p.negate();\r\n        var terminals = function (node) {\r\n            if (node instanceof ContextKeyOrExpr) {\r\n                return node.expr;\r\n            }\r\n            return [node];\r\n        };\r\n        var expr = terminals(notP).concat(terminals(q));\r\n        for (var i = 0; i < expr.length; i++) {\r\n            var a = expr[i];\r\n            var notA = a.negate();\r\n            for (var j = i + 1; j < expr.length; j++) {\r\n                var b = expr[j];\r\n                if (notA.equals(b)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    KeybindingResolver.prototype.getKeybindings = function () {\r\n        return this._keybindings;\r\n    };\r\n    KeybindingResolver.prototype.lookupPrimaryKeybinding = function (commandId) {\r\n        var items = this._lookupMap.get(commandId);\r\n        if (typeof items === 'undefined' || items.length === 0) {\r\n            return null;\r\n        }\r\n        return items[items.length - 1];\r\n    };\r\n    KeybindingResolver.prototype.resolve = function (context, currentChord, keypress) {\r\n        var lookupMap = null;\r\n        if (currentChord !== null) {\r\n            // Fetch all chord bindings for `currentChord`\r\n            var candidates = this._map.get(currentChord);\r\n            if (typeof candidates === 'undefined') {\r\n                // No chords starting with `currentChord`\r\n                return null;\r\n            }\r\n            lookupMap = [];\r\n            for (var i = 0, len = candidates.length; i < len; i++) {\r\n                var candidate = candidates[i];\r\n                // TODO@chords\r\n                if (candidate.keypressParts[1] === keypress) {\r\n                    lookupMap.push(candidate);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var candidates = this._map.get(keypress);\r\n            if (typeof candidates === 'undefined') {\r\n                // No bindings with `keypress`\r\n                return null;\r\n            }\r\n            lookupMap = candidates;\r\n        }\r\n        var result = this._findCommand(context, lookupMap);\r\n        if (!result) {\r\n            return null;\r\n        }\r\n        // TODO@chords\r\n        if (currentChord === null && result.keypressParts.length > 1 && result.keypressParts[1] !== null) {\r\n            return {\r\n                enterChord: true,\r\n                commandId: null,\r\n                commandArgs: null,\r\n                bubble: false\r\n            };\r\n        }\r\n        return {\r\n            enterChord: false,\r\n            commandId: result.command,\r\n            commandArgs: result.commandArgs,\r\n            bubble: result.bubble\r\n        };\r\n    };\r\n    KeybindingResolver.prototype._findCommand = function (context, matches) {\r\n        for (var i = matches.length - 1; i >= 0; i--) {\r\n            var k = matches[i];\r\n            if (!KeybindingResolver.contextMatchesRules(context, k.when)) {\r\n                continue;\r\n            }\r\n            return k;\r\n        }\r\n        return null;\r\n    };\r\n    KeybindingResolver.contextMatchesRules = function (context, rules) {\r\n        if (!rules) {\r\n            return true;\r\n        }\r\n        return rules.evaluate(context);\r\n    };\r\n    return KeybindingResolver;\r\n}());\r\nexport { KeybindingResolver };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar ResolvedKeybindingItem = /** @class */ (function () {\r\n    function ResolvedKeybindingItem(resolvedKeybinding, command, commandArgs, when, isDefault) {\r\n        this.resolvedKeybinding = resolvedKeybinding;\r\n        this.keypressParts = resolvedKeybinding ? removeElementsAfterNulls(resolvedKeybinding.getDispatchParts()) : [];\r\n        this.bubble = (command ? command.charCodeAt(0) === 94 /* Caret */ : false);\r\n        this.command = this.bubble ? command.substr(1) : command;\r\n        this.commandArgs = commandArgs;\r\n        this.when = when;\r\n        this.isDefault = isDefault;\r\n    }\r\n    return ResolvedKeybindingItem;\r\n}());\r\nexport { ResolvedKeybindingItem };\r\nexport function removeElementsAfterNulls(arr) {\r\n    var result = [];\r\n    for (var i = 0, len = arr.length; i < len; i++) {\r\n        var element = arr[i];\r\n        if (!element) {\r\n            // stop processing at first encountered null\r\n            return result;\r\n        }\r\n        result.push(element);\r\n    }\r\n    return result;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { illegalArgument } from '../../../base/common/errors.js';\r\nimport { UILabelProvider, AriaLabelProvider } from '../../../base/common/keybindingLabels.js';\r\nimport { ResolvedKeybinding, ResolvedKeybindingPart } from '../../../base/common/keyCodes.js';\r\nvar BaseResolvedKeybinding = /** @class */ (function (_super) {\r\n    __extends(BaseResolvedKeybinding, _super);\r\n    function BaseResolvedKeybinding(os, parts) {\r\n        var _this = _super.call(this) || this;\r\n        if (parts.length === 0) {\r\n            throw illegalArgument(\"parts\");\r\n        }\r\n        _this._os = os;\r\n        _this._parts = parts;\r\n        return _this;\r\n    }\r\n    BaseResolvedKeybinding.prototype.getLabel = function () {\r\n        var _this = this;\r\n        return UILabelProvider.toLabel(this._os, this._parts, function (keybinding) { return _this._getLabel(keybinding); });\r\n    };\r\n    BaseResolvedKeybinding.prototype.getAriaLabel = function () {\r\n        var _this = this;\r\n        return AriaLabelProvider.toLabel(this._os, this._parts, function (keybinding) { return _this._getAriaLabel(keybinding); });\r\n    };\r\n    BaseResolvedKeybinding.prototype.isChord = function () {\r\n        return (this._parts.length > 1);\r\n    };\r\n    BaseResolvedKeybinding.prototype.getParts = function () {\r\n        var _this = this;\r\n        return this._parts.map(function (keybinding) { return _this._getPart(keybinding); });\r\n    };\r\n    BaseResolvedKeybinding.prototype._getPart = function (keybinding) {\r\n        return new ResolvedKeybindingPart(keybinding.ctrlKey, keybinding.shiftKey, keybinding.altKey, keybinding.metaKey, this._getLabel(keybinding), this._getAriaLabel(keybinding));\r\n    };\r\n    BaseResolvedKeybinding.prototype.getDispatchParts = function () {\r\n        var _this = this;\r\n        return this._parts.map(function (keybinding) { return _this._getDispatchPart(keybinding); });\r\n    };\r\n    return BaseResolvedKeybinding;\r\n}(ResolvedKeybinding));\r\nexport { BaseResolvedKeybinding };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { KeyCodeUtils } from '../../../base/common/keyCodes.js';\r\nimport { BaseResolvedKeybinding } from './baseResolvedKeybinding.js';\r\n/**\r\n * Do not instantiate. Use KeybindingService to get a ResolvedKeybinding seeded with information about the current kb layout.\r\n */\r\nvar USLayoutResolvedKeybinding = /** @class */ (function (_super) {\r\n    __extends(USLayoutResolvedKeybinding, _super);\r\n    function USLayoutResolvedKeybinding(actual, os) {\r\n        return _super.call(this, os, actual.parts) || this;\r\n    }\r\n    USLayoutResolvedKeybinding.prototype._keyCodeToUILabel = function (keyCode) {\r\n        if (this._os === 2 /* Macintosh */) {\r\n            switch (keyCode) {\r\n                case 15 /* LeftArrow */:\r\n                    return '←';\r\n                case 16 /* UpArrow */:\r\n                    return '↑';\r\n                case 17 /* RightArrow */:\r\n                    return '→';\r\n                case 18 /* DownArrow */:\r\n                    return '↓';\r\n            }\r\n        }\r\n        return KeyCodeUtils.toString(keyCode);\r\n    };\r\n    USLayoutResolvedKeybinding.prototype._getLabel = function (keybinding) {\r\n        if (keybinding.isDuplicateModifierCase()) {\r\n            return '';\r\n        }\r\n        return this._keyCodeToUILabel(keybinding.keyCode);\r\n    };\r\n    USLayoutResolvedKeybinding.prototype._getAriaLabel = function (keybinding) {\r\n        if (keybinding.isDuplicateModifierCase()) {\r\n            return '';\r\n        }\r\n        return KeyCodeUtils.toString(keybinding.keyCode);\r\n    };\r\n    USLayoutResolvedKeybinding.prototype._getDispatchPart = function (keybinding) {\r\n        return USLayoutResolvedKeybinding.getDispatchStr(keybinding);\r\n    };\r\n    USLayoutResolvedKeybinding.getDispatchStr = function (keybinding) {\r\n        if (keybinding.isModifierKey()) {\r\n            return null;\r\n        }\r\n        var result = '';\r\n        if (keybinding.ctrlKey) {\r\n            result += 'ctrl+';\r\n        }\r\n        if (keybinding.shiftKey) {\r\n            result += 'shift+';\r\n        }\r\n        if (keybinding.altKey) {\r\n            result += 'alt+';\r\n        }\r\n        if (keybinding.metaKey) {\r\n            result += 'meta+';\r\n        }\r\n        result += KeyCodeUtils.toString(keybinding.keyCode);\r\n        return result;\r\n    };\r\n    return USLayoutResolvedKeybinding;\r\n}(BaseResolvedKeybinding));\r\nexport { USLayoutResolvedKeybinding };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\r\nimport { Emitter, Event } from '../../../base/common/event.js';\r\nimport { SimpleKeybinding, createKeybinding } from '../../../base/common/keyCodes.js';\r\nimport { ImmortalReference, toDisposable, DisposableStore, Disposable } from '../../../base/common/lifecycle.js';\r\nimport { OS, isLinux, isMacintosh } from '../../../base/common/platform.js';\r\nimport Severity from '../../../base/common/severity.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { isCodeEditor } from '../../browser/editorBrowser.js';\r\nimport { isDiffEditorConfigurationKey, isEditorConfigurationKey } from '../../common/config/commonEditorConfig.js';\r\nimport { EditOperation } from '../../common/core/editOperation.js';\r\nimport { Position as Pos } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { WorkspaceTextEdit } from '../../common/modes.js';\r\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nimport { Configuration, ConfigurationModel, DefaultConfigurationModel } from '../../../platform/configuration/common/configurationModels.js';\r\nimport { AbstractKeybindingService } from '../../../platform/keybinding/common/abstractKeybindingService.js';\r\nimport { KeybindingResolver } from '../../../platform/keybinding/common/keybindingResolver.js';\r\nimport { KeybindingsRegistry } from '../../../platform/keybinding/common/keybindingsRegistry.js';\r\nimport { ResolvedKeybindingItem } from '../../../platform/keybinding/common/resolvedKeybindingItem.js';\r\nimport { USLayoutResolvedKeybinding } from '../../../platform/keybinding/common/usLayoutResolvedKeybinding.js';\r\nimport { NoOpNotification } from '../../../platform/notification/common/notification.js';\r\nimport { WorkspaceFolder } from '../../../platform/workspace/common/workspace.js';\r\nimport { SimpleServicesNLS } from '../../common/standaloneStrings.js';\r\nvar SimpleModel = /** @class */ (function () {\r\n    function SimpleModel(model) {\r\n        this.model = model;\r\n        this._onDispose = new Emitter();\r\n    }\r\n    Object.defineProperty(SimpleModel.prototype, \"textEditorModel\", {\r\n        get: function () {\r\n            return this.model;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SimpleModel.prototype.dispose = function () {\r\n        this._onDispose.fire();\r\n    };\r\n    return SimpleModel;\r\n}());\r\nexport { SimpleModel };\r\nfunction withTypedEditor(widget, codeEditorCallback, diffEditorCallback) {\r\n    if (isCodeEditor(widget)) {\r\n        // Single Editor\r\n        return codeEditorCallback(widget);\r\n    }\r\n    else {\r\n        // Diff Editor\r\n        return diffEditorCallback(widget);\r\n    }\r\n}\r\nvar SimpleEditorModelResolverService = /** @class */ (function () {\r\n    function SimpleEditorModelResolverService(modelService) {\r\n        this.modelService = modelService;\r\n    }\r\n    SimpleEditorModelResolverService.prototype.setEditor = function (editor) {\r\n        this.editor = editor;\r\n    };\r\n    SimpleEditorModelResolverService.prototype.createModelReference = function (resource) {\r\n        var _this = this;\r\n        var model = null;\r\n        if (this.editor) {\r\n            model = withTypedEditor(this.editor, function (editor) { return _this.findModel(editor, resource); }, function (diffEditor) { return _this.findModel(diffEditor.getOriginalEditor(), resource) || _this.findModel(diffEditor.getModifiedEditor(), resource); });\r\n        }\r\n        if (!model) {\r\n            return Promise.reject(new Error(\"Model not found\"));\r\n        }\r\n        return Promise.resolve(new ImmortalReference(new SimpleModel(model)));\r\n    };\r\n    SimpleEditorModelResolverService.prototype.findModel = function (editor, resource) {\r\n        var model = this.modelService ? this.modelService.getModel(resource) : editor.getModel();\r\n        if (model && model.uri.toString() !== resource.toString()) {\r\n            return null;\r\n        }\r\n        return model;\r\n    };\r\n    return SimpleEditorModelResolverService;\r\n}());\r\nexport { SimpleEditorModelResolverService };\r\nvar SimpleEditorProgressService = /** @class */ (function () {\r\n    function SimpleEditorProgressService() {\r\n    }\r\n    SimpleEditorProgressService.prototype.show = function () {\r\n        return SimpleEditorProgressService.NULL_PROGRESS_RUNNER;\r\n    };\r\n    SimpleEditorProgressService.prototype.showWhile = function (promise, delay) {\r\n        return Promise.resolve(undefined);\r\n    };\r\n    SimpleEditorProgressService.NULL_PROGRESS_RUNNER = {\r\n        done: function () { },\r\n        total: function () { },\r\n        worked: function () { }\r\n    };\r\n    return SimpleEditorProgressService;\r\n}());\r\nexport { SimpleEditorProgressService };\r\nvar SimpleDialogService = /** @class */ (function () {\r\n    function SimpleDialogService() {\r\n    }\r\n    return SimpleDialogService;\r\n}());\r\nexport { SimpleDialogService };\r\nvar SimpleNotificationService = /** @class */ (function () {\r\n    function SimpleNotificationService() {\r\n    }\r\n    SimpleNotificationService.prototype.info = function (message) {\r\n        return this.notify({ severity: Severity.Info, message: message });\r\n    };\r\n    SimpleNotificationService.prototype.warn = function (message) {\r\n        return this.notify({ severity: Severity.Warning, message: message });\r\n    };\r\n    SimpleNotificationService.prototype.error = function (error) {\r\n        return this.notify({ severity: Severity.Error, message: error });\r\n    };\r\n    SimpleNotificationService.prototype.notify = function (notification) {\r\n        switch (notification.severity) {\r\n            case Severity.Error:\r\n                console.error(notification.message);\r\n                break;\r\n            case Severity.Warning:\r\n                console.warn(notification.message);\r\n                break;\r\n            default:\r\n                console.log(notification.message);\r\n                break;\r\n        }\r\n        return SimpleNotificationService.NO_OP;\r\n    };\r\n    SimpleNotificationService.prototype.status = function (message, options) {\r\n        return Disposable.None;\r\n    };\r\n    SimpleNotificationService.NO_OP = new NoOpNotification();\r\n    return SimpleNotificationService;\r\n}());\r\nexport { SimpleNotificationService };\r\nvar StandaloneCommandService = /** @class */ (function () {\r\n    function StandaloneCommandService(instantiationService) {\r\n        this._onWillExecuteCommand = new Emitter();\r\n        this._onDidExecuteCommand = new Emitter();\r\n        this._instantiationService = instantiationService;\r\n        this._dynamicCommands = Object.create(null);\r\n    }\r\n    StandaloneCommandService.prototype.addCommand = function (command) {\r\n        var _this = this;\r\n        var id = command.id;\r\n        this._dynamicCommands[id] = command;\r\n        return toDisposable(function () {\r\n            delete _this._dynamicCommands[id];\r\n        });\r\n    };\r\n    StandaloneCommandService.prototype.executeCommand = function (id) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var command = (CommandsRegistry.getCommand(id) || this._dynamicCommands[id]);\r\n        if (!command) {\r\n            return Promise.reject(new Error(\"command '\" + id + \"' not found\"));\r\n        }\r\n        try {\r\n            this._onWillExecuteCommand.fire({ commandId: id, args: args });\r\n            var result = this._instantiationService.invokeFunction.apply(this._instantiationService, __spreadArrays([command.handler], args));\r\n            this._onDidExecuteCommand.fire({ commandId: id, args: args });\r\n            return Promise.resolve(result);\r\n        }\r\n        catch (err) {\r\n            return Promise.reject(err);\r\n        }\r\n    };\r\n    return StandaloneCommandService;\r\n}());\r\nexport { StandaloneCommandService };\r\nvar StandaloneKeybindingService = /** @class */ (function (_super) {\r\n    __extends(StandaloneKeybindingService, _super);\r\n    function StandaloneKeybindingService(contextKeyService, commandService, telemetryService, notificationService, domNode) {\r\n        var _this = _super.call(this, contextKeyService, commandService, telemetryService, notificationService) || this;\r\n        _this._cachedResolver = null;\r\n        _this._dynamicKeybindings = [];\r\n        _this._register(dom.addDisposableListener(domNode, dom.EventType.KEY_DOWN, function (e) {\r\n            var keyEvent = new StandardKeyboardEvent(e);\r\n            var shouldPreventDefault = _this._dispatch(keyEvent, keyEvent.target);\r\n            if (shouldPreventDefault) {\r\n                keyEvent.preventDefault();\r\n                keyEvent.stopPropagation();\r\n            }\r\n        }));\r\n        return _this;\r\n    }\r\n    StandaloneKeybindingService.prototype.addDynamicKeybinding = function (commandId, _keybinding, handler, when) {\r\n        var _this = this;\r\n        var keybinding = createKeybinding(_keybinding, OS);\r\n        var toDispose = new DisposableStore();\r\n        if (keybinding) {\r\n            this._dynamicKeybindings.push({\r\n                keybinding: keybinding,\r\n                command: commandId,\r\n                when: when,\r\n                weight1: 1000,\r\n                weight2: 0\r\n            });\r\n            toDispose.add(toDisposable(function () {\r\n                for (var i = 0; i < _this._dynamicKeybindings.length; i++) {\r\n                    var kb = _this._dynamicKeybindings[i];\r\n                    if (kb.command === commandId) {\r\n                        _this._dynamicKeybindings.splice(i, 1);\r\n                        _this.updateResolver({ source: 1 /* Default */ });\r\n                        return;\r\n                    }\r\n                }\r\n            }));\r\n        }\r\n        var commandService = this._commandService;\r\n        if (commandService instanceof StandaloneCommandService) {\r\n            toDispose.add(commandService.addCommand({\r\n                id: commandId,\r\n                handler: handler\r\n            }));\r\n        }\r\n        else {\r\n            throw new Error('Unknown command service!');\r\n        }\r\n        this.updateResolver({ source: 1 /* Default */ });\r\n        return toDispose;\r\n    };\r\n    StandaloneKeybindingService.prototype.updateResolver = function (event) {\r\n        this._cachedResolver = null;\r\n        this._onDidUpdateKeybindings.fire(event);\r\n    };\r\n    StandaloneKeybindingService.prototype._getResolver = function () {\r\n        if (!this._cachedResolver) {\r\n            var defaults = this._toNormalizedKeybindingItems(KeybindingsRegistry.getDefaultKeybindings(), true);\r\n            var overrides = this._toNormalizedKeybindingItems(this._dynamicKeybindings, false);\r\n            this._cachedResolver = new KeybindingResolver(defaults, overrides);\r\n        }\r\n        return this._cachedResolver;\r\n    };\r\n    StandaloneKeybindingService.prototype._documentHasFocus = function () {\r\n        return document.hasFocus();\r\n    };\r\n    StandaloneKeybindingService.prototype._toNormalizedKeybindingItems = function (items, isDefault) {\r\n        var result = [], resultLen = 0;\r\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\r\n            var item = items_1[_i];\r\n            var when = item.when || undefined;\r\n            var keybinding = item.keybinding;\r\n            if (!keybinding) {\r\n                // This might be a removal keybinding item in user settings => accept it\r\n                result[resultLen++] = new ResolvedKeybindingItem(undefined, item.command, item.commandArgs, when, isDefault);\r\n            }\r\n            else {\r\n                var resolvedKeybindings = this.resolveKeybinding(keybinding);\r\n                for (var _a = 0, resolvedKeybindings_1 = resolvedKeybindings; _a < resolvedKeybindings_1.length; _a++) {\r\n                    var resolvedKeybinding = resolvedKeybindings_1[_a];\r\n                    result[resultLen++] = new ResolvedKeybindingItem(resolvedKeybinding, item.command, item.commandArgs, when, isDefault);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    StandaloneKeybindingService.prototype.resolveKeybinding = function (keybinding) {\r\n        return [new USLayoutResolvedKeybinding(keybinding, OS)];\r\n    };\r\n    StandaloneKeybindingService.prototype.resolveKeyboardEvent = function (keyboardEvent) {\r\n        var keybinding = new SimpleKeybinding(keyboardEvent.ctrlKey, keyboardEvent.shiftKey, keyboardEvent.altKey, keyboardEvent.metaKey, keyboardEvent.keyCode).toChord();\r\n        return new USLayoutResolvedKeybinding(keybinding, OS);\r\n    };\r\n    return StandaloneKeybindingService;\r\n}(AbstractKeybindingService));\r\nexport { StandaloneKeybindingService };\r\nfunction isConfigurationOverrides(thing) {\r\n    return thing\r\n        && typeof thing === 'object'\r\n        && (!thing.overrideIdentifier || typeof thing.overrideIdentifier === 'string')\r\n        && (!thing.resource || thing.resource instanceof URI);\r\n}\r\nvar SimpleConfigurationService = /** @class */ (function () {\r\n    function SimpleConfigurationService() {\r\n        this._onDidChangeConfiguration = new Emitter();\r\n        this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\r\n        this._configuration = new Configuration(new DefaultConfigurationModel(), new ConfigurationModel());\r\n    }\r\n    SimpleConfigurationService.prototype.configuration = function () {\r\n        return this._configuration;\r\n    };\r\n    SimpleConfigurationService.prototype.getValue = function (arg1, arg2) {\r\n        var section = typeof arg1 === 'string' ? arg1 : undefined;\r\n        var overrides = isConfigurationOverrides(arg1) ? arg1 : isConfigurationOverrides(arg2) ? arg2 : {};\r\n        return this.configuration().getValue(section, overrides, undefined);\r\n    };\r\n    SimpleConfigurationService.prototype.updateValue = function (key, value, arg3, arg4) {\r\n        this.configuration().updateValue(key, value);\r\n        return Promise.resolve();\r\n    };\r\n    SimpleConfigurationService.prototype.inspect = function (key, options) {\r\n        if (options === void 0) { options = {}; }\r\n        return this.configuration().inspect(key, options, undefined);\r\n    };\r\n    return SimpleConfigurationService;\r\n}());\r\nexport { SimpleConfigurationService };\r\nvar SimpleResourceConfigurationService = /** @class */ (function () {\r\n    function SimpleResourceConfigurationService(configurationService) {\r\n        var _this = this;\r\n        this.configurationService = configurationService;\r\n        this._onDidChangeConfiguration = new Emitter();\r\n        this.configurationService.onDidChangeConfiguration(function (e) {\r\n            _this._onDidChangeConfiguration.fire({ affectedKeys: e.affectedKeys, affectsConfiguration: function (resource, configuration) { return e.affectsConfiguration(configuration); } });\r\n        });\r\n    }\r\n    SimpleResourceConfigurationService.prototype.getValue = function (resource, arg2, arg3) {\r\n        var position = Pos.isIPosition(arg2) ? arg2 : null;\r\n        var section = position ? (typeof arg3 === 'string' ? arg3 : undefined) : (typeof arg2 === 'string' ? arg2 : undefined);\r\n        if (typeof section === 'undefined') {\r\n            return this.configurationService.getValue();\r\n        }\r\n        return this.configurationService.getValue(section);\r\n    };\r\n    return SimpleResourceConfigurationService;\r\n}());\r\nexport { SimpleResourceConfigurationService };\r\nvar SimpleResourcePropertiesService = /** @class */ (function () {\r\n    function SimpleResourcePropertiesService(configurationService) {\r\n        this.configurationService = configurationService;\r\n    }\r\n    SimpleResourcePropertiesService.prototype.getEOL = function (resource, language) {\r\n        var eol = this.configurationService.getValue('files.eol', { overrideIdentifier: language, resource: resource });\r\n        if (eol && eol !== 'auto') {\r\n            return eol;\r\n        }\r\n        return (isLinux || isMacintosh) ? '\\n' : '\\r\\n';\r\n    };\r\n    SimpleResourcePropertiesService = __decorate([\r\n        __param(0, IConfigurationService)\r\n    ], SimpleResourcePropertiesService);\r\n    return SimpleResourcePropertiesService;\r\n}());\r\nexport { SimpleResourcePropertiesService };\r\nvar StandaloneTelemetryService = /** @class */ (function () {\r\n    function StandaloneTelemetryService() {\r\n    }\r\n    StandaloneTelemetryService.prototype.publicLog = function (eventName, data) {\r\n        return Promise.resolve(undefined);\r\n    };\r\n    StandaloneTelemetryService.prototype.publicLog2 = function (eventName, data) {\r\n        return this.publicLog(eventName, data);\r\n    };\r\n    return StandaloneTelemetryService;\r\n}());\r\nexport { StandaloneTelemetryService };\r\nvar SimpleWorkspaceContextService = /** @class */ (function () {\r\n    function SimpleWorkspaceContextService() {\r\n        var resource = URI.from({ scheme: SimpleWorkspaceContextService.SCHEME, authority: 'model', path: '/' });\r\n        this.workspace = { id: '4064f6ec-cb38-4ad0-af64-ee6467e63c82', folders: [new WorkspaceFolder({ uri: resource, name: '', index: 0 })] };\r\n    }\r\n    SimpleWorkspaceContextService.prototype.getWorkspace = function () {\r\n        return this.workspace;\r\n    };\r\n    SimpleWorkspaceContextService.prototype.getWorkspaceFolder = function (resource) {\r\n        return resource && resource.scheme === SimpleWorkspaceContextService.SCHEME ? this.workspace.folders[0] : null;\r\n    };\r\n    SimpleWorkspaceContextService.SCHEME = 'inmemory';\r\n    return SimpleWorkspaceContextService;\r\n}());\r\nexport { SimpleWorkspaceContextService };\r\nexport function applyConfigurationValues(configurationService, source, isDiffEditor) {\r\n    if (!source) {\r\n        return;\r\n    }\r\n    if (!(configurationService instanceof SimpleConfigurationService)) {\r\n        return;\r\n    }\r\n    Object.keys(source).forEach(function (key) {\r\n        if (isEditorConfigurationKey(key)) {\r\n            configurationService.updateValue(\"editor.\" + key, source[key]);\r\n        }\r\n        if (isDiffEditor && isDiffEditorConfigurationKey(key)) {\r\n            configurationService.updateValue(\"diffEditor.\" + key, source[key]);\r\n        }\r\n    });\r\n}\r\nvar SimpleBulkEditService = /** @class */ (function () {\r\n    function SimpleBulkEditService(_modelService) {\r\n        this._modelService = _modelService;\r\n        //\r\n    }\r\n    SimpleBulkEditService.prototype.hasPreviewHandler = function () {\r\n        return false;\r\n    };\r\n    SimpleBulkEditService.prototype.apply = function (workspaceEdit, options) {\r\n        var edits = new Map();\r\n        if (workspaceEdit.edits) {\r\n            for (var _i = 0, _a = workspaceEdit.edits; _i < _a.length; _i++) {\r\n                var edit = _a[_i];\r\n                if (!WorkspaceTextEdit.is(edit)) {\r\n                    return Promise.reject(new Error('bad edit - only text edits are supported'));\r\n                }\r\n                var model = this._modelService.getModel(edit.resource);\r\n                if (!model) {\r\n                    return Promise.reject(new Error('bad edit - model not found'));\r\n                }\r\n                var array = edits.get(model);\r\n                if (!array) {\r\n                    array = [];\r\n                    edits.set(model, array);\r\n                }\r\n                array.push(edit.edit);\r\n            }\r\n        }\r\n        var totalEdits = 0;\r\n        var totalFiles = 0;\r\n        edits.forEach(function (edits, model) {\r\n            model.pushStackElement();\r\n            model.pushEditOperations([], edits.map(function (e) { return EditOperation.replaceMove(Range.lift(e.range), e.text); }), function () { return []; });\r\n            model.pushStackElement();\r\n            totalFiles += 1;\r\n            totalEdits += edits.length;\r\n        });\r\n        return Promise.resolve({\r\n            selection: undefined,\r\n            ariaSummary: strings.format(SimpleServicesNLS.bulkEditServiceSummary, totalEdits, totalFiles)\r\n        });\r\n    };\r\n    return SimpleBulkEditService;\r\n}());\r\nexport { SimpleBulkEditService };\r\nvar SimpleUriLabelService = /** @class */ (function () {\r\n    function SimpleUriLabelService() {\r\n    }\r\n    SimpleUriLabelService.prototype.getUriLabel = function (resource, options) {\r\n        if (resource.scheme === 'file') {\r\n            return resource.fsPath;\r\n        }\r\n        return resource.path;\r\n    };\r\n    return SimpleUriLabelService;\r\n}());\r\nexport { SimpleUriLabelService };\r\nvar SimpleLayoutService = /** @class */ (function () {\r\n    function SimpleLayoutService(_container) {\r\n        this._container = _container;\r\n        this.onLayout = Event.None;\r\n    }\r\n    Object.defineProperty(SimpleLayoutService.prototype, \"container\", {\r\n        get: function () {\r\n            return this._container;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return SimpleLayoutService;\r\n}());\r\nexport { SimpleLayoutService };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './media/diffReview.css';\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\r\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\r\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { Action } from '../../../base/common/actions.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { Configuration } from '../config/configuration.js';\r\nimport { EditorAction, registerEditorAction } from '../editorExtensions.js';\r\nimport { ICodeEditorService } from '../services/codeEditorService.js';\r\nimport { EditorFontLigatures } from '../../common/config/editorOptions.js';\r\nimport { LineTokens } from '../../common/core/lineTokens.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { editorLineNumbers } from '../../common/view/editorColorRegistry.js';\r\nimport { RenderLineInput, renderViewLine2 as renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\r\nimport { ViewLineRenderingData } from '../../common/viewModel/viewModel.js';\r\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { scrollbarShadow } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nvar DIFF_LINES_PADDING = 3;\r\nvar DiffEntry = /** @class */ (function () {\r\n    function DiffEntry(originalLineStart, originalLineEnd, modifiedLineStart, modifiedLineEnd) {\r\n        this.originalLineStart = originalLineStart;\r\n        this.originalLineEnd = originalLineEnd;\r\n        this.modifiedLineStart = modifiedLineStart;\r\n        this.modifiedLineEnd = modifiedLineEnd;\r\n    }\r\n    DiffEntry.prototype.getType = function () {\r\n        if (this.originalLineStart === 0) {\r\n            return 1 /* Insert */;\r\n        }\r\n        if (this.modifiedLineStart === 0) {\r\n            return 2 /* Delete */;\r\n        }\r\n        return 0 /* Equal */;\r\n    };\r\n    return DiffEntry;\r\n}());\r\nvar Diff = /** @class */ (function () {\r\n    function Diff(entries) {\r\n        this.entries = entries;\r\n    }\r\n    return Diff;\r\n}());\r\nvar DiffReview = /** @class */ (function (_super) {\r\n    __extends(DiffReview, _super);\r\n    function DiffReview(diffEditor) {\r\n        var _this = _super.call(this) || this;\r\n        _this._width = 0;\r\n        _this._diffEditor = diffEditor;\r\n        _this._isVisible = false;\r\n        _this.shadow = createFastDomNode(document.createElement('div'));\r\n        _this.shadow.setClassName('diff-review-shadow');\r\n        _this.actionBarContainer = createFastDomNode(document.createElement('div'));\r\n        _this.actionBarContainer.setClassName('diff-review-actions');\r\n        _this._actionBar = _this._register(new ActionBar(_this.actionBarContainer.domNode));\r\n        _this._actionBar.push(new Action('diffreview.close', nls.localize('label.close', \"Close\"), 'close-diff-review', true, function () {\r\n            _this.hide();\r\n            return Promise.resolve(null);\r\n        }), { label: false, icon: true });\r\n        _this.domNode = createFastDomNode(document.createElement('div'));\r\n        _this.domNode.setClassName('diff-review monaco-editor-background');\r\n        _this._content = createFastDomNode(document.createElement('div'));\r\n        _this._content.setClassName('diff-review-content');\r\n        _this.scrollbar = _this._register(new DomScrollableElement(_this._content.domNode, {}));\r\n        _this.domNode.domNode.appendChild(_this.scrollbar.getDomNode());\r\n        _this._register(diffEditor.onDidUpdateDiff(function () {\r\n            if (!_this._isVisible) {\r\n                return;\r\n            }\r\n            _this._diffs = _this._compute();\r\n            _this._render();\r\n        }));\r\n        _this._register(diffEditor.getModifiedEditor().onDidChangeCursorPosition(function () {\r\n            if (!_this._isVisible) {\r\n                return;\r\n            }\r\n            _this._render();\r\n        }));\r\n        _this._register(diffEditor.getOriginalEditor().onDidFocusEditorWidget(function () {\r\n            if (_this._isVisible) {\r\n                _this.hide();\r\n            }\r\n        }));\r\n        _this._register(diffEditor.getModifiedEditor().onDidFocusEditorWidget(function () {\r\n            if (_this._isVisible) {\r\n                _this.hide();\r\n            }\r\n        }));\r\n        _this._register(dom.addStandardDisposableListener(_this.domNode.domNode, 'click', function (e) {\r\n            e.preventDefault();\r\n            var row = dom.findParentWithClass(e.target, 'diff-review-row');\r\n            if (row) {\r\n                _this._goToRow(row);\r\n            }\r\n        }));\r\n        _this._register(dom.addStandardDisposableListener(_this.domNode.domNode, 'keydown', function (e) {\r\n            if (e.equals(18 /* DownArrow */)\r\n                || e.equals(2048 /* CtrlCmd */ | 18 /* DownArrow */)\r\n                || e.equals(512 /* Alt */ | 18 /* DownArrow */)) {\r\n                e.preventDefault();\r\n                _this._goToRow(_this._getNextRow());\r\n            }\r\n            if (e.equals(16 /* UpArrow */)\r\n                || e.equals(2048 /* CtrlCmd */ | 16 /* UpArrow */)\r\n                || e.equals(512 /* Alt */ | 16 /* UpArrow */)) {\r\n                e.preventDefault();\r\n                _this._goToRow(_this._getPrevRow());\r\n            }\r\n            if (e.equals(9 /* Escape */)\r\n                || e.equals(2048 /* CtrlCmd */ | 9 /* Escape */)\r\n                || e.equals(512 /* Alt */ | 9 /* Escape */)\r\n                || e.equals(1024 /* Shift */ | 9 /* Escape */)) {\r\n                e.preventDefault();\r\n                _this.hide();\r\n            }\r\n            if (e.equals(10 /* Space */)\r\n                || e.equals(3 /* Enter */)) {\r\n                e.preventDefault();\r\n                _this.accept();\r\n            }\r\n        }));\r\n        _this._diffs = [];\r\n        _this._currentDiff = null;\r\n        return _this;\r\n    }\r\n    DiffReview.prototype.prev = function () {\r\n        var index = 0;\r\n        if (!this._isVisible) {\r\n            this._diffs = this._compute();\r\n        }\r\n        if (this._isVisible) {\r\n            var currentIndex = -1;\r\n            for (var i = 0, len = this._diffs.length; i < len; i++) {\r\n                if (this._diffs[i] === this._currentDiff) {\r\n                    currentIndex = i;\r\n                    break;\r\n                }\r\n            }\r\n            index = (this._diffs.length + currentIndex - 1);\r\n        }\r\n        else {\r\n            index = this._findDiffIndex(this._diffEditor.getPosition());\r\n        }\r\n        if (this._diffs.length === 0) {\r\n            // Nothing to do\r\n            return;\r\n        }\r\n        index = index % this._diffs.length;\r\n        this._diffEditor.setPosition(new Position(this._diffs[index].entries[0].modifiedLineStart, 1));\r\n        this._isVisible = true;\r\n        this._diffEditor.doLayout();\r\n        this._render();\r\n        this._goToRow(this._getNextRow());\r\n    };\r\n    DiffReview.prototype.next = function () {\r\n        var index = 0;\r\n        if (!this._isVisible) {\r\n            this._diffs = this._compute();\r\n        }\r\n        if (this._isVisible) {\r\n            var currentIndex = -1;\r\n            for (var i = 0, len = this._diffs.length; i < len; i++) {\r\n                if (this._diffs[i] === this._currentDiff) {\r\n                    currentIndex = i;\r\n                    break;\r\n                }\r\n            }\r\n            index = (currentIndex + 1);\r\n        }\r\n        else {\r\n            index = this._findDiffIndex(this._diffEditor.getPosition());\r\n        }\r\n        if (this._diffs.length === 0) {\r\n            // Nothing to do\r\n            return;\r\n        }\r\n        index = index % this._diffs.length;\r\n        this._diffEditor.setPosition(new Position(this._diffs[index].entries[0].modifiedLineStart, 1));\r\n        this._isVisible = true;\r\n        this._diffEditor.doLayout();\r\n        this._render();\r\n        this._goToRow(this._getNextRow());\r\n    };\r\n    DiffReview.prototype.accept = function () {\r\n        var jumpToLineNumber = -1;\r\n        var current = this._getCurrentFocusedRow();\r\n        if (current) {\r\n            var lineNumber = parseInt(current.getAttribute('data-line'), 10);\r\n            if (!isNaN(lineNumber)) {\r\n                jumpToLineNumber = lineNumber;\r\n            }\r\n        }\r\n        this.hide();\r\n        if (jumpToLineNumber !== -1) {\r\n            this._diffEditor.setPosition(new Position(jumpToLineNumber, 1));\r\n            this._diffEditor.revealPosition(new Position(jumpToLineNumber, 1), 1 /* Immediate */);\r\n        }\r\n    };\r\n    DiffReview.prototype.hide = function () {\r\n        this._isVisible = false;\r\n        this._diffEditor.focus();\r\n        this._diffEditor.doLayout();\r\n        this._render();\r\n    };\r\n    DiffReview.prototype._getPrevRow = function () {\r\n        var current = this._getCurrentFocusedRow();\r\n        if (!current) {\r\n            return this._getFirstRow();\r\n        }\r\n        if (current.previousElementSibling) {\r\n            return current.previousElementSibling;\r\n        }\r\n        return current;\r\n    };\r\n    DiffReview.prototype._getNextRow = function () {\r\n        var current = this._getCurrentFocusedRow();\r\n        if (!current) {\r\n            return this._getFirstRow();\r\n        }\r\n        if (current.nextElementSibling) {\r\n            return current.nextElementSibling;\r\n        }\r\n        return current;\r\n    };\r\n    DiffReview.prototype._getFirstRow = function () {\r\n        return this.domNode.domNode.querySelector('.diff-review-row');\r\n    };\r\n    DiffReview.prototype._getCurrentFocusedRow = function () {\r\n        var result = document.activeElement;\r\n        if (result && /diff-review-row/.test(result.className)) {\r\n            return result;\r\n        }\r\n        return null;\r\n    };\r\n    DiffReview.prototype._goToRow = function (row) {\r\n        var prev = this._getCurrentFocusedRow();\r\n        row.tabIndex = 0;\r\n        row.focus();\r\n        if (prev && prev !== row) {\r\n            prev.tabIndex = -1;\r\n        }\r\n        this.scrollbar.scanDomNode();\r\n    };\r\n    DiffReview.prototype.isVisible = function () {\r\n        return this._isVisible;\r\n    };\r\n    DiffReview.prototype.layout = function (top, width, height) {\r\n        this._width = width;\r\n        this.shadow.setTop(top - 6);\r\n        this.shadow.setWidth(width);\r\n        this.shadow.setHeight(this._isVisible ? 6 : 0);\r\n        this.domNode.setTop(top);\r\n        this.domNode.setWidth(width);\r\n        this.domNode.setHeight(height);\r\n        this._content.setHeight(height);\r\n        this._content.setWidth(width);\r\n        if (this._isVisible) {\r\n            this.actionBarContainer.setAttribute('aria-hidden', 'false');\r\n            this.actionBarContainer.setDisplay('block');\r\n        }\r\n        else {\r\n            this.actionBarContainer.setAttribute('aria-hidden', 'true');\r\n            this.actionBarContainer.setDisplay('none');\r\n        }\r\n    };\r\n    DiffReview.prototype._compute = function () {\r\n        var lineChanges = this._diffEditor.getLineChanges();\r\n        if (!lineChanges || lineChanges.length === 0) {\r\n            return [];\r\n        }\r\n        var originalModel = this._diffEditor.getOriginalEditor().getModel();\r\n        var modifiedModel = this._diffEditor.getModifiedEditor().getModel();\r\n        if (!originalModel || !modifiedModel) {\r\n            return [];\r\n        }\r\n        return DiffReview._mergeAdjacent(lineChanges, originalModel.getLineCount(), modifiedModel.getLineCount());\r\n    };\r\n    DiffReview._mergeAdjacent = function (lineChanges, originalLineCount, modifiedLineCount) {\r\n        if (!lineChanges || lineChanges.length === 0) {\r\n            return [];\r\n        }\r\n        var diffs = [], diffsLength = 0;\r\n        for (var i = 0, len = lineChanges.length; i < len; i++) {\r\n            var lineChange = lineChanges[i];\r\n            var originalStart = lineChange.originalStartLineNumber;\r\n            var originalEnd = lineChange.originalEndLineNumber;\r\n            var modifiedStart = lineChange.modifiedStartLineNumber;\r\n            var modifiedEnd = lineChange.modifiedEndLineNumber;\r\n            var r_1 = [], rLength_1 = 0;\r\n            // Emit before anchors\r\n            {\r\n                var originalEqualAbove = (originalEnd === 0 ? originalStart : originalStart - 1);\r\n                var modifiedEqualAbove = (modifiedEnd === 0 ? modifiedStart : modifiedStart - 1);\r\n                // Make sure we don't step into the previous diff\r\n                var minOriginal = 1;\r\n                var minModified = 1;\r\n                if (i > 0) {\r\n                    var prevLineChange = lineChanges[i - 1];\r\n                    if (prevLineChange.originalEndLineNumber === 0) {\r\n                        minOriginal = prevLineChange.originalStartLineNumber + 1;\r\n                    }\r\n                    else {\r\n                        minOriginal = prevLineChange.originalEndLineNumber + 1;\r\n                    }\r\n                    if (prevLineChange.modifiedEndLineNumber === 0) {\r\n                        minModified = prevLineChange.modifiedStartLineNumber + 1;\r\n                    }\r\n                    else {\r\n                        minModified = prevLineChange.modifiedEndLineNumber + 1;\r\n                    }\r\n                }\r\n                var fromOriginal = originalEqualAbove - DIFF_LINES_PADDING + 1;\r\n                var fromModified = modifiedEqualAbove - DIFF_LINES_PADDING + 1;\r\n                if (fromOriginal < minOriginal) {\r\n                    var delta = minOriginal - fromOriginal;\r\n                    fromOriginal = fromOriginal + delta;\r\n                    fromModified = fromModified + delta;\r\n                }\r\n                if (fromModified < minModified) {\r\n                    var delta = minModified - fromModified;\r\n                    fromOriginal = fromOriginal + delta;\r\n                    fromModified = fromModified + delta;\r\n                }\r\n                r_1[rLength_1++] = new DiffEntry(fromOriginal, originalEqualAbove, fromModified, modifiedEqualAbove);\r\n            }\r\n            // Emit deleted lines\r\n            {\r\n                if (originalEnd !== 0) {\r\n                    r_1[rLength_1++] = new DiffEntry(originalStart, originalEnd, 0, 0);\r\n                }\r\n            }\r\n            // Emit inserted lines\r\n            {\r\n                if (modifiedEnd !== 0) {\r\n                    r_1[rLength_1++] = new DiffEntry(0, 0, modifiedStart, modifiedEnd);\r\n                }\r\n            }\r\n            // Emit after anchors\r\n            {\r\n                var originalEqualBelow = (originalEnd === 0 ? originalStart + 1 : originalEnd + 1);\r\n                var modifiedEqualBelow = (modifiedEnd === 0 ? modifiedStart + 1 : modifiedEnd + 1);\r\n                // Make sure we don't step into the next diff\r\n                var maxOriginal = originalLineCount;\r\n                var maxModified = modifiedLineCount;\r\n                if (i + 1 < len) {\r\n                    var nextLineChange = lineChanges[i + 1];\r\n                    if (nextLineChange.originalEndLineNumber === 0) {\r\n                        maxOriginal = nextLineChange.originalStartLineNumber;\r\n                    }\r\n                    else {\r\n                        maxOriginal = nextLineChange.originalStartLineNumber - 1;\r\n                    }\r\n                    if (nextLineChange.modifiedEndLineNumber === 0) {\r\n                        maxModified = nextLineChange.modifiedStartLineNumber;\r\n                    }\r\n                    else {\r\n                        maxModified = nextLineChange.modifiedStartLineNumber - 1;\r\n                    }\r\n                }\r\n                var toOriginal = originalEqualBelow + DIFF_LINES_PADDING - 1;\r\n                var toModified = modifiedEqualBelow + DIFF_LINES_PADDING - 1;\r\n                if (toOriginal > maxOriginal) {\r\n                    var delta = maxOriginal - toOriginal;\r\n                    toOriginal = toOriginal + delta;\r\n                    toModified = toModified + delta;\r\n                }\r\n                if (toModified > maxModified) {\r\n                    var delta = maxModified - toModified;\r\n                    toOriginal = toOriginal + delta;\r\n                    toModified = toModified + delta;\r\n                }\r\n                r_1[rLength_1++] = new DiffEntry(originalEqualBelow, toOriginal, modifiedEqualBelow, toModified);\r\n            }\r\n            diffs[diffsLength++] = new Diff(r_1);\r\n        }\r\n        // Merge adjacent diffs\r\n        var curr = diffs[0].entries;\r\n        var r = [], rLength = 0;\r\n        for (var i = 1, len = diffs.length; i < len; i++) {\r\n            var thisDiff = diffs[i].entries;\r\n            var currLast = curr[curr.length - 1];\r\n            var thisFirst = thisDiff[0];\r\n            if (currLast.getType() === 0 /* Equal */\r\n                && thisFirst.getType() === 0 /* Equal */\r\n                && thisFirst.originalLineStart <= currLast.originalLineEnd) {\r\n                // We are dealing with equal lines that overlap\r\n                curr[curr.length - 1] = new DiffEntry(currLast.originalLineStart, thisFirst.originalLineEnd, currLast.modifiedLineStart, thisFirst.modifiedLineEnd);\r\n                curr = curr.concat(thisDiff.slice(1));\r\n                continue;\r\n            }\r\n            r[rLength++] = new Diff(curr);\r\n            curr = thisDiff;\r\n        }\r\n        r[rLength++] = new Diff(curr);\r\n        return r;\r\n    };\r\n    DiffReview.prototype._findDiffIndex = function (pos) {\r\n        var lineNumber = pos.lineNumber;\r\n        for (var i = 0, len = this._diffs.length; i < len; i++) {\r\n            var diff = this._diffs[i].entries;\r\n            var lastModifiedLine = diff[diff.length - 1].modifiedLineEnd;\r\n            if (lineNumber <= lastModifiedLine) {\r\n                return i;\r\n            }\r\n        }\r\n        return 0;\r\n    };\r\n    DiffReview.prototype._render = function () {\r\n        var originalOptions = this._diffEditor.getOriginalEditor().getOptions();\r\n        var modifiedOptions = this._diffEditor.getModifiedEditor().getOptions();\r\n        var originalModel = this._diffEditor.getOriginalEditor().getModel();\r\n        var modifiedModel = this._diffEditor.getModifiedEditor().getModel();\r\n        var originalModelOpts = originalModel.getOptions();\r\n        var modifiedModelOpts = modifiedModel.getOptions();\r\n        if (!this._isVisible || !originalModel || !modifiedModel) {\r\n            dom.clearNode(this._content.domNode);\r\n            this._currentDiff = null;\r\n            this.scrollbar.scanDomNode();\r\n            return;\r\n        }\r\n        var diffIndex = this._findDiffIndex(this._diffEditor.getPosition());\r\n        if (this._diffs[diffIndex] === this._currentDiff) {\r\n            return;\r\n        }\r\n        this._currentDiff = this._diffs[diffIndex];\r\n        var diffs = this._diffs[diffIndex].entries;\r\n        var container = document.createElement('div');\r\n        container.className = 'diff-review-table';\r\n        container.setAttribute('role', 'list');\r\n        Configuration.applyFontInfoSlow(container, modifiedOptions.get(34 /* fontInfo */));\r\n        var minOriginalLine = 0;\r\n        var maxOriginalLine = 0;\r\n        var minModifiedLine = 0;\r\n        var maxModifiedLine = 0;\r\n        for (var i = 0, len = diffs.length; i < len; i++) {\r\n            var diffEntry = diffs[i];\r\n            var originalLineStart = diffEntry.originalLineStart;\r\n            var originalLineEnd = diffEntry.originalLineEnd;\r\n            var modifiedLineStart = diffEntry.modifiedLineStart;\r\n            var modifiedLineEnd = diffEntry.modifiedLineEnd;\r\n            if (originalLineStart !== 0 && ((minOriginalLine === 0 || originalLineStart < minOriginalLine))) {\r\n                minOriginalLine = originalLineStart;\r\n            }\r\n            if (originalLineEnd !== 0 && ((maxOriginalLine === 0 || originalLineEnd > maxOriginalLine))) {\r\n                maxOriginalLine = originalLineEnd;\r\n            }\r\n            if (modifiedLineStart !== 0 && ((minModifiedLine === 0 || modifiedLineStart < minModifiedLine))) {\r\n                minModifiedLine = modifiedLineStart;\r\n            }\r\n            if (modifiedLineEnd !== 0 && ((maxModifiedLine === 0 || modifiedLineEnd > maxModifiedLine))) {\r\n                maxModifiedLine = modifiedLineEnd;\r\n            }\r\n        }\r\n        var header = document.createElement('div');\r\n        header.className = 'diff-review-row';\r\n        var cell = document.createElement('div');\r\n        cell.className = 'diff-review-cell diff-review-summary';\r\n        var originalChangedLinesCnt = maxOriginalLine - minOriginalLine + 1;\r\n        var modifiedChangedLinesCnt = maxModifiedLine - minModifiedLine + 1;\r\n        cell.appendChild(document.createTextNode(diffIndex + 1 + \"/\" + this._diffs.length + \": @@ -\" + minOriginalLine + \",\" + originalChangedLinesCnt + \" +\" + minModifiedLine + \",\" + modifiedChangedLinesCnt + \" @@\"));\r\n        header.setAttribute('data-line', String(minModifiedLine));\r\n        var getAriaLines = function (lines) {\r\n            if (lines === 0) {\r\n                return nls.localize('no_lines', \"no lines\");\r\n            }\r\n            else if (lines === 1) {\r\n                return nls.localize('one_line', \"1 line\");\r\n            }\r\n            else {\r\n                return nls.localize('more_lines', \"{0} lines\", lines);\r\n            }\r\n        };\r\n        var originalChangedLinesCntAria = getAriaLines(originalChangedLinesCnt);\r\n        var modifiedChangedLinesCntAria = getAriaLines(modifiedChangedLinesCnt);\r\n        header.setAttribute('aria-label', nls.localize({\r\n            key: 'header',\r\n            comment: [\r\n                'This is the ARIA label for a git diff header.',\r\n                'A git diff header looks like this: @@ -154,12 +159,39 @@.',\r\n                'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.',\r\n                'Variables 0 and 1 refer to the diff index out of total number of diffs.',\r\n                'Variables 2 and 4 will be numbers (a line number).',\r\n                'Variables 3 and 5 will be \"no lines\", \"1 line\" or \"X lines\", localized separately.'\r\n            ]\r\n        }, \"Difference {0} of {1}: original {2}, {3}, modified {4}, {5}\", (diffIndex + 1), this._diffs.length, minOriginalLine, originalChangedLinesCntAria, minModifiedLine, modifiedChangedLinesCntAria));\r\n        header.appendChild(cell);\r\n        // @@ -504,7 +517,7 @@\r\n        header.setAttribute('role', 'listitem');\r\n        container.appendChild(header);\r\n        var modLine = minModifiedLine;\r\n        for (var i = 0, len = diffs.length; i < len; i++) {\r\n            var diffEntry = diffs[i];\r\n            DiffReview._renderSection(container, diffEntry, modLine, this._width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts);\r\n            if (diffEntry.modifiedLineStart !== 0) {\r\n                modLine = diffEntry.modifiedLineEnd;\r\n            }\r\n        }\r\n        dom.clearNode(this._content.domNode);\r\n        this._content.domNode.appendChild(container);\r\n        this.scrollbar.scanDomNode();\r\n    };\r\n    DiffReview._renderSection = function (dest, diffEntry, modLine, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts) {\r\n        var type = diffEntry.getType();\r\n        var rowClassName = 'diff-review-row';\r\n        var lineNumbersExtraClassName = '';\r\n        var spacerClassName = 'diff-review-spacer';\r\n        switch (type) {\r\n            case 1 /* Insert */:\r\n                rowClassName = 'diff-review-row line-insert';\r\n                lineNumbersExtraClassName = ' char-insert';\r\n                spacerClassName = 'diff-review-spacer insert-sign';\r\n                break;\r\n            case 2 /* Delete */:\r\n                rowClassName = 'diff-review-row line-delete';\r\n                lineNumbersExtraClassName = ' char-delete';\r\n                spacerClassName = 'diff-review-spacer delete-sign';\r\n                break;\r\n        }\r\n        var originalLineStart = diffEntry.originalLineStart;\r\n        var originalLineEnd = diffEntry.originalLineEnd;\r\n        var modifiedLineStart = diffEntry.modifiedLineStart;\r\n        var modifiedLineEnd = diffEntry.modifiedLineEnd;\r\n        var cnt = Math.max(modifiedLineEnd - modifiedLineStart, originalLineEnd - originalLineStart);\r\n        var originalLayoutInfo = originalOptions.get(107 /* layoutInfo */);\r\n        var originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\r\n        var modifiedLayoutInfo = modifiedOptions.get(107 /* layoutInfo */);\r\n        var modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\r\n        for (var i = 0; i <= cnt; i++) {\r\n            var originalLine = (originalLineStart === 0 ? 0 : originalLineStart + i);\r\n            var modifiedLine = (modifiedLineStart === 0 ? 0 : modifiedLineStart + i);\r\n            var row = document.createElement('div');\r\n            row.style.minWidth = width + 'px';\r\n            row.className = rowClassName;\r\n            row.setAttribute('role', 'listitem');\r\n            if (modifiedLine !== 0) {\r\n                modLine = modifiedLine;\r\n            }\r\n            row.setAttribute('data-line', String(modLine));\r\n            var cell = document.createElement('div');\r\n            cell.className = 'diff-review-cell';\r\n            row.appendChild(cell);\r\n            var originalLineNumber = document.createElement('span');\r\n            originalLineNumber.style.width = (originalLineNumbersWidth + 'px');\r\n            originalLineNumber.style.minWidth = (originalLineNumbersWidth + 'px');\r\n            originalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\r\n            if (originalLine !== 0) {\r\n                originalLineNumber.appendChild(document.createTextNode(String(originalLine)));\r\n            }\r\n            else {\r\n                originalLineNumber.innerHTML = '&#160;';\r\n            }\r\n            cell.appendChild(originalLineNumber);\r\n            var modifiedLineNumber = document.createElement('span');\r\n            modifiedLineNumber.style.width = (modifiedLineNumbersWidth + 'px');\r\n            modifiedLineNumber.style.minWidth = (modifiedLineNumbersWidth + 'px');\r\n            modifiedLineNumber.style.paddingRight = '10px';\r\n            modifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\r\n            if (modifiedLine !== 0) {\r\n                modifiedLineNumber.appendChild(document.createTextNode(String(modifiedLine)));\r\n            }\r\n            else {\r\n                modifiedLineNumber.innerHTML = '&#160;';\r\n            }\r\n            cell.appendChild(modifiedLineNumber);\r\n            var spacer = document.createElement('span');\r\n            spacer.className = spacerClassName;\r\n            spacer.innerHTML = '&#160;&#160;';\r\n            cell.appendChild(spacer);\r\n            var lineContent = void 0;\r\n            if (modifiedLine !== 0) {\r\n                cell.insertAdjacentHTML('beforeend', this._renderLine(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, modifiedLine));\r\n                lineContent = modifiedModel.getLineContent(modifiedLine);\r\n            }\r\n            else {\r\n                cell.insertAdjacentHTML('beforeend', this._renderLine(originalModel, originalOptions, originalModelOpts.tabSize, originalLine));\r\n                lineContent = originalModel.getLineContent(originalLine);\r\n            }\r\n            if (lineContent.length === 0) {\r\n                lineContent = nls.localize('blankLine', \"blank\");\r\n            }\r\n            var ariaLabel = '';\r\n            switch (type) {\r\n                case 0 /* Equal */:\r\n                    ariaLabel = nls.localize('equalLine', \"original {0}, modified {1}: {2}\", originalLine, modifiedLine, lineContent);\r\n                    break;\r\n                case 1 /* Insert */:\r\n                    ariaLabel = nls.localize('insertLine', \"+ modified {0}: {1}\", modifiedLine, lineContent);\r\n                    break;\r\n                case 2 /* Delete */:\r\n                    ariaLabel = nls.localize('deleteLine', \"- original {0}: {1}\", originalLine, lineContent);\r\n                    break;\r\n            }\r\n            row.setAttribute('aria-label', ariaLabel);\r\n            dest.appendChild(row);\r\n        }\r\n    };\r\n    DiffReview._renderLine = function (model, options, tabSize, lineNumber) {\r\n        var lineContent = model.getLineContent(lineNumber);\r\n        var fontInfo = options.get(34 /* fontInfo */);\r\n        var defaultMetadata = ((0 /* None */ << 11 /* FONT_STYLE_OFFSET */)\r\n            | (1 /* DefaultForeground */ << 14 /* FOREGROUND_OFFSET */)\r\n            | (2 /* DefaultBackground */ << 23 /* BACKGROUND_OFFSET */)) >>> 0;\r\n        var tokens = new Uint32Array(2);\r\n        tokens[0] = lineContent.length;\r\n        tokens[1] = defaultMetadata;\r\n        var lineTokens = new LineTokens(tokens, lineContent);\r\n        var isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\r\n        var containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\r\n        var r = renderViewLine(new RenderLineInput((fontInfo.isMonospace && !options.get(23 /* disableMonospaceOptimizations */)), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, options.get(88 /* stopRenderingLineAfter */), options.get(74 /* renderWhitespace */), options.get(69 /* renderControlCharacters */), options.get(35 /* fontLigatures */) !== EditorFontLigatures.OFF, null));\r\n        return r.html;\r\n    };\r\n    return DiffReview;\r\n}(Disposable));\r\nexport { DiffReview };\r\n// theming\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var lineNumbers = theme.getColor(editorLineNumbers);\r\n    if (lineNumbers) {\r\n        collector.addRule(\".monaco-diff-editor .diff-review-line-number { color: \" + lineNumbers + \"; }\");\r\n    }\r\n    var shadow = theme.getColor(scrollbarShadow);\r\n    if (shadow) {\r\n        collector.addRule(\".monaco-diff-editor .diff-review-shadow { box-shadow: \" + shadow + \" 0 -6px 6px -6px inset; }\");\r\n    }\r\n});\r\nvar DiffReviewNext = /** @class */ (function (_super) {\r\n    __extends(DiffReviewNext, _super);\r\n    function DiffReviewNext() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.diffReview.next',\r\n            label: nls.localize('editor.action.diffReview.next', \"Go to Next Difference\"),\r\n            alias: 'Go to Next Difference',\r\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\r\n            kbOpts: {\r\n                kbExpr: null,\r\n                primary: 65 /* F7 */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    DiffReviewNext.prototype.run = function (accessor, editor) {\r\n        var diffEditor = findFocusedDiffEditor(accessor);\r\n        if (diffEditor) {\r\n            diffEditor.diffReviewNext();\r\n        }\r\n    };\r\n    return DiffReviewNext;\r\n}(EditorAction));\r\nvar DiffReviewPrev = /** @class */ (function (_super) {\r\n    __extends(DiffReviewPrev, _super);\r\n    function DiffReviewPrev() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.diffReview.prev',\r\n            label: nls.localize('editor.action.diffReview.prev', \"Go to Previous Difference\"),\r\n            alias: 'Go to Previous Difference',\r\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\r\n            kbOpts: {\r\n                kbExpr: null,\r\n                primary: 1024 /* Shift */ | 65 /* F7 */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    DiffReviewPrev.prototype.run = function (accessor, editor) {\r\n        var diffEditor = findFocusedDiffEditor(accessor);\r\n        if (diffEditor) {\r\n            diffEditor.diffReviewPrev();\r\n        }\r\n    };\r\n    return DiffReviewPrev;\r\n}(EditorAction));\r\nfunction findFocusedDiffEditor(accessor) {\r\n    var codeEditorService = accessor.get(ICodeEditorService);\r\n    var diffEditors = codeEditorService.listDiffEditors();\r\n    for (var i = 0, len = diffEditors.length; i < len; i++) {\r\n        var diffEditor = diffEditors[i];\r\n        if (diffEditor.hasWidgetFocus()) {\r\n            return diffEditor;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nregisterEditorAction(DiffReviewNext);\r\nregisterEditorAction(DiffReviewPrev);\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { Action } from '../../../base/common/actions.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { Range } from '../../common/core/range.js';\r\nvar InlineDiffMargin = /** @class */ (function (_super) {\r\n    __extends(InlineDiffMargin, _super);\r\n    function InlineDiffMargin(_viewZoneId, _marginDomNode, editor, diff, _contextMenuService, _clipboardService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._viewZoneId = _viewZoneId;\r\n        _this._marginDomNode = _marginDomNode;\r\n        _this.editor = editor;\r\n        _this.diff = diff;\r\n        _this._contextMenuService = _contextMenuService;\r\n        _this._clipboardService = _clipboardService;\r\n        _this._visibility = false;\r\n        // make sure the diff margin shows above overlay.\r\n        _this._marginDomNode.style.zIndex = '10';\r\n        _this._diffActions = document.createElement('div');\r\n        _this._diffActions.className = 'codicon codicon-lightbulb lightbulb-glyph';\r\n        _this._diffActions.style.position = 'absolute';\r\n        var lineHeight = editor.getOption(49 /* lineHeight */);\r\n        var lineFeed = editor.getModel().getEOL();\r\n        _this._diffActions.style.right = '0px';\r\n        _this._diffActions.style.visibility = 'hidden';\r\n        _this._diffActions.style.height = lineHeight + \"px\";\r\n        _this._diffActions.style.lineHeight = lineHeight + \"px\";\r\n        _this._marginDomNode.appendChild(_this._diffActions);\r\n        var actions = [];\r\n        // default action\r\n        actions.push(new Action('diff.clipboard.copyDeletedContent', diff.originalEndLineNumber > diff.modifiedStartLineNumber\r\n            ? nls.localize('diff.clipboard.copyDeletedLinesContent.label', \"Copy deleted lines\")\r\n            : nls.localize('diff.clipboard.copyDeletedLinesContent.single.label', \"Copy deleted line\"), undefined, true, function () { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this._clipboardService.writeText(diff.originalContent.join(lineFeed) + lineFeed)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); }));\r\n        var currentLineNumberOffset = 0;\r\n        var copyLineAction = undefined;\r\n        if (diff.originalEndLineNumber > diff.modifiedStartLineNumber) {\r\n            copyLineAction = new Action('diff.clipboard.copyDeletedLineContent', nls.localize('diff.clipboard.copyDeletedLineContent.label', \"Copy deleted line ({0})\", diff.originalStartLineNumber), undefined, true, function () { return __awaiter(_this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this._clipboardService.writeText(diff.originalContent[currentLineNumberOffset])];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            }); });\r\n            actions.push(copyLineAction);\r\n        }\r\n        var readOnly = editor.getOption(68 /* readOnly */);\r\n        if (!readOnly) {\r\n            actions.push(new Action('diff.inline.revertChange', nls.localize('diff.inline.revertChange.label', \"Revert this change\"), undefined, true, function () { return __awaiter(_this, void 0, void 0, function () {\r\n                var column, column;\r\n                return __generator(this, function (_a) {\r\n                    if (diff.modifiedEndLineNumber === 0) {\r\n                        column = editor.getModel().getLineMaxColumn(diff.modifiedStartLineNumber);\r\n                        editor.executeEdits('diffEditor', [\r\n                            {\r\n                                range: new Range(diff.modifiedStartLineNumber, column, diff.modifiedStartLineNumber, column),\r\n                                text: lineFeed + diff.originalContent.join(lineFeed)\r\n                            }\r\n                        ]);\r\n                    }\r\n                    else {\r\n                        column = editor.getModel().getLineMaxColumn(diff.modifiedEndLineNumber);\r\n                        editor.executeEdits('diffEditor', [\r\n                            {\r\n                                range: new Range(diff.modifiedStartLineNumber, 1, diff.modifiedEndLineNumber, column),\r\n                                text: diff.originalContent.join(lineFeed)\r\n                            }\r\n                        ]);\r\n                    }\r\n                    return [2 /*return*/];\r\n                });\r\n            }); }));\r\n        }\r\n        var showContextMenu = function (x, y) {\r\n            _this._contextMenuService.showContextMenu({\r\n                getAnchor: function () {\r\n                    return {\r\n                        x: x,\r\n                        y: y\r\n                    };\r\n                },\r\n                getActions: function () {\r\n                    if (copyLineAction) {\r\n                        copyLineAction.label = nls.localize('diff.clipboard.copyDeletedLineContent.label', \"Copy deleted line ({0})\", diff.originalStartLineNumber + currentLineNumberOffset);\r\n                    }\r\n                    return actions;\r\n                },\r\n                autoSelectFirstItem: true\r\n            });\r\n        };\r\n        _this._register(dom.addStandardDisposableListener(_this._diffActions, 'mousedown', function (e) {\r\n            var _a = dom.getDomNodePagePosition(_this._diffActions), top = _a.top, height = _a.height;\r\n            var pad = Math.floor(lineHeight / 3);\r\n            e.preventDefault();\r\n            showContextMenu(e.posx, top + height + pad);\r\n        }));\r\n        _this._register(editor.onMouseMove(function (e) {\r\n            if (e.target.type === 8 /* CONTENT_VIEW_ZONE */ || e.target.type === 5 /* GUTTER_VIEW_ZONE */) {\r\n                var viewZoneId = e.target.detail.viewZoneId;\r\n                if (viewZoneId === _this._viewZoneId) {\r\n                    _this.visibility = true;\r\n                    currentLineNumberOffset = _this._updateLightBulbPosition(_this._marginDomNode, e.event.browserEvent.y, lineHeight);\r\n                }\r\n                else {\r\n                    _this.visibility = false;\r\n                }\r\n            }\r\n            else {\r\n                _this.visibility = false;\r\n            }\r\n        }));\r\n        _this._register(editor.onMouseDown(function (e) {\r\n            if (!e.event.rightButton) {\r\n                return;\r\n            }\r\n            if (e.target.type === 8 /* CONTENT_VIEW_ZONE */ || e.target.type === 5 /* GUTTER_VIEW_ZONE */) {\r\n                var viewZoneId = e.target.detail.viewZoneId;\r\n                if (viewZoneId === _this._viewZoneId) {\r\n                    e.event.preventDefault();\r\n                    currentLineNumberOffset = _this._updateLightBulbPosition(_this._marginDomNode, e.event.browserEvent.y, lineHeight);\r\n                    showContextMenu(e.event.posx, e.event.posy + lineHeight);\r\n                }\r\n            }\r\n        }));\r\n        return _this;\r\n    }\r\n    Object.defineProperty(InlineDiffMargin.prototype, \"visibility\", {\r\n        get: function () {\r\n            return this._visibility;\r\n        },\r\n        set: function (_visibility) {\r\n            if (this._visibility !== _visibility) {\r\n                this._visibility = _visibility;\r\n                if (_visibility) {\r\n                    this._diffActions.style.visibility = 'visible';\r\n                }\r\n                else {\r\n                    this._diffActions.style.visibility = 'hidden';\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    InlineDiffMargin.prototype._updateLightBulbPosition = function (marginDomNode, y, lineHeight) {\r\n        var top = dom.getDomNodePagePosition(marginDomNode).top;\r\n        var offset = y - top;\r\n        var lineNumberOffset = Math.floor(offset / lineHeight);\r\n        var newTop = lineNumberOffset * lineHeight;\r\n        this._diffActions.style.top = newTop + \"px\";\r\n        return lineNumberOffset;\r\n    };\r\n    return InlineDiffMargin;\r\n}(Disposable));\r\nexport { InlineDiffMargin };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport './media/diffEditor.css';\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\r\nimport { Sash } from '../../../base/browser/ui/sash/sash.js';\r\nimport { RunOnceScheduler } from '../../../base/common/async.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport * as objects from '../../../base/common/objects.js';\r\nimport { Configuration } from '../config/configuration.js';\r\nimport { StableEditorScrollState } from '../core/editorState.js';\r\nimport { ICodeEditorService } from '../services/codeEditorService.js';\r\nimport { CodeEditorWidget } from './codeEditorWidget.js';\r\nimport { DiffReview } from './diffReview.js';\r\nimport { EditorOptions, EditorFontLigatures } from '../../common/config/editorOptions.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { createStringBuilder } from '../../common/core/stringBuilder.js';\r\nimport * as editorCommon from '../../common/editorCommon.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\r\nimport { OverviewRulerZone } from '../../common/view/overviewZoneManager.js';\r\nimport { LineDecoration } from '../../common/viewLayout/lineDecorations.js';\r\nimport { RenderLineInput, renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\r\nimport { InlineDecoration, ViewLineRenderingData } from '../../common/viewModel/viewModel.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { defaultInsertColor, defaultRemoveColor, diffBorder, diffInserted, diffInsertedOutline, diffRemoved, diffRemovedOutline, scrollbarShadow } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { IThemeService, getThemeTypeSelector, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { InlineDiffMargin } from './inlineDiffMargin.js';\r\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\r\nimport { ElementSizeObserver } from '../config/elementSizeObserver.js';\r\nvar VisualEditorState = /** @class */ (function () {\r\n    function VisualEditorState(_contextMenuService, _clipboardService) {\r\n        this._contextMenuService = _contextMenuService;\r\n        this._clipboardService = _clipboardService;\r\n        this._zones = [];\r\n        this.inlineDiffMargins = [];\r\n        this._zonesMap = {};\r\n        this._decorations = [];\r\n    }\r\n    VisualEditorState.prototype.getForeignViewZones = function (allViewZones) {\r\n        var _this = this;\r\n        return allViewZones.filter(function (z) { return !_this._zonesMap[String(z.id)]; });\r\n    };\r\n    VisualEditorState.prototype.clean = function (editor) {\r\n        var _this = this;\r\n        // (1) View zones\r\n        if (this._zones.length > 0) {\r\n            editor.changeViewZones(function (viewChangeAccessor) {\r\n                for (var i = 0, length_1 = _this._zones.length; i < length_1; i++) {\r\n                    viewChangeAccessor.removeZone(_this._zones[i]);\r\n                }\r\n            });\r\n        }\r\n        this._zones = [];\r\n        this._zonesMap = {};\r\n        // (2) Model decorations\r\n        this._decorations = editor.deltaDecorations(this._decorations, []);\r\n    };\r\n    VisualEditorState.prototype.apply = function (editor, overviewRuler, newDecorations, restoreScrollState) {\r\n        var _this = this;\r\n        var scrollState = restoreScrollState ? StableEditorScrollState.capture(editor) : null;\r\n        // view zones\r\n        editor.changeViewZones(function (viewChangeAccessor) {\r\n            for (var i = 0, length_2 = _this._zones.length; i < length_2; i++) {\r\n                viewChangeAccessor.removeZone(_this._zones[i]);\r\n            }\r\n            for (var i = 0, length_3 = _this.inlineDiffMargins.length; i < length_3; i++) {\r\n                _this.inlineDiffMargins[i].dispose();\r\n            }\r\n            _this._zones = [];\r\n            _this._zonesMap = {};\r\n            _this.inlineDiffMargins = [];\r\n            for (var i = 0, length_4 = newDecorations.zones.length; i < length_4; i++) {\r\n                var viewZone = newDecorations.zones[i];\r\n                viewZone.suppressMouseDown = true;\r\n                var zoneId = viewChangeAccessor.addZone(viewZone);\r\n                _this._zones.push(zoneId);\r\n                _this._zonesMap[String(zoneId)] = true;\r\n                if (newDecorations.zones[i].diff && viewZone.marginDomNode && _this._clipboardService) {\r\n                    viewZone.suppressMouseDown = false;\r\n                    _this.inlineDiffMargins.push(new InlineDiffMargin(zoneId, viewZone.marginDomNode, editor, newDecorations.zones[i].diff, _this._contextMenuService, _this._clipboardService));\r\n                }\r\n            }\r\n        });\r\n        if (scrollState) {\r\n            scrollState.restore(editor);\r\n        }\r\n        // decorations\r\n        this._decorations = editor.deltaDecorations(this._decorations, newDecorations.decorations);\r\n        // overview ruler\r\n        if (overviewRuler) {\r\n            overviewRuler.setZones(newDecorations.overviewZones);\r\n        }\r\n    };\r\n    return VisualEditorState;\r\n}());\r\nvar DIFF_EDITOR_ID = 0;\r\nvar DiffEditorWidget = /** @class */ (function (_super) {\r\n    __extends(DiffEditorWidget, _super);\r\n    function DiffEditorWidget(domElement, options, clipboardService, editorWorkerService, contextKeyService, instantiationService, codeEditorService, themeService, notificationService, contextMenuService, _editorProgressService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editorProgressService = _editorProgressService;\r\n        _this._onDidDispose = _this._register(new Emitter());\r\n        _this.onDidDispose = _this._onDidDispose.event;\r\n        _this._onDidUpdateDiff = _this._register(new Emitter());\r\n        _this.onDidUpdateDiff = _this._onDidUpdateDiff.event;\r\n        _this._lastOriginalWarning = null;\r\n        _this._lastModifiedWarning = null;\r\n        _this._editorWorkerService = editorWorkerService;\r\n        _this._codeEditorService = codeEditorService;\r\n        _this._contextKeyService = _this._register(contextKeyService.createScoped(domElement));\r\n        _this._contextKeyService.createKey('isInDiffEditor', true);\r\n        _this._themeService = themeService;\r\n        _this._notificationService = notificationService;\r\n        _this.id = (++DIFF_EDITOR_ID);\r\n        _this._state = 0 /* Idle */;\r\n        _this._updatingDiffProgress = null;\r\n        _this._domElement = domElement;\r\n        options = options || {};\r\n        // renderSideBySide\r\n        _this._renderSideBySide = true;\r\n        if (typeof options.renderSideBySide !== 'undefined') {\r\n            _this._renderSideBySide = options.renderSideBySide;\r\n        }\r\n        // maxComputationTime\r\n        _this._maxComputationTime = 5000;\r\n        if (typeof options.maxComputationTime !== 'undefined') {\r\n            _this._maxComputationTime = options.maxComputationTime;\r\n        }\r\n        // ignoreTrimWhitespace\r\n        _this._ignoreTrimWhitespace = true;\r\n        if (typeof options.ignoreTrimWhitespace !== 'undefined') {\r\n            _this._ignoreTrimWhitespace = options.ignoreTrimWhitespace;\r\n        }\r\n        // renderIndicators\r\n        _this._renderIndicators = true;\r\n        if (typeof options.renderIndicators !== 'undefined') {\r\n            _this._renderIndicators = options.renderIndicators;\r\n        }\r\n        _this._originalIsEditable = false;\r\n        if (typeof options.originalEditable !== 'undefined') {\r\n            _this._originalIsEditable = Boolean(options.originalEditable);\r\n        }\r\n        _this._updateDecorationsRunner = _this._register(new RunOnceScheduler(function () { return _this._updateDecorations(); }, 0));\r\n        _this._containerDomElement = document.createElement('div');\r\n        _this._containerDomElement.className = DiffEditorWidget._getClassName(_this._themeService.getTheme(), _this._renderSideBySide);\r\n        _this._containerDomElement.style.position = 'relative';\r\n        _this._containerDomElement.style.height = '100%';\r\n        _this._domElement.appendChild(_this._containerDomElement);\r\n        _this._overviewViewportDomElement = createFastDomNode(document.createElement('div'));\r\n        _this._overviewViewportDomElement.setClassName('diffViewport');\r\n        _this._overviewViewportDomElement.setPosition('absolute');\r\n        _this._overviewDomElement = document.createElement('div');\r\n        _this._overviewDomElement.className = 'diffOverview';\r\n        _this._overviewDomElement.style.position = 'absolute';\r\n        _this._overviewDomElement.appendChild(_this._overviewViewportDomElement.domNode);\r\n        _this._register(dom.addStandardDisposableListener(_this._overviewDomElement, 'mousedown', function (e) {\r\n            _this.modifiedEditor.delegateVerticalScrollbarMouseDown(e);\r\n        }));\r\n        _this._containerDomElement.appendChild(_this._overviewDomElement);\r\n        // Create left side\r\n        _this._originalDomNode = document.createElement('div');\r\n        _this._originalDomNode.className = 'editor original';\r\n        _this._originalDomNode.style.position = 'absolute';\r\n        _this._originalDomNode.style.height = '100%';\r\n        _this._containerDomElement.appendChild(_this._originalDomNode);\r\n        // Create right side\r\n        _this._modifiedDomNode = document.createElement('div');\r\n        _this._modifiedDomNode.className = 'editor modified';\r\n        _this._modifiedDomNode.style.position = 'absolute';\r\n        _this._modifiedDomNode.style.height = '100%';\r\n        _this._containerDomElement.appendChild(_this._modifiedDomNode);\r\n        _this._beginUpdateDecorationsTimeout = -1;\r\n        _this._currentlyChangingViewZones = false;\r\n        _this._diffComputationToken = 0;\r\n        _this._originalEditorState = new VisualEditorState(contextMenuService, clipboardService);\r\n        _this._modifiedEditorState = new VisualEditorState(contextMenuService, clipboardService);\r\n        _this._isVisible = true;\r\n        _this._isHandlingScrollEvent = false;\r\n        _this._elementSizeObserver = _this._register(new ElementSizeObserver(_this._containerDomElement, undefined, function () { return _this._onDidContainerSizeChanged(); }));\r\n        if (options.automaticLayout) {\r\n            _this._elementSizeObserver.startObserving();\r\n        }\r\n        _this._diffComputationResult = null;\r\n        var leftContextKeyService = _this._contextKeyService.createScoped();\r\n        leftContextKeyService.createKey('isInDiffLeftEditor', true);\r\n        var leftServices = new ServiceCollection();\r\n        leftServices.set(IContextKeyService, leftContextKeyService);\r\n        var leftScopedInstantiationService = instantiationService.createChild(leftServices);\r\n        var rightContextKeyService = _this._contextKeyService.createScoped();\r\n        rightContextKeyService.createKey('isInDiffRightEditor', true);\r\n        var rightServices = new ServiceCollection();\r\n        rightServices.set(IContextKeyService, rightContextKeyService);\r\n        var rightScopedInstantiationService = instantiationService.createChild(rightServices);\r\n        _this.originalEditor = _this._createLeftHandSideEditor(options, leftScopedInstantiationService);\r\n        _this.modifiedEditor = _this._createRightHandSideEditor(options, rightScopedInstantiationService);\r\n        _this._originalOverviewRuler = null;\r\n        _this._modifiedOverviewRuler = null;\r\n        _this._reviewPane = new DiffReview(_this);\r\n        _this._containerDomElement.appendChild(_this._reviewPane.domNode.domNode);\r\n        _this._containerDomElement.appendChild(_this._reviewPane.shadow.domNode);\r\n        _this._containerDomElement.appendChild(_this._reviewPane.actionBarContainer.domNode);\r\n        // enableSplitViewResizing\r\n        _this._enableSplitViewResizing = true;\r\n        if (typeof options.enableSplitViewResizing !== 'undefined') {\r\n            _this._enableSplitViewResizing = options.enableSplitViewResizing;\r\n        }\r\n        if (_this._renderSideBySide) {\r\n            _this._setStrategy(new DiffEditorWidgetSideBySide(_this._createDataSource(), _this._enableSplitViewResizing));\r\n        }\r\n        else {\r\n            _this._setStrategy(new DiffEditorWidgetInline(_this._createDataSource(), _this._enableSplitViewResizing));\r\n        }\r\n        _this._register(themeService.onThemeChange(function (t) {\r\n            if (_this._strategy && _this._strategy.applyColors(t)) {\r\n                _this._updateDecorationsRunner.schedule();\r\n            }\r\n            _this._containerDomElement.className = DiffEditorWidget._getClassName(_this._themeService.getTheme(), _this._renderSideBySide);\r\n        }));\r\n        var contributions = EditorExtensionsRegistry.getDiffEditorContributions();\r\n        for (var _i = 0, contributions_1 = contributions; _i < contributions_1.length; _i++) {\r\n            var desc = contributions_1[_i];\r\n            try {\r\n                _this._register(instantiationService.createInstance(desc.ctor, _this));\r\n            }\r\n            catch (err) {\r\n                onUnexpectedError(err);\r\n            }\r\n        }\r\n        _this._codeEditorService.addDiffEditor(_this);\r\n        return _this;\r\n    }\r\n    DiffEditorWidget.prototype._setState = function (newState) {\r\n        if (this._state === newState) {\r\n            return;\r\n        }\r\n        this._state = newState;\r\n        if (this._updatingDiffProgress) {\r\n            this._updatingDiffProgress.done();\r\n            this._updatingDiffProgress = null;\r\n        }\r\n        if (this._state === 1 /* ComputingDiff */) {\r\n            this._updatingDiffProgress = this._editorProgressService.show(true, 1000);\r\n        }\r\n    };\r\n    DiffEditorWidget.prototype.hasWidgetFocus = function () {\r\n        return dom.isAncestor(document.activeElement, this._domElement);\r\n    };\r\n    DiffEditorWidget.prototype.diffReviewNext = function () {\r\n        this._reviewPane.next();\r\n    };\r\n    DiffEditorWidget.prototype.diffReviewPrev = function () {\r\n        this._reviewPane.prev();\r\n    };\r\n    DiffEditorWidget._getClassName = function (theme, renderSideBySide) {\r\n        var result = 'monaco-diff-editor monaco-editor-background ';\r\n        if (renderSideBySide) {\r\n            result += 'side-by-side ';\r\n        }\r\n        result += getThemeTypeSelector(theme.type);\r\n        return result;\r\n    };\r\n    DiffEditorWidget.prototype._recreateOverviewRulers = function () {\r\n        if (this._originalOverviewRuler) {\r\n            this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode());\r\n            this._originalOverviewRuler.dispose();\r\n        }\r\n        if (this.originalEditor.hasModel()) {\r\n            this._originalOverviewRuler = this.originalEditor.createOverviewRuler('original diffOverviewRuler');\r\n            this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode());\r\n        }\r\n        if (this._modifiedOverviewRuler) {\r\n            this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode());\r\n            this._modifiedOverviewRuler.dispose();\r\n        }\r\n        if (this.modifiedEditor.hasModel()) {\r\n            this._modifiedOverviewRuler = this.modifiedEditor.createOverviewRuler('modified diffOverviewRuler');\r\n            this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode());\r\n        }\r\n        this._layoutOverviewRulers();\r\n    };\r\n    DiffEditorWidget.prototype._createLeftHandSideEditor = function (options, instantiationService) {\r\n        var _this = this;\r\n        var editor = this._createInnerEditor(instantiationService, this._originalDomNode, this._adjustOptionsForLeftHandSide(options, this._originalIsEditable));\r\n        this._register(editor.onDidScrollChange(function (e) {\r\n            if (_this._isHandlingScrollEvent) {\r\n                return;\r\n            }\r\n            if (!e.scrollTopChanged && !e.scrollLeftChanged && !e.scrollHeightChanged) {\r\n                return;\r\n            }\r\n            _this._isHandlingScrollEvent = true;\r\n            _this.modifiedEditor.setScrollPosition({\r\n                scrollLeft: e.scrollLeft,\r\n                scrollTop: e.scrollTop\r\n            });\r\n            _this._isHandlingScrollEvent = false;\r\n            _this._layoutOverviewViewport();\r\n        }));\r\n        this._register(editor.onDidChangeViewZones(function () {\r\n            _this._onViewZonesChanged();\r\n        }));\r\n        this._register(editor.onDidChangeModelContent(function () {\r\n            if (_this._isVisible) {\r\n                _this._beginUpdateDecorationsSoon();\r\n            }\r\n        }));\r\n        return editor;\r\n    };\r\n    DiffEditorWidget.prototype._createRightHandSideEditor = function (options, instantiationService) {\r\n        var _this = this;\r\n        var editor = this._createInnerEditor(instantiationService, this._modifiedDomNode, this._adjustOptionsForRightHandSide(options));\r\n        this._register(editor.onDidScrollChange(function (e) {\r\n            if (_this._isHandlingScrollEvent) {\r\n                return;\r\n            }\r\n            if (!e.scrollTopChanged && !e.scrollLeftChanged && !e.scrollHeightChanged) {\r\n                return;\r\n            }\r\n            _this._isHandlingScrollEvent = true;\r\n            _this.originalEditor.setScrollPosition({\r\n                scrollLeft: e.scrollLeft,\r\n                scrollTop: e.scrollTop\r\n            });\r\n            _this._isHandlingScrollEvent = false;\r\n            _this._layoutOverviewViewport();\r\n        }));\r\n        this._register(editor.onDidChangeViewZones(function () {\r\n            _this._onViewZonesChanged();\r\n        }));\r\n        this._register(editor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(34 /* fontInfo */) && editor.getModel()) {\r\n                _this._onViewZonesChanged();\r\n            }\r\n        }));\r\n        this._register(editor.onDidChangeModelContent(function () {\r\n            if (_this._isVisible) {\r\n                _this._beginUpdateDecorationsSoon();\r\n            }\r\n        }));\r\n        this._register(editor.onDidChangeModelOptions(function (e) {\r\n            if (e.tabSize) {\r\n                _this._updateDecorationsRunner.schedule();\r\n            }\r\n        }));\r\n        return editor;\r\n    };\r\n    DiffEditorWidget.prototype._createInnerEditor = function (instantiationService, container, options) {\r\n        return instantiationService.createInstance(CodeEditorWidget, container, options, {});\r\n    };\r\n    DiffEditorWidget.prototype.dispose = function () {\r\n        this._codeEditorService.removeDiffEditor(this);\r\n        if (this._beginUpdateDecorationsTimeout !== -1) {\r\n            window.clearTimeout(this._beginUpdateDecorationsTimeout);\r\n            this._beginUpdateDecorationsTimeout = -1;\r\n        }\r\n        this._cleanViewZonesAndDecorations();\r\n        if (this._originalOverviewRuler) {\r\n            this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode());\r\n            this._originalOverviewRuler.dispose();\r\n        }\r\n        if (this._modifiedOverviewRuler) {\r\n            this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode());\r\n            this._modifiedOverviewRuler.dispose();\r\n        }\r\n        this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode);\r\n        this._containerDomElement.removeChild(this._overviewDomElement);\r\n        this._containerDomElement.removeChild(this._originalDomNode);\r\n        this.originalEditor.dispose();\r\n        this._containerDomElement.removeChild(this._modifiedDomNode);\r\n        this.modifiedEditor.dispose();\r\n        this._strategy.dispose();\r\n        this._containerDomElement.removeChild(this._reviewPane.domNode.domNode);\r\n        this._containerDomElement.removeChild(this._reviewPane.shadow.domNode);\r\n        this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode);\r\n        this._reviewPane.dispose();\r\n        this._domElement.removeChild(this._containerDomElement);\r\n        this._onDidDispose.fire();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    //------------ begin IDiffEditor methods\r\n    DiffEditorWidget.prototype.getId = function () {\r\n        return this.getEditorType() + ':' + this.id;\r\n    };\r\n    DiffEditorWidget.prototype.getEditorType = function () {\r\n        return editorCommon.EditorType.IDiffEditor;\r\n    };\r\n    DiffEditorWidget.prototype.getLineChanges = function () {\r\n        if (!this._diffComputationResult) {\r\n            return null;\r\n        }\r\n        return this._diffComputationResult.changes;\r\n    };\r\n    DiffEditorWidget.prototype.getOriginalEditor = function () {\r\n        return this.originalEditor;\r\n    };\r\n    DiffEditorWidget.prototype.getModifiedEditor = function () {\r\n        return this.modifiedEditor;\r\n    };\r\n    DiffEditorWidget.prototype.updateOptions = function (newOptions) {\r\n        // Handle side by side\r\n        var renderSideBySideChanged = false;\r\n        if (typeof newOptions.renderSideBySide !== 'undefined') {\r\n            if (this._renderSideBySide !== newOptions.renderSideBySide) {\r\n                this._renderSideBySide = newOptions.renderSideBySide;\r\n                renderSideBySideChanged = true;\r\n            }\r\n        }\r\n        if (typeof newOptions.maxComputationTime !== 'undefined') {\r\n            this._maxComputationTime = newOptions.maxComputationTime;\r\n            if (this._isVisible) {\r\n                this._beginUpdateDecorationsSoon();\r\n            }\r\n        }\r\n        var beginUpdateDecorations = false;\r\n        if (typeof newOptions.ignoreTrimWhitespace !== 'undefined') {\r\n            if (this._ignoreTrimWhitespace !== newOptions.ignoreTrimWhitespace) {\r\n                this._ignoreTrimWhitespace = newOptions.ignoreTrimWhitespace;\r\n                // Begin comparing\r\n                beginUpdateDecorations = true;\r\n            }\r\n        }\r\n        if (typeof newOptions.renderIndicators !== 'undefined') {\r\n            if (this._renderIndicators !== newOptions.renderIndicators) {\r\n                this._renderIndicators = newOptions.renderIndicators;\r\n                beginUpdateDecorations = true;\r\n            }\r\n        }\r\n        if (beginUpdateDecorations) {\r\n            this._beginUpdateDecorations();\r\n        }\r\n        if (typeof newOptions.originalEditable !== 'undefined') {\r\n            this._originalIsEditable = Boolean(newOptions.originalEditable);\r\n        }\r\n        this.modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(newOptions));\r\n        this.originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(newOptions, this._originalIsEditable));\r\n        // enableSplitViewResizing\r\n        if (typeof newOptions.enableSplitViewResizing !== 'undefined') {\r\n            this._enableSplitViewResizing = newOptions.enableSplitViewResizing;\r\n        }\r\n        this._strategy.setEnableSplitViewResizing(this._enableSplitViewResizing);\r\n        // renderSideBySide\r\n        if (renderSideBySideChanged) {\r\n            if (this._renderSideBySide) {\r\n                this._setStrategy(new DiffEditorWidgetSideBySide(this._createDataSource(), this._enableSplitViewResizing));\r\n            }\r\n            else {\r\n                this._setStrategy(new DiffEditorWidgetInline(this._createDataSource(), this._enableSplitViewResizing));\r\n            }\r\n            // Update class name\r\n            this._containerDomElement.className = DiffEditorWidget._getClassName(this._themeService.getTheme(), this._renderSideBySide);\r\n        }\r\n    };\r\n    DiffEditorWidget.prototype.getModel = function () {\r\n        return {\r\n            original: this.originalEditor.getModel(),\r\n            modified: this.modifiedEditor.getModel()\r\n        };\r\n    };\r\n    DiffEditorWidget.prototype.setModel = function (model) {\r\n        // Guard us against partial null model\r\n        if (model && (!model.original || !model.modified)) {\r\n            throw new Error(!model.original ? 'DiffEditorWidget.setModel: Original model is null' : 'DiffEditorWidget.setModel: Modified model is null');\r\n        }\r\n        // Remove all view zones & decorations\r\n        this._cleanViewZonesAndDecorations();\r\n        // Update code editor models\r\n        this.originalEditor.setModel(model ? model.original : null);\r\n        this.modifiedEditor.setModel(model ? model.modified : null);\r\n        this._updateDecorationsRunner.cancel();\r\n        // this.originalEditor.onDidChangeModelOptions\r\n        if (model) {\r\n            this.originalEditor.setScrollTop(0);\r\n            this.modifiedEditor.setScrollTop(0);\r\n        }\r\n        // Disable any diff computations that will come in\r\n        this._diffComputationResult = null;\r\n        this._diffComputationToken++;\r\n        this._setState(0 /* Idle */);\r\n        if (model) {\r\n            this._recreateOverviewRulers();\r\n            // Begin comparing\r\n            this._beginUpdateDecorations();\r\n        }\r\n        this._layoutOverviewViewport();\r\n    };\r\n    DiffEditorWidget.prototype.getDomNode = function () {\r\n        return this._domElement;\r\n    };\r\n    DiffEditorWidget.prototype.getVisibleColumnFromPosition = function (position) {\r\n        return this.modifiedEditor.getVisibleColumnFromPosition(position);\r\n    };\r\n    DiffEditorWidget.prototype.getPosition = function () {\r\n        return this.modifiedEditor.getPosition();\r\n    };\r\n    DiffEditorWidget.prototype.setPosition = function (position) {\r\n        this.modifiedEditor.setPosition(position);\r\n    };\r\n    DiffEditorWidget.prototype.revealLine = function (lineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLine(lineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealLineInCenter = function (lineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLineInCenter(lineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealLineInCenterIfOutsideViewport = function (lineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLineInCenterIfOutsideViewport(lineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealPosition = function (position, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealPosition(position, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealPositionInCenter = function (position, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealPositionInCenter(position, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealPositionInCenterIfOutsideViewport = function (position, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealPositionInCenterIfOutsideViewport(position, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.getSelection = function () {\r\n        return this.modifiedEditor.getSelection();\r\n    };\r\n    DiffEditorWidget.prototype.getSelections = function () {\r\n        return this.modifiedEditor.getSelections();\r\n    };\r\n    DiffEditorWidget.prototype.setSelection = function (something) {\r\n        this.modifiedEditor.setSelection(something);\r\n    };\r\n    DiffEditorWidget.prototype.setSelections = function (ranges) {\r\n        this.modifiedEditor.setSelections(ranges);\r\n    };\r\n    DiffEditorWidget.prototype.revealLines = function (startLineNumber, endLineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLines(startLineNumber, endLineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealLinesInCenter = function (startLineNumber, endLineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLinesInCenter(startLineNumber, endLineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealLinesInCenterIfOutsideViewport = function (startLineNumber, endLineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealRange = function (range, scrollType, revealVerticalInCenter, revealHorizontal) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        if (revealVerticalInCenter === void 0) { revealVerticalInCenter = false; }\r\n        if (revealHorizontal === void 0) { revealHorizontal = true; }\r\n        this.modifiedEditor.revealRange(range, scrollType, revealVerticalInCenter, revealHorizontal);\r\n    };\r\n    DiffEditorWidget.prototype.revealRangeInCenter = function (range, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealRangeInCenter(range, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealRangeInCenterIfOutsideViewport = function (range, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealRangeInCenterIfOutsideViewport(range, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealRangeAtTop = function (range, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealRangeAtTop(range, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.getSupportedActions = function () {\r\n        return this.modifiedEditor.getSupportedActions();\r\n    };\r\n    DiffEditorWidget.prototype.saveViewState = function () {\r\n        var originalViewState = this.originalEditor.saveViewState();\r\n        var modifiedViewState = this.modifiedEditor.saveViewState();\r\n        return {\r\n            original: originalViewState,\r\n            modified: modifiedViewState\r\n        };\r\n    };\r\n    DiffEditorWidget.prototype.restoreViewState = function (s) {\r\n        if (s.original && s.modified) {\r\n            var diffEditorState = s;\r\n            this.originalEditor.restoreViewState(diffEditorState.original);\r\n            this.modifiedEditor.restoreViewState(diffEditorState.modified);\r\n        }\r\n    };\r\n    DiffEditorWidget.prototype.layout = function (dimension) {\r\n        this._elementSizeObserver.observe(dimension);\r\n    };\r\n    DiffEditorWidget.prototype.focus = function () {\r\n        this.modifiedEditor.focus();\r\n    };\r\n    DiffEditorWidget.prototype.hasTextFocus = function () {\r\n        return this.originalEditor.hasTextFocus() || this.modifiedEditor.hasTextFocus();\r\n    };\r\n    DiffEditorWidget.prototype.trigger = function (source, handlerId, payload) {\r\n        this.modifiedEditor.trigger(source, handlerId, payload);\r\n    };\r\n    DiffEditorWidget.prototype.changeDecorations = function (callback) {\r\n        return this.modifiedEditor.changeDecorations(callback);\r\n    };\r\n    //------------ end IDiffEditor methods\r\n    //------------ begin layouting methods\r\n    DiffEditorWidget.prototype._onDidContainerSizeChanged = function () {\r\n        this._doLayout();\r\n    };\r\n    DiffEditorWidget.prototype._getReviewHeight = function () {\r\n        return this._reviewPane.isVisible() ? this._elementSizeObserver.getHeight() : 0;\r\n    };\r\n    DiffEditorWidget.prototype._layoutOverviewRulers = function () {\r\n        if (!this._originalOverviewRuler || !this._modifiedOverviewRuler) {\r\n            return;\r\n        }\r\n        var height = this._elementSizeObserver.getHeight();\r\n        var reviewHeight = this._getReviewHeight();\r\n        var freeSpace = DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH - 2 * DiffEditorWidget.ONE_OVERVIEW_WIDTH;\r\n        var layoutInfo = this.modifiedEditor.getLayoutInfo();\r\n        if (layoutInfo) {\r\n            this._originalOverviewRuler.setLayout({\r\n                top: 0,\r\n                width: DiffEditorWidget.ONE_OVERVIEW_WIDTH,\r\n                right: freeSpace + DiffEditorWidget.ONE_OVERVIEW_WIDTH,\r\n                height: (height - reviewHeight)\r\n            });\r\n            this._modifiedOverviewRuler.setLayout({\r\n                top: 0,\r\n                right: 0,\r\n                width: DiffEditorWidget.ONE_OVERVIEW_WIDTH,\r\n                height: (height - reviewHeight)\r\n            });\r\n        }\r\n    };\r\n    //------------ end layouting methods\r\n    DiffEditorWidget.prototype._onViewZonesChanged = function () {\r\n        if (this._currentlyChangingViewZones) {\r\n            return;\r\n        }\r\n        this._updateDecorationsRunner.schedule();\r\n    };\r\n    DiffEditorWidget.prototype._beginUpdateDecorationsSoon = function () {\r\n        var _this = this;\r\n        // Clear previous timeout if necessary\r\n        if (this._beginUpdateDecorationsTimeout !== -1) {\r\n            window.clearTimeout(this._beginUpdateDecorationsTimeout);\r\n            this._beginUpdateDecorationsTimeout = -1;\r\n        }\r\n        this._beginUpdateDecorationsTimeout = window.setTimeout(function () { return _this._beginUpdateDecorations(); }, DiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY);\r\n    };\r\n    DiffEditorWidget._equals = function (a, b) {\r\n        if (!a && !b) {\r\n            return true;\r\n        }\r\n        if (!a || !b) {\r\n            return false;\r\n        }\r\n        return (a.toString() === b.toString());\r\n    };\r\n    DiffEditorWidget.prototype._beginUpdateDecorations = function () {\r\n        var _this = this;\r\n        this._beginUpdateDecorationsTimeout = -1;\r\n        var currentOriginalModel = this.originalEditor.getModel();\r\n        var currentModifiedModel = this.modifiedEditor.getModel();\r\n        if (!currentOriginalModel || !currentModifiedModel) {\r\n            return;\r\n        }\r\n        // Prevent old diff requests to come if a new request has been initiated\r\n        // The best method would be to call cancel on the Promise, but this is not\r\n        // yet supported, so using tokens for now.\r\n        this._diffComputationToken++;\r\n        var currentToken = this._diffComputationToken;\r\n        this._setState(1 /* ComputingDiff */);\r\n        if (!this._editorWorkerService.canComputeDiff(currentOriginalModel.uri, currentModifiedModel.uri)) {\r\n            if (!DiffEditorWidget._equals(currentOriginalModel.uri, this._lastOriginalWarning)\r\n                || !DiffEditorWidget._equals(currentModifiedModel.uri, this._lastModifiedWarning)) {\r\n                this._lastOriginalWarning = currentOriginalModel.uri;\r\n                this._lastModifiedWarning = currentModifiedModel.uri;\r\n                this._notificationService.warn(nls.localize(\"diff.tooLarge\", \"Cannot compare files because one file is too large.\"));\r\n            }\r\n            return;\r\n        }\r\n        this._editorWorkerService.computeDiff(currentOriginalModel.uri, currentModifiedModel.uri, this._ignoreTrimWhitespace, this._maxComputationTime).then(function (result) {\r\n            if (currentToken === _this._diffComputationToken\r\n                && currentOriginalModel === _this.originalEditor.getModel()\r\n                && currentModifiedModel === _this.modifiedEditor.getModel()) {\r\n                _this._setState(2 /* DiffComputed */);\r\n                _this._diffComputationResult = result;\r\n                _this._updateDecorationsRunner.schedule();\r\n                _this._onDidUpdateDiff.fire();\r\n            }\r\n        }, function (error) {\r\n            if (currentToken === _this._diffComputationToken\r\n                && currentOriginalModel === _this.originalEditor.getModel()\r\n                && currentModifiedModel === _this.modifiedEditor.getModel()) {\r\n                _this._setState(2 /* DiffComputed */);\r\n                _this._diffComputationResult = null;\r\n                _this._updateDecorationsRunner.schedule();\r\n            }\r\n        });\r\n    };\r\n    DiffEditorWidget.prototype._cleanViewZonesAndDecorations = function () {\r\n        this._originalEditorState.clean(this.originalEditor);\r\n        this._modifiedEditorState.clean(this.modifiedEditor);\r\n    };\r\n    DiffEditorWidget.prototype._updateDecorations = function () {\r\n        if (!this.originalEditor.getModel() || !this.modifiedEditor.getModel() || !this._originalOverviewRuler || !this._modifiedOverviewRuler) {\r\n            return;\r\n        }\r\n        var lineChanges = (this._diffComputationResult ? this._diffComputationResult.changes : []);\r\n        var foreignOriginal = this._originalEditorState.getForeignViewZones(this.originalEditor.getWhitespaces());\r\n        var foreignModified = this._modifiedEditorState.getForeignViewZones(this.modifiedEditor.getWhitespaces());\r\n        var diffDecorations = this._strategy.getEditorsDiffDecorations(lineChanges, this._ignoreTrimWhitespace, this._renderIndicators, foreignOriginal, foreignModified, this.originalEditor, this.modifiedEditor);\r\n        try {\r\n            this._currentlyChangingViewZones = true;\r\n            this._originalEditorState.apply(this.originalEditor, this._originalOverviewRuler, diffDecorations.original, false);\r\n            this._modifiedEditorState.apply(this.modifiedEditor, this._modifiedOverviewRuler, diffDecorations.modified, true);\r\n        }\r\n        finally {\r\n            this._currentlyChangingViewZones = false;\r\n        }\r\n    };\r\n    DiffEditorWidget.prototype._adjustOptionsForSubEditor = function (options) {\r\n        var clonedOptions = objects.deepClone(options || {});\r\n        clonedOptions.inDiffEditor = true;\r\n        clonedOptions.wordWrap = 'off';\r\n        clonedOptions.wordWrapMinified = false;\r\n        clonedOptions.automaticLayout = false;\r\n        clonedOptions.scrollbar = clonedOptions.scrollbar || {};\r\n        clonedOptions.scrollbar.vertical = 'visible';\r\n        clonedOptions.folding = false;\r\n        clonedOptions.codeLens = false;\r\n        clonedOptions.fixedOverflowWidgets = true;\r\n        // clonedOptions.lineDecorationsWidth = '2ch';\r\n        if (!clonedOptions.minimap) {\r\n            clonedOptions.minimap = {};\r\n        }\r\n        clonedOptions.minimap.enabled = false;\r\n        return clonedOptions;\r\n    };\r\n    DiffEditorWidget.prototype._adjustOptionsForLeftHandSide = function (options, isEditable) {\r\n        var result = this._adjustOptionsForSubEditor(options);\r\n        result.readOnly = !isEditable;\r\n        result.extraEditorClassName = 'original-in-monaco-diff-editor';\r\n        return result;\r\n    };\r\n    DiffEditorWidget.prototype._adjustOptionsForRightHandSide = function (options) {\r\n        var result = this._adjustOptionsForSubEditor(options);\r\n        result.revealHorizontalRightPadding = EditorOptions.revealHorizontalRightPadding.defaultValue + DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH;\r\n        result.scrollbar.verticalHasArrows = false;\r\n        result.extraEditorClassName = 'modified-in-monaco-diff-editor';\r\n        return result;\r\n    };\r\n    DiffEditorWidget.prototype.doLayout = function () {\r\n        this._elementSizeObserver.observe();\r\n        this._doLayout();\r\n    };\r\n    DiffEditorWidget.prototype._doLayout = function () {\r\n        var width = this._elementSizeObserver.getWidth();\r\n        var height = this._elementSizeObserver.getHeight();\r\n        var reviewHeight = this._getReviewHeight();\r\n        var splitPoint = this._strategy.layout();\r\n        this._originalDomNode.style.width = splitPoint + 'px';\r\n        this._originalDomNode.style.left = '0px';\r\n        this._modifiedDomNode.style.width = (width - splitPoint) + 'px';\r\n        this._modifiedDomNode.style.left = splitPoint + 'px';\r\n        this._overviewDomElement.style.top = '0px';\r\n        this._overviewDomElement.style.height = (height - reviewHeight) + 'px';\r\n        this._overviewDomElement.style.width = DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH + 'px';\r\n        this._overviewDomElement.style.left = (width - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH) + 'px';\r\n        this._overviewViewportDomElement.setWidth(DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH);\r\n        this._overviewViewportDomElement.setHeight(30);\r\n        this.originalEditor.layout({ width: splitPoint, height: (height - reviewHeight) });\r\n        this.modifiedEditor.layout({ width: width - splitPoint - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH, height: (height - reviewHeight) });\r\n        if (this._originalOverviewRuler || this._modifiedOverviewRuler) {\r\n            this._layoutOverviewRulers();\r\n        }\r\n        this._reviewPane.layout(height - reviewHeight, width, reviewHeight);\r\n        this._layoutOverviewViewport();\r\n    };\r\n    DiffEditorWidget.prototype._layoutOverviewViewport = function () {\r\n        var layout = this._computeOverviewViewport();\r\n        if (!layout) {\r\n            this._overviewViewportDomElement.setTop(0);\r\n            this._overviewViewportDomElement.setHeight(0);\r\n        }\r\n        else {\r\n            this._overviewViewportDomElement.setTop(layout.top);\r\n            this._overviewViewportDomElement.setHeight(layout.height);\r\n        }\r\n    };\r\n    DiffEditorWidget.prototype._computeOverviewViewport = function () {\r\n        var layoutInfo = this.modifiedEditor.getLayoutInfo();\r\n        if (!layoutInfo) {\r\n            return null;\r\n        }\r\n        var scrollTop = this.modifiedEditor.getScrollTop();\r\n        var scrollHeight = this.modifiedEditor.getScrollHeight();\r\n        var computedAvailableSize = Math.max(0, layoutInfo.height);\r\n        var computedRepresentableSize = Math.max(0, computedAvailableSize - 2 * 0);\r\n        var computedRatio = scrollHeight > 0 ? (computedRepresentableSize / scrollHeight) : 0;\r\n        var computedSliderSize = Math.max(0, Math.floor(layoutInfo.height * computedRatio));\r\n        var computedSliderPosition = Math.floor(scrollTop * computedRatio);\r\n        return {\r\n            height: computedSliderSize,\r\n            top: computedSliderPosition\r\n        };\r\n    };\r\n    DiffEditorWidget.prototype._createDataSource = function () {\r\n        var _this = this;\r\n        return {\r\n            getWidth: function () {\r\n                return _this._elementSizeObserver.getWidth();\r\n            },\r\n            getHeight: function () {\r\n                return (_this._elementSizeObserver.getHeight() - _this._getReviewHeight());\r\n            },\r\n            getContainerDomNode: function () {\r\n                return _this._containerDomElement;\r\n            },\r\n            relayoutEditors: function () {\r\n                _this._doLayout();\r\n            },\r\n            getOriginalEditor: function () {\r\n                return _this.originalEditor;\r\n            },\r\n            getModifiedEditor: function () {\r\n                return _this.modifiedEditor;\r\n            }\r\n        };\r\n    };\r\n    DiffEditorWidget.prototype._setStrategy = function (newStrategy) {\r\n        if (this._strategy) {\r\n            this._strategy.dispose();\r\n        }\r\n        this._strategy = newStrategy;\r\n        newStrategy.applyColors(this._themeService.getTheme());\r\n        if (this._diffComputationResult) {\r\n            this._updateDecorations();\r\n        }\r\n        // Just do a layout, the strategy might need it\r\n        this._doLayout();\r\n    };\r\n    DiffEditorWidget.prototype._getLineChangeAtOrBeforeLineNumber = function (lineNumber, startLineNumberExtractor) {\r\n        var lineChanges = (this._diffComputationResult ? this._diffComputationResult.changes : []);\r\n        if (lineChanges.length === 0 || lineNumber < startLineNumberExtractor(lineChanges[0])) {\r\n            // There are no changes or `lineNumber` is before the first change\r\n            return null;\r\n        }\r\n        var min = 0, max = lineChanges.length - 1;\r\n        while (min < max) {\r\n            var mid = Math.floor((min + max) / 2);\r\n            var midStart = startLineNumberExtractor(lineChanges[mid]);\r\n            var midEnd = (mid + 1 <= max ? startLineNumberExtractor(lineChanges[mid + 1]) : 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\r\n            if (lineNumber < midStart) {\r\n                max = mid - 1;\r\n            }\r\n            else if (lineNumber >= midEnd) {\r\n                min = mid + 1;\r\n            }\r\n            else {\r\n                // HIT!\r\n                min = mid;\r\n                max = mid;\r\n            }\r\n        }\r\n        return lineChanges[min];\r\n    };\r\n    DiffEditorWidget.prototype._getEquivalentLineForOriginalLineNumber = function (lineNumber) {\r\n        var lineChange = this._getLineChangeAtOrBeforeLineNumber(lineNumber, function (lineChange) { return lineChange.originalStartLineNumber; });\r\n        if (!lineChange) {\r\n            return lineNumber;\r\n        }\r\n        var originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\r\n        var modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\r\n        var lineChangeOriginalLength = (lineChange.originalEndLineNumber > 0 ? (lineChange.originalEndLineNumber - lineChange.originalStartLineNumber + 1) : 0);\r\n        var lineChangeModifiedLength = (lineChange.modifiedEndLineNumber > 0 ? (lineChange.modifiedEndLineNumber - lineChange.modifiedStartLineNumber + 1) : 0);\r\n        var delta = lineNumber - originalEquivalentLineNumber;\r\n        if (delta <= lineChangeOriginalLength) {\r\n            return modifiedEquivalentLineNumber + Math.min(delta, lineChangeModifiedLength);\r\n        }\r\n        return modifiedEquivalentLineNumber + lineChangeModifiedLength - lineChangeOriginalLength + delta;\r\n    };\r\n    DiffEditorWidget.prototype._getEquivalentLineForModifiedLineNumber = function (lineNumber) {\r\n        var lineChange = this._getLineChangeAtOrBeforeLineNumber(lineNumber, function (lineChange) { return lineChange.modifiedStartLineNumber; });\r\n        if (!lineChange) {\r\n            return lineNumber;\r\n        }\r\n        var originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\r\n        var modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\r\n        var lineChangeOriginalLength = (lineChange.originalEndLineNumber > 0 ? (lineChange.originalEndLineNumber - lineChange.originalStartLineNumber + 1) : 0);\r\n        var lineChangeModifiedLength = (lineChange.modifiedEndLineNumber > 0 ? (lineChange.modifiedEndLineNumber - lineChange.modifiedStartLineNumber + 1) : 0);\r\n        var delta = lineNumber - modifiedEquivalentLineNumber;\r\n        if (delta <= lineChangeModifiedLength) {\r\n            return originalEquivalentLineNumber + Math.min(delta, lineChangeOriginalLength);\r\n        }\r\n        return originalEquivalentLineNumber + lineChangeOriginalLength - lineChangeModifiedLength + delta;\r\n    };\r\n    DiffEditorWidget.prototype.getDiffLineInformationForOriginal = function (lineNumber) {\r\n        if (!this._diffComputationResult) {\r\n            // Cannot answer that which I don't know\r\n            return null;\r\n        }\r\n        return {\r\n            equivalentLineNumber: this._getEquivalentLineForOriginalLineNumber(lineNumber)\r\n        };\r\n    };\r\n    DiffEditorWidget.prototype.getDiffLineInformationForModified = function (lineNumber) {\r\n        if (!this._diffComputationResult) {\r\n            // Cannot answer that which I don't know\r\n            return null;\r\n        }\r\n        return {\r\n            equivalentLineNumber: this._getEquivalentLineForModifiedLineNumber(lineNumber)\r\n        };\r\n    };\r\n    DiffEditorWidget.ONE_OVERVIEW_WIDTH = 15;\r\n    DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH = 30;\r\n    DiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY = 200; // ms\r\n    DiffEditorWidget = __decorate([\r\n        __param(3, IEditorWorkerService),\r\n        __param(4, IContextKeyService),\r\n        __param(5, IInstantiationService),\r\n        __param(6, ICodeEditorService),\r\n        __param(7, IThemeService),\r\n        __param(8, INotificationService),\r\n        __param(9, IContextMenuService),\r\n        __param(10, IEditorProgressService)\r\n    ], DiffEditorWidget);\r\n    return DiffEditorWidget;\r\n}(Disposable));\r\nexport { DiffEditorWidget };\r\nvar DiffEditorWidgetStyle = /** @class */ (function (_super) {\r\n    __extends(DiffEditorWidgetStyle, _super);\r\n    function DiffEditorWidgetStyle(dataSource) {\r\n        var _this = _super.call(this) || this;\r\n        _this._dataSource = dataSource;\r\n        _this._insertColor = null;\r\n        _this._removeColor = null;\r\n        return _this;\r\n    }\r\n    DiffEditorWidgetStyle.prototype.applyColors = function (theme) {\r\n        var newInsertColor = (theme.getColor(diffInserted) || defaultInsertColor).transparent(2);\r\n        var newRemoveColor = (theme.getColor(diffRemoved) || defaultRemoveColor).transparent(2);\r\n        var hasChanges = !newInsertColor.equals(this._insertColor) || !newRemoveColor.equals(this._removeColor);\r\n        this._insertColor = newInsertColor;\r\n        this._removeColor = newRemoveColor;\r\n        return hasChanges;\r\n    };\r\n    DiffEditorWidgetStyle.prototype.getEditorsDiffDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalWhitespaces, modifiedWhitespaces, originalEditor, modifiedEditor) {\r\n        // Get view zones\r\n        modifiedWhitespaces = modifiedWhitespaces.sort(function (a, b) {\r\n            return a.afterLineNumber - b.afterLineNumber;\r\n        });\r\n        originalWhitespaces = originalWhitespaces.sort(function (a, b) {\r\n            return a.afterLineNumber - b.afterLineNumber;\r\n        });\r\n        var zones = this._getViewZones(lineChanges, originalWhitespaces, modifiedWhitespaces, originalEditor, modifiedEditor, renderIndicators);\r\n        // Get decorations & overview ruler zones\r\n        var originalDecorations = this._getOriginalEditorDecorations(lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor);\r\n        var modifiedDecorations = this._getModifiedEditorDecorations(lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor);\r\n        return {\r\n            original: {\r\n                decorations: originalDecorations.decorations,\r\n                overviewZones: originalDecorations.overviewZones,\r\n                zones: zones.original\r\n            },\r\n            modified: {\r\n                decorations: modifiedDecorations.decorations,\r\n                overviewZones: modifiedDecorations.overviewZones,\r\n                zones: zones.modified\r\n            }\r\n        };\r\n    };\r\n    return DiffEditorWidgetStyle;\r\n}(Disposable));\r\nvar ForeignViewZonesIterator = /** @class */ (function () {\r\n    function ForeignViewZonesIterator(source) {\r\n        this._source = source;\r\n        this._index = -1;\r\n        this.current = null;\r\n        this.advance();\r\n    }\r\n    ForeignViewZonesIterator.prototype.advance = function () {\r\n        this._index++;\r\n        if (this._index < this._source.length) {\r\n            this.current = this._source[this._index];\r\n        }\r\n        else {\r\n            this.current = null;\r\n        }\r\n    };\r\n    return ForeignViewZonesIterator;\r\n}());\r\nvar ViewZonesComputer = /** @class */ (function () {\r\n    function ViewZonesComputer(lineChanges, originalForeignVZ, originalLineHeight, modifiedForeignVZ, modifiedLineHeight) {\r\n        this.lineChanges = lineChanges;\r\n        this.originalForeignVZ = originalForeignVZ;\r\n        this.originalLineHeight = originalLineHeight;\r\n        this.modifiedForeignVZ = modifiedForeignVZ;\r\n        this.modifiedLineHeight = modifiedLineHeight;\r\n    }\r\n    ViewZonesComputer.prototype.getViewZones = function () {\r\n        var result = {\r\n            original: [],\r\n            modified: []\r\n        };\r\n        var lineChangeModifiedLength = 0;\r\n        var lineChangeOriginalLength = 0;\r\n        var originalEquivalentLineNumber = 0;\r\n        var modifiedEquivalentLineNumber = 0;\r\n        var originalEndEquivalentLineNumber = 0;\r\n        var modifiedEndEquivalentLineNumber = 0;\r\n        var sortMyViewZones = function (a, b) {\r\n            return a.afterLineNumber - b.afterLineNumber;\r\n        };\r\n        var addAndCombineIfPossible = function (destination, item) {\r\n            if (item.domNode === null && destination.length > 0) {\r\n                var lastItem = destination[destination.length - 1];\r\n                if (lastItem.afterLineNumber === item.afterLineNumber && lastItem.domNode === null) {\r\n                    lastItem.heightInLines += item.heightInLines;\r\n                    return;\r\n                }\r\n            }\r\n            destination.push(item);\r\n        };\r\n        var modifiedForeignVZ = new ForeignViewZonesIterator(this.modifiedForeignVZ);\r\n        var originalForeignVZ = new ForeignViewZonesIterator(this.originalForeignVZ);\r\n        // In order to include foreign view zones after the last line change, the for loop will iterate once more after the end of the `lineChanges` array\r\n        for (var i = 0, length_5 = this.lineChanges.length; i <= length_5; i++) {\r\n            var lineChange = (i < length_5 ? this.lineChanges[i] : null);\r\n            if (lineChange !== null) {\r\n                originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\r\n                modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\r\n                lineChangeOriginalLength = (lineChange.originalEndLineNumber > 0 ? (lineChange.originalEndLineNumber - lineChange.originalStartLineNumber + 1) : 0);\r\n                lineChangeModifiedLength = (lineChange.modifiedEndLineNumber > 0 ? (lineChange.modifiedEndLineNumber - lineChange.modifiedStartLineNumber + 1) : 0);\r\n                originalEndEquivalentLineNumber = Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber);\r\n                modifiedEndEquivalentLineNumber = Math.max(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber);\r\n            }\r\n            else {\r\n                // Increase to very large value to get the producing tests of foreign view zones running\r\n                originalEquivalentLineNumber += 10000000 + lineChangeOriginalLength;\r\n                modifiedEquivalentLineNumber += 10000000 + lineChangeModifiedLength;\r\n                originalEndEquivalentLineNumber = originalEquivalentLineNumber;\r\n                modifiedEndEquivalentLineNumber = modifiedEquivalentLineNumber;\r\n            }\r\n            // Each step produces view zones, and after producing them, we try to cancel them out, to avoid empty-empty view zone cases\r\n            var stepOriginal = [];\r\n            var stepModified = [];\r\n            // ---------------------------- PRODUCE VIEW ZONES\r\n            // [PRODUCE] View zone(s) in original-side due to foreign view zone(s) in modified-side\r\n            while (modifiedForeignVZ.current && modifiedForeignVZ.current.afterLineNumber <= modifiedEndEquivalentLineNumber) {\r\n                var viewZoneLineNumber = void 0;\r\n                if (modifiedForeignVZ.current.afterLineNumber <= modifiedEquivalentLineNumber) {\r\n                    viewZoneLineNumber = originalEquivalentLineNumber - modifiedEquivalentLineNumber + modifiedForeignVZ.current.afterLineNumber;\r\n                }\r\n                else {\r\n                    viewZoneLineNumber = originalEndEquivalentLineNumber;\r\n                }\r\n                var marginDomNode = null;\r\n                if (lineChange && lineChange.modifiedStartLineNumber <= modifiedForeignVZ.current.afterLineNumber && modifiedForeignVZ.current.afterLineNumber <= lineChange.modifiedEndLineNumber) {\r\n                    marginDomNode = this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion();\r\n                }\r\n                stepOriginal.push({\r\n                    afterLineNumber: viewZoneLineNumber,\r\n                    heightInLines: modifiedForeignVZ.current.height / this.modifiedLineHeight,\r\n                    domNode: null,\r\n                    marginDomNode: marginDomNode\r\n                });\r\n                modifiedForeignVZ.advance();\r\n            }\r\n            // [PRODUCE] View zone(s) in modified-side due to foreign view zone(s) in original-side\r\n            while (originalForeignVZ.current && originalForeignVZ.current.afterLineNumber <= originalEndEquivalentLineNumber) {\r\n                var viewZoneLineNumber = void 0;\r\n                if (originalForeignVZ.current.afterLineNumber <= originalEquivalentLineNumber) {\r\n                    viewZoneLineNumber = modifiedEquivalentLineNumber - originalEquivalentLineNumber + originalForeignVZ.current.afterLineNumber;\r\n                }\r\n                else {\r\n                    viewZoneLineNumber = modifiedEndEquivalentLineNumber;\r\n                }\r\n                stepModified.push({\r\n                    afterLineNumber: viewZoneLineNumber,\r\n                    heightInLines: originalForeignVZ.current.height / this.originalLineHeight,\r\n                    domNode: null\r\n                });\r\n                originalForeignVZ.advance();\r\n            }\r\n            if (lineChange !== null && isChangeOrInsert(lineChange)) {\r\n                var r = this._produceOriginalFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength);\r\n                if (r) {\r\n                    stepOriginal.push(r);\r\n                }\r\n            }\r\n            if (lineChange !== null && isChangeOrDelete(lineChange)) {\r\n                var r = this._produceModifiedFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength);\r\n                if (r) {\r\n                    stepModified.push(r);\r\n                }\r\n            }\r\n            // ---------------------------- END PRODUCE VIEW ZONES\r\n            // ---------------------------- EMIT MINIMAL VIEW ZONES\r\n            // [CANCEL & EMIT] Try to cancel view zones out\r\n            var stepOriginalIndex = 0;\r\n            var stepModifiedIndex = 0;\r\n            stepOriginal = stepOriginal.sort(sortMyViewZones);\r\n            stepModified = stepModified.sort(sortMyViewZones);\r\n            while (stepOriginalIndex < stepOriginal.length && stepModifiedIndex < stepModified.length) {\r\n                var original = stepOriginal[stepOriginalIndex];\r\n                var modified = stepModified[stepModifiedIndex];\r\n                var originalDelta = original.afterLineNumber - originalEquivalentLineNumber;\r\n                var modifiedDelta = modified.afterLineNumber - modifiedEquivalentLineNumber;\r\n                if (originalDelta < modifiedDelta) {\r\n                    addAndCombineIfPossible(result.original, original);\r\n                    stepOriginalIndex++;\r\n                }\r\n                else if (modifiedDelta < originalDelta) {\r\n                    addAndCombineIfPossible(result.modified, modified);\r\n                    stepModifiedIndex++;\r\n                }\r\n                else if (original.shouldNotShrink) {\r\n                    addAndCombineIfPossible(result.original, original);\r\n                    stepOriginalIndex++;\r\n                }\r\n                else if (modified.shouldNotShrink) {\r\n                    addAndCombineIfPossible(result.modified, modified);\r\n                    stepModifiedIndex++;\r\n                }\r\n                else {\r\n                    if (original.heightInLines >= modified.heightInLines) {\r\n                        // modified view zone gets removed\r\n                        original.heightInLines -= modified.heightInLines;\r\n                        stepModifiedIndex++;\r\n                    }\r\n                    else {\r\n                        // original view zone gets removed\r\n                        modified.heightInLines -= original.heightInLines;\r\n                        stepOriginalIndex++;\r\n                    }\r\n                }\r\n            }\r\n            // [EMIT] Remaining original view zones\r\n            while (stepOriginalIndex < stepOriginal.length) {\r\n                addAndCombineIfPossible(result.original, stepOriginal[stepOriginalIndex]);\r\n                stepOriginalIndex++;\r\n            }\r\n            // [EMIT] Remaining modified view zones\r\n            while (stepModifiedIndex < stepModified.length) {\r\n                addAndCombineIfPossible(result.modified, stepModified[stepModifiedIndex]);\r\n                stepModifiedIndex++;\r\n            }\r\n            // ---------------------------- END EMIT MINIMAL VIEW ZONES\r\n        }\r\n        return {\r\n            original: ViewZonesComputer._ensureDomNodes(result.original),\r\n            modified: ViewZonesComputer._ensureDomNodes(result.modified),\r\n        };\r\n    };\r\n    ViewZonesComputer._ensureDomNodes = function (zones) {\r\n        return zones.map(function (z) {\r\n            if (!z.domNode) {\r\n                z.domNode = createFakeLinesDiv();\r\n            }\r\n            return z;\r\n        });\r\n    };\r\n    return ViewZonesComputer;\r\n}());\r\nfunction createDecoration(startLineNumber, startColumn, endLineNumber, endColumn, options) {\r\n    return {\r\n        range: new Range(startLineNumber, startColumn, endLineNumber, endColumn),\r\n        options: options\r\n    };\r\n}\r\nvar DECORATIONS = {\r\n    charDelete: ModelDecorationOptions.register({\r\n        className: 'char-delete'\r\n    }),\r\n    charDeleteWholeLine: ModelDecorationOptions.register({\r\n        className: 'char-delete',\r\n        isWholeLine: true\r\n    }),\r\n    charInsert: ModelDecorationOptions.register({\r\n        className: 'char-insert'\r\n    }),\r\n    charInsertWholeLine: ModelDecorationOptions.register({\r\n        className: 'char-insert',\r\n        isWholeLine: true\r\n    }),\r\n    lineInsert: ModelDecorationOptions.register({\r\n        className: 'line-insert',\r\n        marginClassName: 'line-insert',\r\n        isWholeLine: true\r\n    }),\r\n    lineInsertWithSign: ModelDecorationOptions.register({\r\n        className: 'line-insert',\r\n        linesDecorationsClassName: 'insert-sign codicon codicon-add',\r\n        marginClassName: 'line-insert',\r\n        isWholeLine: true\r\n    }),\r\n    lineDelete: ModelDecorationOptions.register({\r\n        className: 'line-delete',\r\n        marginClassName: 'line-delete',\r\n        isWholeLine: true\r\n    }),\r\n    lineDeleteWithSign: ModelDecorationOptions.register({\r\n        className: 'line-delete',\r\n        linesDecorationsClassName: 'delete-sign codicon codicon-remove',\r\n        marginClassName: 'line-delete',\r\n        isWholeLine: true\r\n    }),\r\n    lineDeleteMargin: ModelDecorationOptions.register({\r\n        marginClassName: 'line-delete',\r\n    })\r\n};\r\nvar DiffEditorWidgetSideBySide = /** @class */ (function (_super) {\r\n    __extends(DiffEditorWidgetSideBySide, _super);\r\n    function DiffEditorWidgetSideBySide(dataSource, enableSplitViewResizing) {\r\n        var _this = _super.call(this, dataSource) || this;\r\n        _this._disableSash = (enableSplitViewResizing === false);\r\n        _this._sashRatio = null;\r\n        _this._sashPosition = null;\r\n        _this._startSashPosition = null;\r\n        _this._sash = _this._register(new Sash(_this._dataSource.getContainerDomNode(), _this));\r\n        if (_this._disableSash) {\r\n            _this._sash.state = 0 /* Disabled */;\r\n        }\r\n        _this._sash.onDidStart(function () { return _this.onSashDragStart(); });\r\n        _this._sash.onDidChange(function (e) { return _this.onSashDrag(e); });\r\n        _this._sash.onDidEnd(function () { return _this.onSashDragEnd(); });\r\n        _this._sash.onDidReset(function () { return _this.onSashReset(); });\r\n        return _this;\r\n    }\r\n    DiffEditorWidgetSideBySide.prototype.setEnableSplitViewResizing = function (enableSplitViewResizing) {\r\n        var newDisableSash = (enableSplitViewResizing === false);\r\n        if (this._disableSash !== newDisableSash) {\r\n            this._disableSash = newDisableSash;\r\n            this._sash.state = this._disableSash ? 0 /* Disabled */ : 3 /* Enabled */;\r\n        }\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.layout = function (sashRatio) {\r\n        if (sashRatio === void 0) { sashRatio = this._sashRatio; }\r\n        var w = this._dataSource.getWidth();\r\n        var contentWidth = w - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH;\r\n        var sashPosition = Math.floor((sashRatio || 0.5) * contentWidth);\r\n        var midPoint = Math.floor(0.5 * contentWidth);\r\n        sashPosition = this._disableSash ? midPoint : sashPosition || midPoint;\r\n        if (contentWidth > DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH * 2) {\r\n            if (sashPosition < DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH) {\r\n                sashPosition = DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH;\r\n            }\r\n            if (sashPosition > contentWidth - DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH) {\r\n                sashPosition = contentWidth - DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH;\r\n            }\r\n        }\r\n        else {\r\n            sashPosition = midPoint;\r\n        }\r\n        if (this._sashPosition !== sashPosition) {\r\n            this._sashPosition = sashPosition;\r\n            this._sash.layout();\r\n        }\r\n        return this._sashPosition;\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.onSashDragStart = function () {\r\n        this._startSashPosition = this._sashPosition;\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.onSashDrag = function (e) {\r\n        var w = this._dataSource.getWidth();\r\n        var contentWidth = w - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH;\r\n        var sashPosition = this.layout((this._startSashPosition + (e.currentX - e.startX)) / contentWidth);\r\n        this._sashRatio = sashPosition / contentWidth;\r\n        this._dataSource.relayoutEditors();\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.onSashDragEnd = function () {\r\n        this._sash.layout();\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.onSashReset = function () {\r\n        this._sashRatio = 0.5;\r\n        this._dataSource.relayoutEditors();\r\n        this._sash.layout();\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.getVerticalSashTop = function (sash) {\r\n        return 0;\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.getVerticalSashLeft = function (sash) {\r\n        return this._sashPosition;\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.getVerticalSashHeight = function (sash) {\r\n        return this._dataSource.getHeight();\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype._getViewZones = function (lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor) {\r\n        var c = new SideBySideViewZonesComputer(lineChanges, originalForeignVZ, originalEditor.getOption(49 /* lineHeight */), modifiedForeignVZ, modifiedEditor.getOption(49 /* lineHeight */));\r\n        return c.getViewZones();\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype._getOriginalEditorDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor) {\r\n        var overviewZoneColor = String(this._removeColor);\r\n        var result = {\r\n            decorations: [],\r\n            overviewZones: []\r\n        };\r\n        var originalModel = originalEditor.getModel();\r\n        for (var i = 0, length_6 = lineChanges.length; i < length_6; i++) {\r\n            var lineChange = lineChanges[i];\r\n            if (isChangeOrDelete(lineChange)) {\r\n                result.decorations.push({\r\n                    range: new Range(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */),\r\n                    options: (renderIndicators ? DECORATIONS.lineDeleteWithSign : DECORATIONS.lineDelete)\r\n                });\r\n                if (!isChangeOrInsert(lineChange) || !lineChange.charChanges) {\r\n                    result.decorations.push(createDecoration(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charDeleteWholeLine));\r\n                }\r\n                result.overviewZones.push(new OverviewRulerZone(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber, overviewZoneColor));\r\n                if (lineChange.charChanges) {\r\n                    for (var j = 0, lengthJ = lineChange.charChanges.length; j < lengthJ; j++) {\r\n                        var charChange = lineChange.charChanges[j];\r\n                        if (isChangeOrDelete(charChange)) {\r\n                            if (ignoreTrimWhitespace) {\r\n                                for (var lineNumber = charChange.originalStartLineNumber; lineNumber <= charChange.originalEndLineNumber; lineNumber++) {\r\n                                    var startColumn = void 0;\r\n                                    var endColumn = void 0;\r\n                                    if (lineNumber === charChange.originalStartLineNumber) {\r\n                                        startColumn = charChange.originalStartColumn;\r\n                                    }\r\n                                    else {\r\n                                        startColumn = originalModel.getLineFirstNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    if (lineNumber === charChange.originalEndLineNumber) {\r\n                                        endColumn = charChange.originalEndColumn;\r\n                                    }\r\n                                    else {\r\n                                        endColumn = originalModel.getLineLastNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charDelete));\r\n                                }\r\n                            }\r\n                            else {\r\n                                result.decorations.push(createDecoration(charChange.originalStartLineNumber, charChange.originalStartColumn, charChange.originalEndLineNumber, charChange.originalEndColumn, DECORATIONS.charDelete));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype._getModifiedEditorDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor) {\r\n        var overviewZoneColor = String(this._insertColor);\r\n        var result = {\r\n            decorations: [],\r\n            overviewZones: []\r\n        };\r\n        var modifiedModel = modifiedEditor.getModel();\r\n        for (var i = 0, length_7 = lineChanges.length; i < length_7; i++) {\r\n            var lineChange = lineChanges[i];\r\n            if (isChangeOrInsert(lineChange)) {\r\n                result.decorations.push({\r\n                    range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */),\r\n                    options: (renderIndicators ? DECORATIONS.lineInsertWithSign : DECORATIONS.lineInsert)\r\n                });\r\n                if (!isChangeOrDelete(lineChange) || !lineChange.charChanges) {\r\n                    result.decorations.push(createDecoration(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charInsertWholeLine));\r\n                }\r\n                result.overviewZones.push(new OverviewRulerZone(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber, overviewZoneColor));\r\n                if (lineChange.charChanges) {\r\n                    for (var j = 0, lengthJ = lineChange.charChanges.length; j < lengthJ; j++) {\r\n                        var charChange = lineChange.charChanges[j];\r\n                        if (isChangeOrInsert(charChange)) {\r\n                            if (ignoreTrimWhitespace) {\r\n                                for (var lineNumber = charChange.modifiedStartLineNumber; lineNumber <= charChange.modifiedEndLineNumber; lineNumber++) {\r\n                                    var startColumn = void 0;\r\n                                    var endColumn = void 0;\r\n                                    if (lineNumber === charChange.modifiedStartLineNumber) {\r\n                                        startColumn = charChange.modifiedStartColumn;\r\n                                    }\r\n                                    else {\r\n                                        startColumn = modifiedModel.getLineFirstNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    if (lineNumber === charChange.modifiedEndLineNumber) {\r\n                                        endColumn = charChange.modifiedEndColumn;\r\n                                    }\r\n                                    else {\r\n                                        endColumn = modifiedModel.getLineLastNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charInsert));\r\n                                }\r\n                            }\r\n                            else {\r\n                                result.decorations.push(createDecoration(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn, DECORATIONS.charInsert));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH = 100;\r\n    return DiffEditorWidgetSideBySide;\r\n}(DiffEditorWidgetStyle));\r\nvar SideBySideViewZonesComputer = /** @class */ (function (_super) {\r\n    __extends(SideBySideViewZonesComputer, _super);\r\n    function SideBySideViewZonesComputer(lineChanges, originalForeignVZ, originalLineHeight, modifiedForeignVZ, modifiedLineHeight) {\r\n        return _super.call(this, lineChanges, originalForeignVZ, originalLineHeight, modifiedForeignVZ, modifiedLineHeight) || this;\r\n    }\r\n    SideBySideViewZonesComputer.prototype._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion = function () {\r\n        return null;\r\n    };\r\n    SideBySideViewZonesComputer.prototype._produceOriginalFromDiff = function (lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\r\n        if (lineChangeModifiedLength > lineChangeOriginalLength) {\r\n            return {\r\n                afterLineNumber: Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber),\r\n                heightInLines: (lineChangeModifiedLength - lineChangeOriginalLength),\r\n                domNode: null\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    SideBySideViewZonesComputer.prototype._produceModifiedFromDiff = function (lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\r\n        if (lineChangeOriginalLength > lineChangeModifiedLength) {\r\n            return {\r\n                afterLineNumber: Math.max(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber),\r\n                heightInLines: (lineChangeOriginalLength - lineChangeModifiedLength),\r\n                domNode: null\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    return SideBySideViewZonesComputer;\r\n}(ViewZonesComputer));\r\nvar DiffEditorWidgetInline = /** @class */ (function (_super) {\r\n    __extends(DiffEditorWidgetInline, _super);\r\n    function DiffEditorWidgetInline(dataSource, enableSplitViewResizing) {\r\n        var _this = _super.call(this, dataSource) || this;\r\n        _this.decorationsLeft = dataSource.getOriginalEditor().getLayoutInfo().decorationsLeft;\r\n        _this._register(dataSource.getOriginalEditor().onDidLayoutChange(function (layoutInfo) {\r\n            if (_this.decorationsLeft !== layoutInfo.decorationsLeft) {\r\n                _this.decorationsLeft = layoutInfo.decorationsLeft;\r\n                dataSource.relayoutEditors();\r\n            }\r\n        }));\r\n        return _this;\r\n    }\r\n    DiffEditorWidgetInline.prototype.setEnableSplitViewResizing = function (enableSplitViewResizing) {\r\n        // Nothing to do..\r\n    };\r\n    DiffEditorWidgetInline.prototype._getViewZones = function (lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators) {\r\n        var computer = new InlineViewZonesComputer(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators);\r\n        return computer.getViewZones();\r\n    };\r\n    DiffEditorWidgetInline.prototype._getOriginalEditorDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor) {\r\n        var overviewZoneColor = String(this._removeColor);\r\n        var result = {\r\n            decorations: [],\r\n            overviewZones: []\r\n        };\r\n        for (var i = 0, length_8 = lineChanges.length; i < length_8; i++) {\r\n            var lineChange = lineChanges[i];\r\n            // Add overview zones in the overview ruler\r\n            if (isChangeOrDelete(lineChange)) {\r\n                result.decorations.push({\r\n                    range: new Range(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */),\r\n                    options: DECORATIONS.lineDeleteMargin\r\n                });\r\n                result.overviewZones.push(new OverviewRulerZone(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber, overviewZoneColor));\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    DiffEditorWidgetInline.prototype._getModifiedEditorDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor) {\r\n        var overviewZoneColor = String(this._insertColor);\r\n        var result = {\r\n            decorations: [],\r\n            overviewZones: []\r\n        };\r\n        var modifiedModel = modifiedEditor.getModel();\r\n        for (var i = 0, length_9 = lineChanges.length; i < length_9; i++) {\r\n            var lineChange = lineChanges[i];\r\n            // Add decorations & overview zones\r\n            if (isChangeOrInsert(lineChange)) {\r\n                result.decorations.push({\r\n                    range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */),\r\n                    options: (renderIndicators ? DECORATIONS.lineInsertWithSign : DECORATIONS.lineInsert)\r\n                });\r\n                result.overviewZones.push(new OverviewRulerZone(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber, overviewZoneColor));\r\n                if (lineChange.charChanges) {\r\n                    for (var j = 0, lengthJ = lineChange.charChanges.length; j < lengthJ; j++) {\r\n                        var charChange = lineChange.charChanges[j];\r\n                        if (isChangeOrInsert(charChange)) {\r\n                            if (ignoreTrimWhitespace) {\r\n                                for (var lineNumber = charChange.modifiedStartLineNumber; lineNumber <= charChange.modifiedEndLineNumber; lineNumber++) {\r\n                                    var startColumn = void 0;\r\n                                    var endColumn = void 0;\r\n                                    if (lineNumber === charChange.modifiedStartLineNumber) {\r\n                                        startColumn = charChange.modifiedStartColumn;\r\n                                    }\r\n                                    else {\r\n                                        startColumn = modifiedModel.getLineFirstNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    if (lineNumber === charChange.modifiedEndLineNumber) {\r\n                                        endColumn = charChange.modifiedEndColumn;\r\n                                    }\r\n                                    else {\r\n                                        endColumn = modifiedModel.getLineLastNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charInsert));\r\n                                }\r\n                            }\r\n                            else {\r\n                                result.decorations.push(createDecoration(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn, DECORATIONS.charInsert));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    result.decorations.push(createDecoration(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charInsertWholeLine));\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    DiffEditorWidgetInline.prototype.layout = function () {\r\n        // An editor should not be smaller than 5px\r\n        return Math.max(5, this.decorationsLeft);\r\n    };\r\n    return DiffEditorWidgetInline;\r\n}(DiffEditorWidgetStyle));\r\nvar InlineViewZonesComputer = /** @class */ (function (_super) {\r\n    __extends(InlineViewZonesComputer, _super);\r\n    function InlineViewZonesComputer(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators) {\r\n        var _this = _super.call(this, lineChanges, originalForeignVZ, originalEditor.getOption(49 /* lineHeight */), modifiedForeignVZ, modifiedEditor.getOption(49 /* lineHeight */)) || this;\r\n        _this.originalModel = originalEditor.getModel();\r\n        _this.modifiedEditorOptions = modifiedEditor.getOptions();\r\n        _this.modifiedEditorTabSize = modifiedEditor.getModel().getOptions().tabSize;\r\n        _this.renderIndicators = renderIndicators;\r\n        return _this;\r\n    }\r\n    InlineViewZonesComputer.prototype._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion = function () {\r\n        var result = document.createElement('div');\r\n        result.className = 'inline-added-margin-view-zone';\r\n        return result;\r\n    };\r\n    InlineViewZonesComputer.prototype._produceOriginalFromDiff = function (lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\r\n        var marginDomNode = document.createElement('div');\r\n        marginDomNode.className = 'inline-added-margin-view-zone';\r\n        return {\r\n            afterLineNumber: Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber),\r\n            heightInLines: lineChangeModifiedLength,\r\n            domNode: document.createElement('div'),\r\n            marginDomNode: marginDomNode\r\n        };\r\n    };\r\n    InlineViewZonesComputer.prototype._produceModifiedFromDiff = function (lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\r\n        var decorations = [];\r\n        if (lineChange.charChanges) {\r\n            for (var j = 0, lengthJ = lineChange.charChanges.length; j < lengthJ; j++) {\r\n                var charChange = lineChange.charChanges[j];\r\n                if (isChangeOrDelete(charChange)) {\r\n                    decorations.push(new InlineDecoration(new Range(charChange.originalStartLineNumber, charChange.originalStartColumn, charChange.originalEndLineNumber, charChange.originalEndColumn), 'char-delete', 0 /* Regular */));\r\n                }\r\n            }\r\n        }\r\n        var sb = createStringBuilder(10000);\r\n        var marginHTML = [];\r\n        var layoutInfo = this.modifiedEditorOptions.get(107 /* layoutInfo */);\r\n        var fontInfo = this.modifiedEditorOptions.get(34 /* fontInfo */);\r\n        var lineDecorationsWidth = layoutInfo.decorationsWidth;\r\n        var lineHeight = this.modifiedEditorOptions.get(49 /* lineHeight */);\r\n        var typicalHalfwidthCharacterWidth = fontInfo.typicalHalfwidthCharacterWidth;\r\n        var maxCharsPerLine = 0;\r\n        var originalContent = [];\r\n        for (var lineNumber = lineChange.originalStartLineNumber; lineNumber <= lineChange.originalEndLineNumber; lineNumber++) {\r\n            maxCharsPerLine = Math.max(maxCharsPerLine, this._renderOriginalLine(lineNumber - lineChange.originalStartLineNumber, this.originalModel, this.modifiedEditorOptions, this.modifiedEditorTabSize, lineNumber, decorations, sb));\r\n            originalContent.push(this.originalModel.getLineContent(lineNumber));\r\n            if (this.renderIndicators) {\r\n                var index = lineNumber - lineChange.originalStartLineNumber;\r\n                marginHTML = marginHTML.concat([\r\n                    \"<div class=\\\"delete-sign codicon codicon-remove\\\" style=\\\"position:absolute;top:\" + index * lineHeight + \"px;width:\" + lineDecorationsWidth + \"px;height:\" + lineHeight + \"px;right:0;\\\"></div>\"\r\n                ]);\r\n            }\r\n        }\r\n        maxCharsPerLine += this.modifiedEditorOptions.get(79 /* scrollBeyondLastColumn */);\r\n        var domNode = document.createElement('div');\r\n        domNode.className = 'view-lines line-delete';\r\n        domNode.innerHTML = sb.build();\r\n        Configuration.applyFontInfoSlow(domNode, fontInfo);\r\n        var marginDomNode = document.createElement('div');\r\n        marginDomNode.className = 'inline-deleted-margin-view-zone';\r\n        marginDomNode.innerHTML = marginHTML.join('');\r\n        Configuration.applyFontInfoSlow(marginDomNode, fontInfo);\r\n        return {\r\n            shouldNotShrink: true,\r\n            afterLineNumber: (lineChange.modifiedEndLineNumber === 0 ? lineChange.modifiedStartLineNumber : lineChange.modifiedStartLineNumber - 1),\r\n            heightInLines: lineChangeOriginalLength,\r\n            minWidthInPx: (maxCharsPerLine * typicalHalfwidthCharacterWidth),\r\n            domNode: domNode,\r\n            marginDomNode: marginDomNode,\r\n            diff: {\r\n                originalStartLineNumber: lineChange.originalStartLineNumber,\r\n                originalEndLineNumber: lineChange.originalEndLineNumber,\r\n                modifiedStartLineNumber: lineChange.modifiedStartLineNumber,\r\n                modifiedEndLineNumber: lineChange.modifiedEndLineNumber,\r\n                originalContent: originalContent\r\n            }\r\n        };\r\n    };\r\n    InlineViewZonesComputer.prototype._renderOriginalLine = function (count, originalModel, options, tabSize, lineNumber, decorations, sb) {\r\n        var lineTokens = originalModel.getLineTokens(lineNumber);\r\n        var lineContent = lineTokens.getLineContent();\r\n        var fontInfo = options.get(34 /* fontInfo */);\r\n        var actualDecorations = LineDecoration.filter(decorations, lineNumber, 1, lineContent.length + 1);\r\n        sb.appendASCIIString('<div class=\"view-line');\r\n        if (decorations.length === 0) {\r\n            // No char changes\r\n            sb.appendASCIIString(' char-delete');\r\n        }\r\n        sb.appendASCIIString('\" style=\"top:');\r\n        sb.appendASCIIString(String(count * options.get(49 /* lineHeight */)));\r\n        sb.appendASCIIString('px;width:1000000px;\">');\r\n        var isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, originalModel.mightContainNonBasicASCII());\r\n        var containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, originalModel.mightContainRTL());\r\n        var output = renderViewLine(new RenderLineInput((fontInfo.isMonospace && !options.get(23 /* disableMonospaceOptimizations */)), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, actualDecorations, tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, options.get(88 /* stopRenderingLineAfter */), options.get(74 /* renderWhitespace */), options.get(69 /* renderControlCharacters */), options.get(35 /* fontLigatures */) !== EditorFontLigatures.OFF, null // Send no selections, original line cannot be selected\r\n        ), sb);\r\n        sb.appendASCIIString('</div>');\r\n        var absoluteOffsets = output.characterMapping.getAbsoluteOffsets();\r\n        return absoluteOffsets.length > 0 ? absoluteOffsets[absoluteOffsets.length - 1] : 0;\r\n    };\r\n    return InlineViewZonesComputer;\r\n}(ViewZonesComputer));\r\nfunction isChangeOrInsert(lineChange) {\r\n    return lineChange.modifiedEndLineNumber > 0;\r\n}\r\nfunction isChangeOrDelete(lineChange) {\r\n    return lineChange.originalEndLineNumber > 0;\r\n}\r\nfunction createFakeLinesDiv() {\r\n    var r = document.createElement('div');\r\n    r.className = 'diagonal-fill';\r\n    return r;\r\n}\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var added = theme.getColor(diffInserted);\r\n    if (added) {\r\n        collector.addRule(\".monaco-editor .line-insert, .monaco-editor .char-insert { background-color: \" + added + \"; }\");\r\n        collector.addRule(\".monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: \" + added + \"; }\");\r\n        collector.addRule(\".monaco-editor .inline-added-margin-view-zone { background-color: \" + added + \"; }\");\r\n    }\r\n    var removed = theme.getColor(diffRemoved);\r\n    if (removed) {\r\n        collector.addRule(\".monaco-editor .line-delete, .monaco-editor .char-delete { background-color: \" + removed + \"; }\");\r\n        collector.addRule(\".monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: \" + removed + \"; }\");\r\n        collector.addRule(\".monaco-editor .inline-deleted-margin-view-zone { background-color: \" + removed + \"; }\");\r\n    }\r\n    var addedOutline = theme.getColor(diffInsertedOutline);\r\n    if (addedOutline) {\r\n        collector.addRule(\".monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + addedOutline + \"; }\");\r\n    }\r\n    var removedOutline = theme.getColor(diffRemovedOutline);\r\n    if (removedOutline) {\r\n        collector.addRule(\".monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + removedOutline + \"; }\");\r\n    }\r\n    var shadow = theme.getColor(scrollbarShadow);\r\n    if (shadow) {\r\n        collector.addRule(\".monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px \" + shadow + \"; }\");\r\n    }\r\n    var border = theme.getColor(diffBorder);\r\n    if (border) {\r\n        collector.addRule(\".monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid \" + border + \"; }\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport * as browser from '../../../base/browser/browser.js';\r\nimport * as aria from '../../../base/browser/ui/aria/aria.js';\r\nimport { Disposable, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { CodeEditorWidget } from '../../browser/widget/codeEditorWidget.js';\r\nimport { DiffEditorWidget } from '../../browser/widget/diffEditorWidget.js';\r\nimport { InternalEditorAction } from '../../common/editorAction.js';\r\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\r\nimport { StandaloneKeybindingService, applyConfigurationValues } from './simpleServices.js';\r\nimport { IStandaloneThemeService } from '../common/standaloneThemeService.js';\r\nimport { MenuRegistry } from '../../../platform/actions/common/actions.js';\r\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IContextViewService, IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { IInstantiationService, optional } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\r\nimport { StandaloneCodeEditorNLS } from '../../common/standaloneStrings.js';\r\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\r\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\r\nvar LAST_GENERATED_COMMAND_ID = 0;\r\nvar ariaDomNodeCreated = false;\r\nfunction createAriaDomNode() {\r\n    if (ariaDomNodeCreated) {\r\n        return;\r\n    }\r\n    ariaDomNodeCreated = true;\r\n    aria.setARIAContainer(document.body);\r\n}\r\n/**\r\n * A code editor to be used both by the standalone editor and the standalone diff editor.\r\n */\r\nvar StandaloneCodeEditor = /** @class */ (function (_super) {\r\n    __extends(StandaloneCodeEditor, _super);\r\n    function StandaloneCodeEditor(domElement, options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService) {\r\n        var _this = this;\r\n        options = options || {};\r\n        options.ariaLabel = options.ariaLabel || StandaloneCodeEditorNLS.editorViewAccessibleLabel;\r\n        options.ariaLabel = options.ariaLabel + ';' + (browser.isIE\r\n            ? StandaloneCodeEditorNLS.accessibilityHelpMessageIE\r\n            : StandaloneCodeEditorNLS.accessibilityHelpMessage);\r\n        _this = _super.call(this, domElement, options, {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService) || this;\r\n        if (keybindingService instanceof StandaloneKeybindingService) {\r\n            _this._standaloneKeybindingService = keybindingService;\r\n        }\r\n        else {\r\n            _this._standaloneKeybindingService = null;\r\n        }\r\n        // Create the ARIA dom node as soon as the first editor is instantiated\r\n        createAriaDomNode();\r\n        return _this;\r\n    }\r\n    StandaloneCodeEditor.prototype.addCommand = function (keybinding, handler, context) {\r\n        if (!this._standaloneKeybindingService) {\r\n            console.warn('Cannot add command because the editor is configured with an unrecognized KeybindingService');\r\n            return null;\r\n        }\r\n        var commandId = 'DYNAMIC_' + (++LAST_GENERATED_COMMAND_ID);\r\n        var whenExpression = ContextKeyExpr.deserialize(context);\r\n        this._standaloneKeybindingService.addDynamicKeybinding(commandId, keybinding, handler, whenExpression);\r\n        return commandId;\r\n    };\r\n    StandaloneCodeEditor.prototype.createContextKey = function (key, defaultValue) {\r\n        return this._contextKeyService.createKey(key, defaultValue);\r\n    };\r\n    StandaloneCodeEditor.prototype.addAction = function (_descriptor) {\r\n        var _this = this;\r\n        if ((typeof _descriptor.id !== 'string') || (typeof _descriptor.label !== 'string') || (typeof _descriptor.run !== 'function')) {\r\n            throw new Error('Invalid action descriptor, `id`, `label` and `run` are required properties!');\r\n        }\r\n        if (!this._standaloneKeybindingService) {\r\n            console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\r\n            return Disposable.None;\r\n        }\r\n        // Read descriptor options\r\n        var id = _descriptor.id;\r\n        var label = _descriptor.label;\r\n        var precondition = ContextKeyExpr.and(ContextKeyExpr.equals('editorId', this.getId()), ContextKeyExpr.deserialize(_descriptor.precondition));\r\n        var keybindings = _descriptor.keybindings;\r\n        var keybindingsWhen = ContextKeyExpr.and(precondition, ContextKeyExpr.deserialize(_descriptor.keybindingContext));\r\n        var contextMenuGroupId = _descriptor.contextMenuGroupId || null;\r\n        var contextMenuOrder = _descriptor.contextMenuOrder || 0;\r\n        var run = function (accessor) {\r\n            var args = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                args[_i - 1] = arguments[_i];\r\n            }\r\n            return Promise.resolve(_descriptor.run.apply(_descriptor, __spreadArrays([_this], args)));\r\n        };\r\n        var toDispose = new DisposableStore();\r\n        // Generate a unique id to allow the same descriptor.id across multiple editor instances\r\n        var uniqueId = this.getId() + ':' + id;\r\n        // Register the command\r\n        toDispose.add(CommandsRegistry.registerCommand(uniqueId, run));\r\n        // Register the context menu item\r\n        if (contextMenuGroupId) {\r\n            var menuItem = {\r\n                command: {\r\n                    id: uniqueId,\r\n                    title: label\r\n                },\r\n                when: precondition,\r\n                group: contextMenuGroupId,\r\n                order: contextMenuOrder\r\n            };\r\n            toDispose.add(MenuRegistry.appendMenuItem(7 /* EditorContext */, menuItem));\r\n        }\r\n        // Register the keybindings\r\n        if (Array.isArray(keybindings)) {\r\n            for (var _i = 0, keybindings_1 = keybindings; _i < keybindings_1.length; _i++) {\r\n                var kb = keybindings_1[_i];\r\n                toDispose.add(this._standaloneKeybindingService.addDynamicKeybinding(uniqueId, kb, run, keybindingsWhen));\r\n            }\r\n        }\r\n        // Finally, register an internal editor action\r\n        var internalAction = new InternalEditorAction(uniqueId, label, label, precondition, run, this._contextKeyService);\r\n        // Store it under the original id, such that trigger with the original id will work\r\n        this._actions[id] = internalAction;\r\n        toDispose.add(toDisposable(function () {\r\n            delete _this._actions[id];\r\n        }));\r\n        return toDispose;\r\n    };\r\n    StandaloneCodeEditor = __decorate([\r\n        __param(2, IInstantiationService),\r\n        __param(3, ICodeEditorService),\r\n        __param(4, ICommandService),\r\n        __param(5, IContextKeyService),\r\n        __param(6, IKeybindingService),\r\n        __param(7, IThemeService),\r\n        __param(8, INotificationService),\r\n        __param(9, IAccessibilityService)\r\n    ], StandaloneCodeEditor);\r\n    return StandaloneCodeEditor;\r\n}(CodeEditorWidget));\r\nexport { StandaloneCodeEditor };\r\nvar StandaloneEditor = /** @class */ (function (_super) {\r\n    __extends(StandaloneEditor, _super);\r\n    function StandaloneEditor(domElement, options, toDispose, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, contextViewService, themeService, notificationService, configurationService, accessibilityService) {\r\n        var _this = this;\r\n        applyConfigurationValues(configurationService, options, false);\r\n        var themeDomRegistration = themeService.registerEditorContainer(domElement);\r\n        options = options || {};\r\n        if (typeof options.theme === 'string') {\r\n            themeService.setTheme(options.theme);\r\n        }\r\n        var _model = options.model;\r\n        delete options.model;\r\n        _this = _super.call(this, domElement, options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService) || this;\r\n        _this._contextViewService = contextViewService;\r\n        _this._configurationService = configurationService;\r\n        _this._register(toDispose);\r\n        _this._register(themeDomRegistration);\r\n        var model;\r\n        if (typeof _model === 'undefined') {\r\n            model = self.monaco.editor.createModel(options.value || '', options.language || 'text/plain');\r\n            _this._ownsModel = true;\r\n        }\r\n        else {\r\n            model = _model;\r\n            _this._ownsModel = false;\r\n        }\r\n        _this._attachModel(model);\r\n        if (model) {\r\n            var e = {\r\n                oldModelUrl: null,\r\n                newModelUrl: model.uri\r\n            };\r\n            _this._onDidChangeModel.fire(e);\r\n        }\r\n        return _this;\r\n    }\r\n    StandaloneEditor.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    StandaloneEditor.prototype.updateOptions = function (newOptions) {\r\n        applyConfigurationValues(this._configurationService, newOptions, false);\r\n        _super.prototype.updateOptions.call(this, newOptions);\r\n    };\r\n    StandaloneEditor.prototype._attachModel = function (model) {\r\n        _super.prototype._attachModel.call(this, model);\r\n        if (this._modelData) {\r\n            this._contextViewService.setContainer(this._modelData.view.domNode.domNode);\r\n        }\r\n    };\r\n    StandaloneEditor.prototype._postDetachModelCleanup = function (detachedModel) {\r\n        _super.prototype._postDetachModelCleanup.call(this, detachedModel);\r\n        if (detachedModel && this._ownsModel) {\r\n            detachedModel.dispose();\r\n            this._ownsModel = false;\r\n        }\r\n    };\r\n    StandaloneEditor = __decorate([\r\n        __param(3, IInstantiationService),\r\n        __param(4, ICodeEditorService),\r\n        __param(5, ICommandService),\r\n        __param(6, IContextKeyService),\r\n        __param(7, IKeybindingService),\r\n        __param(8, IContextViewService),\r\n        __param(9, IStandaloneThemeService),\r\n        __param(10, INotificationService),\r\n        __param(11, IConfigurationService),\r\n        __param(12, IAccessibilityService)\r\n    ], StandaloneEditor);\r\n    return StandaloneEditor;\r\n}(StandaloneCodeEditor));\r\nexport { StandaloneEditor };\r\nvar StandaloneDiffEditor = /** @class */ (function (_super) {\r\n    __extends(StandaloneDiffEditor, _super);\r\n    function StandaloneDiffEditor(domElement, options, toDispose, instantiationService, contextKeyService, keybindingService, contextViewService, editorWorkerService, codeEditorService, themeService, notificationService, configurationService, contextMenuService, editorProgressService, clipboardService) {\r\n        var _this = this;\r\n        applyConfigurationValues(configurationService, options, true);\r\n        var themeDomRegistration = themeService.registerEditorContainer(domElement);\r\n        options = options || {};\r\n        if (typeof options.theme === 'string') {\r\n            options.theme = themeService.setTheme(options.theme);\r\n        }\r\n        _this = _super.call(this, domElement, options, clipboardService, editorWorkerService, contextKeyService, instantiationService, codeEditorService, themeService, notificationService, contextMenuService, editorProgressService) || this;\r\n        _this._contextViewService = contextViewService;\r\n        _this._configurationService = configurationService;\r\n        _this._register(toDispose);\r\n        _this._register(themeDomRegistration);\r\n        _this._contextViewService.setContainer(_this._containerDomElement);\r\n        return _this;\r\n    }\r\n    StandaloneDiffEditor.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    StandaloneDiffEditor.prototype.updateOptions = function (newOptions) {\r\n        applyConfigurationValues(this._configurationService, newOptions, true);\r\n        _super.prototype.updateOptions.call(this, newOptions);\r\n    };\r\n    StandaloneDiffEditor.prototype._createInnerEditor = function (instantiationService, container, options) {\r\n        return instantiationService.createInstance(StandaloneCodeEditor, container, options);\r\n    };\r\n    StandaloneDiffEditor.prototype.getOriginalEditor = function () {\r\n        return _super.prototype.getOriginalEditor.call(this);\r\n    };\r\n    StandaloneDiffEditor.prototype.getModifiedEditor = function () {\r\n        return _super.prototype.getModifiedEditor.call(this);\r\n    };\r\n    StandaloneDiffEditor.prototype.addCommand = function (keybinding, handler, context) {\r\n        return this.getModifiedEditor().addCommand(keybinding, handler, context);\r\n    };\r\n    StandaloneDiffEditor.prototype.createContextKey = function (key, defaultValue) {\r\n        return this.getModifiedEditor().createContextKey(key, defaultValue);\r\n    };\r\n    StandaloneDiffEditor.prototype.addAction = function (descriptor) {\r\n        return this.getModifiedEditor().addAction(descriptor);\r\n    };\r\n    StandaloneDiffEditor = __decorate([\r\n        __param(3, IInstantiationService),\r\n        __param(4, IContextKeyService),\r\n        __param(5, IKeybindingService),\r\n        __param(6, IContextViewService),\r\n        __param(7, IEditorWorkerService),\r\n        __param(8, ICodeEditorService),\r\n        __param(9, IStandaloneThemeService),\r\n        __param(10, INotificationService),\r\n        __param(11, IConfigurationService),\r\n        __param(12, IContextMenuService),\r\n        __param(13, IEditorProgressService),\r\n        __param(14, optional(IClipboardService))\r\n    ], StandaloneDiffEditor);\r\n    return StandaloneDiffEditor;\r\n}(DiffEditorWidget));\r\nexport { StandaloneDiffEditor };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar FrankensteinMode = /** @class */ (function () {\r\n    function FrankensteinMode(languageIdentifier) {\r\n        this._languageIdentifier = languageIdentifier;\r\n    }\r\n    FrankensteinMode.prototype.getId = function () {\r\n        return this._languageIdentifier.language;\r\n    };\r\n    return FrankensteinMode;\r\n}());\r\nexport { FrankensteinMode };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { basename, posix } from './path.js';\r\nimport { endsWith, startsWithUTF8BOM } from './strings.js';\r\nimport { match } from './glob.js';\r\nimport { Schemas } from './network.js';\r\nimport { DataUri } from './resources.js';\r\nexport var MIME_TEXT = 'text/plain';\r\nexport var MIME_UNKNOWN = 'application/unknown';\r\nvar registeredAssociations = [];\r\nvar nonUserRegisteredAssociations = [];\r\nvar userRegisteredAssociations = [];\r\n/**\r\n * Associate a text mime to the registry.\r\n */\r\nexport function registerTextMime(association, warnOnOverwrite) {\r\n    if (warnOnOverwrite === void 0) { warnOnOverwrite = false; }\r\n    // Register\r\n    var associationItem = toTextMimeAssociationItem(association);\r\n    registeredAssociations.push(associationItem);\r\n    if (!associationItem.userConfigured) {\r\n        nonUserRegisteredAssociations.push(associationItem);\r\n    }\r\n    else {\r\n        userRegisteredAssociations.push(associationItem);\r\n    }\r\n    // Check for conflicts unless this is a user configured association\r\n    if (warnOnOverwrite && !associationItem.userConfigured) {\r\n        registeredAssociations.forEach(function (a) {\r\n            if (a.mime === associationItem.mime || a.userConfigured) {\r\n                return; // same mime or userConfigured is ok\r\n            }\r\n            if (associationItem.extension && a.extension === associationItem.extension) {\r\n                console.warn(\"Overwriting extension <<\" + associationItem.extension + \">> to now point to mime <<\" + associationItem.mime + \">>\");\r\n            }\r\n            if (associationItem.filename && a.filename === associationItem.filename) {\r\n                console.warn(\"Overwriting filename <<\" + associationItem.filename + \">> to now point to mime <<\" + associationItem.mime + \">>\");\r\n            }\r\n            if (associationItem.filepattern && a.filepattern === associationItem.filepattern) {\r\n                console.warn(\"Overwriting filepattern <<\" + associationItem.filepattern + \">> to now point to mime <<\" + associationItem.mime + \">>\");\r\n            }\r\n            if (associationItem.firstline && a.firstline === associationItem.firstline) {\r\n                console.warn(\"Overwriting firstline <<\" + associationItem.firstline + \">> to now point to mime <<\" + associationItem.mime + \">>\");\r\n            }\r\n        });\r\n    }\r\n}\r\nfunction toTextMimeAssociationItem(association) {\r\n    return {\r\n        id: association.id,\r\n        mime: association.mime,\r\n        filename: association.filename,\r\n        extension: association.extension,\r\n        filepattern: association.filepattern,\r\n        firstline: association.firstline,\r\n        userConfigured: association.userConfigured,\r\n        filenameLowercase: association.filename ? association.filename.toLowerCase() : undefined,\r\n        extensionLowercase: association.extension ? association.extension.toLowerCase() : undefined,\r\n        filepatternLowercase: association.filepattern ? association.filepattern.toLowerCase() : undefined,\r\n        filepatternOnPath: association.filepattern ? association.filepattern.indexOf(posix.sep) >= 0 : false\r\n    };\r\n}\r\n/**\r\n * Given a file, return the best matching mime type for it\r\n */\r\nexport function guessMimeTypes(resource, firstLine) {\r\n    var path;\r\n    if (resource) {\r\n        switch (resource.scheme) {\r\n            case Schemas.file:\r\n                path = resource.fsPath;\r\n                break;\r\n            case Schemas.data:\r\n                var metadata = DataUri.parseMetaData(resource);\r\n                path = metadata.get(DataUri.META_DATA_LABEL);\r\n                break;\r\n            default:\r\n                path = resource.path;\r\n        }\r\n    }\r\n    if (!path) {\r\n        return [MIME_UNKNOWN];\r\n    }\r\n    path = path.toLowerCase();\r\n    var filename = basename(path);\r\n    // 1.) User configured mappings have highest priority\r\n    var configuredMime = guessMimeTypeByPath(path, filename, userRegisteredAssociations);\r\n    if (configuredMime) {\r\n        return [configuredMime, MIME_TEXT];\r\n    }\r\n    // 2.) Registered mappings have middle priority\r\n    var registeredMime = guessMimeTypeByPath(path, filename, nonUserRegisteredAssociations);\r\n    if (registeredMime) {\r\n        return [registeredMime, MIME_TEXT];\r\n    }\r\n    // 3.) Firstline has lowest priority\r\n    if (firstLine) {\r\n        var firstlineMime = guessMimeTypeByFirstline(firstLine);\r\n        if (firstlineMime) {\r\n            return [firstlineMime, MIME_TEXT];\r\n        }\r\n    }\r\n    return [MIME_UNKNOWN];\r\n}\r\nfunction guessMimeTypeByPath(path, filename, associations) {\r\n    var filenameMatch = null;\r\n    var patternMatch = null;\r\n    var extensionMatch = null;\r\n    // We want to prioritize associations based on the order they are registered so that the last registered\r\n    // association wins over all other. This is for https://github.com/Microsoft/vscode/issues/20074\r\n    for (var i = associations.length - 1; i >= 0; i--) {\r\n        var association = associations[i];\r\n        // First exact name match\r\n        if (filename === association.filenameLowercase) {\r\n            filenameMatch = association;\r\n            break; // take it!\r\n        }\r\n        // Longest pattern match\r\n        if (association.filepattern) {\r\n            if (!patternMatch || association.filepattern.length > patternMatch.filepattern.length) {\r\n                var target = association.filepatternOnPath ? path : filename; // match on full path if pattern contains path separator\r\n                if (match(association.filepatternLowercase, target)) {\r\n                    patternMatch = association;\r\n                }\r\n            }\r\n        }\r\n        // Longest extension match\r\n        if (association.extension) {\r\n            if (!extensionMatch || association.extension.length > extensionMatch.extension.length) {\r\n                if (endsWith(filename, association.extensionLowercase)) {\r\n                    extensionMatch = association;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // 1.) Exact name match has second highest prio\r\n    if (filenameMatch) {\r\n        return filenameMatch.mime;\r\n    }\r\n    // 2.) Match on pattern\r\n    if (patternMatch) {\r\n        return patternMatch.mime;\r\n    }\r\n    // 3.) Match on extension comes next\r\n    if (extensionMatch) {\r\n        return extensionMatch.mime;\r\n    }\r\n    return null;\r\n}\r\nfunction guessMimeTypeByFirstline(firstLine) {\r\n    if (startsWithUTF8BOM(firstLine)) {\r\n        firstLine = firstLine.substr(1);\r\n    }\r\n    if (firstLine.length > 0) {\r\n        // We want to prioritize associations based on the order they are registered so that the last registered\r\n        // association wins over all other. This is for https://github.com/Microsoft/vscode/issues/20074\r\n        for (var i = registeredAssociations.length - 1; i >= 0; i--) {\r\n            var association = registeredAssociations[i];\r\n            if (!association.firstline) {\r\n                continue;\r\n            }\r\n            var matches = firstLine.match(association.firstline);\r\n            if (matches && matches.length > 0) {\r\n                return association.mime;\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport * as mime from '../../../base/common/mime.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { LanguageIdentifier } from '../modes.js';\r\nimport { ModesRegistry } from '../modes/modesRegistry.js';\r\nimport { NULL_LANGUAGE_IDENTIFIER, NULL_MODE_ID } from '../modes/nullMode.js';\r\nimport { Extensions } from '../../../platform/configuration/common/configurationRegistry.js';\r\nimport { Registry } from '../../../platform/registry/common/platform.js';\r\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\r\nvar LanguagesRegistry = /** @class */ (function (_super) {\r\n    __extends(LanguagesRegistry, _super);\r\n    function LanguagesRegistry(useModesRegistry, warnOnOverwrite) {\r\n        if (useModesRegistry === void 0) { useModesRegistry = true; }\r\n        if (warnOnOverwrite === void 0) { warnOnOverwrite = false; }\r\n        var _this = _super.call(this) || this;\r\n        _this._onDidChange = _this._register(new Emitter());\r\n        _this.onDidChange = _this._onDidChange.event;\r\n        _this._warnOnOverwrite = warnOnOverwrite;\r\n        _this._nextLanguageId2 = 1;\r\n        _this._languageIdToLanguage = [];\r\n        _this._languageToLanguageId = Object.create(null);\r\n        _this._languages = {};\r\n        _this._mimeTypesMap = {};\r\n        _this._nameMap = {};\r\n        _this._lowercaseNameMap = {};\r\n        if (useModesRegistry) {\r\n            _this._initializeFromRegistry();\r\n            _this._register(ModesRegistry.onDidChangeLanguages(function (m) { return _this._initializeFromRegistry(); }));\r\n        }\r\n        return _this;\r\n    }\r\n    LanguagesRegistry.prototype._initializeFromRegistry = function () {\r\n        this._languages = {};\r\n        this._mimeTypesMap = {};\r\n        this._nameMap = {};\r\n        this._lowercaseNameMap = {};\r\n        var desc = ModesRegistry.getLanguages();\r\n        this._registerLanguages(desc);\r\n    };\r\n    LanguagesRegistry.prototype._registerLanguages = function (desc) {\r\n        var _this = this;\r\n        for (var _i = 0, desc_1 = desc; _i < desc_1.length; _i++) {\r\n            var d = desc_1[_i];\r\n            this._registerLanguage(d);\r\n        }\r\n        // Rebuild fast path maps\r\n        this._mimeTypesMap = {};\r\n        this._nameMap = {};\r\n        this._lowercaseNameMap = {};\r\n        Object.keys(this._languages).forEach(function (langId) {\r\n            var language = _this._languages[langId];\r\n            if (language.name) {\r\n                _this._nameMap[language.name] = language.identifier;\r\n            }\r\n            language.aliases.forEach(function (alias) {\r\n                _this._lowercaseNameMap[alias.toLowerCase()] = language.identifier;\r\n            });\r\n            language.mimetypes.forEach(function (mimetype) {\r\n                _this._mimeTypesMap[mimetype] = language.identifier;\r\n            });\r\n        });\r\n        Registry.as(Extensions.Configuration).registerOverrideIdentifiers(ModesRegistry.getLanguages().map(function (language) { return language.id; }));\r\n        this._onDidChange.fire();\r\n    };\r\n    LanguagesRegistry.prototype._getLanguageId = function (language) {\r\n        if (this._languageToLanguageId[language]) {\r\n            return this._languageToLanguageId[language];\r\n        }\r\n        var languageId = this._nextLanguageId2++;\r\n        this._languageIdToLanguage[languageId] = language;\r\n        this._languageToLanguageId[language] = languageId;\r\n        return languageId;\r\n    };\r\n    LanguagesRegistry.prototype._registerLanguage = function (lang) {\r\n        var langId = lang.id;\r\n        var resolvedLanguage;\r\n        if (hasOwnProperty.call(this._languages, langId)) {\r\n            resolvedLanguage = this._languages[langId];\r\n        }\r\n        else {\r\n            var languageId = this._getLanguageId(langId);\r\n            resolvedLanguage = {\r\n                identifier: new LanguageIdentifier(langId, languageId),\r\n                name: null,\r\n                mimetypes: [],\r\n                aliases: [],\r\n                extensions: [],\r\n                filenames: [],\r\n                configurationFiles: []\r\n            };\r\n            this._languages[langId] = resolvedLanguage;\r\n        }\r\n        this._mergeLanguage(resolvedLanguage, lang);\r\n    };\r\n    LanguagesRegistry.prototype._mergeLanguage = function (resolvedLanguage, lang) {\r\n        var _a;\r\n        var langId = lang.id;\r\n        var primaryMime = null;\r\n        if (Array.isArray(lang.mimetypes) && lang.mimetypes.length > 0) {\r\n            (_a = resolvedLanguage.mimetypes).push.apply(_a, lang.mimetypes);\r\n            primaryMime = lang.mimetypes[0];\r\n        }\r\n        if (!primaryMime) {\r\n            primaryMime = \"text/x-\" + langId;\r\n            resolvedLanguage.mimetypes.push(primaryMime);\r\n        }\r\n        if (Array.isArray(lang.extensions)) {\r\n            for (var _i = 0, _b = lang.extensions; _i < _b.length; _i++) {\r\n                var extension = _b[_i];\r\n                mime.registerTextMime({ id: langId, mime: primaryMime, extension: extension }, this._warnOnOverwrite);\r\n                resolvedLanguage.extensions.push(extension);\r\n            }\r\n        }\r\n        if (Array.isArray(lang.filenames)) {\r\n            for (var _c = 0, _d = lang.filenames; _c < _d.length; _c++) {\r\n                var filename = _d[_c];\r\n                mime.registerTextMime({ id: langId, mime: primaryMime, filename: filename }, this._warnOnOverwrite);\r\n                resolvedLanguage.filenames.push(filename);\r\n            }\r\n        }\r\n        if (Array.isArray(lang.filenamePatterns)) {\r\n            for (var _e = 0, _f = lang.filenamePatterns; _e < _f.length; _e++) {\r\n                var filenamePattern = _f[_e];\r\n                mime.registerTextMime({ id: langId, mime: primaryMime, filepattern: filenamePattern }, this._warnOnOverwrite);\r\n            }\r\n        }\r\n        if (typeof lang.firstLine === 'string' && lang.firstLine.length > 0) {\r\n            var firstLineRegexStr = lang.firstLine;\r\n            if (firstLineRegexStr.charAt(0) !== '^') {\r\n                firstLineRegexStr = '^' + firstLineRegexStr;\r\n            }\r\n            try {\r\n                var firstLineRegex = new RegExp(firstLineRegexStr);\r\n                if (!strings.regExpLeadsToEndlessLoop(firstLineRegex)) {\r\n                    mime.registerTextMime({ id: langId, mime: primaryMime, firstline: firstLineRegex }, this._warnOnOverwrite);\r\n                }\r\n            }\r\n            catch (err) {\r\n                // Most likely, the regex was bad\r\n                onUnexpectedError(err);\r\n            }\r\n        }\r\n        resolvedLanguage.aliases.push(langId);\r\n        var langAliases = null;\r\n        if (typeof lang.aliases !== 'undefined' && Array.isArray(lang.aliases)) {\r\n            if (lang.aliases.length === 0) {\r\n                // signal that this language should not get a name\r\n                langAliases = [null];\r\n            }\r\n            else {\r\n                langAliases = lang.aliases;\r\n            }\r\n        }\r\n        if (langAliases !== null) {\r\n            for (var _g = 0, langAliases_1 = langAliases; _g < langAliases_1.length; _g++) {\r\n                var langAlias = langAliases_1[_g];\r\n                if (!langAlias || langAlias.length === 0) {\r\n                    continue;\r\n                }\r\n                resolvedLanguage.aliases.push(langAlias);\r\n            }\r\n        }\r\n        var containsAliases = (langAliases !== null && langAliases.length > 0);\r\n        if (containsAliases && langAliases[0] === null) {\r\n            // signal that this language should not get a name\r\n        }\r\n        else {\r\n            var bestName = (containsAliases ? langAliases[0] : null) || langId;\r\n            if (containsAliases || !resolvedLanguage.name) {\r\n                resolvedLanguage.name = bestName;\r\n            }\r\n        }\r\n        if (lang.configuration) {\r\n            resolvedLanguage.configurationFiles.push(lang.configuration);\r\n        }\r\n    };\r\n    LanguagesRegistry.prototype.isRegisteredMode = function (mimetypeOrModeId) {\r\n        // Is this a known mime type ?\r\n        if (hasOwnProperty.call(this._mimeTypesMap, mimetypeOrModeId)) {\r\n            return true;\r\n        }\r\n        // Is this a known mode id ?\r\n        return hasOwnProperty.call(this._languages, mimetypeOrModeId);\r\n    };\r\n    LanguagesRegistry.prototype.getModeIdForLanguageNameLowercase = function (languageNameLower) {\r\n        if (!hasOwnProperty.call(this._lowercaseNameMap, languageNameLower)) {\r\n            return null;\r\n        }\r\n        return this._lowercaseNameMap[languageNameLower].language;\r\n    };\r\n    LanguagesRegistry.prototype.extractModeIds = function (commaSeparatedMimetypesOrCommaSeparatedIds) {\r\n        var _this = this;\r\n        if (!commaSeparatedMimetypesOrCommaSeparatedIds) {\r\n            return [];\r\n        }\r\n        return (commaSeparatedMimetypesOrCommaSeparatedIds.\r\n            split(',').\r\n            map(function (mimeTypeOrId) { return mimeTypeOrId.trim(); }).\r\n            map(function (mimeTypeOrId) {\r\n            if (hasOwnProperty.call(_this._mimeTypesMap, mimeTypeOrId)) {\r\n                return _this._mimeTypesMap[mimeTypeOrId].language;\r\n            }\r\n            return mimeTypeOrId;\r\n        }).\r\n            filter(function (modeId) {\r\n            return hasOwnProperty.call(_this._languages, modeId);\r\n        }));\r\n    };\r\n    LanguagesRegistry.prototype.getLanguageIdentifier = function (_modeId) {\r\n        if (_modeId === NULL_MODE_ID || _modeId === 0 /* Null */) {\r\n            return NULL_LANGUAGE_IDENTIFIER;\r\n        }\r\n        var modeId;\r\n        if (typeof _modeId === 'string') {\r\n            modeId = _modeId;\r\n        }\r\n        else {\r\n            modeId = this._languageIdToLanguage[_modeId];\r\n            if (!modeId) {\r\n                return null;\r\n            }\r\n        }\r\n        if (!hasOwnProperty.call(this._languages, modeId)) {\r\n            return null;\r\n        }\r\n        return this._languages[modeId].identifier;\r\n    };\r\n    LanguagesRegistry.prototype.getModeIdsFromFilepathOrFirstLine = function (resource, firstLine) {\r\n        if (!resource && !firstLine) {\r\n            return [];\r\n        }\r\n        var mimeTypes = mime.guessMimeTypes(resource, firstLine);\r\n        return this.extractModeIds(mimeTypes.join(','));\r\n    };\r\n    return LanguagesRegistry;\r\n}(Disposable));\r\nexport { LanguagesRegistry };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { FrankensteinMode } from '../modes/abstractMode.js';\r\nimport { NULL_LANGUAGE_IDENTIFIER } from '../modes/nullMode.js';\r\nimport { LanguagesRegistry } from './languagesRegistry.js';\r\nimport { firstOrDefault } from '../../../base/common/arrays.js';\r\nvar LanguageSelection = /** @class */ (function (_super) {\r\n    __extends(LanguageSelection, _super);\r\n    function LanguageSelection(onLanguagesMaybeChanged, selector) {\r\n        var _this = _super.call(this) || this;\r\n        _this._onDidChange = _this._register(new Emitter());\r\n        _this.onDidChange = _this._onDidChange.event;\r\n        _this._selector = selector;\r\n        _this.languageIdentifier = _this._selector();\r\n        _this._register(onLanguagesMaybeChanged(function () { return _this._evaluate(); }));\r\n        return _this;\r\n    }\r\n    LanguageSelection.prototype._evaluate = function () {\r\n        var languageIdentifier = this._selector();\r\n        if (languageIdentifier.id === this.languageIdentifier.id) {\r\n            // no change\r\n            return;\r\n        }\r\n        this.languageIdentifier = languageIdentifier;\r\n        this._onDidChange.fire(this.languageIdentifier);\r\n    };\r\n    return LanguageSelection;\r\n}(Disposable));\r\nvar ModeServiceImpl = /** @class */ (function () {\r\n    function ModeServiceImpl(warnOnOverwrite) {\r\n        var _this = this;\r\n        if (warnOnOverwrite === void 0) { warnOnOverwrite = false; }\r\n        this._onDidCreateMode = new Emitter();\r\n        this.onDidCreateMode = this._onDidCreateMode.event;\r\n        this._onLanguagesMaybeChanged = new Emitter();\r\n        this.onLanguagesMaybeChanged = this._onLanguagesMaybeChanged.event;\r\n        this._instantiatedModes = {};\r\n        this._registry = new LanguagesRegistry(true, warnOnOverwrite);\r\n        this._registry.onDidChange(function () { return _this._onLanguagesMaybeChanged.fire(); });\r\n    }\r\n    ModeServiceImpl.prototype.isRegisteredMode = function (mimetypeOrModeId) {\r\n        return this._registry.isRegisteredMode(mimetypeOrModeId);\r\n    };\r\n    ModeServiceImpl.prototype.getModeIdForLanguageName = function (alias) {\r\n        return this._registry.getModeIdForLanguageNameLowercase(alias);\r\n    };\r\n    ModeServiceImpl.prototype.getModeIdByFilepathOrFirstLine = function (resource, firstLine) {\r\n        var modeIds = this._registry.getModeIdsFromFilepathOrFirstLine(resource, firstLine);\r\n        return firstOrDefault(modeIds, null);\r\n    };\r\n    ModeServiceImpl.prototype.getModeId = function (commaSeparatedMimetypesOrCommaSeparatedIds) {\r\n        var modeIds = this._registry.extractModeIds(commaSeparatedMimetypesOrCommaSeparatedIds);\r\n        return firstOrDefault(modeIds, null);\r\n    };\r\n    ModeServiceImpl.prototype.getLanguageIdentifier = function (modeId) {\r\n        return this._registry.getLanguageIdentifier(modeId);\r\n    };\r\n    // --- instantiation\r\n    ModeServiceImpl.prototype.create = function (commaSeparatedMimetypesOrCommaSeparatedIds) {\r\n        var _this = this;\r\n        return new LanguageSelection(this.onLanguagesMaybeChanged, function () {\r\n            var modeId = _this.getModeId(commaSeparatedMimetypesOrCommaSeparatedIds);\r\n            return _this._createModeAndGetLanguageIdentifier(modeId);\r\n        });\r\n    };\r\n    ModeServiceImpl.prototype.createByFilepathOrFirstLine = function (resource, firstLine) {\r\n        var _this = this;\r\n        return new LanguageSelection(this.onLanguagesMaybeChanged, function () {\r\n            var modeId = _this.getModeIdByFilepathOrFirstLine(resource, firstLine);\r\n            return _this._createModeAndGetLanguageIdentifier(modeId);\r\n        });\r\n    };\r\n    ModeServiceImpl.prototype._createModeAndGetLanguageIdentifier = function (modeId) {\r\n        // Fall back to plain text if no mode was found\r\n        var languageIdentifier = this.getLanguageIdentifier(modeId || 'plaintext') || NULL_LANGUAGE_IDENTIFIER;\r\n        this._getOrCreateMode(languageIdentifier.language);\r\n        return languageIdentifier;\r\n    };\r\n    ModeServiceImpl.prototype.triggerMode = function (commaSeparatedMimetypesOrCommaSeparatedIds) {\r\n        var modeId = this.getModeId(commaSeparatedMimetypesOrCommaSeparatedIds);\r\n        // Fall back to plain text if no mode was found\r\n        this._getOrCreateMode(modeId || 'plaintext');\r\n    };\r\n    ModeServiceImpl.prototype._getOrCreateMode = function (modeId) {\r\n        if (!this._instantiatedModes.hasOwnProperty(modeId)) {\r\n            var languageIdentifier = this.getLanguageIdentifier(modeId) || NULL_LANGUAGE_IDENTIFIER;\r\n            this._instantiatedModes[modeId] = new FrankensteinMode(languageIdentifier);\r\n            this._onDidCreateMode.fire(this._instantiatedModes[modeId]);\r\n        }\r\n        return this._instantiatedModes[modeId];\r\n    };\r\n    return ModeServiceImpl;\r\n}());\r\nexport { ModeServiceImpl };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport * as platform from '../../../base/common/platform.js';\r\nimport * as errors from '../../../base/common/errors.js';\r\nimport { EDITOR_MODEL_DEFAULTS } from '../config/editorOptions.js';\r\nimport { TextModel } from '../model/textModel.js';\r\nimport { DocumentSemanticTokensProviderRegistry, TokenMetadata } from '../modes.js';\r\nimport { PLAINTEXT_LANGUAGE_IDENTIFIER } from '../modes/modesRegistry.js';\r\nimport { ITextResourcePropertiesService } from './textResourceConfigurationService.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nimport { RunOnceScheduler } from '../../../base/common/async.js';\r\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\r\nimport { SparseEncodedTokens, MultilineTokens2 } from '../model/tokensStore.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nimport { ILogService, LogLevel } from '../../../platform/log/common/log.js';\r\nfunction MODEL_ID(resource) {\r\n    return resource.toString();\r\n}\r\nvar ModelData = /** @class */ (function () {\r\n    function ModelData(model, onWillDispose, onDidChangeLanguage) {\r\n        this._modelEventListeners = new DisposableStore();\r\n        this.model = model;\r\n        this._languageSelection = null;\r\n        this._languageSelectionListener = null;\r\n        this._modelEventListeners.add(model.onWillDispose(function () { return onWillDispose(model); }));\r\n        this._modelEventListeners.add(model.onDidChangeLanguage(function (e) { return onDidChangeLanguage(model, e); }));\r\n    }\r\n    ModelData.prototype._disposeLanguageSelection = function () {\r\n        if (this._languageSelectionListener) {\r\n            this._languageSelectionListener.dispose();\r\n            this._languageSelectionListener = null;\r\n        }\r\n        if (this._languageSelection) {\r\n            this._languageSelection.dispose();\r\n            this._languageSelection = null;\r\n        }\r\n    };\r\n    ModelData.prototype.dispose = function () {\r\n        this._modelEventListeners.dispose();\r\n        this._disposeLanguageSelection();\r\n    };\r\n    ModelData.prototype.setLanguage = function (languageSelection) {\r\n        var _this = this;\r\n        this._disposeLanguageSelection();\r\n        this._languageSelection = languageSelection;\r\n        this._languageSelectionListener = this._languageSelection.onDidChange(function () { return _this.model.setMode(languageSelection.languageIdentifier); });\r\n        this.model.setMode(languageSelection.languageIdentifier);\r\n    };\r\n    return ModelData;\r\n}());\r\nvar DEFAULT_EOL = (platform.isLinux || platform.isMacintosh) ? 1 /* LF */ : 2 /* CRLF */;\r\nvar ModelServiceImpl = /** @class */ (function (_super) {\r\n    __extends(ModelServiceImpl, _super);\r\n    function ModelServiceImpl(configurationService, resourcePropertiesService, themeService, logService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._onModelAdded = _this._register(new Emitter());\r\n        _this.onModelAdded = _this._onModelAdded.event;\r\n        _this._onModelRemoved = _this._register(new Emitter());\r\n        _this.onModelRemoved = _this._onModelRemoved.event;\r\n        _this._onModelModeChanged = _this._register(new Emitter());\r\n        _this.onModelModeChanged = _this._onModelModeChanged.event;\r\n        _this._configurationService = configurationService;\r\n        _this._resourcePropertiesService = resourcePropertiesService;\r\n        _this._models = {};\r\n        _this._modelCreationOptionsByLanguageAndResource = Object.create(null);\r\n        _this._configurationServiceSubscription = _this._configurationService.onDidChangeConfiguration(function (e) { return _this._updateModelOptions(); });\r\n        _this._updateModelOptions();\r\n        _this._register(new SemanticColoringFeature(_this, themeService, configurationService, logService));\r\n        return _this;\r\n    }\r\n    ModelServiceImpl._readModelOptions = function (config, isForSimpleWidget) {\r\n        var tabSize = EDITOR_MODEL_DEFAULTS.tabSize;\r\n        if (config.editor && typeof config.editor.tabSize !== 'undefined') {\r\n            var parsedTabSize = parseInt(config.editor.tabSize, 10);\r\n            if (!isNaN(parsedTabSize)) {\r\n                tabSize = parsedTabSize;\r\n            }\r\n            if (tabSize < 1) {\r\n                tabSize = 1;\r\n            }\r\n        }\r\n        var indentSize = tabSize;\r\n        if (config.editor && typeof config.editor.indentSize !== 'undefined' && config.editor.indentSize !== 'tabSize') {\r\n            var parsedIndentSize = parseInt(config.editor.indentSize, 10);\r\n            if (!isNaN(parsedIndentSize)) {\r\n                indentSize = parsedIndentSize;\r\n            }\r\n            if (indentSize < 1) {\r\n                indentSize = 1;\r\n            }\r\n        }\r\n        var insertSpaces = EDITOR_MODEL_DEFAULTS.insertSpaces;\r\n        if (config.editor && typeof config.editor.insertSpaces !== 'undefined') {\r\n            insertSpaces = (config.editor.insertSpaces === 'false' ? false : Boolean(config.editor.insertSpaces));\r\n        }\r\n        var newDefaultEOL = DEFAULT_EOL;\r\n        var eol = config.eol;\r\n        if (eol === '\\r\\n') {\r\n            newDefaultEOL = 2 /* CRLF */;\r\n        }\r\n        else if (eol === '\\n') {\r\n            newDefaultEOL = 1 /* LF */;\r\n        }\r\n        var trimAutoWhitespace = EDITOR_MODEL_DEFAULTS.trimAutoWhitespace;\r\n        if (config.editor && typeof config.editor.trimAutoWhitespace !== 'undefined') {\r\n            trimAutoWhitespace = (config.editor.trimAutoWhitespace === 'false' ? false : Boolean(config.editor.trimAutoWhitespace));\r\n        }\r\n        var detectIndentation = EDITOR_MODEL_DEFAULTS.detectIndentation;\r\n        if (config.editor && typeof config.editor.detectIndentation !== 'undefined') {\r\n            detectIndentation = (config.editor.detectIndentation === 'false' ? false : Boolean(config.editor.detectIndentation));\r\n        }\r\n        var largeFileOptimizations = EDITOR_MODEL_DEFAULTS.largeFileOptimizations;\r\n        if (config.editor && typeof config.editor.largeFileOptimizations !== 'undefined') {\r\n            largeFileOptimizations = (config.editor.largeFileOptimizations === 'false' ? false : Boolean(config.editor.largeFileOptimizations));\r\n        }\r\n        return {\r\n            isForSimpleWidget: isForSimpleWidget,\r\n            tabSize: tabSize,\r\n            indentSize: indentSize,\r\n            insertSpaces: insertSpaces,\r\n            detectIndentation: detectIndentation,\r\n            defaultEOL: newDefaultEOL,\r\n            trimAutoWhitespace: trimAutoWhitespace,\r\n            largeFileOptimizations: largeFileOptimizations\r\n        };\r\n    };\r\n    ModelServiceImpl.prototype.getCreationOptions = function (language, resource, isForSimpleWidget) {\r\n        var creationOptions = this._modelCreationOptionsByLanguageAndResource[language + resource];\r\n        if (!creationOptions) {\r\n            var editor = this._configurationService.getValue('editor', { overrideIdentifier: language, resource: resource });\r\n            var eol = this._resourcePropertiesService.getEOL(resource, language);\r\n            creationOptions = ModelServiceImpl._readModelOptions({ editor: editor, eol: eol }, isForSimpleWidget);\r\n            this._modelCreationOptionsByLanguageAndResource[language + resource] = creationOptions;\r\n        }\r\n        return creationOptions;\r\n    };\r\n    ModelServiceImpl.prototype._updateModelOptions = function () {\r\n        var oldOptionsByLanguageAndResource = this._modelCreationOptionsByLanguageAndResource;\r\n        this._modelCreationOptionsByLanguageAndResource = Object.create(null);\r\n        // Update options on all models\r\n        var keys = Object.keys(this._models);\r\n        for (var i = 0, len = keys.length; i < len; i++) {\r\n            var modelId = keys[i];\r\n            var modelData = this._models[modelId];\r\n            var language = modelData.model.getLanguageIdentifier().language;\r\n            var uri = modelData.model.uri;\r\n            var oldOptions = oldOptionsByLanguageAndResource[language + uri];\r\n            var newOptions = this.getCreationOptions(language, uri, modelData.model.isForSimpleWidget);\r\n            ModelServiceImpl._setModelOptionsForModel(modelData.model, newOptions, oldOptions);\r\n        }\r\n    };\r\n    ModelServiceImpl._setModelOptionsForModel = function (model, newOptions, currentOptions) {\r\n        if (currentOptions && currentOptions.defaultEOL !== newOptions.defaultEOL && model.getLineCount() === 1) {\r\n            model.setEOL(newOptions.defaultEOL === 1 /* LF */ ? 0 /* LF */ : 1 /* CRLF */);\r\n        }\r\n        if (currentOptions\r\n            && (currentOptions.detectIndentation === newOptions.detectIndentation)\r\n            && (currentOptions.insertSpaces === newOptions.insertSpaces)\r\n            && (currentOptions.tabSize === newOptions.tabSize)\r\n            && (currentOptions.indentSize === newOptions.indentSize)\r\n            && (currentOptions.trimAutoWhitespace === newOptions.trimAutoWhitespace)) {\r\n            // Same indent opts, no need to touch the model\r\n            return;\r\n        }\r\n        if (newOptions.detectIndentation) {\r\n            model.detectIndentation(newOptions.insertSpaces, newOptions.tabSize);\r\n            model.updateOptions({\r\n                trimAutoWhitespace: newOptions.trimAutoWhitespace\r\n            });\r\n        }\r\n        else {\r\n            model.updateOptions({\r\n                insertSpaces: newOptions.insertSpaces,\r\n                tabSize: newOptions.tabSize,\r\n                indentSize: newOptions.indentSize,\r\n                trimAutoWhitespace: newOptions.trimAutoWhitespace\r\n            });\r\n        }\r\n    };\r\n    ModelServiceImpl.prototype.dispose = function () {\r\n        this._configurationServiceSubscription.dispose();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    // --- begin IModelService\r\n    ModelServiceImpl.prototype._createModelData = function (value, languageIdentifier, resource, isForSimpleWidget) {\r\n        var _this = this;\r\n        // create & save the model\r\n        var options = this.getCreationOptions(languageIdentifier.language, resource, isForSimpleWidget);\r\n        var model = new TextModel(value, options, languageIdentifier, resource);\r\n        var modelId = MODEL_ID(model.uri);\r\n        if (this._models[modelId]) {\r\n            // There already exists a model with this id => this is a programmer error\r\n            throw new Error('ModelService: Cannot add model because it already exists!');\r\n        }\r\n        var modelData = new ModelData(model, function (model) { return _this._onWillDispose(model); }, function (model, e) { return _this._onDidChangeLanguage(model, e); });\r\n        this._models[modelId] = modelData;\r\n        return modelData;\r\n    };\r\n    ModelServiceImpl.prototype.createModel = function (value, languageSelection, resource, isForSimpleWidget) {\r\n        if (isForSimpleWidget === void 0) { isForSimpleWidget = false; }\r\n        var modelData;\r\n        if (languageSelection) {\r\n            modelData = this._createModelData(value, languageSelection.languageIdentifier, resource, isForSimpleWidget);\r\n            this.setMode(modelData.model, languageSelection);\r\n        }\r\n        else {\r\n            modelData = this._createModelData(value, PLAINTEXT_LANGUAGE_IDENTIFIER, resource, isForSimpleWidget);\r\n        }\r\n        this._onModelAdded.fire(modelData.model);\r\n        return modelData.model;\r\n    };\r\n    ModelServiceImpl.prototype.setMode = function (model, languageSelection) {\r\n        if (!languageSelection) {\r\n            return;\r\n        }\r\n        var modelData = this._models[MODEL_ID(model.uri)];\r\n        if (!modelData) {\r\n            return;\r\n        }\r\n        modelData.setLanguage(languageSelection);\r\n    };\r\n    ModelServiceImpl.prototype.getModels = function () {\r\n        var ret = [];\r\n        var keys = Object.keys(this._models);\r\n        for (var i = 0, len = keys.length; i < len; i++) {\r\n            var modelId = keys[i];\r\n            ret.push(this._models[modelId].model);\r\n        }\r\n        return ret;\r\n    };\r\n    ModelServiceImpl.prototype.getModel = function (resource) {\r\n        var modelId = MODEL_ID(resource);\r\n        var modelData = this._models[modelId];\r\n        if (!modelData) {\r\n            return null;\r\n        }\r\n        return modelData.model;\r\n    };\r\n    // --- end IModelService\r\n    ModelServiceImpl.prototype._onWillDispose = function (model) {\r\n        var modelId = MODEL_ID(model.uri);\r\n        var modelData = this._models[modelId];\r\n        delete this._models[modelId];\r\n        modelData.dispose();\r\n        // clean up cache\r\n        delete this._modelCreationOptionsByLanguageAndResource[model.getLanguageIdentifier().language + model.uri];\r\n        this._onModelRemoved.fire(model);\r\n    };\r\n    ModelServiceImpl.prototype._onDidChangeLanguage = function (model, e) {\r\n        var oldModeId = e.oldLanguage;\r\n        var newModeId = model.getLanguageIdentifier().language;\r\n        var oldOptions = this.getCreationOptions(oldModeId, model.uri, model.isForSimpleWidget);\r\n        var newOptions = this.getCreationOptions(newModeId, model.uri, model.isForSimpleWidget);\r\n        ModelServiceImpl._setModelOptionsForModel(model, newOptions, oldOptions);\r\n        this._onModelModeChanged.fire({ model: model, oldModeId: oldModeId });\r\n    };\r\n    ModelServiceImpl = __decorate([\r\n        __param(0, IConfigurationService),\r\n        __param(1, ITextResourcePropertiesService),\r\n        __param(2, IThemeService),\r\n        __param(3, ILogService)\r\n    ], ModelServiceImpl);\r\n    return ModelServiceImpl;\r\n}(Disposable));\r\nexport { ModelServiceImpl };\r\nvar SemanticColoringFeature = /** @class */ (function (_super) {\r\n    __extends(SemanticColoringFeature, _super);\r\n    function SemanticColoringFeature(modelService, themeService, configurationService, logService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._configurationService = configurationService;\r\n        _this._watchers = Object.create(null);\r\n        _this._semanticStyling = _this._register(new SemanticStyling(themeService, logService));\r\n        var isSemanticColoringEnabled = function (model) {\r\n            var options = configurationService.getValue(SemanticColoringFeature.SETTING_ID, { overrideIdentifier: model.getLanguageIdentifier().language, resource: model.uri });\r\n            return options && options.enabled;\r\n        };\r\n        var register = function (model) {\r\n            _this._watchers[model.uri.toString()] = new ModelSemanticColoring(model, themeService, _this._semanticStyling);\r\n        };\r\n        var deregister = function (model, modelSemanticColoring) {\r\n            modelSemanticColoring.dispose();\r\n            delete _this._watchers[model.uri.toString()];\r\n        };\r\n        _this._register(modelService.onModelAdded(function (model) {\r\n            if (isSemanticColoringEnabled(model)) {\r\n                register(model);\r\n            }\r\n        }));\r\n        _this._register(modelService.onModelRemoved(function (model) {\r\n            var curr = _this._watchers[model.uri.toString()];\r\n            if (curr) {\r\n                deregister(model, curr);\r\n            }\r\n        }));\r\n        _this._configurationService.onDidChangeConfiguration(function (e) {\r\n            if (e.affectsConfiguration(SemanticColoringFeature.SETTING_ID)) {\r\n                for (var _i = 0, _a = modelService.getModels(); _i < _a.length; _i++) {\r\n                    var model = _a[_i];\r\n                    var curr = _this._watchers[model.uri.toString()];\r\n                    if (isSemanticColoringEnabled(model)) {\r\n                        if (!curr) {\r\n                            register(model);\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (curr) {\r\n                            deregister(model, curr);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n    SemanticColoringFeature.SETTING_ID = 'editor.semanticHighlighting';\r\n    return SemanticColoringFeature;\r\n}(Disposable));\r\nvar SemanticStyling = /** @class */ (function (_super) {\r\n    __extends(SemanticStyling, _super);\r\n    function SemanticStyling(_themeService, _logService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._themeService = _themeService;\r\n        _this._logService = _logService;\r\n        _this._caches = new WeakMap();\r\n        if (_this._themeService) {\r\n            // workaround for tests which use undefined... :/\r\n            _this._register(_this._themeService.onThemeChange(function () {\r\n                _this._caches = new WeakMap();\r\n            }));\r\n        }\r\n        return _this;\r\n    }\r\n    SemanticStyling.prototype.get = function (provider) {\r\n        if (!this._caches.has(provider)) {\r\n            this._caches.set(provider, new SemanticColoringProviderStyling(provider.getLegend(), this._themeService, this._logService));\r\n        }\r\n        return this._caches.get(provider);\r\n    };\r\n    return SemanticStyling;\r\n}(Disposable));\r\nvar HashTableEntry = /** @class */ (function () {\r\n    function HashTableEntry(tokenTypeIndex, tokenModifierSet, metadata) {\r\n        this.tokenTypeIndex = tokenTypeIndex;\r\n        this.tokenModifierSet = tokenModifierSet;\r\n        this.metadata = metadata;\r\n        this.next = null;\r\n    }\r\n    return HashTableEntry;\r\n}());\r\nvar HashTable = /** @class */ (function () {\r\n    function HashTable() {\r\n        this._elementsCount = 0;\r\n        this._currentLengthIndex = 0;\r\n        this._currentLength = HashTable._SIZES[this._currentLengthIndex];\r\n        this._growCount = Math.round(this._currentLengthIndex + 1 < HashTable._SIZES.length ? 2 / 3 * this._currentLength : 0);\r\n        this._elements = [];\r\n        HashTable._nullOutEntries(this._elements, this._currentLength);\r\n    }\r\n    HashTable._nullOutEntries = function (entries, length) {\r\n        for (var i = 0; i < length; i++) {\r\n            entries[i] = null;\r\n        }\r\n    };\r\n    HashTable.prototype._hashFunc = function (tokenTypeIndex, tokenModifierSet) {\r\n        return ((((tokenTypeIndex << 5) - tokenTypeIndex) + tokenModifierSet) | 0) % this._currentLength; // tokenTypeIndex * 31 + tokenModifierSet, keep as int32\r\n    };\r\n    HashTable.prototype.get = function (tokenTypeIndex, tokenModifierSet) {\r\n        var hash = this._hashFunc(tokenTypeIndex, tokenModifierSet);\r\n        var p = this._elements[hash];\r\n        while (p) {\r\n            if (p.tokenTypeIndex === tokenTypeIndex && p.tokenModifierSet === tokenModifierSet) {\r\n                return p;\r\n            }\r\n            p = p.next;\r\n        }\r\n        return null;\r\n    };\r\n    HashTable.prototype.add = function (tokenTypeIndex, tokenModifierSet, metadata) {\r\n        this._elementsCount++;\r\n        if (this._growCount !== 0 && this._elementsCount >= this._growCount) {\r\n            // expand!\r\n            var oldElements = this._elements;\r\n            this._currentLengthIndex++;\r\n            this._currentLength = HashTable._SIZES[this._currentLengthIndex];\r\n            this._growCount = Math.round(this._currentLengthIndex + 1 < HashTable._SIZES.length ? 2 / 3 * this._currentLength : 0);\r\n            this._elements = [];\r\n            HashTable._nullOutEntries(this._elements, this._currentLength);\r\n            for (var _i = 0, oldElements_1 = oldElements; _i < oldElements_1.length; _i++) {\r\n                var first = oldElements_1[_i];\r\n                var p = first;\r\n                while (p) {\r\n                    var oldNext = p.next;\r\n                    p.next = null;\r\n                    this._add(p);\r\n                    p = oldNext;\r\n                }\r\n            }\r\n        }\r\n        this._add(new HashTableEntry(tokenTypeIndex, tokenModifierSet, metadata));\r\n    };\r\n    HashTable.prototype._add = function (element) {\r\n        var hash = this._hashFunc(element.tokenTypeIndex, element.tokenModifierSet);\r\n        element.next = this._elements[hash];\r\n        this._elements[hash] = element;\r\n    };\r\n    HashTable._SIZES = [3, 7, 13, 31, 61, 127, 251, 509, 1021, 2039, 4093, 8191, 16381, 32749, 65521, 131071, 262139, 524287, 1048573, 2097143];\r\n    return HashTable;\r\n}());\r\nvar SemanticColoringProviderStyling = /** @class */ (function () {\r\n    function SemanticColoringProviderStyling(_legend, _themeService, _logService) {\r\n        this._legend = _legend;\r\n        this._themeService = _themeService;\r\n        this._logService = _logService;\r\n        this._hashTable = new HashTable();\r\n    }\r\n    SemanticColoringProviderStyling.prototype.getMetadata = function (tokenTypeIndex, tokenModifierSet) {\r\n        var entry = this._hashTable.get(tokenTypeIndex, tokenModifierSet);\r\n        var metadata;\r\n        if (entry) {\r\n            metadata = entry.metadata;\r\n        }\r\n        else {\r\n            var tokenType = this._legend.tokenTypes[tokenTypeIndex];\r\n            var tokenModifiers = [];\r\n            var modifierSet = tokenModifierSet;\r\n            for (var modifierIndex = 0; modifierSet > 0 && modifierIndex < this._legend.tokenModifiers.length; modifierIndex++) {\r\n                if (modifierSet & 1) {\r\n                    tokenModifiers.push(this._legend.tokenModifiers[modifierIndex]);\r\n                }\r\n                modifierSet = modifierSet >> 1;\r\n            }\r\n            var tokenStyle = this._themeService.getTheme().getTokenStyleMetadata(tokenType, tokenModifiers);\r\n            if (typeof tokenStyle === 'undefined') {\r\n                metadata = 2147483647 /* NO_STYLING */;\r\n            }\r\n            else {\r\n                metadata = 0;\r\n                if (typeof tokenStyle.italic !== 'undefined') {\r\n                    var italicBit = (tokenStyle.italic ? 1 /* Italic */ : 0) << 11 /* FONT_STYLE_OFFSET */;\r\n                    metadata |= italicBit | 1 /* SEMANTIC_USE_ITALIC */;\r\n                }\r\n                if (typeof tokenStyle.bold !== 'undefined') {\r\n                    var boldBit = (tokenStyle.bold ? 2 /* Bold */ : 0) << 11 /* FONT_STYLE_OFFSET */;\r\n                    metadata |= boldBit | 2 /* SEMANTIC_USE_BOLD */;\r\n                }\r\n                if (typeof tokenStyle.underline !== 'undefined') {\r\n                    var underlineBit = (tokenStyle.underline ? 4 /* Underline */ : 0) << 11 /* FONT_STYLE_OFFSET */;\r\n                    metadata |= underlineBit | 4 /* SEMANTIC_USE_UNDERLINE */;\r\n                }\r\n                if (tokenStyle.foreground) {\r\n                    var foregroundBits = (tokenStyle.foreground) << 14 /* FOREGROUND_OFFSET */;\r\n                    metadata |= foregroundBits | 8 /* SEMANTIC_USE_FOREGROUND */;\r\n                }\r\n                if (metadata === 0) {\r\n                    // Nothing!\r\n                    metadata = 2147483647 /* NO_STYLING */;\r\n                }\r\n            }\r\n            this._hashTable.add(tokenTypeIndex, tokenModifierSet, metadata);\r\n        }\r\n        if (this._logService.getLevel() === LogLevel.Trace) {\r\n            var type = this._legend.tokenTypes[tokenTypeIndex];\r\n            var modifiers = tokenModifierSet ? ' ' + this._legend.tokenModifiers.filter(function (_, i) { return tokenModifierSet & (1 << i); }).join(' ') : '';\r\n            this._logService.trace(\"tokenStyleMetadata \" + (entry ? '[CACHED] ' : '') + type + modifiers + \": foreground \" + TokenMetadata.getForeground(metadata) + \", fontStyle \" + TokenMetadata.getFontStyle(metadata).toString(2));\r\n        }\r\n        return metadata;\r\n    };\r\n    return SemanticColoringProviderStyling;\r\n}());\r\nvar SemanticTokensResponse = /** @class */ (function () {\r\n    function SemanticTokensResponse(_provider, resultId, data) {\r\n        this._provider = _provider;\r\n        this.resultId = resultId;\r\n        this.data = data;\r\n    }\r\n    SemanticTokensResponse.prototype.dispose = function () {\r\n        this._provider.releaseDocumentSemanticTokens(this.resultId);\r\n    };\r\n    return SemanticTokensResponse;\r\n}());\r\nvar ModelSemanticColoring = /** @class */ (function (_super) {\r\n    __extends(ModelSemanticColoring, _super);\r\n    function ModelSemanticColoring(model, themeService, stylingProvider) {\r\n        var _this = _super.call(this) || this;\r\n        _this._isDisposed = false;\r\n        _this._model = model;\r\n        _this._semanticStyling = stylingProvider;\r\n        _this._fetchSemanticTokens = _this._register(new RunOnceScheduler(function () { return _this._fetchSemanticTokensNow(); }, 300));\r\n        _this._currentResponse = null;\r\n        _this._currentRequestCancellationTokenSource = null;\r\n        _this._register(_this._model.onDidChangeContent(function (e) {\r\n            if (!_this._fetchSemanticTokens.isScheduled()) {\r\n                _this._fetchSemanticTokens.schedule();\r\n            }\r\n        }));\r\n        _this._register(DocumentSemanticTokensProviderRegistry.onDidChange(function (e) { return _this._fetchSemanticTokens.schedule(); }));\r\n        if (themeService) {\r\n            // workaround for tests which use undefined... :/\r\n            _this._register(themeService.onThemeChange(function (_) {\r\n                // clear out existing tokens\r\n                _this._setSemanticTokens(null, null, null, []);\r\n                _this._fetchSemanticTokens.schedule();\r\n            }));\r\n        }\r\n        _this._fetchSemanticTokens.schedule(0);\r\n        return _this;\r\n    }\r\n    ModelSemanticColoring.prototype.dispose = function () {\r\n        if (this._currentResponse) {\r\n            this._currentResponse.dispose();\r\n            this._currentResponse = null;\r\n        }\r\n        if (this._currentRequestCancellationTokenSource) {\r\n            this._currentRequestCancellationTokenSource.cancel();\r\n            this._currentRequestCancellationTokenSource = null;\r\n        }\r\n        this._setSemanticTokens(null, null, null, []);\r\n        this._isDisposed = true;\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ModelSemanticColoring.prototype._fetchSemanticTokensNow = function () {\r\n        var _this = this;\r\n        if (this._currentRequestCancellationTokenSource) {\r\n            // there is already a request running, let it finish...\r\n            return;\r\n        }\r\n        var provider = this._getSemanticColoringProvider();\r\n        if (!provider) {\r\n            return;\r\n        }\r\n        this._currentRequestCancellationTokenSource = new CancellationTokenSource();\r\n        var pendingChanges = [];\r\n        var contentChangeListener = this._model.onDidChangeContent(function (e) {\r\n            pendingChanges.push(e);\r\n        });\r\n        var styling = this._semanticStyling.get(provider);\r\n        var lastResultId = this._currentResponse ? this._currentResponse.resultId || null : null;\r\n        var request = Promise.resolve(provider.provideDocumentSemanticTokens(this._model, lastResultId, this._currentRequestCancellationTokenSource.token));\r\n        request.then(function (res) {\r\n            _this._currentRequestCancellationTokenSource = null;\r\n            contentChangeListener.dispose();\r\n            _this._setSemanticTokens(provider, res || null, styling, pendingChanges);\r\n        }, function (err) {\r\n            if (!err || typeof err.message !== 'string' || err.message.indexOf('busy') === -1) {\r\n                errors.onUnexpectedError(err);\r\n            }\r\n            // Semantic tokens eats up all errors and considers errors to mean that the result is temporarily not available\r\n            // The API does not have a special error kind to express this...\r\n            _this._currentRequestCancellationTokenSource = null;\r\n            contentChangeListener.dispose();\r\n            if (pendingChanges.length > 0) {\r\n                // More changes occurred while the request was running\r\n                if (!_this._fetchSemanticTokens.isScheduled()) {\r\n                    _this._fetchSemanticTokens.schedule();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    ModelSemanticColoring._isSemanticTokens = function (v) {\r\n        return v && !!(v.data);\r\n    };\r\n    ModelSemanticColoring._isSemanticTokensEdits = function (v) {\r\n        return v && Array.isArray(v.edits);\r\n    };\r\n    ModelSemanticColoring._copy = function (src, srcOffset, dest, destOffset, length) {\r\n        for (var i = 0; i < length; i++) {\r\n            dest[destOffset + i] = src[srcOffset + i];\r\n        }\r\n    };\r\n    ModelSemanticColoring.prototype._setSemanticTokens = function (provider, tokens, styling, pendingChanges) {\r\n        var currentResponse = this._currentResponse;\r\n        if (this._currentResponse) {\r\n            this._currentResponse.dispose();\r\n            this._currentResponse = null;\r\n        }\r\n        if (this._isDisposed) {\r\n            // disposed!\r\n            if (provider && tokens) {\r\n                provider.releaseDocumentSemanticTokens(tokens.resultId);\r\n            }\r\n            return;\r\n        }\r\n        if (!provider || !tokens || !styling) {\r\n            this._model.setSemanticTokens(null);\r\n            return;\r\n        }\r\n        if (ModelSemanticColoring._isSemanticTokensEdits(tokens)) {\r\n            if (!currentResponse) {\r\n                // not possible!\r\n                this._model.setSemanticTokens(null);\r\n                return;\r\n            }\r\n            if (tokens.edits.length === 0) {\r\n                // nothing to do!\r\n                tokens = {\r\n                    resultId: tokens.resultId,\r\n                    data: currentResponse.data\r\n                };\r\n            }\r\n            else {\r\n                var deltaLength = 0;\r\n                for (var _i = 0, _a = tokens.edits; _i < _a.length; _i++) {\r\n                    var edit = _a[_i];\r\n                    deltaLength += (edit.data ? edit.data.length : 0) - edit.deleteCount;\r\n                }\r\n                var srcData = currentResponse.data;\r\n                var destData = new Uint32Array(srcData.length + deltaLength);\r\n                var srcLastStart = srcData.length;\r\n                var destLastStart = destData.length;\r\n                for (var i = tokens.edits.length - 1; i >= 0; i--) {\r\n                    var edit = tokens.edits[i];\r\n                    var copyCount = srcLastStart - (edit.start + edit.deleteCount);\r\n                    if (copyCount > 0) {\r\n                        ModelSemanticColoring._copy(srcData, srcLastStart - copyCount, destData, destLastStart - copyCount, copyCount);\r\n                        destLastStart -= copyCount;\r\n                    }\r\n                    if (edit.data) {\r\n                        ModelSemanticColoring._copy(edit.data, 0, destData, destLastStart - edit.data.length, edit.data.length);\r\n                        destLastStart -= edit.data.length;\r\n                    }\r\n                    srcLastStart = edit.start;\r\n                }\r\n                if (srcLastStart > 0) {\r\n                    ModelSemanticColoring._copy(srcData, 0, destData, 0, srcLastStart);\r\n                }\r\n                tokens = {\r\n                    resultId: tokens.resultId,\r\n                    data: destData\r\n                };\r\n            }\r\n        }\r\n        if (ModelSemanticColoring._isSemanticTokens(tokens)) {\r\n            this._currentResponse = new SemanticTokensResponse(provider, tokens.resultId, tokens.data);\r\n            var srcData = tokens.data;\r\n            var tokenCount = (tokens.data.length / 5) | 0;\r\n            var tokensPerArea = Math.max(Math.ceil(tokenCount / 1024 /* DesiredMaxAreas */), 400 /* DesiredTokensPerArea */);\r\n            var result = [];\r\n            var tokenIndex = 0;\r\n            var lastLineNumber = 1;\r\n            var lastStartCharacter = 0;\r\n            while (tokenIndex < tokenCount) {\r\n                var tokenStartIndex = tokenIndex;\r\n                var tokenEndIndex = Math.min(tokenStartIndex + tokensPerArea, tokenCount);\r\n                // Keep tokens on the same line in the same area...\r\n                if (tokenEndIndex < tokenCount) {\r\n                    var smallTokenEndIndex = tokenEndIndex;\r\n                    while (smallTokenEndIndex - 1 > tokenStartIndex && srcData[5 * smallTokenEndIndex] === 0) {\r\n                        smallTokenEndIndex--;\r\n                    }\r\n                    if (smallTokenEndIndex - 1 === tokenStartIndex) {\r\n                        // there are so many tokens on this line that our area would be empty, we must now go right\r\n                        var bigTokenEndIndex = tokenEndIndex;\r\n                        while (bigTokenEndIndex + 1 < tokenCount && srcData[5 * bigTokenEndIndex] === 0) {\r\n                            bigTokenEndIndex++;\r\n                        }\r\n                        tokenEndIndex = bigTokenEndIndex;\r\n                    }\r\n                    else {\r\n                        tokenEndIndex = smallTokenEndIndex;\r\n                    }\r\n                }\r\n                var destData = new Uint32Array((tokenEndIndex - tokenStartIndex) * 4);\r\n                var destOffset = 0;\r\n                var areaLine = 0;\r\n                while (tokenIndex < tokenEndIndex) {\r\n                    var srcOffset = 5 * tokenIndex;\r\n                    var deltaLine = srcData[srcOffset];\r\n                    var deltaCharacter = srcData[srcOffset + 1];\r\n                    var lineNumber = lastLineNumber + deltaLine;\r\n                    var startCharacter = (deltaLine === 0 ? lastStartCharacter + deltaCharacter : deltaCharacter);\r\n                    var length_1 = srcData[srcOffset + 2];\r\n                    var tokenTypeIndex = srcData[srcOffset + 3];\r\n                    var tokenModifierSet = srcData[srcOffset + 4];\r\n                    var metadata = styling.getMetadata(tokenTypeIndex, tokenModifierSet);\r\n                    if (metadata !== 2147483647 /* NO_STYLING */) {\r\n                        if (areaLine === 0) {\r\n                            areaLine = lineNumber;\r\n                        }\r\n                        destData[destOffset] = lineNumber - areaLine;\r\n                        destData[destOffset + 1] = startCharacter;\r\n                        destData[destOffset + 2] = startCharacter + length_1;\r\n                        destData[destOffset + 3] = metadata;\r\n                        destOffset += 4;\r\n                    }\r\n                    lastLineNumber = lineNumber;\r\n                    lastStartCharacter = startCharacter;\r\n                    tokenIndex++;\r\n                }\r\n                if (destOffset !== destData.length) {\r\n                    destData = destData.subarray(0, destOffset);\r\n                }\r\n                var tokens_1 = new MultilineTokens2(areaLine, new SparseEncodedTokens(destData));\r\n                result.push(tokens_1);\r\n            }\r\n            // Adjust incoming semantic tokens\r\n            if (pendingChanges.length > 0) {\r\n                // More changes occurred while the request was running\r\n                // We need to:\r\n                // 1. Adjust incoming semantic tokens\r\n                // 2. Request them again\r\n                for (var _b = 0, pendingChanges_1 = pendingChanges; _b < pendingChanges_1.length; _b++) {\r\n                    var change = pendingChanges_1[_b];\r\n                    for (var _c = 0, result_1 = result; _c < result_1.length; _c++) {\r\n                        var area = result_1[_c];\r\n                        for (var _d = 0, _e = change.changes; _d < _e.length; _d++) {\r\n                            var singleChange = _e[_d];\r\n                            area.applyEdit(singleChange.range, singleChange.text);\r\n                        }\r\n                    }\r\n                }\r\n                if (!this._fetchSemanticTokens.isScheduled()) {\r\n                    this._fetchSemanticTokens.schedule();\r\n                }\r\n            }\r\n            this._model.setSemanticTokens(result);\r\n            return;\r\n        }\r\n        this._model.setSemanticTokens(null);\r\n    };\r\n    ModelSemanticColoring.prototype._getSemanticColoringProvider = function () {\r\n        var result = DocumentSemanticTokensProviderRegistry.ordered(this._model);\r\n        return (result.length > 0 ? result[0] : null);\r\n    };\r\n    return ModelSemanticColoring;\r\n}(Disposable));\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nvar AbstractCodeEditorService = /** @class */ (function (_super) {\r\n    __extends(AbstractCodeEditorService, _super);\r\n    function AbstractCodeEditorService() {\r\n        var _this = _super.call(this) || this;\r\n        _this._onCodeEditorAdd = _this._register(new Emitter());\r\n        _this.onCodeEditorAdd = _this._onCodeEditorAdd.event;\r\n        _this._onCodeEditorRemove = _this._register(new Emitter());\r\n        _this.onCodeEditorRemove = _this._onCodeEditorRemove.event;\r\n        _this._onDiffEditorAdd = _this._register(new Emitter());\r\n        _this._onDiffEditorRemove = _this._register(new Emitter());\r\n        _this._codeEditors = Object.create(null);\r\n        _this._diffEditors = Object.create(null);\r\n        return _this;\r\n    }\r\n    AbstractCodeEditorService.prototype.addCodeEditor = function (editor) {\r\n        this._codeEditors[editor.getId()] = editor;\r\n        this._onCodeEditorAdd.fire(editor);\r\n    };\r\n    AbstractCodeEditorService.prototype.removeCodeEditor = function (editor) {\r\n        if (delete this._codeEditors[editor.getId()]) {\r\n            this._onCodeEditorRemove.fire(editor);\r\n        }\r\n    };\r\n    AbstractCodeEditorService.prototype.listCodeEditors = function () {\r\n        var _this = this;\r\n        return Object.keys(this._codeEditors).map(function (id) { return _this._codeEditors[id]; });\r\n    };\r\n    AbstractCodeEditorService.prototype.addDiffEditor = function (editor) {\r\n        this._diffEditors[editor.getId()] = editor;\r\n        this._onDiffEditorAdd.fire(editor);\r\n    };\r\n    AbstractCodeEditorService.prototype.removeDiffEditor = function (editor) {\r\n        if (delete this._diffEditors[editor.getId()]) {\r\n            this._onDiffEditorRemove.fire(editor);\r\n        }\r\n    };\r\n    AbstractCodeEditorService.prototype.listDiffEditors = function () {\r\n        var _this = this;\r\n        return Object.keys(this._diffEditors).map(function (id) { return _this._diffEditors[id]; });\r\n    };\r\n    AbstractCodeEditorService.prototype.getFocusedCodeEditor = function () {\r\n        var editorWithWidgetFocus = null;\r\n        var editors = this.listCodeEditors();\r\n        for (var _i = 0, editors_1 = editors; _i < editors_1.length; _i++) {\r\n            var editor = editors_1[_i];\r\n            if (editor.hasTextFocus()) {\r\n                // bingo!\r\n                return editor;\r\n            }\r\n            if (editor.hasWidgetFocus()) {\r\n                editorWithWidgetFocus = editor;\r\n            }\r\n        }\r\n        return editorWithWidgetFocus;\r\n    };\r\n    return AbstractCodeEditorService;\r\n}(Disposable));\r\nexport { AbstractCodeEditorService };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { AbstractCodeEditorService } from './abstractCodeEditorService.js';\r\nimport { isThemeColor } from '../../common/editorCommon.js';\r\nimport { OverviewRulerLane } from '../../common/model.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nvar RefCountedStyleSheet = /** @class */ (function () {\r\n    function RefCountedStyleSheet(parent, editorId, styleSheet) {\r\n        this._parent = parent;\r\n        this._editorId = editorId;\r\n        this.styleSheet = styleSheet;\r\n        this._refCount = 0;\r\n    }\r\n    RefCountedStyleSheet.prototype.ref = function () {\r\n        this._refCount++;\r\n    };\r\n    RefCountedStyleSheet.prototype.unref = function () {\r\n        var _a;\r\n        this._refCount--;\r\n        if (this._refCount === 0) {\r\n            (_a = this.styleSheet.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(this.styleSheet);\r\n            this._parent._removeEditorStyleSheets(this._editorId);\r\n        }\r\n    };\r\n    return RefCountedStyleSheet;\r\n}());\r\nvar GlobalStyleSheet = /** @class */ (function () {\r\n    function GlobalStyleSheet(styleSheet) {\r\n        this.styleSheet = styleSheet;\r\n    }\r\n    GlobalStyleSheet.prototype.ref = function () {\r\n    };\r\n    GlobalStyleSheet.prototype.unref = function () {\r\n    };\r\n    return GlobalStyleSheet;\r\n}());\r\nvar CodeEditorServiceImpl = /** @class */ (function (_super) {\r\n    __extends(CodeEditorServiceImpl, _super);\r\n    function CodeEditorServiceImpl(themeService, styleSheet) {\r\n        if (styleSheet === void 0) { styleSheet = null; }\r\n        var _this = _super.call(this) || this;\r\n        _this._decorationOptionProviders = new Map();\r\n        _this._editorStyleSheets = new Map();\r\n        _this._globalStyleSheet = styleSheet ? new GlobalStyleSheet(styleSheet) : null;\r\n        _this._themeService = themeService;\r\n        return _this;\r\n    }\r\n    CodeEditorServiceImpl.prototype._getOrCreateGlobalStyleSheet = function () {\r\n        if (!this._globalStyleSheet) {\r\n            this._globalStyleSheet = new GlobalStyleSheet(dom.createStyleSheet());\r\n        }\r\n        return this._globalStyleSheet;\r\n    };\r\n    CodeEditorServiceImpl.prototype._getOrCreateStyleSheet = function (editor) {\r\n        if (!editor) {\r\n            return this._getOrCreateGlobalStyleSheet();\r\n        }\r\n        var domNode = editor.getContainerDomNode();\r\n        if (!dom.isInShadowDOM(domNode)) {\r\n            return this._getOrCreateGlobalStyleSheet();\r\n        }\r\n        var editorId = editor.getId();\r\n        if (!this._editorStyleSheets.has(editorId)) {\r\n            var refCountedStyleSheet = new RefCountedStyleSheet(this, editorId, dom.createStyleSheet(domNode));\r\n            this._editorStyleSheets.set(editorId, refCountedStyleSheet);\r\n        }\r\n        return this._editorStyleSheets.get(editorId);\r\n    };\r\n    CodeEditorServiceImpl.prototype._removeEditorStyleSheets = function (editorId) {\r\n        this._editorStyleSheets.delete(editorId);\r\n    };\r\n    CodeEditorServiceImpl.prototype.registerDecorationType = function (key, options, parentTypeKey, editor) {\r\n        var provider = this._decorationOptionProviders.get(key);\r\n        if (!provider) {\r\n            var styleSheet = this._getOrCreateStyleSheet(editor);\r\n            var providerArgs = {\r\n                styleSheet: styleSheet.styleSheet,\r\n                key: key,\r\n                parentTypeKey: parentTypeKey,\r\n                options: options || Object.create(null)\r\n            };\r\n            if (!parentTypeKey) {\r\n                provider = new DecorationTypeOptionsProvider(this._themeService, styleSheet, providerArgs);\r\n            }\r\n            else {\r\n                provider = new DecorationSubTypeOptionsProvider(this._themeService, styleSheet, providerArgs);\r\n            }\r\n            this._decorationOptionProviders.set(key, provider);\r\n        }\r\n        provider.refCount++;\r\n    };\r\n    CodeEditorServiceImpl.prototype.removeDecorationType = function (key) {\r\n        var provider = this._decorationOptionProviders.get(key);\r\n        if (provider) {\r\n            provider.refCount--;\r\n            if (provider.refCount <= 0) {\r\n                this._decorationOptionProviders.delete(key);\r\n                provider.dispose();\r\n                this.listCodeEditors().forEach(function (ed) { return ed.removeDecorations(key); });\r\n            }\r\n        }\r\n    };\r\n    CodeEditorServiceImpl.prototype.resolveDecorationOptions = function (decorationTypeKey, writable) {\r\n        var provider = this._decorationOptionProviders.get(decorationTypeKey);\r\n        if (!provider) {\r\n            throw new Error('Unknown decoration type key: ' + decorationTypeKey);\r\n        }\r\n        return provider.getOptions(this, writable);\r\n    };\r\n    CodeEditorServiceImpl = __decorate([\r\n        __param(0, IThemeService)\r\n    ], CodeEditorServiceImpl);\r\n    return CodeEditorServiceImpl;\r\n}(AbstractCodeEditorService));\r\nexport { CodeEditorServiceImpl };\r\nvar DecorationSubTypeOptionsProvider = /** @class */ (function () {\r\n    function DecorationSubTypeOptionsProvider(themeService, styleSheet, providerArgs) {\r\n        this._styleSheet = styleSheet;\r\n        this._styleSheet.ref();\r\n        this._parentTypeKey = providerArgs.parentTypeKey;\r\n        this.refCount = 0;\r\n        this._beforeContentRules = new DecorationCSSRules(3 /* BeforeContentClassName */, providerArgs, themeService);\r\n        this._afterContentRules = new DecorationCSSRules(4 /* AfterContentClassName */, providerArgs, themeService);\r\n    }\r\n    DecorationSubTypeOptionsProvider.prototype.getOptions = function (codeEditorService, writable) {\r\n        var options = codeEditorService.resolveDecorationOptions(this._parentTypeKey, true);\r\n        if (this._beforeContentRules) {\r\n            options.beforeContentClassName = this._beforeContentRules.className;\r\n        }\r\n        if (this._afterContentRules) {\r\n            options.afterContentClassName = this._afterContentRules.className;\r\n        }\r\n        return options;\r\n    };\r\n    DecorationSubTypeOptionsProvider.prototype.dispose = function () {\r\n        if (this._beforeContentRules) {\r\n            this._beforeContentRules.dispose();\r\n            this._beforeContentRules = null;\r\n        }\r\n        if (this._afterContentRules) {\r\n            this._afterContentRules.dispose();\r\n            this._afterContentRules = null;\r\n        }\r\n        this._styleSheet.unref();\r\n    };\r\n    return DecorationSubTypeOptionsProvider;\r\n}());\r\nvar DecorationTypeOptionsProvider = /** @class */ (function () {\r\n    function DecorationTypeOptionsProvider(themeService, styleSheet, providerArgs) {\r\n        var _this = this;\r\n        this._disposables = new DisposableStore();\r\n        this._styleSheet = styleSheet;\r\n        this._styleSheet.ref();\r\n        this.refCount = 0;\r\n        var createCSSRules = function (type) {\r\n            var rules = new DecorationCSSRules(type, providerArgs, themeService);\r\n            _this._disposables.add(rules);\r\n            if (rules.hasContent) {\r\n                return rules.className;\r\n            }\r\n            return undefined;\r\n        };\r\n        var createInlineCSSRules = function (type) {\r\n            var rules = new DecorationCSSRules(type, providerArgs, themeService);\r\n            _this._disposables.add(rules);\r\n            if (rules.hasContent) {\r\n                return { className: rules.className, hasLetterSpacing: rules.hasLetterSpacing };\r\n            }\r\n            return null;\r\n        };\r\n        this.className = createCSSRules(0 /* ClassName */);\r\n        var inlineData = createInlineCSSRules(1 /* InlineClassName */);\r\n        if (inlineData) {\r\n            this.inlineClassName = inlineData.className;\r\n            this.inlineClassNameAffectsLetterSpacing = inlineData.hasLetterSpacing;\r\n        }\r\n        this.beforeContentClassName = createCSSRules(3 /* BeforeContentClassName */);\r\n        this.afterContentClassName = createCSSRules(4 /* AfterContentClassName */);\r\n        this.glyphMarginClassName = createCSSRules(2 /* GlyphMarginClassName */);\r\n        var options = providerArgs.options;\r\n        this.isWholeLine = Boolean(options.isWholeLine);\r\n        this.stickiness = options.rangeBehavior;\r\n        var lightOverviewRulerColor = options.light && options.light.overviewRulerColor || options.overviewRulerColor;\r\n        var darkOverviewRulerColor = options.dark && options.dark.overviewRulerColor || options.overviewRulerColor;\r\n        if (typeof lightOverviewRulerColor !== 'undefined'\r\n            || typeof darkOverviewRulerColor !== 'undefined') {\r\n            this.overviewRuler = {\r\n                color: lightOverviewRulerColor || darkOverviewRulerColor,\r\n                darkColor: darkOverviewRulerColor || lightOverviewRulerColor,\r\n                position: options.overviewRulerLane || OverviewRulerLane.Center\r\n            };\r\n        }\r\n    }\r\n    DecorationTypeOptionsProvider.prototype.getOptions = function (codeEditorService, writable) {\r\n        if (!writable) {\r\n            return this;\r\n        }\r\n        return {\r\n            inlineClassName: this.inlineClassName,\r\n            beforeContentClassName: this.beforeContentClassName,\r\n            afterContentClassName: this.afterContentClassName,\r\n            className: this.className,\r\n            glyphMarginClassName: this.glyphMarginClassName,\r\n            isWholeLine: this.isWholeLine,\r\n            overviewRuler: this.overviewRuler,\r\n            stickiness: this.stickiness\r\n        };\r\n    };\r\n    DecorationTypeOptionsProvider.prototype.dispose = function () {\r\n        this._disposables.dispose();\r\n        this._styleSheet.unref();\r\n    };\r\n    return DecorationTypeOptionsProvider;\r\n}());\r\nvar _CSS_MAP = {\r\n    color: 'color:{0} !important;',\r\n    opacity: 'opacity:{0};',\r\n    backgroundColor: 'background-color:{0};',\r\n    outline: 'outline:{0};',\r\n    outlineColor: 'outline-color:{0};',\r\n    outlineStyle: 'outline-style:{0};',\r\n    outlineWidth: 'outline-width:{0};',\r\n    border: 'border:{0};',\r\n    borderColor: 'border-color:{0};',\r\n    borderRadius: 'border-radius:{0};',\r\n    borderSpacing: 'border-spacing:{0};',\r\n    borderStyle: 'border-style:{0};',\r\n    borderWidth: 'border-width:{0};',\r\n    fontStyle: 'font-style:{0};',\r\n    fontWeight: 'font-weight:{0};',\r\n    textDecoration: 'text-decoration:{0};',\r\n    cursor: 'cursor:{0};',\r\n    letterSpacing: 'letter-spacing:{0};',\r\n    gutterIconPath: 'background:{0} center center no-repeat;',\r\n    gutterIconSize: 'background-size:{0};',\r\n    contentText: 'content:\\'{0}\\';',\r\n    contentIconPath: 'content:{0};',\r\n    margin: 'margin:{0};',\r\n    width: 'width:{0};',\r\n    height: 'height:{0};'\r\n};\r\nvar DecorationCSSRules = /** @class */ (function () {\r\n    function DecorationCSSRules(ruleType, providerArgs, themeService) {\r\n        var _this = this;\r\n        this._theme = themeService.getTheme();\r\n        this._ruleType = ruleType;\r\n        this._providerArgs = providerArgs;\r\n        this._usesThemeColors = false;\r\n        this._hasContent = false;\r\n        this._hasLetterSpacing = false;\r\n        var className = CSSNameHelper.getClassName(this._providerArgs.key, ruleType);\r\n        if (this._providerArgs.parentTypeKey) {\r\n            className = className + ' ' + CSSNameHelper.getClassName(this._providerArgs.parentTypeKey, ruleType);\r\n        }\r\n        this._className = className;\r\n        this._unThemedSelector = CSSNameHelper.getSelector(this._providerArgs.key, this._providerArgs.parentTypeKey, ruleType);\r\n        this._buildCSS();\r\n        if (this._usesThemeColors) {\r\n            this._themeListener = themeService.onThemeChange(function (theme) {\r\n                _this._theme = themeService.getTheme();\r\n                _this._removeCSS();\r\n                _this._buildCSS();\r\n            });\r\n        }\r\n        else {\r\n            this._themeListener = null;\r\n        }\r\n    }\r\n    DecorationCSSRules.prototype.dispose = function () {\r\n        if (this._hasContent) {\r\n            this._removeCSS();\r\n            this._hasContent = false;\r\n        }\r\n        if (this._themeListener) {\r\n            this._themeListener.dispose();\r\n            this._themeListener = null;\r\n        }\r\n    };\r\n    Object.defineProperty(DecorationCSSRules.prototype, \"hasContent\", {\r\n        get: function () {\r\n            return this._hasContent;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DecorationCSSRules.prototype, \"hasLetterSpacing\", {\r\n        get: function () {\r\n            return this._hasLetterSpacing;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DecorationCSSRules.prototype, \"className\", {\r\n        get: function () {\r\n            return this._className;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    DecorationCSSRules.prototype._buildCSS = function () {\r\n        var options = this._providerArgs.options;\r\n        var unthemedCSS, lightCSS, darkCSS;\r\n        switch (this._ruleType) {\r\n            case 0 /* ClassName */:\r\n                unthemedCSS = this.getCSSTextForModelDecorationClassName(options);\r\n                lightCSS = this.getCSSTextForModelDecorationClassName(options.light);\r\n                darkCSS = this.getCSSTextForModelDecorationClassName(options.dark);\r\n                break;\r\n            case 1 /* InlineClassName */:\r\n                unthemedCSS = this.getCSSTextForModelDecorationInlineClassName(options);\r\n                lightCSS = this.getCSSTextForModelDecorationInlineClassName(options.light);\r\n                darkCSS = this.getCSSTextForModelDecorationInlineClassName(options.dark);\r\n                break;\r\n            case 2 /* GlyphMarginClassName */:\r\n                unthemedCSS = this.getCSSTextForModelDecorationGlyphMarginClassName(options);\r\n                lightCSS = this.getCSSTextForModelDecorationGlyphMarginClassName(options.light);\r\n                darkCSS = this.getCSSTextForModelDecorationGlyphMarginClassName(options.dark);\r\n                break;\r\n            case 3 /* BeforeContentClassName */:\r\n                unthemedCSS = this.getCSSTextForModelDecorationContentClassName(options.before);\r\n                lightCSS = this.getCSSTextForModelDecorationContentClassName(options.light && options.light.before);\r\n                darkCSS = this.getCSSTextForModelDecorationContentClassName(options.dark && options.dark.before);\r\n                break;\r\n            case 4 /* AfterContentClassName */:\r\n                unthemedCSS = this.getCSSTextForModelDecorationContentClassName(options.after);\r\n                lightCSS = this.getCSSTextForModelDecorationContentClassName(options.light && options.light.after);\r\n                darkCSS = this.getCSSTextForModelDecorationContentClassName(options.dark && options.dark.after);\r\n                break;\r\n            default:\r\n                throw new Error('Unknown rule type: ' + this._ruleType);\r\n        }\r\n        var sheet = this._providerArgs.styleSheet.sheet;\r\n        var hasContent = false;\r\n        if (unthemedCSS.length > 0) {\r\n            sheet.insertRule(this._unThemedSelector + \" {\" + unthemedCSS + \"}\", 0);\r\n            hasContent = true;\r\n        }\r\n        if (lightCSS.length > 0) {\r\n            sheet.insertRule(\".vs\" + this._unThemedSelector + \" {\" + lightCSS + \"}\", 0);\r\n            hasContent = true;\r\n        }\r\n        if (darkCSS.length > 0) {\r\n            sheet.insertRule(\".vs-dark\" + this._unThemedSelector + \", .hc-black\" + this._unThemedSelector + \" {\" + darkCSS + \"}\", 0);\r\n            hasContent = true;\r\n        }\r\n        this._hasContent = hasContent;\r\n    };\r\n    DecorationCSSRules.prototype._removeCSS = function () {\r\n        dom.removeCSSRulesContainingSelector(this._unThemedSelector, this._providerArgs.styleSheet);\r\n    };\r\n    /**\r\n     * Build the CSS for decorations styled via `className`.\r\n     */\r\n    DecorationCSSRules.prototype.getCSSTextForModelDecorationClassName = function (opts) {\r\n        if (!opts) {\r\n            return '';\r\n        }\r\n        var cssTextArr = [];\r\n        this.collectCSSText(opts, ['backgroundColor'], cssTextArr);\r\n        this.collectCSSText(opts, ['outline', 'outlineColor', 'outlineStyle', 'outlineWidth'], cssTextArr);\r\n        this.collectBorderSettingsCSSText(opts, cssTextArr);\r\n        return cssTextArr.join('');\r\n    };\r\n    /**\r\n     * Build the CSS for decorations styled via `inlineClassName`.\r\n     */\r\n    DecorationCSSRules.prototype.getCSSTextForModelDecorationInlineClassName = function (opts) {\r\n        if (!opts) {\r\n            return '';\r\n        }\r\n        var cssTextArr = [];\r\n        this.collectCSSText(opts, ['fontStyle', 'fontWeight', 'textDecoration', 'cursor', 'color', 'opacity', 'letterSpacing'], cssTextArr);\r\n        if (opts.letterSpacing) {\r\n            this._hasLetterSpacing = true;\r\n        }\r\n        return cssTextArr.join('');\r\n    };\r\n    /**\r\n     * Build the CSS for decorations styled before or after content.\r\n     */\r\n    DecorationCSSRules.prototype.getCSSTextForModelDecorationContentClassName = function (opts) {\r\n        if (!opts) {\r\n            return '';\r\n        }\r\n        var cssTextArr = [];\r\n        if (typeof opts !== 'undefined') {\r\n            this.collectBorderSettingsCSSText(opts, cssTextArr);\r\n            if (typeof opts.contentIconPath !== 'undefined') {\r\n                cssTextArr.push(strings.format(_CSS_MAP.contentIconPath, dom.asCSSUrl(URI.revive(opts.contentIconPath))));\r\n            }\r\n            if (typeof opts.contentText === 'string') {\r\n                var truncated = opts.contentText.match(/^.*$/m)[0]; // only take first line\r\n                var escaped = truncated.replace(/['\\\\]/g, '\\\\$&');\r\n                cssTextArr.push(strings.format(_CSS_MAP.contentText, escaped));\r\n            }\r\n            this.collectCSSText(opts, ['fontStyle', 'fontWeight', 'textDecoration', 'color', 'opacity', 'backgroundColor', 'margin'], cssTextArr);\r\n            if (this.collectCSSText(opts, ['width', 'height'], cssTextArr)) {\r\n                cssTextArr.push('display:inline-block;');\r\n            }\r\n        }\r\n        return cssTextArr.join('');\r\n    };\r\n    /**\r\n     * Build the CSS for decorations styled via `glpyhMarginClassName`.\r\n     */\r\n    DecorationCSSRules.prototype.getCSSTextForModelDecorationGlyphMarginClassName = function (opts) {\r\n        if (!opts) {\r\n            return '';\r\n        }\r\n        var cssTextArr = [];\r\n        if (typeof opts.gutterIconPath !== 'undefined') {\r\n            cssTextArr.push(strings.format(_CSS_MAP.gutterIconPath, dom.asCSSUrl(URI.revive(opts.gutterIconPath))));\r\n            if (typeof opts.gutterIconSize !== 'undefined') {\r\n                cssTextArr.push(strings.format(_CSS_MAP.gutterIconSize, opts.gutterIconSize));\r\n            }\r\n        }\r\n        return cssTextArr.join('');\r\n    };\r\n    DecorationCSSRules.prototype.collectBorderSettingsCSSText = function (opts, cssTextArr) {\r\n        if (this.collectCSSText(opts, ['border', 'borderColor', 'borderRadius', 'borderSpacing', 'borderStyle', 'borderWidth'], cssTextArr)) {\r\n            cssTextArr.push(strings.format('box-sizing: border-box;'));\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    DecorationCSSRules.prototype.collectCSSText = function (opts, properties, cssTextArr) {\r\n        var lenBefore = cssTextArr.length;\r\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\r\n            var property = properties_1[_i];\r\n            var value = this.resolveValue(opts[property]);\r\n            if (typeof value === 'string') {\r\n                cssTextArr.push(strings.format(_CSS_MAP[property], value));\r\n            }\r\n        }\r\n        return cssTextArr.length !== lenBefore;\r\n    };\r\n    DecorationCSSRules.prototype.resolveValue = function (value) {\r\n        if (isThemeColor(value)) {\r\n            this._usesThemeColors = true;\r\n            var color = this._theme.getColor(value.id);\r\n            if (color) {\r\n                return color.toString();\r\n            }\r\n            return 'transparent';\r\n        }\r\n        return value;\r\n    };\r\n    return DecorationCSSRules;\r\n}());\r\nvar CSSNameHelper = /** @class */ (function () {\r\n    function CSSNameHelper() {\r\n    }\r\n    CSSNameHelper.getClassName = function (key, type) {\r\n        return 'ced-' + key + '-' + type;\r\n    };\r\n    CSSNameHelper.getSelector = function (key, parentKey, ruleType) {\r\n        var selector = '.monaco-editor .' + this.getClassName(key, ruleType);\r\n        if (parentKey) {\r\n            selector = selector + '.' + this.getClassName(parentKey, ruleType);\r\n        }\r\n        if (ruleType === 3 /* BeforeContentClassName */) {\r\n            selector += '::before';\r\n        }\r\n        else if (ruleType === 4 /* AfterContentClassName */) {\r\n            selector += '::after';\r\n        }\r\n        return selector;\r\n    };\r\n    return CSSNameHelper;\r\n}());\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { windowOpenNoOpener } from '../../../base/browser/dom.js';\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { CodeEditorServiceImpl } from '../../browser/services/codeEditorServiceImpl.js';\r\nvar StandaloneCodeEditorServiceImpl = /** @class */ (function (_super) {\r\n    __extends(StandaloneCodeEditorServiceImpl, _super);\r\n    function StandaloneCodeEditorServiceImpl() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    StandaloneCodeEditorServiceImpl.prototype.getActiveCodeEditor = function () {\r\n        return null; // not supported in the standalone case\r\n    };\r\n    StandaloneCodeEditorServiceImpl.prototype.openCodeEditor = function (input, source, sideBySide) {\r\n        if (!source) {\r\n            return Promise.resolve(null);\r\n        }\r\n        return Promise.resolve(this.doOpenEditor(source, input));\r\n    };\r\n    StandaloneCodeEditorServiceImpl.prototype.doOpenEditor = function (editor, input) {\r\n        var model = this.findModel(editor, input.resource);\r\n        if (!model) {\r\n            if (input.resource) {\r\n                var schema = input.resource.scheme;\r\n                if (schema === Schemas.http || schema === Schemas.https) {\r\n                    // This is a fully qualified http or https URL\r\n                    windowOpenNoOpener(input.resource.toString());\r\n                    return editor;\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n        var selection = (input.options ? input.options.selection : null);\r\n        if (selection) {\r\n            if (typeof selection.endLineNumber === 'number' && typeof selection.endColumn === 'number') {\r\n                editor.setSelection(selection);\r\n                editor.revealRangeInCenter(selection, 1 /* Immediate */);\r\n            }\r\n            else {\r\n                var pos = {\r\n                    lineNumber: selection.startLineNumber,\r\n                    column: selection.startColumn\r\n                };\r\n                editor.setPosition(pos);\r\n                editor.revealPositionInCenter(pos, 1 /* Immediate */);\r\n            }\r\n        }\r\n        return editor;\r\n    };\r\n    StandaloneCodeEditorServiceImpl.prototype.findModel = function (editor, resource) {\r\n        var model = editor.getModel();\r\n        if (model && model.uri.toString() !== resource.toString()) {\r\n            return null;\r\n        }\r\n        return model;\r\n    };\r\n    return StandaloneCodeEditorServiceImpl;\r\n}(CodeEditorServiceImpl));\r\nexport { StandaloneCodeEditorServiceImpl };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Color } from '../../../../base/common/color.js';\r\nvar ParsedTokenThemeRule = /** @class */ (function () {\r\n    function ParsedTokenThemeRule(token, index, fontStyle, foreground, background) {\r\n        this.token = token;\r\n        this.index = index;\r\n        this.fontStyle = fontStyle;\r\n        this.foreground = foreground;\r\n        this.background = background;\r\n    }\r\n    return ParsedTokenThemeRule;\r\n}());\r\nexport { ParsedTokenThemeRule };\r\n/**\r\n * Parse a raw theme into rules.\r\n */\r\nexport function parseTokenTheme(source) {\r\n    if (!source || !Array.isArray(source)) {\r\n        return [];\r\n    }\r\n    var result = [], resultLen = 0;\r\n    for (var i = 0, len = source.length; i < len; i++) {\r\n        var entry = source[i];\r\n        var fontStyle = -1 /* NotSet */;\r\n        if (typeof entry.fontStyle === 'string') {\r\n            fontStyle = 0 /* None */;\r\n            var segments = entry.fontStyle.split(' ');\r\n            for (var j = 0, lenJ = segments.length; j < lenJ; j++) {\r\n                var segment = segments[j];\r\n                switch (segment) {\r\n                    case 'italic':\r\n                        fontStyle = fontStyle | 1 /* Italic */;\r\n                        break;\r\n                    case 'bold':\r\n                        fontStyle = fontStyle | 2 /* Bold */;\r\n                        break;\r\n                    case 'underline':\r\n                        fontStyle = fontStyle | 4 /* Underline */;\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n        var foreground = null;\r\n        if (typeof entry.foreground === 'string') {\r\n            foreground = entry.foreground;\r\n        }\r\n        var background = null;\r\n        if (typeof entry.background === 'string') {\r\n            background = entry.background;\r\n        }\r\n        result[resultLen++] = new ParsedTokenThemeRule(entry.token || '', i, fontStyle, foreground, background);\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Resolve rules (i.e. inheritance).\r\n */\r\nfunction resolveParsedTokenThemeRules(parsedThemeRules, customTokenColors) {\r\n    // Sort rules lexicographically, and then by index if necessary\r\n    parsedThemeRules.sort(function (a, b) {\r\n        var r = strcmp(a.token, b.token);\r\n        if (r !== 0) {\r\n            return r;\r\n        }\r\n        return a.index - b.index;\r\n    });\r\n    // Determine defaults\r\n    var defaultFontStyle = 0 /* None */;\r\n    var defaultForeground = '000000';\r\n    var defaultBackground = 'ffffff';\r\n    while (parsedThemeRules.length >= 1 && parsedThemeRules[0].token === '') {\r\n        var incomingDefaults = parsedThemeRules.shift();\r\n        if (incomingDefaults.fontStyle !== -1 /* NotSet */) {\r\n            defaultFontStyle = incomingDefaults.fontStyle;\r\n        }\r\n        if (incomingDefaults.foreground !== null) {\r\n            defaultForeground = incomingDefaults.foreground;\r\n        }\r\n        if (incomingDefaults.background !== null) {\r\n            defaultBackground = incomingDefaults.background;\r\n        }\r\n    }\r\n    var colorMap = new ColorMap();\r\n    // start with token colors from custom token themes\r\n    for (var _i = 0, customTokenColors_1 = customTokenColors; _i < customTokenColors_1.length; _i++) {\r\n        var color = customTokenColors_1[_i];\r\n        colorMap.getId(color);\r\n    }\r\n    var foregroundColorId = colorMap.getId(defaultForeground);\r\n    var backgroundColorId = colorMap.getId(defaultBackground);\r\n    var defaults = new ThemeTrieElementRule(defaultFontStyle, foregroundColorId, backgroundColorId);\r\n    var root = new ThemeTrieElement(defaults);\r\n    for (var i = 0, len = parsedThemeRules.length; i < len; i++) {\r\n        var rule = parsedThemeRules[i];\r\n        root.insert(rule.token, rule.fontStyle, colorMap.getId(rule.foreground), colorMap.getId(rule.background));\r\n    }\r\n    return new TokenTheme(colorMap, root);\r\n}\r\nvar colorRegExp = /^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;\r\nvar ColorMap = /** @class */ (function () {\r\n    function ColorMap() {\r\n        this._lastColorId = 0;\r\n        this._id2color = [];\r\n        this._color2id = new Map();\r\n    }\r\n    ColorMap.prototype.getId = function (color) {\r\n        if (color === null) {\r\n            return 0;\r\n        }\r\n        var match = color.match(colorRegExp);\r\n        if (!match) {\r\n            throw new Error('Illegal value for token color: ' + color);\r\n        }\r\n        color = match[1].toUpperCase();\r\n        var value = this._color2id.get(color);\r\n        if (value) {\r\n            return value;\r\n        }\r\n        value = ++this._lastColorId;\r\n        this._color2id.set(color, value);\r\n        this._id2color[value] = Color.fromHex('#' + color);\r\n        return value;\r\n    };\r\n    ColorMap.prototype.getColorMap = function () {\r\n        return this._id2color.slice(0);\r\n    };\r\n    return ColorMap;\r\n}());\r\nexport { ColorMap };\r\nvar TokenTheme = /** @class */ (function () {\r\n    function TokenTheme(colorMap, root) {\r\n        this._colorMap = colorMap;\r\n        this._root = root;\r\n        this._cache = new Map();\r\n    }\r\n    TokenTheme.createFromRawTokenTheme = function (source, customTokenColors) {\r\n        return this.createFromParsedTokenTheme(parseTokenTheme(source), customTokenColors);\r\n    };\r\n    TokenTheme.createFromParsedTokenTheme = function (source, customTokenColors) {\r\n        return resolveParsedTokenThemeRules(source, customTokenColors);\r\n    };\r\n    TokenTheme.prototype.getColorMap = function () {\r\n        return this._colorMap.getColorMap();\r\n    };\r\n    TokenTheme.prototype._match = function (token) {\r\n        return this._root.match(token);\r\n    };\r\n    TokenTheme.prototype.match = function (languageId, token) {\r\n        // The cache contains the metadata without the language bits set.\r\n        var result = this._cache.get(token);\r\n        if (typeof result === 'undefined') {\r\n            var rule = this._match(token);\r\n            var standardToken = toStandardTokenType(token);\r\n            result = (rule.metadata\r\n                | (standardToken << 8 /* TOKEN_TYPE_OFFSET */)) >>> 0;\r\n            this._cache.set(token, result);\r\n        }\r\n        return (result\r\n            | (languageId << 0 /* LANGUAGEID_OFFSET */)) >>> 0;\r\n    };\r\n    return TokenTheme;\r\n}());\r\nexport { TokenTheme };\r\nvar STANDARD_TOKEN_TYPE_REGEXP = /\\b(comment|string|regex|regexp)\\b/;\r\nexport function toStandardTokenType(tokenType) {\r\n    var m = tokenType.match(STANDARD_TOKEN_TYPE_REGEXP);\r\n    if (!m) {\r\n        return 0 /* Other */;\r\n    }\r\n    switch (m[1]) {\r\n        case 'comment':\r\n            return 1 /* Comment */;\r\n        case 'string':\r\n            return 2 /* String */;\r\n        case 'regex':\r\n            return 4 /* RegEx */;\r\n        case 'regexp':\r\n            return 4 /* RegEx */;\r\n    }\r\n    throw new Error('Unexpected match for standard token type!');\r\n}\r\nexport function strcmp(a, b) {\r\n    if (a < b) {\r\n        return -1;\r\n    }\r\n    if (a > b) {\r\n        return 1;\r\n    }\r\n    return 0;\r\n}\r\nvar ThemeTrieElementRule = /** @class */ (function () {\r\n    function ThemeTrieElementRule(fontStyle, foreground, background) {\r\n        this._fontStyle = fontStyle;\r\n        this._foreground = foreground;\r\n        this._background = background;\r\n        this.metadata = ((this._fontStyle << 11 /* FONT_STYLE_OFFSET */)\r\n            | (this._foreground << 14 /* FOREGROUND_OFFSET */)\r\n            | (this._background << 23 /* BACKGROUND_OFFSET */)) >>> 0;\r\n    }\r\n    ThemeTrieElementRule.prototype.clone = function () {\r\n        return new ThemeTrieElementRule(this._fontStyle, this._foreground, this._background);\r\n    };\r\n    ThemeTrieElementRule.prototype.acceptOverwrite = function (fontStyle, foreground, background) {\r\n        if (fontStyle !== -1 /* NotSet */) {\r\n            this._fontStyle = fontStyle;\r\n        }\r\n        if (foreground !== 0 /* None */) {\r\n            this._foreground = foreground;\r\n        }\r\n        if (background !== 0 /* None */) {\r\n            this._background = background;\r\n        }\r\n        this.metadata = ((this._fontStyle << 11 /* FONT_STYLE_OFFSET */)\r\n            | (this._foreground << 14 /* FOREGROUND_OFFSET */)\r\n            | (this._background << 23 /* BACKGROUND_OFFSET */)) >>> 0;\r\n    };\r\n    return ThemeTrieElementRule;\r\n}());\r\nexport { ThemeTrieElementRule };\r\nvar ThemeTrieElement = /** @class */ (function () {\r\n    function ThemeTrieElement(mainRule) {\r\n        this._mainRule = mainRule;\r\n        this._children = new Map();\r\n    }\r\n    ThemeTrieElement.prototype.match = function (token) {\r\n        if (token === '') {\r\n            return this._mainRule;\r\n        }\r\n        var dotIndex = token.indexOf('.');\r\n        var head;\r\n        var tail;\r\n        if (dotIndex === -1) {\r\n            head = token;\r\n            tail = '';\r\n        }\r\n        else {\r\n            head = token.substring(0, dotIndex);\r\n            tail = token.substring(dotIndex + 1);\r\n        }\r\n        var child = this._children.get(head);\r\n        if (typeof child !== 'undefined') {\r\n            return child.match(tail);\r\n        }\r\n        return this._mainRule;\r\n    };\r\n    ThemeTrieElement.prototype.insert = function (token, fontStyle, foreground, background) {\r\n        if (token === '') {\r\n            // Merge into the main rule\r\n            this._mainRule.acceptOverwrite(fontStyle, foreground, background);\r\n            return;\r\n        }\r\n        var dotIndex = token.indexOf('.');\r\n        var head;\r\n        var tail;\r\n        if (dotIndex === -1) {\r\n            head = token;\r\n            tail = '';\r\n        }\r\n        else {\r\n            head = token.substring(0, dotIndex);\r\n            tail = token.substring(dotIndex + 1);\r\n        }\r\n        var child = this._children.get(head);\r\n        if (typeof child === 'undefined') {\r\n            child = new ThemeTrieElement(this._mainRule.clone());\r\n            this._children.set(head, child);\r\n        }\r\n        child.insert(tail, fontStyle, foreground, background);\r\n    };\r\n    return ThemeTrieElement;\r\n}());\r\nexport { ThemeTrieElement };\r\nexport function generateTokensCSSForColorMap(colorMap) {\r\n    var rules = [];\r\n    for (var i = 1, len = colorMap.length; i < len; i++) {\r\n        var color = colorMap[i];\r\n        rules[i] = \".mtk\" + i + \" { color: \" + color + \"; }\";\r\n    }\r\n    rules.push('.mtki { font-style: italic; }');\r\n    rules.push('.mtkb { font-weight: bold; }');\r\n    rules.push('.mtku { text-decoration: underline; text-underline-position: under; }');\r\n    return rules.join('\\n');\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar _a, _b, _c;\r\nimport { editorActiveIndentGuides, editorIndentGuides } from '../../common/view/editorColorRegistry.js';\r\nimport { editorBackground, editorForeground, editorInactiveSelection, editorSelectionHighlight } from '../../../platform/theme/common/colorRegistry.js';\r\n/* -------------------------------- Begin vs theme -------------------------------- */\r\nexport var vs = {\r\n    base: 'vs',\r\n    inherit: false,\r\n    rules: [\r\n        { token: '', foreground: '000000', background: 'fffffe' },\r\n        { token: 'invalid', foreground: 'cd3131' },\r\n        { token: 'emphasis', fontStyle: 'italic' },\r\n        { token: 'strong', fontStyle: 'bold' },\r\n        { token: 'variable', foreground: '001188' },\r\n        { token: 'variable.predefined', foreground: '4864AA' },\r\n        { token: 'constant', foreground: 'dd0000' },\r\n        { token: 'comment', foreground: '008000' },\r\n        { token: 'number', foreground: '098658' },\r\n        { token: 'number.hex', foreground: '3030c0' },\r\n        { token: 'regexp', foreground: '800000' },\r\n        { token: 'annotation', foreground: '808080' },\r\n        { token: 'type', foreground: '008080' },\r\n        { token: 'delimiter', foreground: '000000' },\r\n        { token: 'delimiter.html', foreground: '383838' },\r\n        { token: 'delimiter.xml', foreground: '0000FF' },\r\n        { token: 'tag', foreground: '800000' },\r\n        { token: 'tag.id.pug', foreground: '4F76AC' },\r\n        { token: 'tag.class.pug', foreground: '4F76AC' },\r\n        { token: 'meta.scss', foreground: '800000' },\r\n        { token: 'metatag', foreground: 'e00000' },\r\n        { token: 'metatag.content.html', foreground: 'FF0000' },\r\n        { token: 'metatag.html', foreground: '808080' },\r\n        { token: 'metatag.xml', foreground: '808080' },\r\n        { token: 'metatag.php', fontStyle: 'bold' },\r\n        { token: 'key', foreground: '863B00' },\r\n        { token: 'string.key.json', foreground: 'A31515' },\r\n        { token: 'string.value.json', foreground: '0451A5' },\r\n        { token: 'attribute.name', foreground: 'FF0000' },\r\n        { token: 'attribute.value', foreground: '0451A5' },\r\n        { token: 'attribute.value.number', foreground: '098658' },\r\n        { token: 'attribute.value.unit', foreground: '098658' },\r\n        { token: 'attribute.value.html', foreground: '0000FF' },\r\n        { token: 'attribute.value.xml', foreground: '0000FF' },\r\n        { token: 'string', foreground: 'A31515' },\r\n        { token: 'string.html', foreground: '0000FF' },\r\n        { token: 'string.sql', foreground: 'FF0000' },\r\n        { token: 'string.yaml', foreground: '0451A5' },\r\n        { token: 'keyword', foreground: '0000FF' },\r\n        { token: 'keyword.json', foreground: '0451A5' },\r\n        { token: 'keyword.flow', foreground: 'AF00DB' },\r\n        { token: 'keyword.flow.scss', foreground: '0000FF' },\r\n        { token: 'operator.scss', foreground: '666666' },\r\n        { token: 'operator.sql', foreground: '778899' },\r\n        { token: 'operator.swift', foreground: '666666' },\r\n        { token: 'predefined.sql', foreground: 'FF00FF' },\r\n    ],\r\n    colors: (_a = {},\r\n        _a[editorBackground] = '#FFFFFE',\r\n        _a[editorForeground] = '#000000',\r\n        _a[editorInactiveSelection] = '#E5EBF1',\r\n        _a[editorIndentGuides] = '#D3D3D3',\r\n        _a[editorActiveIndentGuides] = '#939393',\r\n        _a[editorSelectionHighlight] = '#ADD6FF4D',\r\n        _a)\r\n};\r\n/* -------------------------------- End vs theme -------------------------------- */\r\n/* -------------------------------- Begin vs-dark theme -------------------------------- */\r\nexport var vs_dark = {\r\n    base: 'vs-dark',\r\n    inherit: false,\r\n    rules: [\r\n        { token: '', foreground: 'D4D4D4', background: '1E1E1E' },\r\n        { token: 'invalid', foreground: 'f44747' },\r\n        { token: 'emphasis', fontStyle: 'italic' },\r\n        { token: 'strong', fontStyle: 'bold' },\r\n        { token: 'variable', foreground: '74B0DF' },\r\n        { token: 'variable.predefined', foreground: '4864AA' },\r\n        { token: 'variable.parameter', foreground: '9CDCFE' },\r\n        { token: 'constant', foreground: '569CD6' },\r\n        { token: 'comment', foreground: '608B4E' },\r\n        { token: 'number', foreground: 'B5CEA8' },\r\n        { token: 'number.hex', foreground: '5BB498' },\r\n        { token: 'regexp', foreground: 'B46695' },\r\n        { token: 'annotation', foreground: 'cc6666' },\r\n        { token: 'type', foreground: '3DC9B0' },\r\n        { token: 'delimiter', foreground: 'DCDCDC' },\r\n        { token: 'delimiter.html', foreground: '808080' },\r\n        { token: 'delimiter.xml', foreground: '808080' },\r\n        { token: 'tag', foreground: '569CD6' },\r\n        { token: 'tag.id.pug', foreground: '4F76AC' },\r\n        { token: 'tag.class.pug', foreground: '4F76AC' },\r\n        { token: 'meta.scss', foreground: 'A79873' },\r\n        { token: 'meta.tag', foreground: 'CE9178' },\r\n        { token: 'metatag', foreground: 'DD6A6F' },\r\n        { token: 'metatag.content.html', foreground: '9CDCFE' },\r\n        { token: 'metatag.html', foreground: '569CD6' },\r\n        { token: 'metatag.xml', foreground: '569CD6' },\r\n        { token: 'metatag.php', fontStyle: 'bold' },\r\n        { token: 'key', foreground: '9CDCFE' },\r\n        { token: 'string.key.json', foreground: '9CDCFE' },\r\n        { token: 'string.value.json', foreground: 'CE9178' },\r\n        { token: 'attribute.name', foreground: '9CDCFE' },\r\n        { token: 'attribute.value', foreground: 'CE9178' },\r\n        { token: 'attribute.value.number.css', foreground: 'B5CEA8' },\r\n        { token: 'attribute.value.unit.css', foreground: 'B5CEA8' },\r\n        { token: 'attribute.value.hex.css', foreground: 'D4D4D4' },\r\n        { token: 'string', foreground: 'CE9178' },\r\n        { token: 'string.sql', foreground: 'FF0000' },\r\n        { token: 'keyword', foreground: '569CD6' },\r\n        { token: 'keyword.flow', foreground: 'C586C0' },\r\n        { token: 'keyword.json', foreground: 'CE9178' },\r\n        { token: 'keyword.flow.scss', foreground: '569CD6' },\r\n        { token: 'operator.scss', foreground: '909090' },\r\n        { token: 'operator.sql', foreground: '778899' },\r\n        { token: 'operator.swift', foreground: '909090' },\r\n        { token: 'predefined.sql', foreground: 'FF00FF' },\r\n    ],\r\n    colors: (_b = {},\r\n        _b[editorBackground] = '#1E1E1E',\r\n        _b[editorForeground] = '#D4D4D4',\r\n        _b[editorInactiveSelection] = '#3A3D41',\r\n        _b[editorIndentGuides] = '#404040',\r\n        _b[editorActiveIndentGuides] = '#707070',\r\n        _b[editorSelectionHighlight] = '#ADD6FF26',\r\n        _b)\r\n};\r\n/* -------------------------------- End vs-dark theme -------------------------------- */\r\n/* -------------------------------- Begin hc-black theme -------------------------------- */\r\nexport var hc_black = {\r\n    base: 'hc-black',\r\n    inherit: false,\r\n    rules: [\r\n        { token: '', foreground: 'FFFFFF', background: '000000' },\r\n        { token: 'invalid', foreground: 'f44747' },\r\n        { token: 'emphasis', fontStyle: 'italic' },\r\n        { token: 'strong', fontStyle: 'bold' },\r\n        { token: 'variable', foreground: '1AEBFF' },\r\n        { token: 'variable.parameter', foreground: '9CDCFE' },\r\n        { token: 'constant', foreground: '569CD6' },\r\n        { token: 'comment', foreground: '608B4E' },\r\n        { token: 'number', foreground: 'FFFFFF' },\r\n        { token: 'regexp', foreground: 'C0C0C0' },\r\n        { token: 'annotation', foreground: '569CD6' },\r\n        { token: 'type', foreground: '3DC9B0' },\r\n        { token: 'delimiter', foreground: 'FFFF00' },\r\n        { token: 'delimiter.html', foreground: 'FFFF00' },\r\n        { token: 'tag', foreground: '569CD6' },\r\n        { token: 'tag.id.pug', foreground: '4F76AC' },\r\n        { token: 'tag.class.pug', foreground: '4F76AC' },\r\n        { token: 'meta', foreground: 'D4D4D4' },\r\n        { token: 'meta.tag', foreground: 'CE9178' },\r\n        { token: 'metatag', foreground: '569CD6' },\r\n        { token: 'metatag.content.html', foreground: '1AEBFF' },\r\n        { token: 'metatag.html', foreground: '569CD6' },\r\n        { token: 'metatag.xml', foreground: '569CD6' },\r\n        { token: 'metatag.php', fontStyle: 'bold' },\r\n        { token: 'key', foreground: '9CDCFE' },\r\n        { token: 'string.key', foreground: '9CDCFE' },\r\n        { token: 'string.value', foreground: 'CE9178' },\r\n        { token: 'attribute.name', foreground: '569CD6' },\r\n        { token: 'attribute.value', foreground: '3FF23F' },\r\n        { token: 'string', foreground: 'CE9178' },\r\n        { token: 'string.sql', foreground: 'FF0000' },\r\n        { token: 'keyword', foreground: '569CD6' },\r\n        { token: 'keyword.flow', foreground: 'C586C0' },\r\n        { token: 'operator.sql', foreground: '778899' },\r\n        { token: 'operator.swift', foreground: '909090' },\r\n        { token: 'predefined.sql', foreground: 'FF00FF' },\r\n    ],\r\n    colors: (_c = {},\r\n        _c[editorBackground] = '#000000',\r\n        _c[editorForeground] = '#FFFFFF',\r\n        _c[editorIndentGuides] = '#FFFFFF',\r\n        _c[editorActiveIndentGuides] = '#FFFFFF',\r\n        _c)\r\n};\r\n/* -------------------------------- End hc-black theme -------------------------------- */\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { Color } from '../../../base/common/color.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { TokenizationRegistry } from '../../common/modes.js';\r\nimport { TokenTheme, generateTokensCSSForColorMap } from '../../common/modes/supports/tokenization.js';\r\nimport { hc_black, vs, vs_dark } from '../common/themes.js';\r\nimport { Registry } from '../../../platform/registry/common/platform.js';\r\nimport { Extensions } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { Extensions as ThemingExtensions } from '../../../platform/theme/common/themeService.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nvar VS_THEME_NAME = 'vs';\r\nvar VS_DARK_THEME_NAME = 'vs-dark';\r\nvar HC_BLACK_THEME_NAME = 'hc-black';\r\nvar colorRegistry = Registry.as(Extensions.ColorContribution);\r\nvar themingRegistry = Registry.as(ThemingExtensions.ThemingContribution);\r\nvar StandaloneTheme = /** @class */ (function () {\r\n    function StandaloneTheme(name, standaloneThemeData) {\r\n        this.themeData = standaloneThemeData;\r\n        var base = standaloneThemeData.base;\r\n        if (name.length > 0) {\r\n            this.id = base + ' ' + name;\r\n            this.themeName = name;\r\n        }\r\n        else {\r\n            this.id = base;\r\n            this.themeName = base;\r\n        }\r\n        this.colors = null;\r\n        this.defaultColors = Object.create(null);\r\n        this._tokenTheme = null;\r\n    }\r\n    Object.defineProperty(StandaloneTheme.prototype, \"base\", {\r\n        get: function () {\r\n            return this.themeData.base;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    StandaloneTheme.prototype.notifyBaseUpdated = function () {\r\n        if (this.themeData.inherit) {\r\n            this.colors = null;\r\n            this._tokenTheme = null;\r\n        }\r\n    };\r\n    StandaloneTheme.prototype.getColors = function () {\r\n        if (!this.colors) {\r\n            var colors = new Map();\r\n            for (var id in this.themeData.colors) {\r\n                colors.set(id, Color.fromHex(this.themeData.colors[id]));\r\n            }\r\n            if (this.themeData.inherit) {\r\n                var baseData = getBuiltinRules(this.themeData.base);\r\n                for (var id in baseData.colors) {\r\n                    if (!colors.has(id)) {\r\n                        colors.set(id, Color.fromHex(baseData.colors[id]));\r\n                    }\r\n                }\r\n            }\r\n            this.colors = colors;\r\n        }\r\n        return this.colors;\r\n    };\r\n    StandaloneTheme.prototype.getColor = function (colorId, useDefault) {\r\n        var color = this.getColors().get(colorId);\r\n        if (color) {\r\n            return color;\r\n        }\r\n        if (useDefault !== false) {\r\n            return this.getDefault(colorId);\r\n        }\r\n        return undefined;\r\n    };\r\n    StandaloneTheme.prototype.getDefault = function (colorId) {\r\n        var color = this.defaultColors[colorId];\r\n        if (color) {\r\n            return color;\r\n        }\r\n        color = colorRegistry.resolveDefaultColor(colorId, this);\r\n        this.defaultColors[colorId] = color;\r\n        return color;\r\n    };\r\n    StandaloneTheme.prototype.defines = function (colorId) {\r\n        return Object.prototype.hasOwnProperty.call(this.getColors(), colorId);\r\n    };\r\n    Object.defineProperty(StandaloneTheme.prototype, \"type\", {\r\n        get: function () {\r\n            switch (this.base) {\r\n                case VS_THEME_NAME: return 'light';\r\n                case HC_BLACK_THEME_NAME: return 'hc';\r\n                default: return 'dark';\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StandaloneTheme.prototype, \"tokenTheme\", {\r\n        get: function () {\r\n            if (!this._tokenTheme) {\r\n                var rules = [];\r\n                var encodedTokensColors = [];\r\n                if (this.themeData.inherit) {\r\n                    var baseData = getBuiltinRules(this.themeData.base);\r\n                    rules = baseData.rules;\r\n                    if (baseData.encodedTokensColors) {\r\n                        encodedTokensColors = baseData.encodedTokensColors;\r\n                    }\r\n                }\r\n                rules = rules.concat(this.themeData.rules);\r\n                if (this.themeData.encodedTokensColors) {\r\n                    encodedTokensColors = this.themeData.encodedTokensColors;\r\n                }\r\n                this._tokenTheme = TokenTheme.createFromRawTokenTheme(rules, encodedTokensColors);\r\n            }\r\n            return this._tokenTheme;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    StandaloneTheme.prototype.getTokenStyleMetadata = function (type, modifiers) {\r\n        return undefined;\r\n    };\r\n    return StandaloneTheme;\r\n}());\r\nfunction isBuiltinTheme(themeName) {\r\n    return (themeName === VS_THEME_NAME\r\n        || themeName === VS_DARK_THEME_NAME\r\n        || themeName === HC_BLACK_THEME_NAME);\r\n}\r\nfunction getBuiltinRules(builtinTheme) {\r\n    switch (builtinTheme) {\r\n        case VS_THEME_NAME:\r\n            return vs;\r\n        case VS_DARK_THEME_NAME:\r\n            return vs_dark;\r\n        case HC_BLACK_THEME_NAME:\r\n            return hc_black;\r\n    }\r\n}\r\nfunction newBuiltInTheme(builtinTheme) {\r\n    var themeData = getBuiltinRules(builtinTheme);\r\n    return new StandaloneTheme(builtinTheme, themeData);\r\n}\r\nvar StandaloneThemeServiceImpl = /** @class */ (function (_super) {\r\n    __extends(StandaloneThemeServiceImpl, _super);\r\n    function StandaloneThemeServiceImpl() {\r\n        var _this = _super.call(this) || this;\r\n        _this._onThemeChange = _this._register(new Emitter());\r\n        _this.onThemeChange = _this._onThemeChange.event;\r\n        _this._environment = Object.create(null);\r\n        _this._knownThemes = new Map();\r\n        _this._knownThemes.set(VS_THEME_NAME, newBuiltInTheme(VS_THEME_NAME));\r\n        _this._knownThemes.set(VS_DARK_THEME_NAME, newBuiltInTheme(VS_DARK_THEME_NAME));\r\n        _this._knownThemes.set(HC_BLACK_THEME_NAME, newBuiltInTheme(HC_BLACK_THEME_NAME));\r\n        _this._css = '';\r\n        _this._globalStyleElement = null;\r\n        _this._styleElements = [];\r\n        _this.setTheme(VS_THEME_NAME);\r\n        return _this;\r\n    }\r\n    StandaloneThemeServiceImpl.prototype.registerEditorContainer = function (domNode) {\r\n        if (dom.isInShadowDOM(domNode)) {\r\n            return this._registerShadowDomContainer(domNode);\r\n        }\r\n        return this._registerRegularEditorContainer();\r\n    };\r\n    StandaloneThemeServiceImpl.prototype._registerRegularEditorContainer = function () {\r\n        if (!this._globalStyleElement) {\r\n            this._globalStyleElement = dom.createStyleSheet();\r\n            this._globalStyleElement.className = 'monaco-colors';\r\n            this._globalStyleElement.innerHTML = this._css;\r\n            this._styleElements.push(this._globalStyleElement);\r\n        }\r\n        return Disposable.None;\r\n    };\r\n    StandaloneThemeServiceImpl.prototype._registerShadowDomContainer = function (domNode) {\r\n        var _this = this;\r\n        var styleElement = dom.createStyleSheet(domNode);\r\n        styleElement.className = 'monaco-colors';\r\n        styleElement.innerHTML = this._css;\r\n        this._styleElements.push(styleElement);\r\n        return {\r\n            dispose: function () {\r\n                for (var i = 0; i < _this._styleElements.length; i++) {\r\n                    if (_this._styleElements[i] === styleElement) {\r\n                        _this._styleElements.splice(i, 1);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    };\r\n    StandaloneThemeServiceImpl.prototype.defineTheme = function (themeName, themeData) {\r\n        if (!/^[a-z0-9\\-]+$/i.test(themeName)) {\r\n            throw new Error('Illegal theme name!');\r\n        }\r\n        if (!isBuiltinTheme(themeData.base) && !isBuiltinTheme(themeName)) {\r\n            throw new Error('Illegal theme base!');\r\n        }\r\n        // set or replace theme\r\n        this._knownThemes.set(themeName, new StandaloneTheme(themeName, themeData));\r\n        if (isBuiltinTheme(themeName)) {\r\n            this._knownThemes.forEach(function (theme) {\r\n                if (theme.base === themeName) {\r\n                    theme.notifyBaseUpdated();\r\n                }\r\n            });\r\n        }\r\n        if (this._theme && this._theme.themeName === themeName) {\r\n            this.setTheme(themeName); // refresh theme\r\n        }\r\n    };\r\n    StandaloneThemeServiceImpl.prototype.getTheme = function () {\r\n        return this._theme;\r\n    };\r\n    StandaloneThemeServiceImpl.prototype.setTheme = function (themeName) {\r\n        var _this = this;\r\n        var theme;\r\n        if (this._knownThemes.has(themeName)) {\r\n            theme = this._knownThemes.get(themeName);\r\n        }\r\n        else {\r\n            theme = this._knownThemes.get(VS_THEME_NAME);\r\n        }\r\n        if (this._theme === theme) {\r\n            // Nothing to do\r\n            return theme.id;\r\n        }\r\n        this._theme = theme;\r\n        var cssRules = [];\r\n        var hasRule = {};\r\n        var ruleCollector = {\r\n            addRule: function (rule) {\r\n                if (!hasRule[rule]) {\r\n                    cssRules.push(rule);\r\n                    hasRule[rule] = true;\r\n                }\r\n            }\r\n        };\r\n        themingRegistry.getThemingParticipants().forEach(function (p) { return p(theme, ruleCollector, _this._environment); });\r\n        var tokenTheme = theme.tokenTheme;\r\n        var colorMap = tokenTheme.getColorMap();\r\n        ruleCollector.addRule(generateTokensCSSForColorMap(colorMap));\r\n        this._css = cssRules.join('\\n');\r\n        this._styleElements.forEach(function (styleElement) { return styleElement.innerHTML = _this._css; });\r\n        TokenizationRegistry.setColorMap(colorMap);\r\n        this._onThemeChange.fire(theme);\r\n        return theme.id;\r\n    };\r\n    StandaloneThemeServiceImpl.prototype.getIconTheme = function () {\r\n        return {\r\n            hasFileIcons: false,\r\n            hasFolderIcons: false,\r\n            hidesExplorerArrows: false\r\n        };\r\n    };\r\n    return StandaloneThemeServiceImpl;\r\n}(Disposable));\r\nexport { StandaloneThemeServiceImpl };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { Event, PauseableEmitter } from '../../../base/common/event.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { keys } from '../../../base/common/map.js';\r\nimport { CommandsRegistry } from '../../commands/common/commands.js';\r\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\r\nimport { IContextKeyService, SET_CONTEXT_COMMAND_ID } from '../common/contextkey.js';\r\nimport { KeybindingResolver } from '../../keybinding/common/keybindingResolver.js';\r\nvar KEYBINDING_CONTEXT_ATTR = 'data-keybinding-context';\r\nvar Context = /** @class */ (function () {\r\n    function Context(id, parent) {\r\n        this._id = id;\r\n        this._parent = parent;\r\n        this._value = Object.create(null);\r\n        this._value['_contextId'] = id;\r\n    }\r\n    Context.prototype.setValue = function (key, value) {\r\n        // console.log('SET ' + key + ' = ' + value + ' ON ' + this._id);\r\n        if (this._value[key] !== value) {\r\n            this._value[key] = value;\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Context.prototype.removeValue = function (key) {\r\n        // console.log('REMOVE ' + key + ' FROM ' + this._id);\r\n        if (key in this._value) {\r\n            delete this._value[key];\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Context.prototype.getValue = function (key) {\r\n        var ret = this._value[key];\r\n        if (typeof ret === 'undefined' && this._parent) {\r\n            return this._parent.getValue(key);\r\n        }\r\n        return ret;\r\n    };\r\n    return Context;\r\n}());\r\nexport { Context };\r\nvar NullContext = /** @class */ (function (_super) {\r\n    __extends(NullContext, _super);\r\n    function NullContext() {\r\n        return _super.call(this, -1, null) || this;\r\n    }\r\n    NullContext.prototype.setValue = function (key, value) {\r\n        return false;\r\n    };\r\n    NullContext.prototype.removeValue = function (key) {\r\n        return false;\r\n    };\r\n    NullContext.prototype.getValue = function (key) {\r\n        return undefined;\r\n    };\r\n    NullContext.INSTANCE = new NullContext();\r\n    return NullContext;\r\n}(Context));\r\nvar ConfigAwareContextValuesContainer = /** @class */ (function (_super) {\r\n    __extends(ConfigAwareContextValuesContainer, _super);\r\n    function ConfigAwareContextValuesContainer(id, _configurationService, emitter) {\r\n        var _this = _super.call(this, id, null) || this;\r\n        _this._configurationService = _configurationService;\r\n        _this._values = new Map();\r\n        _this._listener = _this._configurationService.onDidChangeConfiguration(function (event) {\r\n            if (event.source === 6 /* DEFAULT */) {\r\n                // new setting, reset everything\r\n                var allKeys = keys(_this._values);\r\n                _this._values.clear();\r\n                emitter.fire(new ArrayContextKeyChangeEvent(allKeys));\r\n            }\r\n            else {\r\n                var changedKeys = [];\r\n                for (var _i = 0, _a = event.affectedKeys; _i < _a.length; _i++) {\r\n                    var configKey = _a[_i];\r\n                    var contextKey = \"config.\" + configKey;\r\n                    if (_this._values.has(contextKey)) {\r\n                        _this._values.delete(contextKey);\r\n                        changedKeys.push(contextKey);\r\n                    }\r\n                }\r\n                emitter.fire(new ArrayContextKeyChangeEvent(changedKeys));\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n    ConfigAwareContextValuesContainer.prototype.dispose = function () {\r\n        this._listener.dispose();\r\n    };\r\n    ConfigAwareContextValuesContainer.prototype.getValue = function (key) {\r\n        if (key.indexOf(ConfigAwareContextValuesContainer._keyPrefix) !== 0) {\r\n            return _super.prototype.getValue.call(this, key);\r\n        }\r\n        if (this._values.has(key)) {\r\n            return this._values.get(key);\r\n        }\r\n        var configKey = key.substr(ConfigAwareContextValuesContainer._keyPrefix.length);\r\n        var configValue = this._configurationService.getValue(configKey);\r\n        var value = undefined;\r\n        switch (typeof configValue) {\r\n            case 'number':\r\n            case 'boolean':\r\n            case 'string':\r\n                value = configValue;\r\n                break;\r\n        }\r\n        this._values.set(key, value);\r\n        return value;\r\n    };\r\n    ConfigAwareContextValuesContainer.prototype.setValue = function (key, value) {\r\n        return _super.prototype.setValue.call(this, key, value);\r\n    };\r\n    ConfigAwareContextValuesContainer.prototype.removeValue = function (key) {\r\n        return _super.prototype.removeValue.call(this, key);\r\n    };\r\n    ConfigAwareContextValuesContainer._keyPrefix = 'config.';\r\n    return ConfigAwareContextValuesContainer;\r\n}(Context));\r\nvar ContextKey = /** @class */ (function () {\r\n    function ContextKey(service, key, defaultValue) {\r\n        this._service = service;\r\n        this._key = key;\r\n        this._defaultValue = defaultValue;\r\n        this.reset();\r\n    }\r\n    ContextKey.prototype.set = function (value) {\r\n        this._service.setContext(this._key, value);\r\n    };\r\n    ContextKey.prototype.reset = function () {\r\n        if (typeof this._defaultValue === 'undefined') {\r\n            this._service.removeContext(this._key);\r\n        }\r\n        else {\r\n            this._service.setContext(this._key, this._defaultValue);\r\n        }\r\n    };\r\n    ContextKey.prototype.get = function () {\r\n        return this._service.getContextKeyValue(this._key);\r\n    };\r\n    return ContextKey;\r\n}());\r\nvar SimpleContextKeyChangeEvent = /** @class */ (function () {\r\n    function SimpleContextKeyChangeEvent(key) {\r\n        this.key = key;\r\n    }\r\n    SimpleContextKeyChangeEvent.prototype.affectsSome = function (keys) {\r\n        return keys.has(this.key);\r\n    };\r\n    return SimpleContextKeyChangeEvent;\r\n}());\r\nvar ArrayContextKeyChangeEvent = /** @class */ (function () {\r\n    function ArrayContextKeyChangeEvent(keys) {\r\n        this.keys = keys;\r\n    }\r\n    ArrayContextKeyChangeEvent.prototype.affectsSome = function (keys) {\r\n        for (var _i = 0, _a = this.keys; _i < _a.length; _i++) {\r\n            var key = _a[_i];\r\n            if (keys.has(key)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    return ArrayContextKeyChangeEvent;\r\n}());\r\nvar CompositeContextKeyChangeEvent = /** @class */ (function () {\r\n    function CompositeContextKeyChangeEvent(events) {\r\n        this.events = events;\r\n    }\r\n    CompositeContextKeyChangeEvent.prototype.affectsSome = function (keys) {\r\n        for (var _i = 0, _a = this.events; _i < _a.length; _i++) {\r\n            var e = _a[_i];\r\n            if (e.affectsSome(keys)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    return CompositeContextKeyChangeEvent;\r\n}());\r\nvar AbstractContextKeyService = /** @class */ (function () {\r\n    function AbstractContextKeyService(myContextId) {\r\n        this._onDidChangeContext = new PauseableEmitter({ merge: function (input) { return new CompositeContextKeyChangeEvent(input); } });\r\n        this._isDisposed = false;\r\n        this._myContextId = myContextId;\r\n    }\r\n    AbstractContextKeyService.prototype.createKey = function (key, defaultValue) {\r\n        if (this._isDisposed) {\r\n            throw new Error(\"AbstractContextKeyService has been disposed\");\r\n        }\r\n        return new ContextKey(this, key, defaultValue);\r\n    };\r\n    Object.defineProperty(AbstractContextKeyService.prototype, \"onDidChangeContext\", {\r\n        get: function () {\r\n            return this._onDidChangeContext.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AbstractContextKeyService.prototype.bufferChangeEvents = function (callback) {\r\n        this._onDidChangeContext.pause();\r\n        try {\r\n            callback();\r\n        }\r\n        finally {\r\n            this._onDidChangeContext.resume();\r\n        }\r\n    };\r\n    AbstractContextKeyService.prototype.createScoped = function (domNode) {\r\n        if (this._isDisposed) {\r\n            throw new Error(\"AbstractContextKeyService has been disposed\");\r\n        }\r\n        return new ScopedContextKeyService(this, domNode);\r\n    };\r\n    AbstractContextKeyService.prototype.contextMatchesRules = function (rules) {\r\n        if (this._isDisposed) {\r\n            throw new Error(\"AbstractContextKeyService has been disposed\");\r\n        }\r\n        var context = this.getContextValuesContainer(this._myContextId);\r\n        var result = KeybindingResolver.contextMatchesRules(context, rules);\r\n        // console.group(rules.serialize() + ' -> ' + result);\r\n        // rules.keys().forEach(key => { console.log(key, ctx[key]); });\r\n        // console.groupEnd();\r\n        return result;\r\n    };\r\n    AbstractContextKeyService.prototype.getContextKeyValue = function (key) {\r\n        if (this._isDisposed) {\r\n            return undefined;\r\n        }\r\n        return this.getContextValuesContainer(this._myContextId).getValue(key);\r\n    };\r\n    AbstractContextKeyService.prototype.setContext = function (key, value) {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n        var myContext = this.getContextValuesContainer(this._myContextId);\r\n        if (!myContext) {\r\n            return;\r\n        }\r\n        if (myContext.setValue(key, value)) {\r\n            this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(key));\r\n        }\r\n    };\r\n    AbstractContextKeyService.prototype.removeContext = function (key) {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n        if (this.getContextValuesContainer(this._myContextId).removeValue(key)) {\r\n            this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(key));\r\n        }\r\n    };\r\n    AbstractContextKeyService.prototype.getContext = function (target) {\r\n        if (this._isDisposed) {\r\n            return NullContext.INSTANCE;\r\n        }\r\n        return this.getContextValuesContainer(findContextAttr(target));\r\n    };\r\n    return AbstractContextKeyService;\r\n}());\r\nexport { AbstractContextKeyService };\r\nvar ContextKeyService = /** @class */ (function (_super) {\r\n    __extends(ContextKeyService, _super);\r\n    function ContextKeyService(configurationService) {\r\n        var _this = _super.call(this, 0) || this;\r\n        _this._contexts = new Map();\r\n        _this._toDispose = new DisposableStore();\r\n        _this._lastContextId = 0;\r\n        var myContext = new ConfigAwareContextValuesContainer(_this._myContextId, configurationService, _this._onDidChangeContext);\r\n        _this._contexts.set(_this._myContextId, myContext);\r\n        _this._toDispose.add(myContext);\r\n        return _this;\r\n        // Uncomment this to see the contexts continuously logged\r\n        // let lastLoggedValue: string | null = null;\r\n        // setInterval(() => {\r\n        // \tlet values = Object.keys(this._contexts).map((key) => this._contexts[key]);\r\n        // \tlet logValue = values.map(v => JSON.stringify(v._value, null, '\\t')).join('\\n');\r\n        // \tif (lastLoggedValue !== logValue) {\r\n        // \t\tlastLoggedValue = logValue;\r\n        // \t\tconsole.log(lastLoggedValue);\r\n        // \t}\r\n        // }, 2000);\r\n    }\r\n    ContextKeyService.prototype.dispose = function () {\r\n        this._isDisposed = true;\r\n        this._toDispose.dispose();\r\n    };\r\n    ContextKeyService.prototype.getContextValuesContainer = function (contextId) {\r\n        if (this._isDisposed) {\r\n            return NullContext.INSTANCE;\r\n        }\r\n        return this._contexts.get(contextId) || NullContext.INSTANCE;\r\n    };\r\n    ContextKeyService.prototype.createChildContext = function (parentContextId) {\r\n        if (parentContextId === void 0) { parentContextId = this._myContextId; }\r\n        if (this._isDisposed) {\r\n            throw new Error(\"ContextKeyService has been disposed\");\r\n        }\r\n        var id = (++this._lastContextId);\r\n        this._contexts.set(id, new Context(id, this.getContextValuesContainer(parentContextId)));\r\n        return id;\r\n    };\r\n    ContextKeyService.prototype.disposeContext = function (contextId) {\r\n        if (!this._isDisposed) {\r\n            this._contexts.delete(contextId);\r\n        }\r\n    };\r\n    ContextKeyService = __decorate([\r\n        __param(0, IConfigurationService)\r\n    ], ContextKeyService);\r\n    return ContextKeyService;\r\n}(AbstractContextKeyService));\r\nexport { ContextKeyService };\r\nvar ScopedContextKeyService = /** @class */ (function (_super) {\r\n    __extends(ScopedContextKeyService, _super);\r\n    function ScopedContextKeyService(parent, domNode) {\r\n        var _this = _super.call(this, parent.createChildContext()) || this;\r\n        _this._parent = parent;\r\n        if (domNode) {\r\n            _this._domNode = domNode;\r\n            _this._domNode.setAttribute(KEYBINDING_CONTEXT_ATTR, String(_this._myContextId));\r\n        }\r\n        return _this;\r\n    }\r\n    ScopedContextKeyService.prototype.dispose = function () {\r\n        this._isDisposed = true;\r\n        this._parent.disposeContext(this._myContextId);\r\n        if (this._domNode) {\r\n            this._domNode.removeAttribute(KEYBINDING_CONTEXT_ATTR);\r\n            this._domNode = undefined;\r\n        }\r\n    };\r\n    Object.defineProperty(ScopedContextKeyService.prototype, \"onDidChangeContext\", {\r\n        get: function () {\r\n            return Event.any(this._parent.onDidChangeContext, this._onDidChangeContext.event);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ScopedContextKeyService.prototype.getContextValuesContainer = function (contextId) {\r\n        if (this._isDisposed) {\r\n            return NullContext.INSTANCE;\r\n        }\r\n        return this._parent.getContextValuesContainer(contextId);\r\n    };\r\n    ScopedContextKeyService.prototype.createChildContext = function (parentContextId) {\r\n        if (parentContextId === void 0) { parentContextId = this._myContextId; }\r\n        if (this._isDisposed) {\r\n            throw new Error(\"ScopedContextKeyService has been disposed\");\r\n        }\r\n        return this._parent.createChildContext(parentContextId);\r\n    };\r\n    ScopedContextKeyService.prototype.disposeContext = function (contextId) {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n        this._parent.disposeContext(contextId);\r\n    };\r\n    return ScopedContextKeyService;\r\n}(AbstractContextKeyService));\r\nfunction findContextAttr(domNode) {\r\n    while (domNode) {\r\n        if (domNode.hasAttribute(KEYBINDING_CONTEXT_ATTR)) {\r\n            var attr = domNode.getAttribute(KEYBINDING_CONTEXT_ATTR);\r\n            if (attr) {\r\n                return parseInt(attr, 10);\r\n            }\r\n            return NaN;\r\n        }\r\n        domNode = domNode.parentElement;\r\n    }\r\n    return 0;\r\n}\r\nCommandsRegistry.registerCommand(SET_CONTEXT_COMMAND_ID, function (accessor, contextKey, contextValue) {\r\n    accessor.get(IContextKeyService).createKey(String(contextKey), contextValue);\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './contextMenuHandler.css';\r\nimport { ActionRunner } from '../../../base/common/actions.js';\r\nimport { combinedDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { Menu } from '../../../base/browser/ui/menu/menu.js';\r\nimport { EventType, $, removeNode } from '../../../base/browser/dom.js';\r\nimport { attachMenuStyler } from '../../theme/common/styler.js';\r\nimport { domEvent } from '../../../base/browser/event.js';\r\nimport { StandardMouseEvent } from '../../../base/browser/mouseEvent.js';\r\nvar ContextMenuHandler = /** @class */ (function () {\r\n    function ContextMenuHandler(contextViewService, telemetryService, notificationService, keybindingService, themeService) {\r\n        this.contextViewService = contextViewService;\r\n        this.telemetryService = telemetryService;\r\n        this.notificationService = notificationService;\r\n        this.keybindingService = keybindingService;\r\n        this.themeService = themeService;\r\n        this.focusToReturn = null;\r\n        this.block = null;\r\n        this.options = { blockMouse: true };\r\n    }\r\n    ContextMenuHandler.prototype.configure = function (options) {\r\n        this.options = options;\r\n    };\r\n    ContextMenuHandler.prototype.showContextMenu = function (delegate) {\r\n        var _this = this;\r\n        var actions = delegate.getActions();\r\n        if (!actions.length) {\r\n            return; // Don't render an empty context menu\r\n        }\r\n        this.focusToReturn = document.activeElement;\r\n        var menu;\r\n        this.contextViewService.showContextView({\r\n            getAnchor: function () { return delegate.getAnchor(); },\r\n            canRelayout: false,\r\n            anchorAlignment: delegate.anchorAlignment,\r\n            render: function (container) {\r\n                var className = delegate.getMenuClassName ? delegate.getMenuClassName() : '';\r\n                if (className) {\r\n                    container.className += ' ' + className;\r\n                }\r\n                // Render invisible div to block mouse interaction in the rest of the UI\r\n                if (_this.options.blockMouse) {\r\n                    _this.block = container.appendChild($('.context-view-block'));\r\n                }\r\n                var menuDisposables = new DisposableStore();\r\n                var actionRunner = delegate.actionRunner || new ActionRunner();\r\n                actionRunner.onDidBeforeRun(_this.onActionRun, _this, menuDisposables);\r\n                actionRunner.onDidRun(_this.onDidActionRun, _this, menuDisposables);\r\n                menu = new Menu(container, actions, {\r\n                    actionViewItemProvider: delegate.getActionViewItem,\r\n                    context: delegate.getActionsContext ? delegate.getActionsContext() : null,\r\n                    actionRunner: actionRunner,\r\n                    getKeyBinding: delegate.getKeyBinding ? delegate.getKeyBinding : function (action) { return _this.keybindingService.lookupKeybinding(action.id); }\r\n                });\r\n                menuDisposables.add(attachMenuStyler(menu, _this.themeService));\r\n                menu.onDidCancel(function () { return _this.contextViewService.hideContextView(true); }, null, menuDisposables);\r\n                menu.onDidBlur(function () { return _this.contextViewService.hideContextView(true); }, null, menuDisposables);\r\n                domEvent(window, EventType.BLUR)(function () { _this.contextViewService.hideContextView(true); }, null, menuDisposables);\r\n                domEvent(window, EventType.MOUSE_DOWN)(function (e) {\r\n                    if (e.defaultPrevented) {\r\n                        return;\r\n                    }\r\n                    var event = new StandardMouseEvent(e);\r\n                    var element = event.target;\r\n                    // Don't do anything as we are likely creating a context menu\r\n                    if (event.rightButton) {\r\n                        return;\r\n                    }\r\n                    while (element) {\r\n                        if (element === container) {\r\n                            return;\r\n                        }\r\n                        element = element.parentElement;\r\n                    }\r\n                    _this.contextViewService.hideContextView(true);\r\n                }, null, menuDisposables);\r\n                return combinedDisposable(menuDisposables, menu);\r\n            },\r\n            focus: function () {\r\n                if (menu) {\r\n                    menu.focus(!!delegate.autoSelectFirstItem);\r\n                }\r\n            },\r\n            onHide: function (didCancel) {\r\n                if (delegate.onHide) {\r\n                    delegate.onHide(!!didCancel);\r\n                }\r\n                if (_this.block) {\r\n                    removeNode(_this.block);\r\n                    _this.block = null;\r\n                }\r\n                if (_this.focusToReturn) {\r\n                    _this.focusToReturn.focus();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    ContextMenuHandler.prototype.onActionRun = function (e) {\r\n        if (this.telemetryService) {\r\n            this.telemetryService.publicLog2('workbenchActionExecuted', { id: e.action.id, from: 'contextMenu' });\r\n        }\r\n        this.contextViewService.hideContextView(false);\r\n        // Restore focus here\r\n        if (this.focusToReturn) {\r\n            this.focusToReturn.focus();\r\n        }\r\n    };\r\n    ContextMenuHandler.prototype.onDidActionRun = function (e) {\r\n        if (e.error && this.notificationService) {\r\n            this.notificationService.error(e.error);\r\n        }\r\n    };\r\n    return ContextMenuHandler;\r\n}());\r\nexport { ContextMenuHandler };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { ContextMenuHandler } from './contextMenuHandler.js';\r\nimport { IContextViewService } from './contextView.js';\r\nimport { ITelemetryService } from '../../telemetry/common/telemetry.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { INotificationService } from '../../notification/common/notification.js';\r\nimport { IThemeService } from '../../theme/common/themeService.js';\r\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nvar ContextMenuService = /** @class */ (function (_super) {\r\n    __extends(ContextMenuService, _super);\r\n    function ContextMenuService(telemetryService, notificationService, contextViewService, keybindingService, themeService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._onDidContextMenu = _this._register(new Emitter());\r\n        _this.contextMenuHandler = new ContextMenuHandler(contextViewService, telemetryService, notificationService, keybindingService, themeService);\r\n        return _this;\r\n    }\r\n    ContextMenuService.prototype.configure = function (options) {\r\n        this.contextMenuHandler.configure(options);\r\n    };\r\n    // ContextMenu\r\n    ContextMenuService.prototype.showContextMenu = function (delegate) {\r\n        this.contextMenuHandler.showContextMenu(delegate);\r\n        this._onDidContextMenu.fire();\r\n    };\r\n    ContextMenuService = __decorate([\r\n        __param(0, ITelemetryService),\r\n        __param(1, INotificationService),\r\n        __param(2, IContextViewService),\r\n        __param(3, IKeybindingService),\r\n        __param(4, IThemeService)\r\n    ], ContextMenuService);\r\n    return ContextMenuService;\r\n}(Disposable));\r\nexport { ContextMenuService };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './contextview.css';\r\nimport * as DOM from '../../dom.js';\r\nimport * as platform from '../../../common/platform.js';\r\nimport { toDisposable, Disposable, DisposableStore } from '../../../common/lifecycle.js';\r\nimport { Range } from '../../../common/range.js';\r\nimport { BrowserFeatures } from '../../canIUse.js';\r\n/**\r\n * Lays out a one dimensional view next to an anchor in a viewport.\r\n *\r\n * @returns The view offset within the viewport.\r\n */\r\nexport function layout(viewportSize, viewSize, anchor) {\r\n    var anchorEnd = anchor.offset + anchor.size;\r\n    if (anchor.position === 0 /* Before */) {\r\n        if (viewSize <= viewportSize - anchorEnd) {\r\n            return anchorEnd; // happy case, lay it out after the anchor\r\n        }\r\n        if (viewSize <= anchor.offset) {\r\n            return anchor.offset - viewSize; // ok case, lay it out before the anchor\r\n        }\r\n        return Math.max(viewportSize - viewSize, 0); // sad case, lay it over the anchor\r\n    }\r\n    else {\r\n        if (viewSize <= anchor.offset) {\r\n            return anchor.offset - viewSize; // happy case, lay it out before the anchor\r\n        }\r\n        if (viewSize <= viewportSize - anchorEnd) {\r\n            return anchorEnd; // ok case, lay it out after the anchor\r\n        }\r\n        return 0; // sad case, lay it over the anchor\r\n    }\r\n}\r\nvar ContextView = /** @class */ (function (_super) {\r\n    __extends(ContextView, _super);\r\n    function ContextView(container) {\r\n        var _this = _super.call(this) || this;\r\n        _this.container = null;\r\n        _this.delegate = null;\r\n        _this.toDisposeOnClean = Disposable.None;\r\n        _this.toDisposeOnSetContainer = Disposable.None;\r\n        _this.view = DOM.$('.context-view');\r\n        DOM.hide(_this.view);\r\n        _this.setContainer(container);\r\n        _this._register(toDisposable(function () { return _this.setContainer(null); }));\r\n        return _this;\r\n    }\r\n    ContextView.prototype.setContainer = function (container) {\r\n        var _this = this;\r\n        if (this.container) {\r\n            this.toDisposeOnSetContainer.dispose();\r\n            this.container.removeChild(this.view);\r\n            this.container = null;\r\n        }\r\n        if (container) {\r\n            this.container = container;\r\n            this.container.appendChild(this.view);\r\n            var toDisposeOnSetContainer_1 = new DisposableStore();\r\n            ContextView.BUBBLE_UP_EVENTS.forEach(function (event) {\r\n                toDisposeOnSetContainer_1.add(DOM.addStandardDisposableListener(_this.container, event, function (e) {\r\n                    _this.onDOMEvent(e, false);\r\n                }));\r\n            });\r\n            ContextView.BUBBLE_DOWN_EVENTS.forEach(function (event) {\r\n                toDisposeOnSetContainer_1.add(DOM.addStandardDisposableListener(_this.container, event, function (e) {\r\n                    _this.onDOMEvent(e, true);\r\n                }, true));\r\n            });\r\n            this.toDisposeOnSetContainer = toDisposeOnSetContainer_1;\r\n        }\r\n    };\r\n    ContextView.prototype.show = function (delegate) {\r\n        if (this.isVisible()) {\r\n            this.hide();\r\n        }\r\n        // Show static box\r\n        DOM.clearNode(this.view);\r\n        this.view.className = 'context-view';\r\n        this.view.style.top = '0px';\r\n        this.view.style.left = '0px';\r\n        DOM.show(this.view);\r\n        // Render content\r\n        this.toDisposeOnClean = delegate.render(this.view) || Disposable.None;\r\n        // Set active delegate\r\n        this.delegate = delegate;\r\n        // Layout\r\n        this.doLayout();\r\n        // Focus\r\n        if (this.delegate.focus) {\r\n            this.delegate.focus();\r\n        }\r\n    };\r\n    ContextView.prototype.layout = function () {\r\n        if (!this.isVisible()) {\r\n            return;\r\n        }\r\n        if (this.delegate.canRelayout === false && !(platform.isIOS && BrowserFeatures.pointerEvents)) {\r\n            this.hide();\r\n            return;\r\n        }\r\n        if (this.delegate.layout) {\r\n            this.delegate.layout();\r\n        }\r\n        this.doLayout();\r\n    };\r\n    ContextView.prototype.doLayout = function () {\r\n        // Check that we still have a delegate - this.delegate.layout may have hidden\r\n        if (!this.isVisible()) {\r\n            return;\r\n        }\r\n        // Get anchor\r\n        var anchor = this.delegate.getAnchor();\r\n        // Compute around\r\n        var around;\r\n        // Get the element's position and size (to anchor the view)\r\n        if (DOM.isHTMLElement(anchor)) {\r\n            var elementPosition = DOM.getDomNodePagePosition(anchor);\r\n            around = {\r\n                top: elementPosition.top,\r\n                left: elementPosition.left,\r\n                width: elementPosition.width,\r\n                height: elementPosition.height\r\n            };\r\n        }\r\n        else {\r\n            around = {\r\n                top: anchor.y,\r\n                left: anchor.x,\r\n                width: anchor.width || 1,\r\n                height: anchor.height || 2\r\n            };\r\n        }\r\n        var viewSizeWidth = DOM.getTotalWidth(this.view);\r\n        var viewSizeHeight = DOM.getTotalHeight(this.view);\r\n        var anchorPosition = this.delegate.anchorPosition || 0 /* BELOW */;\r\n        var anchorAlignment = this.delegate.anchorAlignment || 0 /* LEFT */;\r\n        var verticalAnchor = { offset: around.top - window.pageYOffset, size: around.height, position: anchorPosition === 0 /* BELOW */ ? 0 /* Before */ : 1 /* After */ };\r\n        var horizontalAnchor;\r\n        if (anchorAlignment === 0 /* LEFT */) {\r\n            horizontalAnchor = { offset: around.left, size: 0, position: 0 /* Before */ };\r\n        }\r\n        else {\r\n            horizontalAnchor = { offset: around.left + around.width, size: 0, position: 1 /* After */ };\r\n        }\r\n        var top = layout(window.innerHeight, viewSizeHeight, verticalAnchor) + window.pageYOffset;\r\n        // if view intersects vertically with anchor, shift it horizontally\r\n        if (Range.intersects({ start: top, end: top + viewSizeHeight }, { start: verticalAnchor.offset, end: verticalAnchor.offset + verticalAnchor.size })) {\r\n            horizontalAnchor.size = around.width;\r\n            if (anchorAlignment === 1 /* RIGHT */) {\r\n                horizontalAnchor.offset = around.left;\r\n            }\r\n        }\r\n        var left = layout(window.innerWidth, viewSizeWidth, horizontalAnchor);\r\n        DOM.removeClasses(this.view, 'top', 'bottom', 'left', 'right');\r\n        DOM.addClass(this.view, anchorPosition === 0 /* BELOW */ ? 'bottom' : 'top');\r\n        DOM.addClass(this.view, anchorAlignment === 0 /* LEFT */ ? 'left' : 'right');\r\n        var containerPosition = DOM.getDomNodePagePosition(this.container);\r\n        this.view.style.top = top - containerPosition.top + \"px\";\r\n        this.view.style.left = left - containerPosition.left + \"px\";\r\n        this.view.style.width = 'initial';\r\n    };\r\n    ContextView.prototype.hide = function (data) {\r\n        var delegate = this.delegate;\r\n        this.delegate = null;\r\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.onHide) {\r\n            delegate.onHide(data);\r\n        }\r\n        this.toDisposeOnClean.dispose();\r\n        DOM.hide(this.view);\r\n    };\r\n    ContextView.prototype.isVisible = function () {\r\n        return !!this.delegate;\r\n    };\r\n    ContextView.prototype.onDOMEvent = function (e, onCapture) {\r\n        if (this.delegate) {\r\n            if (this.delegate.onDOMEvent) {\r\n                this.delegate.onDOMEvent(e, document.activeElement);\r\n            }\r\n            else if (onCapture && !DOM.isAncestor(e.target, this.container)) {\r\n                this.hide();\r\n            }\r\n        }\r\n    };\r\n    ContextView.prototype.dispose = function () {\r\n        this.hide();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ContextView.BUBBLE_UP_EVENTS = ['click', 'keydown', 'focus', 'blur'];\r\n    ContextView.BUBBLE_DOWN_EVENTS = ['click'];\r\n    return ContextView;\r\n}(Disposable));\r\nexport { ContextView };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\r\nexport var ILayoutService = createDecorator('layoutService');\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { ContextView } from '../../../base/browser/ui/contextview/contextview.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { ILayoutService } from '../../layout/browser/layoutService.js';\r\nvar ContextViewService = /** @class */ (function (_super) {\r\n    __extends(ContextViewService, _super);\r\n    function ContextViewService(layoutService) {\r\n        var _this = _super.call(this) || this;\r\n        _this.layoutService = layoutService;\r\n        _this.contextView = _this._register(new ContextView(layoutService.container));\r\n        _this.layout();\r\n        _this._register(layoutService.onLayout(function () { return _this.layout(); }));\r\n        return _this;\r\n    }\r\n    // ContextView\r\n    ContextViewService.prototype.setContainer = function (container) {\r\n        this.contextView.setContainer(container);\r\n    };\r\n    ContextViewService.prototype.showContextView = function (delegate) {\r\n        this.contextView.show(delegate);\r\n    };\r\n    ContextViewService.prototype.layout = function () {\r\n        this.contextView.layout();\r\n    };\r\n    ContextViewService.prototype.hideContextView = function (data) {\r\n        this.contextView.hide(data);\r\n    };\r\n    ContextViewService = __decorate([\r\n        __param(0, ILayoutService)\r\n    ], ContextViewService);\r\n    return ContextViewService;\r\n}(Disposable));\r\nexport { ContextViewService };\r\n","import { createDecorator } from '../../instantiation/common/instantiation.js';\r\nexport var IDialogService = createDecorator('dialogService');\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { isEmptyObject } from '../../../base/common/types.js';\r\nimport { forEach } from '../../../base/common/collections.js';\r\nfunction newNode(data) {\r\n    return {\r\n        data: data,\r\n        incoming: Object.create(null),\r\n        outgoing: Object.create(null)\r\n    };\r\n}\r\nvar Graph = /** @class */ (function () {\r\n    function Graph(_hashFn) {\r\n        this._hashFn = _hashFn;\r\n        this._nodes = Object.create(null);\r\n        // empty\r\n    }\r\n    Graph.prototype.roots = function () {\r\n        var ret = [];\r\n        forEach(this._nodes, function (entry) {\r\n            if (isEmptyObject(entry.value.outgoing)) {\r\n                ret.push(entry.value);\r\n            }\r\n        });\r\n        return ret;\r\n    };\r\n    Graph.prototype.insertEdge = function (from, to) {\r\n        var fromNode = this.lookupOrInsertNode(from), toNode = this.lookupOrInsertNode(to);\r\n        fromNode.outgoing[this._hashFn(to)] = toNode;\r\n        toNode.incoming[this._hashFn(from)] = fromNode;\r\n    };\r\n    Graph.prototype.removeNode = function (data) {\r\n        var key = this._hashFn(data);\r\n        delete this._nodes[key];\r\n        forEach(this._nodes, function (entry) {\r\n            delete entry.value.outgoing[key];\r\n            delete entry.value.incoming[key];\r\n        });\r\n    };\r\n    Graph.prototype.lookupOrInsertNode = function (data) {\r\n        var key = this._hashFn(data);\r\n        var node = this._nodes[key];\r\n        if (!node) {\r\n            node = newNode(data);\r\n            this._nodes[key] = node;\r\n        }\r\n        return node;\r\n    };\r\n    Graph.prototype.isEmpty = function () {\r\n        for (var _key in this._nodes) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    Graph.prototype.toString = function () {\r\n        var data = [];\r\n        forEach(this._nodes, function (entry) {\r\n            data.push(entry.key + \", (incoming)[\" + Object.keys(entry.value.incoming).join(', ') + \"], (outgoing)[\" + Object.keys(entry.value.outgoing).join(',') + \"]\");\r\n        });\r\n        return data.join('\\n');\r\n    };\r\n    return Graph;\r\n}());\r\nexport { Graph };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { isFalsyOrEmpty } from '../../../base/common/arrays.js';\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { isEmptyObject } from '../../../base/common/types.js';\r\nimport { Event, Emitter } from '../../../base/common/event.js';\r\nimport { MarkerSeverity } from './markers.js';\r\nvar MapMap;\r\n(function (MapMap) {\r\n    function get(map, key1, key2) {\r\n        if (map[key1]) {\r\n            return map[key1][key2];\r\n        }\r\n        return undefined;\r\n    }\r\n    MapMap.get = get;\r\n    function set(map, key1, key2, value) {\r\n        if (!map[key1]) {\r\n            map[key1] = Object.create(null);\r\n        }\r\n        map[key1][key2] = value;\r\n    }\r\n    MapMap.set = set;\r\n    function remove(map, key1, key2) {\r\n        if (map[key1] && map[key1][key2]) {\r\n            delete map[key1][key2];\r\n            if (isEmptyObject(map[key1])) {\r\n                delete map[key1];\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    MapMap.remove = remove;\r\n})(MapMap || (MapMap = {}));\r\nvar MarkerStats = /** @class */ (function () {\r\n    function MarkerStats(service) {\r\n        this.errors = 0;\r\n        this.infos = 0;\r\n        this.warnings = 0;\r\n        this.unknowns = 0;\r\n        this._data = Object.create(null);\r\n        this._service = service;\r\n        this._subscription = service.onMarkerChanged(this._update, this);\r\n    }\r\n    MarkerStats.prototype.dispose = function () {\r\n        this._subscription.dispose();\r\n        this._data = undefined;\r\n    };\r\n    MarkerStats.prototype._update = function (resources) {\r\n        if (!this._data) {\r\n            return;\r\n        }\r\n        for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\r\n            var resource = resources_1[_i];\r\n            var key = resource.toString();\r\n            var oldStats = this._data[key];\r\n            if (oldStats) {\r\n                this._substract(oldStats);\r\n            }\r\n            var newStats = this._resourceStats(resource);\r\n            this._add(newStats);\r\n            this._data[key] = newStats;\r\n        }\r\n    };\r\n    MarkerStats.prototype._resourceStats = function (resource) {\r\n        var result = { errors: 0, warnings: 0, infos: 0, unknowns: 0 };\r\n        // TODO this is a hack\r\n        if (resource.scheme === Schemas.inMemory || resource.scheme === Schemas.walkThrough || resource.scheme === Schemas.walkThroughSnippet) {\r\n            return result;\r\n        }\r\n        for (var _i = 0, _a = this._service.read({ resource: resource }); _i < _a.length; _i++) {\r\n            var severity = _a[_i].severity;\r\n            if (severity === MarkerSeverity.Error) {\r\n                result.errors += 1;\r\n            }\r\n            else if (severity === MarkerSeverity.Warning) {\r\n                result.warnings += 1;\r\n            }\r\n            else if (severity === MarkerSeverity.Info) {\r\n                result.infos += 1;\r\n            }\r\n            else {\r\n                result.unknowns += 1;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    MarkerStats.prototype._substract = function (op) {\r\n        this.errors -= op.errors;\r\n        this.warnings -= op.warnings;\r\n        this.infos -= op.infos;\r\n        this.unknowns -= op.unknowns;\r\n    };\r\n    MarkerStats.prototype._add = function (op) {\r\n        this.errors += op.errors;\r\n        this.warnings += op.warnings;\r\n        this.infos += op.infos;\r\n        this.unknowns += op.unknowns;\r\n    };\r\n    return MarkerStats;\r\n}());\r\nvar MarkerService = /** @class */ (function () {\r\n    function MarkerService() {\r\n        this._onMarkerChanged = new Emitter();\r\n        this._onMarkerChangedEvent = Event.debounce(this._onMarkerChanged.event, MarkerService._debouncer, 0);\r\n        this._byResource = Object.create(null);\r\n        this._byOwner = Object.create(null);\r\n        this._stats = new MarkerStats(this);\r\n    }\r\n    MarkerService.prototype.dispose = function () {\r\n        this._stats.dispose();\r\n    };\r\n    Object.defineProperty(MarkerService.prototype, \"onMarkerChanged\", {\r\n        get: function () {\r\n            return this._onMarkerChangedEvent;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MarkerService.prototype.remove = function (owner, resources) {\r\n        for (var _i = 0, _a = resources || []; _i < _a.length; _i++) {\r\n            var resource = _a[_i];\r\n            this.changeOne(owner, resource, []);\r\n        }\r\n    };\r\n    MarkerService.prototype.changeOne = function (owner, resource, markerData) {\r\n        if (isFalsyOrEmpty(markerData)) {\r\n            // remove marker for this (owner,resource)-tuple\r\n            var a = MapMap.remove(this._byResource, resource.toString(), owner);\r\n            var b = MapMap.remove(this._byOwner, owner, resource.toString());\r\n            if (a !== b) {\r\n                throw new Error('invalid marker service state');\r\n            }\r\n            if (a && b) {\r\n                this._onMarkerChanged.fire([resource]);\r\n            }\r\n        }\r\n        else {\r\n            // insert marker for this (owner,resource)-tuple\r\n            var markers = [];\r\n            for (var _i = 0, markerData_1 = markerData; _i < markerData_1.length; _i++) {\r\n                var data = markerData_1[_i];\r\n                var marker = MarkerService._toMarker(owner, resource, data);\r\n                if (marker) {\r\n                    markers.push(marker);\r\n                }\r\n            }\r\n            MapMap.set(this._byResource, resource.toString(), owner, markers);\r\n            MapMap.set(this._byOwner, owner, resource.toString(), markers);\r\n            this._onMarkerChanged.fire([resource]);\r\n        }\r\n    };\r\n    MarkerService._toMarker = function (owner, resource, data) {\r\n        var code = data.code, severity = data.severity, message = data.message, source = data.source, startLineNumber = data.startLineNumber, startColumn = data.startColumn, endLineNumber = data.endLineNumber, endColumn = data.endColumn, relatedInformation = data.relatedInformation, tags = data.tags;\r\n        if (!message) {\r\n            return undefined;\r\n        }\r\n        // santize data\r\n        startLineNumber = startLineNumber > 0 ? startLineNumber : 1;\r\n        startColumn = startColumn > 0 ? startColumn : 1;\r\n        endLineNumber = endLineNumber >= startLineNumber ? endLineNumber : startLineNumber;\r\n        endColumn = endColumn > 0 ? endColumn : startColumn;\r\n        return {\r\n            resource: resource,\r\n            owner: owner,\r\n            code: code,\r\n            severity: severity,\r\n            message: message,\r\n            source: source,\r\n            startLineNumber: startLineNumber,\r\n            startColumn: startColumn,\r\n            endLineNumber: endLineNumber,\r\n            endColumn: endColumn,\r\n            relatedInformation: relatedInformation,\r\n            tags: tags,\r\n        };\r\n    };\r\n    MarkerService.prototype.read = function (filter) {\r\n        if (filter === void 0) { filter = Object.create(null); }\r\n        var owner = filter.owner, resource = filter.resource, severities = filter.severities, take = filter.take;\r\n        if (!take || take < 0) {\r\n            take = -1;\r\n        }\r\n        if (owner && resource) {\r\n            // exactly one owner AND resource\r\n            var data = MapMap.get(this._byResource, resource.toString(), owner);\r\n            if (!data) {\r\n                return [];\r\n            }\r\n            else {\r\n                var result = [];\r\n                for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\r\n                    var marker = data_1[_i];\r\n                    if (MarkerService._accept(marker, severities)) {\r\n                        var newLen = result.push(marker);\r\n                        if (take > 0 && newLen === take) {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                return result;\r\n            }\r\n        }\r\n        else if (!owner && !resource) {\r\n            // all\r\n            var result = [];\r\n            for (var key1 in this._byResource) {\r\n                for (var key2 in this._byResource[key1]) {\r\n                    for (var _a = 0, _b = this._byResource[key1][key2]; _a < _b.length; _a++) {\r\n                        var data = _b[_a];\r\n                        if (MarkerService._accept(data, severities)) {\r\n                            var newLen = result.push(data);\r\n                            if (take > 0 && newLen === take) {\r\n                                return result;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            // of one resource OR owner\r\n            var map = owner\r\n                ? this._byOwner[owner]\r\n                : resource ? this._byResource[resource.toString()] : undefined;\r\n            if (!map) {\r\n                return [];\r\n            }\r\n            var result = [];\r\n            for (var key in map) {\r\n                for (var _c = 0, _d = map[key]; _c < _d.length; _c++) {\r\n                    var data = _d[_c];\r\n                    if (MarkerService._accept(data, severities)) {\r\n                        var newLen = result.push(data);\r\n                        if (take > 0 && newLen === take) {\r\n                            return result;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    MarkerService._accept = function (marker, severities) {\r\n        return severities === undefined || (severities & marker.severity) === marker.severity;\r\n    };\r\n    MarkerService._debouncer = function (last, event) {\r\n        if (!last) {\r\n            MarkerService._dedupeMap = Object.create(null);\r\n            last = [];\r\n        }\r\n        for (var _i = 0, event_1 = event; _i < event_1.length; _i++) {\r\n            var uri = event_1[_i];\r\n            if (MarkerService._dedupeMap[uri.toString()] === undefined) {\r\n                MarkerService._dedupeMap[uri.toString()] = true;\r\n                last.push(uri);\r\n            }\r\n        }\r\n        return last;\r\n    };\r\n    return MarkerService;\r\n}());\r\nexport { MarkerService };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport { illegalState } from '../../../base/common/errors.js';\r\nimport { Graph } from './graph.js';\r\nimport { SyncDescriptor } from './descriptors.js';\r\nimport { IInstantiationService, _util, optional } from './instantiation.js';\r\nimport { ServiceCollection } from './serviceCollection.js';\r\nimport { IdleValue } from '../../../base/common/async.js';\r\n// TRACING\r\nvar _enableTracing = false;\r\nvar _canUseProxy = typeof Proxy === 'function';\r\nvar CyclicDependencyError = /** @class */ (function (_super) {\r\n    __extends(CyclicDependencyError, _super);\r\n    function CyclicDependencyError(graph) {\r\n        var _this = _super.call(this, 'cyclic dependency between services') || this;\r\n        _this.message = graph.toString();\r\n        return _this;\r\n    }\r\n    return CyclicDependencyError;\r\n}(Error));\r\nvar InstantiationService = /** @class */ (function () {\r\n    function InstantiationService(services, strict, parent) {\r\n        if (services === void 0) { services = new ServiceCollection(); }\r\n        if (strict === void 0) { strict = false; }\r\n        this._services = services;\r\n        this._strict = strict;\r\n        this._parent = parent;\r\n        this._services.set(IInstantiationService, this);\r\n    }\r\n    InstantiationService.prototype.createChild = function (services) {\r\n        return new InstantiationService(services, this._strict, this);\r\n    };\r\n    InstantiationService.prototype.invokeFunction = function (fn) {\r\n        var _this = this;\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var _trace = Trace.traceInvocation(fn);\r\n        var _done = false;\r\n        try {\r\n            var accessor = {\r\n                get: function (id, isOptional) {\r\n                    if (_done) {\r\n                        throw illegalState('service accessor is only valid during the invocation of its target method');\r\n                    }\r\n                    var result = _this._getOrCreateServiceInstance(id, _trace);\r\n                    if (!result && isOptional !== optional) {\r\n                        throw new Error(\"[invokeFunction] unknown service '\" + id + \"'\");\r\n                    }\r\n                    return result;\r\n                }\r\n            };\r\n            return fn.apply(undefined, __spreadArrays([accessor], args));\r\n        }\r\n        finally {\r\n            _done = true;\r\n            _trace.stop();\r\n        }\r\n    };\r\n    InstantiationService.prototype.createInstance = function (ctorOrDescriptor) {\r\n        var rest = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            rest[_i - 1] = arguments[_i];\r\n        }\r\n        var _trace;\r\n        var result;\r\n        if (ctorOrDescriptor instanceof SyncDescriptor) {\r\n            _trace = Trace.traceCreation(ctorOrDescriptor.ctor);\r\n            result = this._createInstance(ctorOrDescriptor.ctor, ctorOrDescriptor.staticArguments.concat(rest), _trace);\r\n        }\r\n        else {\r\n            _trace = Trace.traceCreation(ctorOrDescriptor);\r\n            result = this._createInstance(ctorOrDescriptor, rest, _trace);\r\n        }\r\n        _trace.stop();\r\n        return result;\r\n    };\r\n    InstantiationService.prototype._createInstance = function (ctor, args, _trace) {\r\n        if (args === void 0) { args = []; }\r\n        // arguments defined by service decorators\r\n        var serviceDependencies = _util.getServiceDependencies(ctor).sort(function (a, b) { return a.index - b.index; });\r\n        var serviceArgs = [];\r\n        for (var _i = 0, serviceDependencies_1 = serviceDependencies; _i < serviceDependencies_1.length; _i++) {\r\n            var dependency = serviceDependencies_1[_i];\r\n            var service = this._getOrCreateServiceInstance(dependency.id, _trace);\r\n            if (!service && this._strict && !dependency.optional) {\r\n                throw new Error(\"[createInstance] \" + ctor.name + \" depends on UNKNOWN service \" + dependency.id + \".\");\r\n            }\r\n            serviceArgs.push(service);\r\n        }\r\n        var firstServiceArgPos = serviceDependencies.length > 0 ? serviceDependencies[0].index : args.length;\r\n        // check for argument mismatches, adjust static args if needed\r\n        if (args.length !== firstServiceArgPos) {\r\n            console.warn(\"[createInstance] First service dependency of \" + ctor.name + \" at position \" + (firstServiceArgPos + 1) + \" conflicts with \" + args.length + \" static arguments\");\r\n            var delta = firstServiceArgPos - args.length;\r\n            if (delta > 0) {\r\n                args = args.concat(new Array(delta));\r\n            }\r\n            else {\r\n                args = args.slice(0, firstServiceArgPos);\r\n            }\r\n        }\r\n        // now create the instance\r\n        return new (ctor.bind.apply(ctor, __spreadArrays([void 0], __spreadArrays(args, serviceArgs))))();\r\n    };\r\n    InstantiationService.prototype._setServiceInstance = function (id, instance) {\r\n        if (this._services.get(id) instanceof SyncDescriptor) {\r\n            this._services.set(id, instance);\r\n        }\r\n        else if (this._parent) {\r\n            this._parent._setServiceInstance(id, instance);\r\n        }\r\n        else {\r\n            throw new Error('illegalState - setting UNKNOWN service instance');\r\n        }\r\n    };\r\n    InstantiationService.prototype._getServiceInstanceOrDescriptor = function (id) {\r\n        var instanceOrDesc = this._services.get(id);\r\n        if (!instanceOrDesc && this._parent) {\r\n            return this._parent._getServiceInstanceOrDescriptor(id);\r\n        }\r\n        else {\r\n            return instanceOrDesc;\r\n        }\r\n    };\r\n    InstantiationService.prototype._getOrCreateServiceInstance = function (id, _trace) {\r\n        var thing = this._getServiceInstanceOrDescriptor(id);\r\n        if (thing instanceof SyncDescriptor) {\r\n            return this._createAndCacheServiceInstance(id, thing, _trace.branch(id, true));\r\n        }\r\n        else {\r\n            _trace.branch(id, false);\r\n            return thing;\r\n        }\r\n    };\r\n    InstantiationService.prototype._createAndCacheServiceInstance = function (id, desc, _trace) {\r\n        var graph = new Graph(function (data) { return data.id.toString(); });\r\n        var cycleCount = 0;\r\n        var stack = [{ id: id, desc: desc, _trace: _trace }];\r\n        while (stack.length) {\r\n            var item = stack.pop();\r\n            graph.lookupOrInsertNode(item);\r\n            // a weak but working heuristic for cycle checks\r\n            if (cycleCount++ > 150) {\r\n                throw new CyclicDependencyError(graph);\r\n            }\r\n            // check all dependencies for existence and if they need to be created first\r\n            for (var _i = 0, _a = _util.getServiceDependencies(item.desc.ctor); _i < _a.length; _i++) {\r\n                var dependency = _a[_i];\r\n                var instanceOrDesc = this._getServiceInstanceOrDescriptor(dependency.id);\r\n                if (!instanceOrDesc && !dependency.optional) {\r\n                    console.warn(\"[createInstance] \" + id + \" depends on \" + dependency.id + \" which is NOT registered.\");\r\n                }\r\n                if (instanceOrDesc instanceof SyncDescriptor) {\r\n                    var d = { id: dependency.id, desc: instanceOrDesc, _trace: item._trace.branch(dependency.id, true) };\r\n                    graph.insertEdge(item, d);\r\n                    stack.push(d);\r\n                }\r\n            }\r\n        }\r\n        while (true) {\r\n            var roots = graph.roots();\r\n            // if there is no more roots but still\r\n            // nodes in the graph we have a cycle\r\n            if (roots.length === 0) {\r\n                if (!graph.isEmpty()) {\r\n                    throw new CyclicDependencyError(graph);\r\n                }\r\n                break;\r\n            }\r\n            for (var _b = 0, roots_1 = roots; _b < roots_1.length; _b++) {\r\n                var data = roots_1[_b].data;\r\n                // create instance and overwrite the service collections\r\n                var instance = this._createServiceInstanceWithOwner(data.id, data.desc.ctor, data.desc.staticArguments, data.desc.supportsDelayedInstantiation, data._trace);\r\n                this._setServiceInstance(data.id, instance);\r\n                graph.removeNode(data);\r\n            }\r\n        }\r\n        return this._getServiceInstanceOrDescriptor(id);\r\n    };\r\n    InstantiationService.prototype._createServiceInstanceWithOwner = function (id, ctor, args, supportsDelayedInstantiation, _trace) {\r\n        if (args === void 0) { args = []; }\r\n        if (this._services.get(id) instanceof SyncDescriptor) {\r\n            return this._createServiceInstance(ctor, args, supportsDelayedInstantiation, _trace);\r\n        }\r\n        else if (this._parent) {\r\n            return this._parent._createServiceInstanceWithOwner(id, ctor, args, supportsDelayedInstantiation, _trace);\r\n        }\r\n        else {\r\n            throw new Error(\"illegalState - creating UNKNOWN service instance \" + ctor.name);\r\n        }\r\n    };\r\n    InstantiationService.prototype._createServiceInstance = function (ctor, args, _supportsDelayedInstantiation, _trace) {\r\n        var _this = this;\r\n        if (args === void 0) { args = []; }\r\n        if (!_supportsDelayedInstantiation || !_canUseProxy) {\r\n            // eager instantiation or no support JS proxies (e.g. IE11)\r\n            return this._createInstance(ctor, args, _trace);\r\n        }\r\n        else {\r\n            // Return a proxy object that's backed by an idle value. That\r\n            // strategy is to instantiate services in our idle time or when actually\r\n            // needed but not when injected into a consumer\r\n            var idle_1 = new IdleValue(function () { return _this._createInstance(ctor, args, _trace); });\r\n            return new Proxy(Object.create(null), {\r\n                get: function (target, key) {\r\n                    if (key in target) {\r\n                        return target[key];\r\n                    }\r\n                    var obj = idle_1.getValue();\r\n                    var prop = obj[key];\r\n                    if (typeof prop !== 'function') {\r\n                        return prop;\r\n                    }\r\n                    prop = prop.bind(obj);\r\n                    target[key] = prop;\r\n                    return prop;\r\n                },\r\n                set: function (_target, p, value) {\r\n                    idle_1.getValue()[p] = value;\r\n                    return true;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    return InstantiationService;\r\n}());\r\nexport { InstantiationService };\r\nvar Trace = /** @class */ (function () {\r\n    function Trace(type, name) {\r\n        this.type = type;\r\n        this.name = name;\r\n        this._start = Date.now();\r\n        this._dep = [];\r\n    }\r\n    Trace.traceInvocation = function (ctor) {\r\n        return !_enableTracing ? Trace._None : new Trace(1 /* Invocation */, ctor.name || ctor.toString().substring(0, 42).replace(/\\n/g, ''));\r\n    };\r\n    Trace.traceCreation = function (ctor) {\r\n        return !_enableTracing ? Trace._None : new Trace(0 /* Creation */, ctor.name);\r\n    };\r\n    Trace.prototype.branch = function (id, first) {\r\n        var child = new Trace(2 /* Branch */, id.toString());\r\n        this._dep.push([id, first, child]);\r\n        return child;\r\n    };\r\n    Trace.prototype.stop = function () {\r\n        var dur = Date.now() - this._start;\r\n        Trace._totals += dur;\r\n        var causedCreation = false;\r\n        function printChild(n, trace) {\r\n            var res = [];\r\n            var prefix = new Array(n + 1).join('\\t');\r\n            for (var _i = 0, _a = trace._dep; _i < _a.length; _i++) {\r\n                var _b = _a[_i], id = _b[0], first = _b[1], child = _b[2];\r\n                if (first && child) {\r\n                    causedCreation = true;\r\n                    res.push(prefix + \"CREATES -> \" + id);\r\n                    var nested = printChild(n + 1, child);\r\n                    if (nested) {\r\n                        res.push(nested);\r\n                    }\r\n                }\r\n                else {\r\n                    res.push(prefix + \"uses -> \" + id);\r\n                }\r\n            }\r\n            return res.join('\\n');\r\n        }\r\n        var lines = [\r\n            (this.type === 0 /* Creation */ ? 'CREATE' : 'CALL') + \" \" + this.name,\r\n            \"\" + printChild(1, this),\r\n            \"DONE, took \" + dur.toFixed(2) + \"ms (grand total \" + Trace._totals.toFixed(2) + \"ms)\"\r\n        ];\r\n        if (dur > 2 || causedCreation) {\r\n            console.log(lines.join('\\n'));\r\n        }\r\n    };\r\n    Trace._None = new /** @class */ (function (_super) {\r\n        __extends(class_1, _super);\r\n        function class_1() {\r\n            return _super.call(this, -1, null) || this;\r\n        }\r\n        class_1.prototype.stop = function () { };\r\n        class_1.prototype.branch = function () { return this; };\r\n        return class_1;\r\n    }(Trace));\r\n    Trace._totals = 0;\r\n    return Trace;\r\n}());\r\n//#endregion\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { Emitter, Event } from '../../../base/common/event.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { isIMenuItem, MenuItemAction, MenuRegistry, SubmenuItemAction } from './actions.js';\r\nimport { ICommandService } from '../../commands/common/commands.js';\r\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\r\nvar MenuService = /** @class */ (function () {\r\n    function MenuService(_commandService) {\r\n        this._commandService = _commandService;\r\n        //\r\n    }\r\n    MenuService.prototype.createMenu = function (id, contextKeyService) {\r\n        return new Menu(id, this._commandService, contextKeyService);\r\n    };\r\n    MenuService = __decorate([\r\n        __param(0, ICommandService)\r\n    ], MenuService);\r\n    return MenuService;\r\n}());\r\nexport { MenuService };\r\nvar Menu = /** @class */ (function () {\r\n    function Menu(_id, _commandService, _contextKeyService) {\r\n        var _this = this;\r\n        this._id = _id;\r\n        this._commandService = _commandService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._onDidChange = new Emitter();\r\n        this._dispoables = new DisposableStore();\r\n        this._menuGroups = [];\r\n        this._contextKeys = new Set();\r\n        this._build();\r\n        // rebuild this menu whenever the menu registry reports an\r\n        // event for this MenuId\r\n        this._dispoables.add(Event.debounce(Event.filter(MenuRegistry.onDidChangeMenu, function (menuId) { return menuId === _this._id; }), function () { }, 50)(this._build, this));\r\n        // when context keys change we need to check if the menu also\r\n        // has changed\r\n        this._dispoables.add(Event.debounce(this._contextKeyService.onDidChangeContext, function (last, event) { return last || event.affectsSome(_this._contextKeys); }, 50)(function (e) { return e && _this._onDidChange.fire(undefined); }, this));\r\n    }\r\n    Menu.prototype.dispose = function () {\r\n        this._dispoables.dispose();\r\n        this._onDidChange.dispose();\r\n    };\r\n    Menu.prototype._build = function () {\r\n        // reset\r\n        this._menuGroups.length = 0;\r\n        this._contextKeys.clear();\r\n        var menuItems = MenuRegistry.getMenuItems(this._id);\r\n        var group;\r\n        menuItems.sort(Menu._compareMenuItems);\r\n        for (var _i = 0, menuItems_1 = menuItems; _i < menuItems_1.length; _i++) {\r\n            var item = menuItems_1[_i];\r\n            // group by groupId\r\n            var groupName = item.group || '';\r\n            if (!group || group[0] !== groupName) {\r\n                group = [groupName, []];\r\n                this._menuGroups.push(group);\r\n            }\r\n            group[1].push(item);\r\n            // keep keys for eventing\r\n            Menu._fillInKbExprKeys(item.when, this._contextKeys);\r\n            // keep precondition keys for event if applicable\r\n            if (isIMenuItem(item) && item.command.precondition) {\r\n                Menu._fillInKbExprKeys(item.command.precondition, this._contextKeys);\r\n            }\r\n            // keep toggled keys for event if applicable\r\n            if (isIMenuItem(item) && item.command.toggled) {\r\n                Menu._fillInKbExprKeys(item.command.toggled, this._contextKeys);\r\n            }\r\n        }\r\n        this._onDidChange.fire(this);\r\n    };\r\n    Menu.prototype.getActions = function (options) {\r\n        var result = [];\r\n        for (var _i = 0, _a = this._menuGroups; _i < _a.length; _i++) {\r\n            var group = _a[_i];\r\n            var id = group[0], items = group[1];\r\n            var activeActions = [];\r\n            for (var _b = 0, items_1 = items; _b < items_1.length; _b++) {\r\n                var item = items_1[_b];\r\n                if (this._contextKeyService.contextMatchesRules(item.when)) {\r\n                    var action = isIMenuItem(item)\r\n                        ? new MenuItemAction(item.command, item.alt, options, this._contextKeyService, this._commandService)\r\n                        : new SubmenuItemAction(item);\r\n                    activeActions.push(action);\r\n                }\r\n            }\r\n            if (activeActions.length > 0) {\r\n                result.push([id, activeActions]);\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Menu._fillInKbExprKeys = function (exp, set) {\r\n        if (exp) {\r\n            for (var _i = 0, _a = exp.keys(); _i < _a.length; _i++) {\r\n                var key = _a[_i];\r\n                set.add(key);\r\n            }\r\n        }\r\n    };\r\n    Menu._compareMenuItems = function (a, b) {\r\n        var aGroup = a.group;\r\n        var bGroup = b.group;\r\n        if (aGroup !== bGroup) {\r\n            // Falsy groups come last\r\n            if (!aGroup) {\r\n                return 1;\r\n            }\r\n            else if (!bGroup) {\r\n                return -1;\r\n            }\r\n            // 'navigation' group comes first\r\n            if (aGroup === 'navigation') {\r\n                return -1;\r\n            }\r\n            else if (bGroup === 'navigation') {\r\n                return 1;\r\n            }\r\n            // lexical sort for groups\r\n            var value = aGroup.localeCompare(bGroup);\r\n            if (value !== 0) {\r\n                return value;\r\n            }\r\n        }\r\n        // sort on priority - default is 0\r\n        var aPrio = a.order || 0;\r\n        var bPrio = b.order || 0;\r\n        if (aPrio < bPrio) {\r\n            return -1;\r\n        }\r\n        else if (aPrio > bPrio) {\r\n            return 1;\r\n        }\r\n        // sort on titles\r\n        return Menu._compareTitles(isIMenuItem(a) ? a.command.title : a.title, isIMenuItem(b) ? b.command.title : b.title);\r\n    };\r\n    Menu._compareTitles = function (a, b) {\r\n        var aStr = typeof a === 'string' ? a : a.value;\r\n        var bStr = typeof b === 'string' ? b : b.value;\r\n        return aStr.localeCompare(bStr);\r\n    };\r\n    Menu = __decorate([\r\n        __param(1, ICommandService),\r\n        __param(2, IContextKeyService)\r\n    ], Menu);\r\n    return Menu;\r\n}());\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { IMarkerService, MarkerSeverity } from '../../../platform/markers/common/markers.js';\r\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\r\nimport { OverviewRulerLane, MinimapPosition } from '../model.js';\r\nimport { themeColorFromId } from '../../../platform/theme/common/themeService.js';\r\nimport { overviewRulerWarning, overviewRulerInfo, overviewRulerError } from '../view/editorColorRegistry.js';\r\nimport { IModelService } from './modelService.js';\r\nimport { Range } from '../core/range.js';\r\nimport { keys } from '../../../base/common/map.js';\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { withUndefinedAsNull } from '../../../base/common/types.js';\r\nimport { minimapWarning, minimapError } from '../../../platform/theme/common/colorRegistry.js';\r\nfunction MODEL_ID(resource) {\r\n    return resource.toString();\r\n}\r\nvar MarkerDecorations = /** @class */ (function (_super) {\r\n    __extends(MarkerDecorations, _super);\r\n    function MarkerDecorations(model) {\r\n        var _this = _super.call(this) || this;\r\n        _this.model = model;\r\n        _this._markersData = new Map();\r\n        _this._register(toDisposable(function () {\r\n            _this.model.deltaDecorations(keys(_this._markersData), []);\r\n            _this._markersData.clear();\r\n        }));\r\n        return _this;\r\n    }\r\n    MarkerDecorations.prototype.update = function (markers, newDecorations) {\r\n        var oldIds = keys(this._markersData);\r\n        this._markersData.clear();\r\n        var ids = this.model.deltaDecorations(oldIds, newDecorations);\r\n        for (var index = 0; index < ids.length; index++) {\r\n            this._markersData.set(ids[index], markers[index]);\r\n        }\r\n    };\r\n    MarkerDecorations.prototype.getMarker = function (decoration) {\r\n        return this._markersData.get(decoration.id);\r\n    };\r\n    return MarkerDecorations;\r\n}(Disposable));\r\nvar MarkerDecorationsService = /** @class */ (function (_super) {\r\n    __extends(MarkerDecorationsService, _super);\r\n    function MarkerDecorationsService(modelService, _markerService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._markerService = _markerService;\r\n        _this._onDidChangeMarker = _this._register(new Emitter());\r\n        _this._markerDecorations = new Map();\r\n        modelService.getModels().forEach(function (model) { return _this._onModelAdded(model); });\r\n        _this._register(modelService.onModelAdded(_this._onModelAdded, _this));\r\n        _this._register(modelService.onModelRemoved(_this._onModelRemoved, _this));\r\n        _this._register(_this._markerService.onMarkerChanged(_this._handleMarkerChange, _this));\r\n        return _this;\r\n    }\r\n    MarkerDecorationsService.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this._markerDecorations.forEach(function (value) { return value.dispose(); });\r\n        this._markerDecorations.clear();\r\n    };\r\n    MarkerDecorationsService.prototype.getMarker = function (model, decoration) {\r\n        var markerDecorations = this._markerDecorations.get(MODEL_ID(model.uri));\r\n        return markerDecorations ? withUndefinedAsNull(markerDecorations.getMarker(decoration)) : null;\r\n    };\r\n    MarkerDecorationsService.prototype._handleMarkerChange = function (changedResources) {\r\n        var _this = this;\r\n        changedResources.forEach(function (resource) {\r\n            var markerDecorations = _this._markerDecorations.get(MODEL_ID(resource));\r\n            if (markerDecorations) {\r\n                _this._updateDecorations(markerDecorations);\r\n            }\r\n        });\r\n    };\r\n    MarkerDecorationsService.prototype._onModelAdded = function (model) {\r\n        var markerDecorations = new MarkerDecorations(model);\r\n        this._markerDecorations.set(MODEL_ID(model.uri), markerDecorations);\r\n        this._updateDecorations(markerDecorations);\r\n    };\r\n    MarkerDecorationsService.prototype._onModelRemoved = function (model) {\r\n        var _this = this;\r\n        var markerDecorations = this._markerDecorations.get(MODEL_ID(model.uri));\r\n        if (markerDecorations) {\r\n            markerDecorations.dispose();\r\n            this._markerDecorations.delete(MODEL_ID(model.uri));\r\n        }\r\n        // clean up markers for internal, transient models\r\n        if (model.uri.scheme === Schemas.inMemory\r\n            || model.uri.scheme === Schemas.internal\r\n            || model.uri.scheme === Schemas.vscode) {\r\n            if (this._markerService) {\r\n                this._markerService.read({ resource: model.uri }).map(function (marker) { return marker.owner; }).forEach(function (owner) { return _this._markerService.remove(owner, [model.uri]); });\r\n            }\r\n        }\r\n    };\r\n    MarkerDecorationsService.prototype._updateDecorations = function (markerDecorations) {\r\n        var _this = this;\r\n        // Limit to the first 500 errors/warnings\r\n        var markers = this._markerService.read({ resource: markerDecorations.model.uri, take: 500 });\r\n        var newModelDecorations = markers.map(function (marker) {\r\n            return {\r\n                range: _this._createDecorationRange(markerDecorations.model, marker),\r\n                options: _this._createDecorationOption(marker)\r\n            };\r\n        });\r\n        markerDecorations.update(markers, newModelDecorations);\r\n        this._onDidChangeMarker.fire(markerDecorations.model);\r\n    };\r\n    MarkerDecorationsService.prototype._createDecorationRange = function (model, rawMarker) {\r\n        var ret = Range.lift(rawMarker);\r\n        if (rawMarker.severity === MarkerSeverity.Hint && !this._hasMarkerTag(rawMarker, 1 /* Unnecessary */) && !this._hasMarkerTag(rawMarker, 2 /* Deprecated */)) {\r\n            // * never render hints on multiple lines\r\n            // * make enough space for three dots\r\n            ret = ret.setEndPosition(ret.startLineNumber, ret.startColumn + 2);\r\n        }\r\n        ret = model.validateRange(ret);\r\n        if (ret.isEmpty()) {\r\n            var word = model.getWordAtPosition(ret.getStartPosition());\r\n            if (word) {\r\n                ret = new Range(ret.startLineNumber, word.startColumn, ret.endLineNumber, word.endColumn);\r\n            }\r\n            else {\r\n                var maxColumn = model.getLineLastNonWhitespaceColumn(ret.startLineNumber) ||\r\n                    model.getLineMaxColumn(ret.startLineNumber);\r\n                if (maxColumn === 1) {\r\n                    // empty line\r\n                    // console.warn('marker on empty line:', marker);\r\n                }\r\n                else if (ret.endColumn >= maxColumn) {\r\n                    // behind eol\r\n                    ret = new Range(ret.startLineNumber, maxColumn - 1, ret.endLineNumber, maxColumn);\r\n                }\r\n                else {\r\n                    // extend marker to width = 1\r\n                    ret = new Range(ret.startLineNumber, ret.startColumn, ret.endLineNumber, ret.endColumn + 1);\r\n                }\r\n            }\r\n        }\r\n        else if (rawMarker.endColumn === Number.MAX_VALUE && rawMarker.startColumn === 1 && ret.startLineNumber === ret.endLineNumber) {\r\n            var minColumn = model.getLineFirstNonWhitespaceColumn(rawMarker.startLineNumber);\r\n            if (minColumn < ret.endColumn) {\r\n                ret = new Range(ret.startLineNumber, minColumn, ret.endLineNumber, ret.endColumn);\r\n                rawMarker.startColumn = minColumn;\r\n            }\r\n        }\r\n        return ret;\r\n    };\r\n    MarkerDecorationsService.prototype._createDecorationOption = function (marker) {\r\n        var className;\r\n        var color = undefined;\r\n        var zIndex;\r\n        var inlineClassName = undefined;\r\n        var minimap;\r\n        switch (marker.severity) {\r\n            case MarkerSeverity.Hint:\r\n                if (this._hasMarkerTag(marker, 2 /* Deprecated */)) {\r\n                    className = undefined;\r\n                }\r\n                else if (this._hasMarkerTag(marker, 1 /* Unnecessary */)) {\r\n                    className = \"squiggly-unnecessary\" /* EditorUnnecessaryDecoration */;\r\n                }\r\n                else {\r\n                    className = \"squiggly-hint\" /* EditorHintDecoration */;\r\n                }\r\n                zIndex = 0;\r\n                break;\r\n            case MarkerSeverity.Warning:\r\n                className = \"squiggly-warning\" /* EditorWarningDecoration */;\r\n                color = themeColorFromId(overviewRulerWarning);\r\n                zIndex = 20;\r\n                minimap = {\r\n                    color: themeColorFromId(minimapWarning),\r\n                    position: MinimapPosition.Inline\r\n                };\r\n                break;\r\n            case MarkerSeverity.Info:\r\n                className = \"squiggly-info\" /* EditorInfoDecoration */;\r\n                color = themeColorFromId(overviewRulerInfo);\r\n                zIndex = 10;\r\n                break;\r\n            case MarkerSeverity.Error:\r\n            default:\r\n                className = \"squiggly-error\" /* EditorErrorDecoration */;\r\n                color = themeColorFromId(overviewRulerError);\r\n                zIndex = 30;\r\n                minimap = {\r\n                    color: themeColorFromId(minimapError),\r\n                    position: MinimapPosition.Inline\r\n                };\r\n                break;\r\n        }\r\n        if (marker.tags) {\r\n            if (marker.tags.indexOf(1 /* Unnecessary */) !== -1) {\r\n                inlineClassName = \"squiggly-inline-unnecessary\" /* EditorUnnecessaryInlineDecoration */;\r\n            }\r\n            if (marker.tags.indexOf(2 /* Deprecated */) !== -1) {\r\n                inlineClassName = \"squiggly-inline-deprecated\" /* EditorDeprecatedInlineDecoration */;\r\n            }\r\n        }\r\n        return {\r\n            stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n            className: className,\r\n            showIfCollapsed: true,\r\n            overviewRuler: {\r\n                color: color,\r\n                position: OverviewRulerLane.Right\r\n            },\r\n            minimap: minimap,\r\n            zIndex: zIndex,\r\n            inlineClassName: inlineClassName,\r\n        };\r\n    };\r\n    MarkerDecorationsService.prototype._hasMarkerTag = function (marker, tag) {\r\n        if (marker.tags) {\r\n            return marker.tags.indexOf(tag) >= 0;\r\n        }\r\n        return false;\r\n    };\r\n    MarkerDecorationsService = __decorate([\r\n        __param(0, IModelService),\r\n        __param(1, IMarkerService)\r\n    ], MarkerDecorationsService);\r\n    return MarkerDecorationsService;\r\n}(Disposable));\r\nexport { MarkerDecorationsService };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { IBulkEditService } from '../../browser/services/bulkEditService.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\r\nimport { EditorWorkerServiceImpl } from '../../common/services/editorWorkerServiceImpl.js';\r\nimport { IModeService } from '../../common/services/modeService.js';\r\nimport { ModeServiceImpl } from '../../common/services/modeServiceImpl.js';\r\nimport { IModelService } from '../../common/services/modelService.js';\r\nimport { ModelServiceImpl } from '../../common/services/modelServiceImpl.js';\r\nimport { ITextResourceConfigurationService, ITextResourcePropertiesService } from '../../common/services/textResourceConfigurationService.js';\r\nimport { SimpleBulkEditService, SimpleConfigurationService, SimpleDialogService, SimpleNotificationService, SimpleEditorProgressService, SimpleResourceConfigurationService, SimpleResourcePropertiesService, SimpleUriLabelService, SimpleWorkspaceContextService, StandaloneCommandService, StandaloneKeybindingService, StandaloneTelemetryService, SimpleLayoutService } from './simpleServices.js';\r\nimport { StandaloneCodeEditorServiceImpl } from './standaloneCodeServiceImpl.js';\r\nimport { StandaloneThemeServiceImpl } from './standaloneThemeServiceImpl.js';\r\nimport { IStandaloneThemeService } from '../common/standaloneThemeService.js';\r\nimport { IMenuService } from '../../../platform/actions/common/actions.js';\r\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nimport { ContextKeyService } from '../../../platform/contextkey/browser/contextKeyService.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { ContextMenuService } from '../../../platform/contextview/browser/contextMenuService.js';\r\nimport { IContextMenuService, IContextViewService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { ContextViewService } from '../../../platform/contextview/browser/contextViewService.js';\r\nimport { IDialogService } from '../../../platform/dialogs/common/dialogs.js';\r\nimport { IInstantiationService, createDecorator } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { InstantiationService } from '../../../platform/instantiation/common/instantiationService.js';\r\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { ILabelService } from '../../../platform/label/common/label.js';\r\nimport { IListService, ListService } from '../../../platform/list/browser/listService.js';\r\nimport { ILogService, NullLogService } from '../../../platform/log/common/log.js';\r\nimport { MarkerService } from '../../../platform/markers/common/markerService.js';\r\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\r\nimport { IStorageService, InMemoryStorageService } from '../../../platform/storage/common/storage.js';\r\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nimport { IWorkspaceContextService } from '../../../platform/workspace/common/workspace.js';\r\nimport { MenuService } from '../../../platform/actions/common/menuService.js';\r\nimport { IMarkerDecorationsService } from '../../common/services/markersDecorationService.js';\r\nimport { MarkerDecorationsService } from '../../common/services/markerDecorationsServiceImpl.js';\r\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\r\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\r\nimport { getSingletonServiceDescriptors } from '../../../platform/instantiation/common/extensions.js';\r\nimport { AccessibilityService } from '../../../platform/accessibility/common/accessibilityService.js';\r\nexport var StaticServices;\r\n(function (StaticServices) {\r\n    var _serviceCollection = new ServiceCollection();\r\n    var LazyStaticService = /** @class */ (function () {\r\n        function LazyStaticService(serviceId, factory) {\r\n            this._serviceId = serviceId;\r\n            this._factory = factory;\r\n            this._value = null;\r\n        }\r\n        Object.defineProperty(LazyStaticService.prototype, \"id\", {\r\n            get: function () { return this._serviceId; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        LazyStaticService.prototype.get = function (overrides) {\r\n            if (!this._value) {\r\n                if (overrides) {\r\n                    this._value = overrides[this._serviceId.toString()];\r\n                }\r\n                if (!this._value) {\r\n                    this._value = this._factory(overrides);\r\n                }\r\n                if (!this._value) {\r\n                    throw new Error('Service ' + this._serviceId + ' is missing!');\r\n                }\r\n                _serviceCollection.set(this._serviceId, this._value);\r\n            }\r\n            return this._value;\r\n        };\r\n        return LazyStaticService;\r\n    }());\r\n    StaticServices.LazyStaticService = LazyStaticService;\r\n    var _all = [];\r\n    function define(serviceId, factory) {\r\n        var r = new LazyStaticService(serviceId, factory);\r\n        _all.push(r);\r\n        return r;\r\n    }\r\n    function init(overrides) {\r\n        // Create a fresh service collection\r\n        var result = new ServiceCollection();\r\n        // make sure to add all services that use `registerSingleton`\r\n        for (var _i = 0, _a = getSingletonServiceDescriptors(); _i < _a.length; _i++) {\r\n            var _b = _a[_i], id = _b[0], descriptor = _b[1];\r\n            result.set(id, descriptor);\r\n        }\r\n        // Initialize the service collection with the overrides\r\n        for (var serviceId in overrides) {\r\n            if (overrides.hasOwnProperty(serviceId)) {\r\n                result.set(createDecorator(serviceId), overrides[serviceId]);\r\n            }\r\n        }\r\n        // Make sure the same static services are present in all service collections\r\n        _all.forEach(function (service) { return result.set(service.id, service.get(overrides)); });\r\n        // Ensure the collection gets the correct instantiation service\r\n        var instantiationService = new InstantiationService(result, true);\r\n        result.set(IInstantiationService, instantiationService);\r\n        return [result, instantiationService];\r\n    }\r\n    StaticServices.init = init;\r\n    StaticServices.instantiationService = define(IInstantiationService, function () { return new InstantiationService(_serviceCollection, true); });\r\n    var configurationServiceImpl = new SimpleConfigurationService();\r\n    StaticServices.configurationService = define(IConfigurationService, function () { return configurationServiceImpl; });\r\n    StaticServices.resourceConfigurationService = define(ITextResourceConfigurationService, function () { return new SimpleResourceConfigurationService(configurationServiceImpl); });\r\n    StaticServices.resourcePropertiesService = define(ITextResourcePropertiesService, function () { return new SimpleResourcePropertiesService(configurationServiceImpl); });\r\n    StaticServices.contextService = define(IWorkspaceContextService, function () { return new SimpleWorkspaceContextService(); });\r\n    StaticServices.labelService = define(ILabelService, function () { return new SimpleUriLabelService(); });\r\n    StaticServices.telemetryService = define(ITelemetryService, function () { return new StandaloneTelemetryService(); });\r\n    StaticServices.dialogService = define(IDialogService, function () { return new SimpleDialogService(); });\r\n    StaticServices.notificationService = define(INotificationService, function () { return new SimpleNotificationService(); });\r\n    StaticServices.markerService = define(IMarkerService, function () { return new MarkerService(); });\r\n    StaticServices.modeService = define(IModeService, function (o) { return new ModeServiceImpl(); });\r\n    StaticServices.standaloneThemeService = define(IStandaloneThemeService, function () { return new StandaloneThemeServiceImpl(); });\r\n    StaticServices.logService = define(ILogService, function () { return new NullLogService(); });\r\n    StaticServices.modelService = define(IModelService, function (o) { return new ModelServiceImpl(StaticServices.configurationService.get(o), StaticServices.resourcePropertiesService.get(o), StaticServices.standaloneThemeService.get(o), StaticServices.logService.get(o)); });\r\n    StaticServices.markerDecorationsService = define(IMarkerDecorationsService, function (o) { return new MarkerDecorationsService(StaticServices.modelService.get(o), StaticServices.markerService.get(o)); });\r\n    StaticServices.codeEditorService = define(ICodeEditorService, function (o) { return new StandaloneCodeEditorServiceImpl(StaticServices.standaloneThemeService.get(o)); });\r\n    StaticServices.editorProgressService = define(IEditorProgressService, function () { return new SimpleEditorProgressService(); });\r\n    StaticServices.storageService = define(IStorageService, function () { return new InMemoryStorageService(); });\r\n    StaticServices.editorWorkerService = define(IEditorWorkerService, function (o) { return new EditorWorkerServiceImpl(StaticServices.modelService.get(o), StaticServices.resourceConfigurationService.get(o), StaticServices.logService.get(o)); });\r\n})(StaticServices || (StaticServices = {}));\r\nvar DynamicStandaloneServices = /** @class */ (function (_super) {\r\n    __extends(DynamicStandaloneServices, _super);\r\n    function DynamicStandaloneServices(domElement, overrides) {\r\n        var _this = _super.call(this) || this;\r\n        var _a = StaticServices.init(overrides), _serviceCollection = _a[0], _instantiationService = _a[1];\r\n        _this._serviceCollection = _serviceCollection;\r\n        _this._instantiationService = _instantiationService;\r\n        var configurationService = _this.get(IConfigurationService);\r\n        var notificationService = _this.get(INotificationService);\r\n        var telemetryService = _this.get(ITelemetryService);\r\n        var themeService = _this.get(IThemeService);\r\n        var ensure = function (serviceId, factory) {\r\n            var value = null;\r\n            if (overrides) {\r\n                value = overrides[serviceId.toString()];\r\n            }\r\n            if (!value) {\r\n                value = factory();\r\n            }\r\n            _this._serviceCollection.set(serviceId, value);\r\n            return value;\r\n        };\r\n        var contextKeyService = ensure(IContextKeyService, function () { return _this._register(new ContextKeyService(configurationService)); });\r\n        ensure(IAccessibilityService, function () { return new AccessibilityService(contextKeyService, configurationService); });\r\n        ensure(IListService, function () { return new ListService(themeService); });\r\n        var commandService = ensure(ICommandService, function () { return new StandaloneCommandService(_this._instantiationService); });\r\n        var keybindingService = ensure(IKeybindingService, function () { return _this._register(new StandaloneKeybindingService(contextKeyService, commandService, telemetryService, notificationService, domElement)); });\r\n        var layoutService = ensure(ILayoutService, function () { return new SimpleLayoutService(domElement); });\r\n        var contextViewService = ensure(IContextViewService, function () { return _this._register(new ContextViewService(layoutService)); });\r\n        ensure(IContextMenuService, function () {\r\n            var contextMenuService = new ContextMenuService(telemetryService, notificationService, contextViewService, keybindingService, themeService);\r\n            contextMenuService.configure({ blockMouse: false }); // we do not want that in the standalone editor\r\n            return _this._register(contextMenuService);\r\n        });\r\n        ensure(IMenuService, function () { return new MenuService(commandService); });\r\n        ensure(IBulkEditService, function () { return new SimpleBulkEditService(StaticServices.modelService.get(IModelService)); });\r\n        return _this;\r\n    }\r\n    DynamicStandaloneServices.prototype.get = function (serviceId) {\r\n        var r = this._serviceCollection.get(serviceId);\r\n        if (!r) {\r\n            throw new Error('Missing service ' + serviceId);\r\n        }\r\n        return r;\r\n    };\r\n    DynamicStandaloneServices.prototype.set = function (serviceId, instance) {\r\n        this._serviceCollection.set(serviceId, instance);\r\n    };\r\n    DynamicStandaloneServices.prototype.has = function (serviceId) {\r\n        return this._serviceCollection.has(serviceId);\r\n    };\r\n    return DynamicStandaloneServices;\r\n}(Disposable));\r\nexport { DynamicStandaloneServices };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from './accessibility.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\r\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\r\nvar AccessibilityService = /** @class */ (function (_super) {\r\n    __extends(AccessibilityService, _super);\r\n    function AccessibilityService(_contextKeyService, _configurationService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._contextKeyService = _contextKeyService;\r\n        _this._configurationService = _configurationService;\r\n        _this._accessibilitySupport = 0 /* Unknown */;\r\n        _this._onDidChangeScreenReaderOptimized = new Emitter();\r\n        _this._accessibilityModeEnabledContext = CONTEXT_ACCESSIBILITY_MODE_ENABLED.bindTo(_this._contextKeyService);\r\n        var updateContextKey = function () { return _this._accessibilityModeEnabledContext.set(_this.isScreenReaderOptimized()); };\r\n        _this._register(_this._configurationService.onDidChangeConfiguration(function (e) {\r\n            if (e.affectsConfiguration('editor.accessibilitySupport')) {\r\n                updateContextKey();\r\n                _this._onDidChangeScreenReaderOptimized.fire();\r\n            }\r\n        }));\r\n        updateContextKey();\r\n        _this.onDidChangeScreenReaderOptimized(function () { return updateContextKey(); });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(AccessibilityService.prototype, \"onDidChangeScreenReaderOptimized\", {\r\n        get: function () {\r\n            return this._onDidChangeScreenReaderOptimized.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AccessibilityService.prototype.isScreenReaderOptimized = function () {\r\n        var config = this._configurationService.getValue('editor.accessibilitySupport');\r\n        return config === 'on' || (config === 'auto' && this._accessibilitySupport === 2 /* Enabled */);\r\n    };\r\n    AccessibilityService.prototype.getAccessibilitySupport = function () {\r\n        return this._accessibilitySupport;\r\n    };\r\n    AccessibilityService = __decorate([\r\n        __param(0, IContextKeyService),\r\n        __param(1, IConfigurationService)\r\n    ], AccessibilityService);\r\n    return AccessibilityService;\r\n}(Disposable));\r\nexport { AccessibilityService };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './standalone-tokens.css';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { OpenerService } from '../../browser/services/openerService.js';\r\nimport { DiffNavigator } from '../../browser/widget/diffNavigator.js';\r\nimport { EditorOptions, ConfigurationChangedEvent } from '../../common/config/editorOptions.js';\r\nimport { BareFontInfo, FontInfo } from '../../common/config/fontInfo.js';\r\nimport { EditorType } from '../../common/editorCommon.js';\r\nimport { FindMatch, TextModelResolvedOptions } from '../../common/model.js';\r\nimport * as modes from '../../common/modes.js';\r\nimport { NULL_STATE, nullTokenize } from '../../common/modes/nullMode.js';\r\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\r\nimport { ITextModelService } from '../../common/services/resolverService.js';\r\nimport { createWebWorker as actualCreateWebWorker } from '../../common/services/webWorker.js';\r\nimport * as standaloneEnums from '../../common/standalone/standaloneEnums.js';\r\nimport { Colorizer } from './colorizer.js';\r\nimport { SimpleEditorModelResolverService } from './simpleServices.js';\r\nimport { StandaloneDiffEditor, StandaloneEditor } from './standaloneCodeEditor.js';\r\nimport { DynamicStandaloneServices, StaticServices } from './standaloneServices.js';\r\nimport { IStandaloneThemeService } from '../common/standaloneThemeService.js';\r\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IContextViewService, IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\r\nimport { clearAllFontInfos } from '../../browser/config/configuration.js';\r\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\r\nfunction withAllStandaloneServices(domElement, override, callback) {\r\n    var services = new DynamicStandaloneServices(domElement, override);\r\n    var simpleEditorModelResolverService = null;\r\n    if (!services.has(ITextModelService)) {\r\n        simpleEditorModelResolverService = new SimpleEditorModelResolverService(StaticServices.modelService.get());\r\n        services.set(ITextModelService, simpleEditorModelResolverService);\r\n    }\r\n    if (!services.has(IOpenerService)) {\r\n        services.set(IOpenerService, new OpenerService(services.get(ICodeEditorService), services.get(ICommandService)));\r\n    }\r\n    var result = callback(services);\r\n    if (simpleEditorModelResolverService) {\r\n        simpleEditorModelResolverService.setEditor(result);\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Create a new editor under `domElement`.\r\n * `domElement` should be empty (not contain other dom nodes).\r\n * The editor will read the size of `domElement`.\r\n */\r\nexport function create(domElement, options, override) {\r\n    return withAllStandaloneServices(domElement, override || {}, function (services) {\r\n        return new StandaloneEditor(domElement, options, services, services.get(IInstantiationService), services.get(ICodeEditorService), services.get(ICommandService), services.get(IContextKeyService), services.get(IKeybindingService), services.get(IContextViewService), services.get(IStandaloneThemeService), services.get(INotificationService), services.get(IConfigurationService), services.get(IAccessibilityService));\r\n    });\r\n}\r\n/**\r\n * Emitted when an editor is created.\r\n * Creating a diff editor might cause this listener to be invoked with the two editors.\r\n * @event\r\n */\r\nexport function onDidCreateEditor(listener) {\r\n    return StaticServices.codeEditorService.get().onCodeEditorAdd(function (editor) {\r\n        listener(editor);\r\n    });\r\n}\r\n/**\r\n * Create a new diff editor under `domElement`.\r\n * `domElement` should be empty (not contain other dom nodes).\r\n * The editor will read the size of `domElement`.\r\n */\r\nexport function createDiffEditor(domElement, options, override) {\r\n    return withAllStandaloneServices(domElement, override || {}, function (services) {\r\n        return new StandaloneDiffEditor(domElement, options, services, services.get(IInstantiationService), services.get(IContextKeyService), services.get(IKeybindingService), services.get(IContextViewService), services.get(IEditorWorkerService), services.get(ICodeEditorService), services.get(IStandaloneThemeService), services.get(INotificationService), services.get(IConfigurationService), services.get(IContextMenuService), services.get(IEditorProgressService), null);\r\n    });\r\n}\r\nexport function createDiffNavigator(diffEditor, opts) {\r\n    return new DiffNavigator(diffEditor, opts);\r\n}\r\nfunction doCreateModel(value, languageSelection, uri) {\r\n    return StaticServices.modelService.get().createModel(value, languageSelection, uri);\r\n}\r\n/**\r\n * Create a new editor model.\r\n * You can specify the language that should be set for this model or let the language be inferred from the `uri`.\r\n */\r\nexport function createModel(value, language, uri) {\r\n    value = value || '';\r\n    if (!language) {\r\n        var firstLF = value.indexOf('\\n');\r\n        var firstLine = value;\r\n        if (firstLF !== -1) {\r\n            firstLine = value.substring(0, firstLF);\r\n        }\r\n        return doCreateModel(value, StaticServices.modeService.get().createByFilepathOrFirstLine(uri || null, firstLine), uri);\r\n    }\r\n    return doCreateModel(value, StaticServices.modeService.get().create(language), uri);\r\n}\r\n/**\r\n * Change the language for a model.\r\n */\r\nexport function setModelLanguage(model, languageId) {\r\n    StaticServices.modelService.get().setMode(model, StaticServices.modeService.get().create(languageId));\r\n}\r\n/**\r\n * Set the markers for a model.\r\n */\r\nexport function setModelMarkers(model, owner, markers) {\r\n    if (model) {\r\n        StaticServices.markerService.get().changeOne(owner, model.uri, markers);\r\n    }\r\n}\r\n/**\r\n * Get markers for owner and/or resource\r\n *\r\n * @returns list of markers\r\n */\r\nexport function getModelMarkers(filter) {\r\n    return StaticServices.markerService.get().read(filter);\r\n}\r\n/**\r\n * Get the model that has `uri` if it exists.\r\n */\r\nexport function getModel(uri) {\r\n    return StaticServices.modelService.get().getModel(uri);\r\n}\r\n/**\r\n * Get all the created models.\r\n */\r\nexport function getModels() {\r\n    return StaticServices.modelService.get().getModels();\r\n}\r\n/**\r\n * Emitted when a model is created.\r\n * @event\r\n */\r\nexport function onDidCreateModel(listener) {\r\n    return StaticServices.modelService.get().onModelAdded(listener);\r\n}\r\n/**\r\n * Emitted right before a model is disposed.\r\n * @event\r\n */\r\nexport function onWillDisposeModel(listener) {\r\n    return StaticServices.modelService.get().onModelRemoved(listener);\r\n}\r\n/**\r\n * Emitted when a different language is set to a model.\r\n * @event\r\n */\r\nexport function onDidChangeModelLanguage(listener) {\r\n    return StaticServices.modelService.get().onModelModeChanged(function (e) {\r\n        listener({\r\n            model: e.model,\r\n            oldLanguage: e.oldModeId\r\n        });\r\n    });\r\n}\r\n/**\r\n * Create a new web worker that has model syncing capabilities built in.\r\n * Specify an AMD module to load that will `create` an object that will be proxied.\r\n */\r\nexport function createWebWorker(opts) {\r\n    return actualCreateWebWorker(StaticServices.modelService.get(), opts);\r\n}\r\n/**\r\n * Colorize the contents of `domNode` using attribute `data-lang`.\r\n */\r\nexport function colorizeElement(domNode, options) {\r\n    return Colorizer.colorizeElement(StaticServices.standaloneThemeService.get(), StaticServices.modeService.get(), domNode, options);\r\n}\r\n/**\r\n * Colorize `text` using language `languageId`.\r\n */\r\nexport function colorize(text, languageId, options) {\r\n    return Colorizer.colorize(StaticServices.modeService.get(), text, languageId, options);\r\n}\r\n/**\r\n * Colorize a line in a model.\r\n */\r\nexport function colorizeModelLine(model, lineNumber, tabSize) {\r\n    if (tabSize === void 0) { tabSize = 4; }\r\n    return Colorizer.colorizeModelLine(model, lineNumber, tabSize);\r\n}\r\n/**\r\n * @internal\r\n */\r\nfunction getSafeTokenizationSupport(language) {\r\n    var tokenizationSupport = modes.TokenizationRegistry.get(language);\r\n    if (tokenizationSupport) {\r\n        return tokenizationSupport;\r\n    }\r\n    return {\r\n        getInitialState: function () { return NULL_STATE; },\r\n        tokenize: function (line, state, deltaOffset) { return nullTokenize(language, line, state, deltaOffset); }\r\n    };\r\n}\r\n/**\r\n * Tokenize `text` using language `languageId`\r\n */\r\nexport function tokenize(text, languageId) {\r\n    var modeService = StaticServices.modeService.get();\r\n    // Needed in order to get the mode registered for subsequent look-ups\r\n    modeService.triggerMode(languageId);\r\n    var tokenizationSupport = getSafeTokenizationSupport(languageId);\r\n    var lines = text.split(/\\r\\n|\\r|\\n/);\r\n    var result = [];\r\n    var state = tokenizationSupport.getInitialState();\r\n    for (var i = 0, len = lines.length; i < len; i++) {\r\n        var line = lines[i];\r\n        var tokenizationResult = tokenizationSupport.tokenize(line, state, 0);\r\n        result[i] = tokenizationResult.tokens;\r\n        state = tokenizationResult.endState;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Define a new theme or update an existing theme.\r\n */\r\nexport function defineTheme(themeName, themeData) {\r\n    StaticServices.standaloneThemeService.get().defineTheme(themeName, themeData);\r\n}\r\n/**\r\n * Switches to a theme.\r\n */\r\nexport function setTheme(themeName) {\r\n    StaticServices.standaloneThemeService.get().setTheme(themeName);\r\n}\r\n/**\r\n * Clears all cached font measurements and triggers re-measurement.\r\n */\r\nexport function remeasureFonts() {\r\n    clearAllFontInfos();\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function createMonacoEditorAPI() {\r\n    return {\r\n        // methods\r\n        create: create,\r\n        onDidCreateEditor: onDidCreateEditor,\r\n        createDiffEditor: createDiffEditor,\r\n        createDiffNavigator: createDiffNavigator,\r\n        createModel: createModel,\r\n        setModelLanguage: setModelLanguage,\r\n        setModelMarkers: setModelMarkers,\r\n        getModelMarkers: getModelMarkers,\r\n        getModels: getModels,\r\n        getModel: getModel,\r\n        onDidCreateModel: onDidCreateModel,\r\n        onWillDisposeModel: onWillDisposeModel,\r\n        onDidChangeModelLanguage: onDidChangeModelLanguage,\r\n        createWebWorker: createWebWorker,\r\n        colorizeElement: colorizeElement,\r\n        colorize: colorize,\r\n        colorizeModelLine: colorizeModelLine,\r\n        tokenize: tokenize,\r\n        defineTheme: defineTheme,\r\n        setTheme: setTheme,\r\n        remeasureFonts: remeasureFonts,\r\n        // enums\r\n        AccessibilitySupport: standaloneEnums.AccessibilitySupport,\r\n        ContentWidgetPositionPreference: standaloneEnums.ContentWidgetPositionPreference,\r\n        CursorChangeReason: standaloneEnums.CursorChangeReason,\r\n        DefaultEndOfLine: standaloneEnums.DefaultEndOfLine,\r\n        EditorAutoIndentStrategy: standaloneEnums.EditorAutoIndentStrategy,\r\n        EditorOption: standaloneEnums.EditorOption,\r\n        EndOfLinePreference: standaloneEnums.EndOfLinePreference,\r\n        EndOfLineSequence: standaloneEnums.EndOfLineSequence,\r\n        MinimapPosition: standaloneEnums.MinimapPosition,\r\n        MouseTargetType: standaloneEnums.MouseTargetType,\r\n        OverlayWidgetPositionPreference: standaloneEnums.OverlayWidgetPositionPreference,\r\n        OverviewRulerLane: standaloneEnums.OverviewRulerLane,\r\n        RenderLineNumbersType: standaloneEnums.RenderLineNumbersType,\r\n        RenderMinimap: standaloneEnums.RenderMinimap,\r\n        ScrollbarVisibility: standaloneEnums.ScrollbarVisibility,\r\n        ScrollType: standaloneEnums.ScrollType,\r\n        TextEditorCursorBlinkingStyle: standaloneEnums.TextEditorCursorBlinkingStyle,\r\n        TextEditorCursorStyle: standaloneEnums.TextEditorCursorStyle,\r\n        TrackedRangeStickiness: standaloneEnums.TrackedRangeStickiness,\r\n        WrappingIndent: standaloneEnums.WrappingIndent,\r\n        // classes\r\n        ConfigurationChangedEvent: ConfigurationChangedEvent,\r\n        BareFontInfo: BareFontInfo,\r\n        FontInfo: FontInfo,\r\n        TextModelResolvedOptions: TextModelResolvedOptions,\r\n        FindMatch: FindMatch,\r\n        // vars\r\n        EditorType: EditorType,\r\n        EditorOptions: EditorOptions\r\n    };\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n/*\r\n * This module only exports 'compile' which compiles a JSON language definition\r\n * into a typed and checked ILexer definition.\r\n */\r\nimport * as monarchCommon from './monarchCommon.js';\r\n/*\r\n * Type helpers\r\n *\r\n * Note: this is just for sanity checks on the JSON description which is\r\n * helpful for the programmer. No checks are done anymore once the lexer is\r\n * already 'compiled and checked'.\r\n *\r\n */\r\nfunction isArrayOf(elemType, obj) {\r\n    if (!obj) {\r\n        return false;\r\n    }\r\n    if (!(Array.isArray(obj))) {\r\n        return false;\r\n    }\r\n    for (var _i = 0, obj_1 = obj; _i < obj_1.length; _i++) {\r\n        var el = obj_1[_i];\r\n        if (!(elemType(el))) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction bool(prop, defValue) {\r\n    if (typeof prop === 'boolean') {\r\n        return prop;\r\n    }\r\n    return defValue;\r\n}\r\nfunction string(prop, defValue) {\r\n    if (typeof (prop) === 'string') {\r\n        return prop;\r\n    }\r\n    return defValue;\r\n}\r\nfunction arrayToHash(array) {\r\n    var result = {};\r\n    for (var _i = 0, array_1 = array; _i < array_1.length; _i++) {\r\n        var e = array_1[_i];\r\n        result[e] = true;\r\n    }\r\n    return result;\r\n}\r\nfunction createKeywordMatcher(arr, caseInsensitive) {\r\n    if (caseInsensitive === void 0) { caseInsensitive = false; }\r\n    if (caseInsensitive) {\r\n        arr = arr.map(function (x) { return x.toLowerCase(); });\r\n    }\r\n    var hash = arrayToHash(arr);\r\n    if (caseInsensitive) {\r\n        return function (word) {\r\n            return hash[word.toLowerCase()] !== undefined && hash.hasOwnProperty(word.toLowerCase());\r\n        };\r\n    }\r\n    else {\r\n        return function (word) {\r\n            return hash[word] !== undefined && hash.hasOwnProperty(word);\r\n        };\r\n    }\r\n}\r\n// Lexer helpers\r\n/**\r\n * Compiles a regular expression string, adding the 'i' flag if 'ignoreCase' is set.\r\n * Also replaces @\\w+ or sequences with the content of the specified attribute\r\n */\r\nfunction compileRegExp(lexer, str) {\r\n    var n = 0;\r\n    while (str.indexOf('@') >= 0 && n < 5) { // at most 5 expansions\r\n        n++;\r\n        str = str.replace(/@(\\w+)/g, function (s, attr) {\r\n            var sub = '';\r\n            if (typeof (lexer[attr]) === 'string') {\r\n                sub = lexer[attr];\r\n            }\r\n            else if (lexer[attr] && lexer[attr] instanceof RegExp) {\r\n                sub = lexer[attr].source;\r\n            }\r\n            else {\r\n                if (lexer[attr] === undefined) {\r\n                    throw monarchCommon.createError(lexer, 'language definition does not contain attribute \\'' + attr + '\\', used at: ' + str);\r\n                }\r\n                else {\r\n                    throw monarchCommon.createError(lexer, 'attribute reference \\'' + attr + '\\' must be a string, used at: ' + str);\r\n                }\r\n            }\r\n            return (monarchCommon.empty(sub) ? '' : '(?:' + sub + ')');\r\n        });\r\n    }\r\n    return new RegExp(str, (lexer.ignoreCase ? 'i' : ''));\r\n}\r\n/**\r\n * Compiles guard functions for case matches.\r\n * This compiles 'cases' attributes into efficient match functions.\r\n *\r\n */\r\nfunction selectScrutinee(id, matches, state, num) {\r\n    if (num < 0) {\r\n        return id;\r\n    }\r\n    if (num < matches.length) {\r\n        return matches[num];\r\n    }\r\n    if (num >= 100) {\r\n        num = num - 100;\r\n        var parts = state.split('.');\r\n        parts.unshift(state);\r\n        if (num < parts.length) {\r\n            return parts[num];\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction createGuard(lexer, ruleName, tkey, val) {\r\n    // get the scrutinee and pattern\r\n    var scrut = -1; // -1: $!, 0-99: $n, 100+n: $Sn\r\n    var oppat = tkey;\r\n    var matches = tkey.match(/^\\$(([sS]?)(\\d\\d?)|#)(.*)$/);\r\n    if (matches) {\r\n        if (matches[3]) { // if digits\r\n            scrut = parseInt(matches[3]);\r\n            if (matches[2]) {\r\n                scrut = scrut + 100; // if [sS] present\r\n            }\r\n        }\r\n        oppat = matches[4];\r\n    }\r\n    // get operator\r\n    var op = '~';\r\n    var pat = oppat;\r\n    if (!oppat || oppat.length === 0) {\r\n        op = '!=';\r\n        pat = '';\r\n    }\r\n    else if (/^\\w*$/.test(pat)) { // just a word\r\n        op = '==';\r\n    }\r\n    else {\r\n        matches = oppat.match(/^(@|!@|~|!~|==|!=)(.*)$/);\r\n        if (matches) {\r\n            op = matches[1];\r\n            pat = matches[2];\r\n        }\r\n    }\r\n    // set the tester function\r\n    var tester;\r\n    // special case a regexp that matches just words\r\n    if ((op === '~' || op === '!~') && /^(\\w|\\|)*$/.test(pat)) {\r\n        var inWords_1 = createKeywordMatcher(pat.split('|'), lexer.ignoreCase);\r\n        tester = function (s) { return (op === '~' ? inWords_1(s) : !inWords_1(s)); };\r\n    }\r\n    else if (op === '@' || op === '!@') {\r\n        var words = lexer[pat];\r\n        if (!words) {\r\n            throw monarchCommon.createError(lexer, 'the @ match target \\'' + pat + '\\' is not defined, in rule: ' + ruleName);\r\n        }\r\n        if (!(isArrayOf(function (elem) { return (typeof (elem) === 'string'); }, words))) {\r\n            throw monarchCommon.createError(lexer, 'the @ match target \\'' + pat + '\\' must be an array of strings, in rule: ' + ruleName);\r\n        }\r\n        var inWords_2 = createKeywordMatcher(words, lexer.ignoreCase);\r\n        tester = function (s) { return (op === '@' ? inWords_2(s) : !inWords_2(s)); };\r\n    }\r\n    else if (op === '~' || op === '!~') {\r\n        if (pat.indexOf('$') < 0) {\r\n            // precompile regular expression\r\n            var re_1 = compileRegExp(lexer, '^' + pat + '$');\r\n            tester = function (s) { return (op === '~' ? re_1.test(s) : !re_1.test(s)); };\r\n        }\r\n        else {\r\n            tester = function (s, id, matches, state) {\r\n                var re = compileRegExp(lexer, '^' + monarchCommon.substituteMatches(lexer, pat, id, matches, state) + '$');\r\n                return re.test(s);\r\n            };\r\n        }\r\n    }\r\n    else { // if (op==='==' || op==='!=') {\r\n        if (pat.indexOf('$') < 0) {\r\n            var patx_1 = monarchCommon.fixCase(lexer, pat);\r\n            tester = function (s) { return (op === '==' ? s === patx_1 : s !== patx_1); };\r\n        }\r\n        else {\r\n            var patx_2 = monarchCommon.fixCase(lexer, pat);\r\n            tester = function (s, id, matches, state, eos) {\r\n                var patexp = monarchCommon.substituteMatches(lexer, patx_2, id, matches, state);\r\n                return (op === '==' ? s === patexp : s !== patexp);\r\n            };\r\n        }\r\n    }\r\n    // return the branch object\r\n    if (scrut === -1) {\r\n        return {\r\n            name: tkey, value: val, test: function (id, matches, state, eos) {\r\n                return tester(id, id, matches, state, eos);\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {\r\n            name: tkey, value: val, test: function (id, matches, state, eos) {\r\n                var scrutinee = selectScrutinee(id, matches, state, scrut);\r\n                return tester(!scrutinee ? '' : scrutinee, id, matches, state, eos);\r\n            }\r\n        };\r\n    }\r\n}\r\n/**\r\n * Compiles an action: i.e. optimize regular expressions and case matches\r\n * and do many sanity checks.\r\n *\r\n * This is called only during compilation but if the lexer definition\r\n * contains user functions as actions (which is usually not allowed), then this\r\n * may be called during lexing. It is important therefore to compile common cases efficiently\r\n */\r\nfunction compileAction(lexer, ruleName, action) {\r\n    if (!action) {\r\n        return { token: '' };\r\n    }\r\n    else if (typeof (action) === 'string') {\r\n        return action; // { token: action };\r\n    }\r\n    else if (action.token || action.token === '') {\r\n        if (typeof (action.token) !== 'string') {\r\n            throw monarchCommon.createError(lexer, 'a \\'token\\' attribute must be of type string, in rule: ' + ruleName);\r\n        }\r\n        else {\r\n            // only copy specific typed fields (only happens once during compile Lexer)\r\n            var newAction = { token: action.token };\r\n            if (action.token.indexOf('$') >= 0) {\r\n                newAction.tokenSubst = true;\r\n            }\r\n            if (typeof (action.bracket) === 'string') {\r\n                if (action.bracket === '@open') {\r\n                    newAction.bracket = 1 /* Open */;\r\n                }\r\n                else if (action.bracket === '@close') {\r\n                    newAction.bracket = -1 /* Close */;\r\n                }\r\n                else {\r\n                    throw monarchCommon.createError(lexer, 'a \\'bracket\\' attribute must be either \\'@open\\' or \\'@close\\', in rule: ' + ruleName);\r\n                }\r\n            }\r\n            if (action.next) {\r\n                if (typeof (action.next) !== 'string') {\r\n                    throw monarchCommon.createError(lexer, 'the next state must be a string value in rule: ' + ruleName);\r\n                }\r\n                else {\r\n                    var next = action.next;\r\n                    if (!/^(@pop|@push|@popall)$/.test(next)) {\r\n                        if (next[0] === '@') {\r\n                            next = next.substr(1); // peel off starting @ sign\r\n                        }\r\n                        if (next.indexOf('$') < 0) { // no dollar substitution, we can check if the state exists\r\n                            if (!monarchCommon.stateExists(lexer, monarchCommon.substituteMatches(lexer, next, '', [], ''))) {\r\n                                throw monarchCommon.createError(lexer, 'the next state \\'' + action.next + '\\' is not defined in rule: ' + ruleName);\r\n                            }\r\n                        }\r\n                    }\r\n                    newAction.next = next;\r\n                }\r\n            }\r\n            if (typeof (action.goBack) === 'number') {\r\n                newAction.goBack = action.goBack;\r\n            }\r\n            if (typeof (action.switchTo) === 'string') {\r\n                newAction.switchTo = action.switchTo;\r\n            }\r\n            if (typeof (action.log) === 'string') {\r\n                newAction.log = action.log;\r\n            }\r\n            if (typeof (action.nextEmbedded) === 'string') {\r\n                newAction.nextEmbedded = action.nextEmbedded;\r\n                lexer.usesEmbedded = true;\r\n            }\r\n            return newAction;\r\n        }\r\n    }\r\n    else if (Array.isArray(action)) {\r\n        var results = [];\r\n        for (var i = 0, len = action.length; i < len; i++) {\r\n            results[i] = compileAction(lexer, ruleName, action[i]);\r\n        }\r\n        return { group: results };\r\n    }\r\n    else if (action.cases) {\r\n        // build an array of test cases\r\n        var cases_1 = [];\r\n        // for each case, push a test function and result value\r\n        for (var tkey in action.cases) {\r\n            if (action.cases.hasOwnProperty(tkey)) {\r\n                var val = compileAction(lexer, ruleName, action.cases[tkey]);\r\n                // what kind of case\r\n                if (tkey === '@default' || tkey === '@' || tkey === '') {\r\n                    cases_1.push({ test: undefined, value: val, name: tkey });\r\n                }\r\n                else if (tkey === '@eos') {\r\n                    cases_1.push({ test: function (id, matches, state, eos) { return eos; }, value: val, name: tkey });\r\n                }\r\n                else {\r\n                    cases_1.push(createGuard(lexer, ruleName, tkey, val)); // call separate function to avoid local variable capture\r\n                }\r\n            }\r\n        }\r\n        // create a matching function\r\n        var def_1 = lexer.defaultToken;\r\n        return {\r\n            test: function (id, matches, state, eos) {\r\n                for (var _i = 0, cases_2 = cases_1; _i < cases_2.length; _i++) {\r\n                    var _case = cases_2[_i];\r\n                    var didmatch = (!_case.test || _case.test(id, matches, state, eos));\r\n                    if (didmatch) {\r\n                        return _case.value;\r\n                    }\r\n                }\r\n                return def_1;\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        throw monarchCommon.createError(lexer, 'an action must be a string, an object with a \\'token\\' or \\'cases\\' attribute, or an array of actions; in rule: ' + ruleName);\r\n    }\r\n}\r\n/**\r\n * Helper class for creating matching rules\r\n */\r\nvar Rule = /** @class */ (function () {\r\n    function Rule(name) {\r\n        this.regex = new RegExp('');\r\n        this.action = { token: '' };\r\n        this.matchOnlyAtLineStart = false;\r\n        this.name = '';\r\n        this.name = name;\r\n    }\r\n    Rule.prototype.setRegex = function (lexer, re) {\r\n        var sregex;\r\n        if (typeof (re) === 'string') {\r\n            sregex = re;\r\n        }\r\n        else if (re instanceof RegExp) {\r\n            sregex = re.source;\r\n        }\r\n        else {\r\n            throw monarchCommon.createError(lexer, 'rules must start with a match string or regular expression: ' + this.name);\r\n        }\r\n        this.matchOnlyAtLineStart = (sregex.length > 0 && sregex[0] === '^');\r\n        this.name = this.name + ': ' + sregex;\r\n        this.regex = compileRegExp(lexer, '^(?:' + (this.matchOnlyAtLineStart ? sregex.substr(1) : sregex) + ')');\r\n    };\r\n    Rule.prototype.setAction = function (lexer, act) {\r\n        this.action = compileAction(lexer, this.name, act);\r\n    };\r\n    return Rule;\r\n}());\r\n/**\r\n * Compiles a json description function into json where all regular expressions,\r\n * case matches etc, are compiled and all include rules are expanded.\r\n * We also compile the bracket definitions, supply defaults, and do many sanity checks.\r\n * If the 'jsonStrict' parameter is 'false', we allow at certain locations\r\n * regular expression objects and functions that get called during lexing.\r\n * (Currently we have no samples that need this so perhaps we should always have\r\n * jsonStrict to true).\r\n */\r\nexport function compile(languageId, json) {\r\n    if (!json || typeof (json) !== 'object') {\r\n        throw new Error('Monarch: expecting a language definition object');\r\n    }\r\n    // Create our lexer\r\n    var lexer = {};\r\n    lexer.languageId = languageId;\r\n    lexer.noThrow = false; // raise exceptions during compilation\r\n    lexer.maxStack = 100;\r\n    // Set standard fields: be defensive about types\r\n    lexer.start = (typeof json.start === 'string' ? json.start : null);\r\n    lexer.ignoreCase = bool(json.ignoreCase, false);\r\n    lexer.tokenPostfix = string(json.tokenPostfix, '.' + lexer.languageId);\r\n    lexer.defaultToken = string(json.defaultToken, 'source');\r\n    lexer.usesEmbedded = false; // becomes true if we find a nextEmbedded action\r\n    // For calling compileAction later on\r\n    var lexerMin = json;\r\n    lexerMin.languageId = languageId;\r\n    lexerMin.ignoreCase = lexer.ignoreCase;\r\n    lexerMin.noThrow = lexer.noThrow;\r\n    lexerMin.usesEmbedded = lexer.usesEmbedded;\r\n    lexerMin.stateNames = json.tokenizer;\r\n    lexerMin.defaultToken = lexer.defaultToken;\r\n    // Compile an array of rules into newrules where RegExp objects are created.\r\n    function addRules(state, newrules, rules) {\r\n        for (var _i = 0, rules_1 = rules; _i < rules_1.length; _i++) {\r\n            var rule = rules_1[_i];\r\n            var include = rule.include;\r\n            if (include) {\r\n                if (typeof (include) !== 'string') {\r\n                    throw monarchCommon.createError(lexer, 'an \\'include\\' attribute must be a string at: ' + state);\r\n                }\r\n                if (include[0] === '@') {\r\n                    include = include.substr(1); // peel off starting @\r\n                }\r\n                if (!json.tokenizer[include]) {\r\n                    throw monarchCommon.createError(lexer, 'include target \\'' + include + '\\' is not defined at: ' + state);\r\n                }\r\n                addRules(state + '.' + include, newrules, json.tokenizer[include]);\r\n            }\r\n            else {\r\n                var newrule = new Rule(state);\r\n                // Set up new rule attributes\r\n                if (Array.isArray(rule) && rule.length >= 1 && rule.length <= 3) {\r\n                    newrule.setRegex(lexerMin, rule[0]);\r\n                    if (rule.length >= 3) {\r\n                        if (typeof (rule[1]) === 'string') {\r\n                            newrule.setAction(lexerMin, { token: rule[1], next: rule[2] });\r\n                        }\r\n                        else if (typeof (rule[1]) === 'object') {\r\n                            var rule1 = rule[1];\r\n                            rule1.next = rule[2];\r\n                            newrule.setAction(lexerMin, rule1);\r\n                        }\r\n                        else {\r\n                            throw monarchCommon.createError(lexer, 'a next state as the last element of a rule can only be given if the action is either an object or a string, at: ' + state);\r\n                        }\r\n                    }\r\n                    else {\r\n                        newrule.setAction(lexerMin, rule[1]);\r\n                    }\r\n                }\r\n                else {\r\n                    if (!rule.regex) {\r\n                        throw monarchCommon.createError(lexer, 'a rule must either be an array, or an object with a \\'regex\\' or \\'include\\' field at: ' + state);\r\n                    }\r\n                    if (rule.name) {\r\n                        if (typeof rule.name === 'string') {\r\n                            newrule.name = rule.name;\r\n                        }\r\n                    }\r\n                    if (rule.matchOnlyAtStart) {\r\n                        newrule.matchOnlyAtLineStart = bool(rule.matchOnlyAtLineStart, false);\r\n                    }\r\n                    newrule.setRegex(lexerMin, rule.regex);\r\n                    newrule.setAction(lexerMin, rule.action);\r\n                }\r\n                newrules.push(newrule);\r\n            }\r\n        }\r\n    }\r\n    // compile the tokenizer rules\r\n    if (!json.tokenizer || typeof (json.tokenizer) !== 'object') {\r\n        throw monarchCommon.createError(lexer, 'a language definition must define the \\'tokenizer\\' attribute as an object');\r\n    }\r\n    lexer.tokenizer = [];\r\n    for (var key in json.tokenizer) {\r\n        if (json.tokenizer.hasOwnProperty(key)) {\r\n            if (!lexer.start) {\r\n                lexer.start = key;\r\n            }\r\n            var rules = json.tokenizer[key];\r\n            lexer.tokenizer[key] = new Array();\r\n            addRules('tokenizer.' + key, lexer.tokenizer[key], rules);\r\n        }\r\n    }\r\n    lexer.usesEmbedded = lexerMin.usesEmbedded; // can be set during compileAction\r\n    // Set simple brackets\r\n    if (json.brackets) {\r\n        if (!(Array.isArray(json.brackets))) {\r\n            throw monarchCommon.createError(lexer, 'the \\'brackets\\' attribute must be defined as an array');\r\n        }\r\n    }\r\n    else {\r\n        json.brackets = [\r\n            { open: '{', close: '}', token: 'delimiter.curly' },\r\n            { open: '[', close: ']', token: 'delimiter.square' },\r\n            { open: '(', close: ')', token: 'delimiter.parenthesis' },\r\n            { open: '<', close: '>', token: 'delimiter.angle' }\r\n        ];\r\n    }\r\n    var brackets = [];\r\n    for (var _i = 0, _a = json.brackets; _i < _a.length; _i++) {\r\n        var el = _a[_i];\r\n        var desc = el;\r\n        if (desc && Array.isArray(desc) && desc.length === 3) {\r\n            desc = { token: desc[2], open: desc[0], close: desc[1] };\r\n        }\r\n        if (desc.open === desc.close) {\r\n            throw monarchCommon.createError(lexer, 'open and close brackets in a \\'brackets\\' attribute must be different: ' + desc.open +\r\n                '\\n hint: use the \\'bracket\\' attribute if matching on equal brackets is required.');\r\n        }\r\n        if (typeof desc.open === 'string' && typeof desc.token === 'string' && typeof desc.close === 'string') {\r\n            brackets.push({\r\n                token: desc.token + lexer.tokenPostfix,\r\n                open: monarchCommon.fixCase(lexer, desc.open),\r\n                close: monarchCommon.fixCase(lexer, desc.close)\r\n            });\r\n        }\r\n        else {\r\n            throw monarchCommon.createError(lexer, 'every element in the \\'brackets\\' array must be a \\'{open,close,token}\\' object or array');\r\n        }\r\n    }\r\n    lexer.brackets = brackets;\r\n    // Disable throw so the syntax highlighter goes, no matter what\r\n    lexer.noThrow = true;\r\n    return lexer;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Token, TokenizationResult, TokenizationResult2 } from '../../common/core/token.js';\r\nimport * as modes from '../../common/modes.js';\r\nimport { LanguageConfigurationRegistry } from '../../common/modes/languageConfigurationRegistry.js';\r\nimport { ModesRegistry } from '../../common/modes/modesRegistry.js';\r\nimport * as standaloneEnums from '../../common/standalone/standaloneEnums.js';\r\nimport { StaticServices } from './standaloneServices.js';\r\nimport { compile } from '../common/monarch/monarchCompile.js';\r\nimport { createTokenizationSupport } from '../common/monarch/monarchLexer.js';\r\n/**\r\n * Register information about a new language.\r\n */\r\nexport function register(language) {\r\n    ModesRegistry.registerLanguage(language);\r\n}\r\n/**\r\n * Get the information of all the registered languages.\r\n */\r\nexport function getLanguages() {\r\n    var result = [];\r\n    result = result.concat(ModesRegistry.getLanguages());\r\n    return result;\r\n}\r\nexport function getEncodedLanguageId(languageId) {\r\n    var lid = StaticServices.modeService.get().getLanguageIdentifier(languageId);\r\n    return lid ? lid.id : 0;\r\n}\r\n/**\r\n * An event emitted when a language is first time needed (e.g. a model has it set).\r\n * @event\r\n */\r\nexport function onLanguage(languageId, callback) {\r\n    var disposable = StaticServices.modeService.get().onDidCreateMode(function (mode) {\r\n        if (mode.getId() === languageId) {\r\n            // stop listening\r\n            disposable.dispose();\r\n            // invoke actual listener\r\n            callback();\r\n        }\r\n    });\r\n    return disposable;\r\n}\r\n/**\r\n * Set the editing configuration for a language.\r\n */\r\nexport function setLanguageConfiguration(languageId, configuration) {\r\n    var languageIdentifier = StaticServices.modeService.get().getLanguageIdentifier(languageId);\r\n    if (!languageIdentifier) {\r\n        throw new Error(\"Cannot set configuration for unknown language \" + languageId);\r\n    }\r\n    return LanguageConfigurationRegistry.register(languageIdentifier, configuration);\r\n}\r\n/**\r\n * @internal\r\n */\r\nvar EncodedTokenizationSupport2Adapter = /** @class */ (function () {\r\n    function EncodedTokenizationSupport2Adapter(actual) {\r\n        this._actual = actual;\r\n    }\r\n    EncodedTokenizationSupport2Adapter.prototype.getInitialState = function () {\r\n        return this._actual.getInitialState();\r\n    };\r\n    EncodedTokenizationSupport2Adapter.prototype.tokenize = function (line, state, offsetDelta) {\r\n        throw new Error('Not supported!');\r\n    };\r\n    EncodedTokenizationSupport2Adapter.prototype.tokenize2 = function (line, state) {\r\n        var result = this._actual.tokenizeEncoded(line, state);\r\n        return new TokenizationResult2(result.tokens, result.endState);\r\n    };\r\n    return EncodedTokenizationSupport2Adapter;\r\n}());\r\nexport { EncodedTokenizationSupport2Adapter };\r\n/**\r\n * @internal\r\n */\r\nvar TokenizationSupport2Adapter = /** @class */ (function () {\r\n    function TokenizationSupport2Adapter(standaloneThemeService, languageIdentifier, actual) {\r\n        this._standaloneThemeService = standaloneThemeService;\r\n        this._languageIdentifier = languageIdentifier;\r\n        this._actual = actual;\r\n    }\r\n    TokenizationSupport2Adapter.prototype.getInitialState = function () {\r\n        return this._actual.getInitialState();\r\n    };\r\n    TokenizationSupport2Adapter.prototype._toClassicTokens = function (tokens, language, offsetDelta) {\r\n        var result = [];\r\n        var previousStartIndex = 0;\r\n        for (var i = 0, len = tokens.length; i < len; i++) {\r\n            var t = tokens[i];\r\n            var startIndex = t.startIndex;\r\n            // Prevent issues stemming from a buggy external tokenizer.\r\n            if (i === 0) {\r\n                // Force first token to start at first index!\r\n                startIndex = 0;\r\n            }\r\n            else if (startIndex < previousStartIndex) {\r\n                // Force tokens to be after one another!\r\n                startIndex = previousStartIndex;\r\n            }\r\n            result[i] = new Token(startIndex + offsetDelta, t.scopes, language);\r\n            previousStartIndex = startIndex;\r\n        }\r\n        return result;\r\n    };\r\n    TokenizationSupport2Adapter.prototype.tokenize = function (line, state, offsetDelta) {\r\n        var actualResult = this._actual.tokenize(line, state);\r\n        var tokens = this._toClassicTokens(actualResult.tokens, this._languageIdentifier.language, offsetDelta);\r\n        var endState;\r\n        // try to save an object if possible\r\n        if (actualResult.endState.equals(state)) {\r\n            endState = state;\r\n        }\r\n        else {\r\n            endState = actualResult.endState;\r\n        }\r\n        return new TokenizationResult(tokens, endState);\r\n    };\r\n    TokenizationSupport2Adapter.prototype._toBinaryTokens = function (tokens, offsetDelta) {\r\n        var languageId = this._languageIdentifier.id;\r\n        var tokenTheme = this._standaloneThemeService.getTheme().tokenTheme;\r\n        var result = [], resultLen = 0;\r\n        var previousStartIndex = 0;\r\n        for (var i = 0, len = tokens.length; i < len; i++) {\r\n            var t = tokens[i];\r\n            var metadata = tokenTheme.match(languageId, t.scopes);\r\n            if (resultLen > 0 && result[resultLen - 1] === metadata) {\r\n                // same metadata\r\n                continue;\r\n            }\r\n            var startIndex = t.startIndex;\r\n            // Prevent issues stemming from a buggy external tokenizer.\r\n            if (i === 0) {\r\n                // Force first token to start at first index!\r\n                startIndex = 0;\r\n            }\r\n            else if (startIndex < previousStartIndex) {\r\n                // Force tokens to be after one another!\r\n                startIndex = previousStartIndex;\r\n            }\r\n            result[resultLen++] = startIndex + offsetDelta;\r\n            result[resultLen++] = metadata;\r\n            previousStartIndex = startIndex;\r\n        }\r\n        var actualResult = new Uint32Array(resultLen);\r\n        for (var i = 0; i < resultLen; i++) {\r\n            actualResult[i] = result[i];\r\n        }\r\n        return actualResult;\r\n    };\r\n    TokenizationSupport2Adapter.prototype.tokenize2 = function (line, state, offsetDelta) {\r\n        var actualResult = this._actual.tokenize(line, state);\r\n        var tokens = this._toBinaryTokens(actualResult.tokens, offsetDelta);\r\n        var endState;\r\n        // try to save an object if possible\r\n        if (actualResult.endState.equals(state)) {\r\n            endState = state;\r\n        }\r\n        else {\r\n            endState = actualResult.endState;\r\n        }\r\n        return new TokenizationResult2(tokens, endState);\r\n    };\r\n    return TokenizationSupport2Adapter;\r\n}());\r\nexport { TokenizationSupport2Adapter };\r\nfunction isEncodedTokensProvider(provider) {\r\n    return 'tokenizeEncoded' in provider;\r\n}\r\nfunction isThenable(obj) {\r\n    return obj && typeof obj.then === 'function';\r\n}\r\n/**\r\n * Set the tokens provider for a language (manual implementation).\r\n */\r\nexport function setTokensProvider(languageId, provider) {\r\n    var languageIdentifier = StaticServices.modeService.get().getLanguageIdentifier(languageId);\r\n    if (!languageIdentifier) {\r\n        throw new Error(\"Cannot set tokens provider for unknown language \" + languageId);\r\n    }\r\n    var create = function (provider) {\r\n        if (isEncodedTokensProvider(provider)) {\r\n            return new EncodedTokenizationSupport2Adapter(provider);\r\n        }\r\n        else {\r\n            return new TokenizationSupport2Adapter(StaticServices.standaloneThemeService.get(), languageIdentifier, provider);\r\n        }\r\n    };\r\n    if (isThenable(provider)) {\r\n        return modes.TokenizationRegistry.registerPromise(languageId, provider.then(function (provider) { return create(provider); }));\r\n    }\r\n    return modes.TokenizationRegistry.register(languageId, create(provider));\r\n}\r\n/**\r\n * Set the tokens provider for a language (monarch implementation).\r\n */\r\nexport function setMonarchTokensProvider(languageId, languageDef) {\r\n    var create = function (languageDef) {\r\n        return createTokenizationSupport(StaticServices.modeService.get(), StaticServices.standaloneThemeService.get(), languageId, compile(languageId, languageDef));\r\n    };\r\n    if (isThenable(languageDef)) {\r\n        return modes.TokenizationRegistry.registerPromise(languageId, languageDef.then(function (languageDef) { return create(languageDef); }));\r\n    }\r\n    return modes.TokenizationRegistry.register(languageId, create(languageDef));\r\n}\r\n/**\r\n * Register a reference provider (used by e.g. reference search).\r\n */\r\nexport function registerReferenceProvider(languageId, provider) {\r\n    return modes.ReferenceProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a rename provider (used by e.g. rename symbol).\r\n */\r\nexport function registerRenameProvider(languageId, provider) {\r\n    return modes.RenameProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a signature help provider (used by e.g. parameter hints).\r\n */\r\nexport function registerSignatureHelpProvider(languageId, provider) {\r\n    return modes.SignatureHelpProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a hover provider (used by e.g. editor hover).\r\n */\r\nexport function registerHoverProvider(languageId, provider) {\r\n    return modes.HoverProviderRegistry.register(languageId, {\r\n        provideHover: function (model, position, token) {\r\n            var word = model.getWordAtPosition(position);\r\n            return Promise.resolve(provider.provideHover(model, position, token)).then(function (value) {\r\n                if (!value) {\r\n                    return undefined;\r\n                }\r\n                if (!value.range && word) {\r\n                    value.range = new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\r\n                }\r\n                if (!value.range) {\r\n                    value.range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\r\n                }\r\n                return value;\r\n            });\r\n        }\r\n    });\r\n}\r\n/**\r\n * Register a document symbol provider (used by e.g. outline).\r\n */\r\nexport function registerDocumentSymbolProvider(languageId, provider) {\r\n    return modes.DocumentSymbolProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a document highlight provider (used by e.g. highlight occurrences).\r\n */\r\nexport function registerDocumentHighlightProvider(languageId, provider) {\r\n    return modes.DocumentHighlightProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a definition provider (used by e.g. go to definition).\r\n */\r\nexport function registerDefinitionProvider(languageId, provider) {\r\n    return modes.DefinitionProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a implementation provider (used by e.g. go to implementation).\r\n */\r\nexport function registerImplementationProvider(languageId, provider) {\r\n    return modes.ImplementationProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a type definition provider (used by e.g. go to type definition).\r\n */\r\nexport function registerTypeDefinitionProvider(languageId, provider) {\r\n    return modes.TypeDefinitionProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a code lens provider (used by e.g. inline code lenses).\r\n */\r\nexport function registerCodeLensProvider(languageId, provider) {\r\n    return modes.CodeLensProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a code action provider (used by e.g. quick fix).\r\n */\r\nexport function registerCodeActionProvider(languageId, provider) {\r\n    return modes.CodeActionProviderRegistry.register(languageId, {\r\n        provideCodeActions: function (model, range, context, token) {\r\n            var markers = StaticServices.markerService.get().read({ resource: model.uri }).filter(function (m) {\r\n                return Range.areIntersectingOrTouching(m, range);\r\n            });\r\n            return provider.provideCodeActions(model, range, { markers: markers, only: context.only }, token);\r\n        }\r\n    });\r\n}\r\n/**\r\n * Register a formatter that can handle only entire models.\r\n */\r\nexport function registerDocumentFormattingEditProvider(languageId, provider) {\r\n    return modes.DocumentFormattingEditProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a formatter that can handle a range inside a model.\r\n */\r\nexport function registerDocumentRangeFormattingEditProvider(languageId, provider) {\r\n    return modes.DocumentRangeFormattingEditProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a formatter than can do formatting as the user types.\r\n */\r\nexport function registerOnTypeFormattingEditProvider(languageId, provider) {\r\n    return modes.OnTypeFormattingEditProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a link provider that can find links in text.\r\n */\r\nexport function registerLinkProvider(languageId, provider) {\r\n    return modes.LinkProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a completion item provider (use by e.g. suggestions).\r\n */\r\nexport function registerCompletionItemProvider(languageId, provider) {\r\n    return modes.CompletionProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a document color provider (used by Color Picker, Color Decorator).\r\n */\r\nexport function registerColorProvider(languageId, provider) {\r\n    return modes.ColorProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a folding range provider\r\n */\r\nexport function registerFoldingRangeProvider(languageId, provider) {\r\n    return modes.FoldingRangeProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a declaration provider\r\n */\r\nexport function registerDeclarationProvider(languageId, provider) {\r\n    return modes.DeclarationProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a selection range provider\r\n */\r\nexport function registerSelectionRangeProvider(languageId, provider) {\r\n    return modes.SelectionRangeRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a document semantic tokens provider\r\n */\r\nexport function registerDocumentSemanticTokensProvider(languageId, provider) {\r\n    return modes.DocumentSemanticTokensProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a document range semantic tokens provider\r\n */\r\nexport function registerDocumentRangeSemanticTokensProvider(languageId, provider) {\r\n    return modes.DocumentRangeSemanticTokensProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function createMonacoLanguagesAPI() {\r\n    return {\r\n        register: register,\r\n        getLanguages: getLanguages,\r\n        onLanguage: onLanguage,\r\n        getEncodedLanguageId: getEncodedLanguageId,\r\n        // provider methods\r\n        setLanguageConfiguration: setLanguageConfiguration,\r\n        setTokensProvider: setTokensProvider,\r\n        setMonarchTokensProvider: setMonarchTokensProvider,\r\n        registerReferenceProvider: registerReferenceProvider,\r\n        registerRenameProvider: registerRenameProvider,\r\n        registerCompletionItemProvider: registerCompletionItemProvider,\r\n        registerSignatureHelpProvider: registerSignatureHelpProvider,\r\n        registerHoverProvider: registerHoverProvider,\r\n        registerDocumentSymbolProvider: registerDocumentSymbolProvider,\r\n        registerDocumentHighlightProvider: registerDocumentHighlightProvider,\r\n        registerDefinitionProvider: registerDefinitionProvider,\r\n        registerImplementationProvider: registerImplementationProvider,\r\n        registerTypeDefinitionProvider: registerTypeDefinitionProvider,\r\n        registerCodeLensProvider: registerCodeLensProvider,\r\n        registerCodeActionProvider: registerCodeActionProvider,\r\n        registerDocumentFormattingEditProvider: registerDocumentFormattingEditProvider,\r\n        registerDocumentRangeFormattingEditProvider: registerDocumentRangeFormattingEditProvider,\r\n        registerOnTypeFormattingEditProvider: registerOnTypeFormattingEditProvider,\r\n        registerLinkProvider: registerLinkProvider,\r\n        registerColorProvider: registerColorProvider,\r\n        registerFoldingRangeProvider: registerFoldingRangeProvider,\r\n        registerDeclarationProvider: registerDeclarationProvider,\r\n        registerSelectionRangeProvider: registerSelectionRangeProvider,\r\n        registerDocumentSemanticTokensProvider: registerDocumentSemanticTokensProvider,\r\n        registerDocumentRangeSemanticTokensProvider: registerDocumentRangeSemanticTokensProvider,\r\n        // enums\r\n        DocumentHighlightKind: standaloneEnums.DocumentHighlightKind,\r\n        CompletionItemKind: standaloneEnums.CompletionItemKind,\r\n        CompletionItemTag: standaloneEnums.CompletionItemTag,\r\n        CompletionItemInsertTextRule: standaloneEnums.CompletionItemInsertTextRule,\r\n        SymbolKind: standaloneEnums.SymbolKind,\r\n        SymbolTag: standaloneEnums.SymbolTag,\r\n        IndentAction: standaloneEnums.IndentAction,\r\n        CompletionTriggerKind: standaloneEnums.CompletionTriggerKind,\r\n        SignatureHelpTriggerKind: standaloneEnums.SignatureHelpTriggerKind,\r\n        // classes\r\n        FoldingRangeKind: modes.FoldingRangeKind,\r\n    };\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { EditorOptions } from './common/config/editorOptions.js';\r\nimport { createMonacoBaseAPI } from './common/standalone/standaloneBase.js';\r\nimport { createMonacoEditorAPI } from './standalone/browser/standaloneEditor.js';\r\nimport { createMonacoLanguagesAPI } from './standalone/browser/standaloneLanguages.js';\r\nvar global = self;\r\n// Set defaults for standalone editor\r\nEditorOptions.wrappingIndent.defaultValue = 0 /* None */;\r\nEditorOptions.glyphMargin.defaultValue = false;\r\nEditorOptions.autoIndent.defaultValue = 3 /* Advanced */;\r\nEditorOptions.overviewRulerLanes.defaultValue = 2;\r\nvar api = createMonacoBaseAPI();\r\napi.editor = createMonacoEditorAPI();\r\napi.languages = createMonacoLanguagesAPI();\r\nexport var CancellationTokenSource = api.CancellationTokenSource;\r\nexport var Emitter = api.Emitter;\r\nexport var KeyCode = api.KeyCode;\r\nexport var KeyMod = api.KeyMod;\r\nexport var Position = api.Position;\r\nexport var Range = api.Range;\r\nexport var Selection = api.Selection;\r\nexport var SelectionDirection = api.SelectionDirection;\r\nexport var MarkerSeverity = api.MarkerSeverity;\r\nexport var MarkerTag = api.MarkerTag;\r\nexport var Uri = api.Uri;\r\nexport var Token = api.Token;\r\nexport var editor = api.editor;\r\nexport var languages = api.languages;\r\nglobal.monaco = api;\r\nif (typeof global.require !== 'undefined' && typeof global.require.config === 'function') {\r\n    global.require.config({\r\n        ignoreDuplicateModules: [\r\n            'vscode-languageserver-types',\r\n            'vscode-languageserver-types/main',\r\n            'vscode-nls',\r\n            'vscode-nls/vscode-nls',\r\n            'jsonc-parser',\r\n            'jsonc-parser/main',\r\n            'vscode-uri',\r\n            'vscode-uri/index',\r\n            'vs/basic-languages/typescript/typescript'\r\n        ]\r\n    });\r\n}\r\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _editor[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"MonacoDiffEditor\", {\n  enumerable: true,\n  get: function get() {\n    return _diff[\"default\"];\n  }\n});\n\nvar _editor = _interopRequireDefault(require(\"./editor\"));\n\nvar _diff = _interopRequireDefault(require(\"./diff\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }"],"sourceRoot":""}